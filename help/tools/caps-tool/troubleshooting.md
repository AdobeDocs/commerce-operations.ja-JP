---
title: '[!DNL Cloud Automation Patching Service (CAPS)] トラブルシューティングガイド'
description: ' [!DNL Cloud Automation Patching Service (CAPS)] の一般的な問題とエラーメッセージのトラブルシューティング'
hide: true
hidefromtoc: true
source-git-commit: 84a20012a81278cc95587ec14281b05330261687
workflow-type: tm+mt
source-wordcount: '946'
ht-degree: 0%

---

# [!DNL Cloud Automation Patching Service (CAPS)] トラブルシューティングガイド

パッチ操作に [!DNL CAPS] を使用すると、正常なパッチ適用やリバージョンを妨げる可能性のあるエラーメッセージや問題が発生する場合があります。 このガイドでは、最も一般的な問題の解決策を提供します。

## トラブルシューティングの迅速な手順

### パッチ操作が失敗した場合

* 操作のステータスを確認して、失敗したステージを理解します
* 特定の失敗理由に関するエラーメッセージの確認
* 技術的な詳細についてはエラーログを確認してください
* このガイドに記載されているソリューションに従ってください

### パッチ操作期間

ほとんどの環境では、次のタイムラインでパッチ操作の所要時間を示しますが、環境のサイズと複雑さによっては、さらに時間がかかる場合があります。

* **前処理：** 2～5 分
* **パッチ適用：** 5～15 分
* **後処理：** 10 ～ 40 分
* **合計：** 15 ～ 60 分

### 進行中のパッチをキャンセル

>[!WARNING]
>
>Patch 操作が開始されたら、完了できるようにする必要があります。 システムには、操作が失敗した場合でも実行されるクリーンアップ手順が含まれています。 プロセスを中断すると、環境が不整合な状態になる場合があります。

## 一般的な成功メッセージ

* **「ジョブが正常に完了しました」** - パッチは問題なく正常に適用または元に戻されました。

* **&quot;パッチが適用されました&quot;** – 既に適用されているパッチを適用しようとしています。 お使いの環境にパッチが既に存在することが検出されました。 アクションは必要ありません。

* **&quot;パッチが元に戻されました&quot;** – 既に元に戻したパッチを元に戻そうとしています。 パッチが現在適用されていないことをシステムが検出しました。 アクションは必要ありません。

## 一般的なエラーメッセージと解決策

### パッチアプリケーションエラー

#### 「[!DNL CAPS] がコードベースまたはパッチファイルにこれらの問題を検出したので、パッチを適用できません」

**発生した場合：** 事前確認中

**原因：** パッチが現在のコードベースと競合しているか、パッチ自体に問題があります

**ソリューション：**

* 提供された詳細なエラーログを確認して、コードベースまたはパッチの問題かどうかを特定します
* コード内で競合するカスタマイズのチェック
* パッチがAdobe Commerceのバージョンと互換性があることを確認します。
* 競合を手動で解決するか、サポートにお問い合わせください

#### 「このパッチは [!DNL CAPS] によって管理されていませんでした。 「元に戻せません」

**発生した場合：** 復元操作中

**原因：**&#x200B;[!DNL CAPS] で適用されていないパッチを元に戻そうとしています

**解決策：** パッチを最初に適用したときと同じ方法を使用するか、サポートに手動で問い合わせてください

### 環境および検証エラー

#### &quot;環境が親と同期されていません&quot;

**発生した場合：** 検証中

**原因：** 統合環境が親環境と異なります

**ソリューション：**

* 環境を親ブランチと同期します
* パッチ操作を再試行
* 同期の問題が解決しない場合は、サポートにお問い合わせください

#### 「実稼働環境に対する保護策が満たされていない」

**発生した場合：** 実稼動環境の事前チェック中

**原因：** 製造環境が安全要件を満たしていません

**ソリューション：**

* 実稼動ストアのメンテナンスモードの有効化
* 実稼動環境での cron ジョブの無効化
* 再試行する前に両方の条件が満たされていることを確認してください

>[!IMPORTANT]
>
> [!DNL CAPS] では、メンテナンスモードを自動的に有効にしたり、cron ジョブを無効にしたりしません。これらの操作は、外部で行う必要があります

#### 「パッチが適用されましたが、ヘルスチェックに失敗しました。 「を元に戻すことを検討してください」

**発生した場合：** 検証中のパッチ適用後

**原因：** 修正プログラムは正常に適用されましたが、正常性チェックに失敗しました

**ソリューション：**

* 特定のエラーについてのアプリケーションログの確認
* 重要な機能の手動テスト
* 問題が解決しない場合は、パッチの復帰を検討してください
* サポートが必要な場合は、サポートにお問い合わせください

### 認証エラーとアクセスエラー

#### 「Adobe Commerce リポジトリの認証に失敗しました」

**発生した場合：** あらゆる段階で

**原因：** Adobe Commerce リポジトリ資格情報が無効であるか、期限切れです

**ソリューション：**

この問題を解決するには、次の 2 つのオプションをお勧めします。

**オプション 1：環境レベル変数 `env:COMPOSER_AUTH` 修正（推奨）**

* `env:COMPOSER_AUTH` に対して正しい資格情報が設定されていることを確認します。
* クラウドプロジェクト UI の左上にある歯車アイコンをクリックしてグローバル設定にアクセスし、「**変数**」タブを選択します。
* 必ず「_ビルド時に使用可能_」を選択し、「_実行時に使用可能_ の選択を解除します。

オプション 1 で問題が解決しない場合は、オプション 2 に進みます。

**オプション 2：ファイルを手動で作成 `auth.json` てデプロイする**

* サーバーに SSH で接続します。
* 次を使用して、現在の `env:COMPOSER_AUTH` 変数のコンテンツを取得します。\
  `echo $COMPOSER_AUTH`
* 上記の手順からすべてのコンテンツをコピーします（JSON 形式）。
* これらの内容を含んだ `auth.json` という新しいファイルを作成します。
* 新しく作成したこの `auth.json` ファイルをリポジトリのルートディレクトリにコミットします。
* 新しいデプロイメントをトリガーします。

#### 「環境へのアクセスに必要な権限がありません」

**発生した場合：** 環境の作成またはアクセス中

**原因：** ユーザーアカウントに必要な権限がありません

**ソリューション：**

* ユーザーの役割と権限の確認
* システム管理者にお問い合わせください
* 環境管理権限があることを確認します
* デプロイメント権限があることを確認します

### リソースとクォータのエラー

#### 「環境クォータ超過」

**発生した場合：** 環境の作成時

**原因：** 環境の上限に達しました

**ソリューション：**

* 未使用の環境を非アクティブ化
* 古いブランチとデプロイメントのクリーンアップ
* サポートに連絡して、割り当て量の増加をリクエストします
* プランのアップグレードを検討してください

#### 「操作に必要なリソースが不足しています」

**発生した場合：** あらゆる段階で

**原因：** お使いの環境には、十分なCPU、メモリ、または記憶域がありません

**ソリューション：**

* 環境のリソース使用状況の確認
* ファイルをクリーンアップしてリソースを解放する
* リソースが利用可能になるまで待つ
* リソースの問題が解決しない場合は、サポートにお問い合わせください

## ヘルプ

**サポートに連絡するタイミング：**

次の場合は、Adobe Commerce Cloud サポートにお問い合わせください。

* エラーメッセージが明確でないか、十分な詳細がありません
* パッチ操作が一貫して失敗する
* 手動による競合解決に関する支援が必要
* ヘルスチェックは失敗するが、原因は不明
* 環境の同期に関する問題についてサポートが必要

**提供する情報：**

サポートに問い合わせる際は、次の情報を提供します。

* **プロジェクト ID** - Adobe Commerce Cloud プロジェクト識別子
* **環境 ID** – 問題が発生した特定の環境
* **操作 ID** - [!DNL CAPS] 操作の識別子
* **エラーの詳細** – 完全なエラーメッセージとログ
* **再現手順** - エラーが発生した際の操作
* **以前の試み** – 既に問題の解決を試みたもの

### その他のリソース

技術情報について詳しくは、以下を参照してください。

* 操作の失敗で提供された完全なエラーログを確認します
* パッチ固有のガイダンスについては、Adobe Commerce ドキュメントを確認してください
* 環境固有の問題については、Adobe Commerce Cloud サポートにお問い合わせください

### 関連トピック

* [Adobe Commerce Cloud ドキュメント &#x200B;](https://experienceleague.adobe.com/ja/docs/commerce-cloud-service/user-guide/overview)
* [Adobe Commerce インストールガイド &#x200B;](https://experienceleague.adobe.com/ja/docs/commerce-operations/installation-guide/overview)
* [キャップの概要](intro.md)
* [アクセス方法](access.md)
* [ワークフロー](workflow.md)
* [ベストプラクティス](best-practices.md)
