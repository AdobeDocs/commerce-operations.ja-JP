---
title: デプロイメントの概要
description: コマースアプリケーションのデプロイメント戦略についてお読みください。
source-git-commit: 6a3995dd24f8e3e8686a8893be9693581d31712b
workflow-type: tm+mt
source-wordcount: '816'
ht-degree: 0%

---


# デプロイメントの概要

ここでは、Adobe Commerceバージョン 2.2 以降の実稼動サイトにコマースアプリケーションをデプロイするプロセスについて説明します。 Adobeでは、大規模なサイトを持ち、デプロイ時にダウンタイムを発生させたくないユーザーに対して、このデプロイメント方法をお勧めします。

Commerce を 1 台のマシンにデプロイし、デプロイ中にダウンタイムを長引かせる場合は、 [シングルマシンの導入](../deployment/single-machine.md).

## パイプラインのデプロイ

コマースバージョン 2.2 では、Adobeが導入されました _パイプラインのデプロイメント_ を実稼動環境に最小限のダウンタイムでデプロイする新しい方法として使用できます。 このデプロイメントプロセスは、様々なシステムで実行され、すべてのパイプラインデプロイメントシステムで一貫した設定を維持できます。 これは、通常の設定をシステム固有の設定（ホストやポートなど）または機密設定（名前やパスワードなど）から分離できる、シンプルで強力なモデルです。

パイプラインのデプロイメントを使用するには、Adobeは、次の操作を前提としています。

- Adobe Commerceの設定オプションに関する優れた知識を持つ、経験豊富なシステムインテグレーターです。
- 大規模なコマースサイト ( 数千の SKU（在庫管理単位）) を管理し、本番サイトのダウンタイムを最小限に抑えたいと考えています。
- PHP のプログラミングに関する知識がある。
- ソース管理方法の使用経験がある。
- コードはソース管理リポジトリにあります。 このガイドでは、Git ベースのリポジトリを使用していると仮定します。

### ダウンタイムの短縮

静的アセットをデプロイし、実稼動システムとは別のマシンにコードをコンパイルする場合、ダウンタイムを最小限に抑えます。 実稼動システムでのダウンタイムは、静的ファイルとコンパイル済みコードをサーバーに転送するのに必要な時間に制限されます。

## 導入システム

デプロイメントに関連するシステムの説明には、次の用語を使用します。

- **開発システム** — 開発者がコードをカスタマイズするマシン。Commerce Marketplaceから、拡張機能、テーマ、言語パッケージをインストールします。 さらに、開発システムですべての設定変更を行います。 多くの開発システムを使用できます。

- **システムの構築** — 静的アセットをデプロイし、実稼動システム用のコードをコンパイルする 1 つのシステム。 これらのアセットは、実稼動環境にないシステム上に構築されるので、実稼動環境でのシステムのダウンタイムは最小限に抑えられます。

   Commerce がインストールされている必要はありません。 コマースコードのみが必要ですが、データベース接続は不要です。 また、ビルドシステムは、物理的に別のサーバーである必要はありません。

- **ステージングシステム**—_オプション_. オプションで、ユーザー受け入れテスト (UAT) を含む、すべての統合コードの最終テストに使用するステージングシステムを設定できます。 実稼働システムの設定と同じ方法で、ステージングシステムを設定します。 ステージングはライブストアではなく、顧客からの注文を処理しない点を除いて、実稼動環境と同じです。

- **本番システム** — ライブストアです。 ここでは、直接の設定の変更を最小限に抑える必要があります。また、ステージングインスタンスでテストされていないものは何もありません。 可能な場合は、で設定を変更します。 [データパッチ](https://developer.adobe.com/commerce/php/development/components/declarative-schema/patches/) ステージング/開発インスタンスでテストされている

## その他のデプロイメント方法

必要に応じて、次のような他の導入方法を使用できます。

- SCP または rsync を使用したコピーを保護
- [Capistrano](https://capistranorb.com/documentation/overview/what-is-capistrano)
- この [デプロイツール](https://deployer.org/)

## 設定を管理

次の後のモデリング [第 3 因子 12 因子アプリ設計](https://12factor.net/config)Commerce で、システム自体に各システムの設定が保存されるようになりました。 （開発設定は開発システムに、実稼動設定は実稼動システムに格納されます）。

お使いのシステムの設定を同期する方法を提供しています。

- **共有設定** — システム固有の設定でも機密性の低い設定でもありません。

   共有設定は、開発システムと実稼動システムの一貫性を保つための設定です。 開発環境 ( またはクラウドインフラストラクチャ上のAdobe Commerce) の管理者で共有設定を設定します。 _統合_) システムで使用できます。

   共有設定ファイル `app/etc/config.php`をソース管理に含めて、開発システム、ビルドシステム、実稼動システム間で共有できるようにする必要があります。

- **システム固有の設定** — 検索エンジンのホスト名やポートなど、システムによって異なる設定。

- **機密設定** — 必要な設定 _not_ は、個人を特定できる情報 (PII) や API キーやパスワードなどの設定を公開するので、ソース管理下に置かれます。

   システム固有の設定ファイル `app/etc/env.php`を _not_ をソース管理に含めるか、またはシステム間で共有する。 代わりに、 [`magento config:set` および `magento:sensitive:set` コマンド](../cli/set-configuration-values.md) を使用して、実稼働システムでのこれらの設定の値を指定します。

>[!INFO]
>
>設定を管理するためのこれらの新しい方法はオプションです。 必要はありませんが、使用することを強くお勧めします。

ほとんどの場合、共有設定、システム固有設定、機密設定で設定した設定オプションは、管理者では編集できません。 これにより、すべてのシステムで設定の一貫性を維持できます。 ( オプションで、 [`magento config:set` command](../cli/set-configuration-values.md) 無しに `--lock` オプションを使用して、管理で編集可能な設定を構成できます )。

各コマース設定オプションには、固有の _設定パス_. 設定オプションの値を設定するには、CLI コマンドまたは環境変数を使用して、特定のシステム上のその設定パスの値を設定します。
