---
title: Magento Open Source 2.4.0 リリースノート
description: 2.4.5 Magento Open Sourceリリースの新機能、機能強化、バグ修正および既知の問題について説明します。
recommendations: noCatalog
exl-id: 058f9dfe-7b03-405b-96cc-3904c910e0f6
source-git-commit: 95ea96a566b0579a22b2ba738bd4a4bceef8cd9c
workflow-type: tm+mt
source-wordcount: '17553'
ht-degree: 0%

---

# Magento Open Source 2.4.0 リリースノート

Magento Open Source 2.4.0 では、PHP 7.4、Elasticsearch 7.6.x、および MySQL 8.0 がサポートされています。セキュリティが大幅に変更され、デフォルトで管理者で 2 要素認証が有効になりました。

**このリリースでは、Authorize.Net メソッドの統合がコアコードから削除されました。 マーチャントは、Commerce Marketplace** で利用可能な公式の拡張機能に移行する必要があります。

>[!NOTE]
>
>**Braintree支払いの統合**: 2.4.0 以前は、マーチャントはコア統合に代わって、Commerce Marketplaceから公式のBraintree支払いの統合拡張機能をインストールして設定することをお勧めしていました。 このリリース（2.4.0）では、拡張機能がリリースに含まれるようになりました。 マーチャントは、2.4.0 のデプロイメントでBraintreeが正しく動作するように、追加の手順に従う必要があります。 2.4.0 への移行方法の詳細については、[Braintree](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/payments/braintree) を参照してください。

このリリースには、2.3.5-p1 に含まれていたコア品質のすべての改善、コアコードに対する 100 を超える新しい修正、30 のセキュリティ強化が含まれています。 コミュニティメンバーによる 226 件の GitHub 問題の解決が含まれています。 これらのコミュニティの貢献度は、コアコードの小規模なクリーンアップから、Inventory managementやGraphQLの大幅な機能強化まで多岐にわたります。

>[!NOTE]
>
>マイナーリリースでは、コードが大幅に強化されています。 2.4.0 にアップグレードする前に、お使いの環境が最小限の [ テクニカルスタック要件 ](../../../installation/system-requirements.md) を満たしていることを確認してください。

{{bics}}

>[!NOTE]
>
>セキュリティリリースのパッケージ名には、通常、-p1 が付加されます。 ただし、2.3.5 では、これらの命名規則から逸脱することは避けられず、後続のセキュリティパッケージ名に一時的な波及効果がありました。 特に、フル機能の 2.3.5 リリースは 2.3.5-p1 です。 2.4.0 GA の際にリリースするセキュリティリリースは、2.3.5-p2 です。 今後のリリースで、通常の命名規則に戻りたいと考えています。

## 配送業者として DHL を引き続き提供するには、`AC-3022.patch` を適用してください

DHL ではスキーマバージョン 6.2 を導入しており、近い将来、スキーマバージョン 6.0 を廃止する予定です。 DHL 統合をサポートするAdobe Commerce 2.4.4 以前のバージョンは、バージョン 6.0 のみをサポートしています。これらのリリースをデプロイするマーチャントは、DHL を配送業者として引き続き提供するために、できるだけ早い時期に `AC-3022.patch` を適用する必要があります。 パッチのダウンロードとインストールについては、ナレッジベースの記事 [DHL を引き続き配送業者として提供するためのパッチを適用する ](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) を参照してください。

## セキュリティパッチを利用できます

マーチャントは、完全な四半期リリース（2.3.5-p2 など）が提供する何百もの機能修正や機能強化を適用しなくても、時間に依存するセキュリティ修正をインストールできるようになりました。 パッチ 2.3.5.2 （Composer パッケージ 2.3.5-p2）は、以前の四半期リリース 2.3.5-p1 で特定された脆弱性の修正を提供するセキュリティパッチです。 2.3.5 リリースに適用されたすべてのホットフィックスが、このセキュリティパッチに含まれています。 （*ホットフィックス* は、特定の問題やバグに対処するリリースバージョンの修正を提供します。）

セキュリティパッチの一般情報については、[ 新しいセキュリティパッチリリースの概要 ](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287) を参照してください。セキュリティパッチ（パッチ 2.3.5-p2 を含む）のダウンロードおよび適用の手順については、[ オンプレミスでのクイックスタートのインストール ](../../../installation/composer.md) を参照してください。 セキュリティパッチには、セキュリティバグ修正のみが含まれ、完全なパッチに含まれる追加のセキュリティ機能強化は含まれません。

## その他のリリース情報

これらの機能のコードは四半期ごとのリリースにバンドルされていますが、これらのプロジェクトのいくつか（例：Inventory managementおよびProgressive Web Application（PWA） Studio）も個別にリリースされています。 これらのプロジェクトのバグ修正は、各プロジェクトのドキュメントで利用できる別のプロジェクト固有のリリース情報に記載されています。

## ハイライト

このリリースのハイライトは次のとおりです。

### セキュリティの大幅な強化

このリリースには、30 を超えるセキュリティ修正と platform セキュリティの改善が含まれています。

#### リモートコード実行（RCE）およびクロスサイトスクリプティング（XSS）の脆弱性を閉じるのに役立つ 30 を超えるセキュリティ強化

これらの問題に関連する確認された攻撃は、今日まで行われていません。 ただし、特定の脆弱性が悪用されて、顧客情報にアクセスしたり、管理者のセッションを引き継いだりする可能性があります。 これらの問題のほとんどは、攻撃者が最初に管理者へのアクセス権を取得する必要があります。 そのため、IP許可リストに加える、[ 二要素認証 ](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)、VPN の使用、`/admin` ではなく一意の場所の使用、適切なパスワードハイジーンなど、管理者を守るために必要なすべての手順を実行してください。 修正された問題については、[Magento可能なセキュリティ更新プログラム ](https://helpx.adobe.com/security/products/magento/apsb20-47.html) を参照してください。 を参照してください。

#### その他のセキュリティ機能強化

* **管理者アカウント、magento.com ユーザーアカウント、Cloud SSH アクセス用の 2FA の実装**

   * **管理者アカウントを保護しています**。 管理者には、2 要素認証（2FA）が必要になりました。 管理者ユーザーは、UI または web API から管理者にログインする前に、まず 2FA を設定する必要があります。 2FA はデフォルトで有効になっています。 2FA モジュールを無効にすることを強くお勧めします。  この追加の認証手順により、悪意のあるユーザーが承認なしに管理者にログインするのが難しくなります。 [2 要素認証（2FA） ](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/) を参照してください。<!-- MC-22631-->

   * **アカウントの保護**。 2 要素認証（2FA）は、追加されたオプションのセキュリティレイヤーを提供し、望ましくない方法でアカウントを使用しようとする不正ユーザーからmagento.com アカウントをより適切に保護します。 [ アカウントの保護 ](https://experienceleague.adobe.com/en/docs/commerce-admin/start/commerce-account/commerce-account-secure) を参照してください。

* **クラウド SSH アクセスの保護**。 クラウドインフラストラクチャへのAdobeは、クラウド環境への SSH アクセスの認証要件を管理するための多要素認証（MFA）適用を提供します。 2FA の多要素認証は、プロジェクトではデフォルトで有効になっていません。  Adobeでは、この機能を有効にすることを強くお勧めします。 サポートが必要な場合は、サポートに問い合わせてください。 [SSH アクセス用の多要素認証の有効化 ](https://experienceleague.adobe.com/en/docs/commerce-cloud-service/user-guide/project/multi-factor-authentication) を参照してください。

* **テンプレートフィルターの厳密モードがデフォルトで有効になりました**。 従来のモードでテンプレートフィルターを使用するコンポーネント（CMS ページやブロックを含む）は、リモートコード実行（RCE）に対して脆弱な可能性があります。 デフォルトで厳格モードを有効にすると、RCE 攻撃を意図的に有効にできなくなります。 <!-- MC-22982-->

* **UI データプロバイダーのデータレンダリングがデフォルトで無効になりました**。 これにより、悪意のあるユーザーが任意のJavaScriptを実行する機会がなくなります。<!-- MC-17356-->

* **新規 `\Magento\Framework\Escaper` クラス**。 このクラスは、HTMLの生成を担う `.phtml` テンプレートおよび PHP クラスに対して提供されます。 このクラスには、複数のコンテキストに関連するHTMLサニタイズメソッドが含まれています。 `$escaper` ローカル変数は `.phtml` テンプレート内で使用でき、非推奨の `$block->escape{method}` の代わりに使用する必要があります。 `$block->escape{method}` の使用は廃止されたので、`$block` ではなく `$escaper` を使用します。

* **新しい security.txt ファイルのサポート**。 このファイルは、セキュリティの研究者がサイト管理者に潜在的なセキュリティの問題を報告するのに役立つ、サーバー上の業界標準ファイルです。

* **コンテンツセキュリティポリシー（CSP）のサポートの強化**。 `SecureHtmlRenderer` がフレームワークに追加され、`.phtml` テンプレートでインライン `style` および `script` タグを許可リストに登録するために使用できます。 デフォルトの CSP 設定では、インラインスクリプトとスタイルは使用できません。この設定は、XML ファイルで上書きできます。<!-- MC-34433-->

{{cve-notice}}

### Platform のアップグレード

次のプラットフォームのアップグレードは、web サイトのセキュリティとパフォーマンスの向上に役立ちます。 サポートされている PHP および PHPUnit、Elasticsearch、MySQL およびその他の依存性については、[technology stack requirements](../../../installation/system-requirements.md) を参照してください。

* **PHP 7.4 のサポートが導入され、PHP 7.1 および 7.2 は非推奨となりました**。 2.4.0 では、PHP 7.4 のサポートが導入されました。

* **PHPUnit 9.x のサポートと PHPUnit 6.5 の廃止**。 PHP 7.4 では、最新の PHPUnit テストフレームワークである PHPUnit 9.x を使用する必要があります。Commerce Marketplace拡張モジュールのベンダは、すべての新しい拡張モジュールが PHP 7.4 と互換性があり、すべての単体テストと統合テストが PHPUnit 9 で実行されるように設定されていることを確認しなければなりません。

* **Elasticsearch 7.6.x のサポート**。 Elasticsearch 7.6.x は、Adobe CommerceとAdobe Commerceのデフォルトのカタログ検索エンジンになりました。 Elasticsearch 7.6.x をインストールしないと、バージョン 2.4.0 をインストールまたはアップグレードできません。Elasticsearchバージョン 2.x のコードは削除されました。 Elasticsearchバージョン 5.x および 6.x は非推奨となり、サポートされなくなりました。 [ 検索エンジンの前提条件 ](../../../installation/prerequisites/search-engine/overview.md) を参照してください。

* **MySQL 8.0 のサポート**。 バージョン 2.4.x は MySQL 8.x をサポートしています。（2.4.0 は MySQL 8.0.20 でテストされました）。 マーチャントは、改善されたパフォーマンス、セキュリティ、信頼性を活用するために、デプロイメントを MySQL 8.x に移行することをお勧めします。 MySQL 5.7 はMagento 2.4.x で引き続きサポートされますが、MySQL 5.6 はサポートされなくなりました。 2.4.x を MySQL 5.6 データベースでホストすることはできません。 [MySQL](../../../installation/prerequisites/database/mysql.md) を参照してください。

* **MySQL カタログ検索エンジンの削除**。 MySQL 検索エンジンは 2.4.0 から削除され、デフォルトの検索エンジンとしてElasticsearchに置き換えられました。 Elasticsearchは、優れた検索機能とカタログパフォーマンスの最適化を提供します。  すべてのマーチャントは、2.4.0 をインストールしてデプロイするElasticsearchが必要です。[Elasticsearchがインストールされていることを確認する ](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/prepare/prerequisites.html) を参照してください。

* **MariaDB 10.4 のサポート**。 MySQL 8.0 のサポートにより、マーチャントは MariaDB 10.4 とMagento Open Sourceを導入できます。 マーチャントは 2.4.0 で MariaDB 10.2 を引き続き使用できますが、パフォーマンスと信頼性を向上させるには、MariaDB 10.4 にアップグレードすることをお勧めします。 MariaDB 10.0 と 10.1 はサポートされなくなりました（このリリースで MySQL 5.6 のサポートが削除された結果）。

* **Zend フレームワークの Linux 基盤の Laminas プロジェクトへの移行を反映するために、Zend フレームワークの依存関係を [Laminas プロジェクト ](https://getlaminas.org/about/foundation)** に移行しました。 Zend フレームワークは廃止されました。 DevBlog の投稿 [Zend フレームワークの Laminas プロジェクトへの移行 ](https://community.magento.com/t5/Magento-DevBlog/Migration-of-Zend-Framework-to-the-Laminas-Project/ba-p/443251) を参照してください。

* **コントローラの分解** を使用すると、拡張機能開発者は「レイヤースーパータイプ」クラスを使用せずに、ActionInterface を直接実装できます。 DevBlog の投稿 [ コントローラの分解 ](https://community.magento.com/t5/Magento-DevBlog/Decomposition-of-Magento-Controllers/ba-p/430883) を参照してください。 _Vinai Kopp がプルリクエスト [16268](https://github.com/magento/magento2/pull/16268) で機能強化を開始し、Lukasz Bajsarowicz がプルリクエスト [26778](https://github.com/magento/magento2/pull/26778)_ で最終決定。 [GitHub-9582](https://github.com/magento/magento2/issues/9582)

* **Signifyd 詐欺保護コードのコア統合の削除**。 このコア機能はサポートされなくなりました。 マーチャントは、Commerce Marketplaceで利用可能な [Signifyd Fraud &amp; Chargeback Protection 拡張機能 ](https://marketplace.magento.com/signifyd-module-connect.html) に移行する必要があります。

* **コアBraintreeモジュールがコードベースから削除されました**。 Braintree支払いモジュールに、同じ機能セットが提供されるようになりました。 [Braintree支払 ](https://marketplace.magento.com/paypal-module-braintree.html) を参照してください。

* Internet Explorer 11.x ブラウザーはサポートされなくなりました。

### インフラストラクチャの改善

このリリースには、フレームワークと次のモジュールの品質を向上させるコア品質に対する機能強化が含まれています。Customer Account、Catalog、CMS、Import、Cart and Checkout、B2B。

* **第三者支払い方法のコア統合の削除**. このリリースでは、Authorize.Net 支払い方法の統合がコアコードから削除されました。 マーチャントは、Commerce Marketplaceで利用可能な公式の拡張機能に移行する必要があります。 [ 支払い統合の廃止 ](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Magento-core-payment-integrations/ba-p/426445)devblog の投稿を参照してください。<!-- MC-29029-->

* **Elasticsearchの部分単語検索のサポート（新しいデフォルト検索エンジン）**。 Elasticsearchでは、クイック検索を使用する際に、商品名と SKU の検索用語で部分単語を使用できるようになりました。 この機能は、MySQL 検索エンジンでサポートされていましたが、このリリースでは非推奨（廃止予定）となり、Elasticsearchに置き換えられました。

* **PayPal JavaScript SDK のアップグレード**。 PayPal Express Checkout の連携を、必要なリスクパラメーターを自動で収集して PayPal に渡す SDK である最新の PayPal JavaScript SDK に移行しました。 PayPal Express のチェックアウト支払い方法の動作は変更されません。 ただし、この SDK を最新バージョンにアップグレードすると、マーチャントは最新の機能とセキュリティ強化にアクセスできます。<!-- MC-30962-->

* **Web セットアップウィザードの廃止と削除**。 2.4.0 をインストールまたはアップグレードするには、コマンドラインを使用する必要があります。[Magentoのインストール ](../../../installation/advanced.md) を参照してください。

* **Composer 更新プラグイン**。 Composer プラグインは、新しいバージョンに更新する前にルート プロジェクト `composer.json` ファイルに対して行う必要がある変更を解決することにより、アップグレード プロセスを合理化します。 このプラグインは、カスタマイズの上書きを防ぎます。 [Composer ルート プラグインを使用したアップグレード ](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/implementation/perform-upgrade.html) を参照してください。

* **販売者主導の買い物** この機能を使用すると、マーチャントは、顧客に代わってストアフロントを表示できます。 顧客は、自分のアカウントへのストアフロントのアクセスを許可することを選択します。 コミュニティで開発されたこの機能には、[MAGEFAN](https://magefan.com/) が開発した独自の拡張機能が含まれています。 [ 販売者支援ショッピング ](https://experienceleague.adobe.com/en/docs/commerce-admin/config/customers/login-as-customer) を参照してください。 次のような機能があります。

   * 顧客アカウントにログインできる管理者を制御する ACL を web サイトごとに設定できます
   * 複数の web サイトおよび顧客アカウント範囲との互換性
   * 顧客の代理で行われた注文は、ストアフロントおよび管理者に記録されます
   * すべてのセッションは管理者ログアウト後に破棄され、管理者は顧客パスワードにアクセスできません。

### パフォーマンスの向上

* **顧客データセクション無効化ロジックの改善**。 このリリースでは、カスタム `sections.xml` ール無効化がアクティブな場合のローカルストレージの既知の問題を回避する、すべての顧客セクションのデータを無効にする新しい方法が導入されています。  （以前は、アクションの無効化を含むカスタム *etc/frontend/sections.xml* がある場合、プライベートコンテンツ（ローカルストレージ）が正しく入力されていませんでした）。 [ プライベートコンテンツ ](https://developer.adobe.com/commerce/php/development/cache/page/private-content/) を参照してください。

* **Redis パフォーマンスの複数の最適化**。 機能強化により、各リクエストで実行される Redis に対するクエリの数が最小限に抑えられます。 これらの最適化には、次のものが含まれます。

   * Redis とMagento間のネットワークデータ転送のサイズの縮小

   * ロードする必要があるものをアダプタが自動的に判断する機能を改善することにより、Redis の CPU サイクル消費を削減します。

   * Redis 書き込みオペレーションの競合状態の削減

  [ ページおよびデフォルトキャッシュに Redis を使用 ](../../../configuration/cache/redis-pg-cache.md) および [ キャッシュの設定 ](../../../configuration/cache/caching-overview.md) を参照してください。

* **SQL クエリ結果のインベントリテーブルへのキャッシュを改善しました**。 以下のような機能強化が含まれています。

   * SQL クエリを `inventory_stock_sales_channel` テーブルにキャッシュする（クエリ 16 ではなく 1）

   * クエリの結果の `inventory_stock` テーブルへのキャッシュ（16 ではなく 1 つのクエリ）

* **クイックオーダーの買い物かごへの追加パフォーマンスが最大 25～30% 向上**。

* マーチャントは [ 遅延読み込み ](https://en.wikipedia.org/wiki/Lazy_loading) を使用して画像を読み込めるようになりました。

### Adobe Stock統合 v2.0

**メディアギャラリーからストック画像プレビューのライセンスを取得する機能**。 マーチャントは、Media Gallery でAdobe Stock プレビュー画像を検索できるようになりました。これにより、Stock プレビュー画像のライセンスを取得するために必要な手順の数が減ります。

### 新しいメディアギャラリー

以前のメディアギャラリーに代わるこの新しい置き換えは、メディアアセット用の新しい検索可能なインターフェイスを提供します。 管理者は、この機能の以前のバージョンよりも最大 30 倍高速に、画像を検索、フィルタリング、並べ替えることができるようになりました。 マーチャントはこのツールを使用して、ストアフロント画像の使用状況を評価できます。 拡張機能開発者は、Media Gallery 用に開発された拡張機能は、新しい Media Gallery では期待どおりに動作しないことに注意する必要があります。

### Inventory management

このリリースのInventory managementの機能強化には、店舗でのピックアップとバンドル製品のサポートが含まれています。 最近のInventory managementのバグ修正について詳しくは、[Inventory management リリースノート ](https://experienceleague.adobe.com/docs/commerce-admin/inventory/release-notes.html) を参照してください。

### GraphQL

GraphQLの機能強化は次のとおりです。

* クエリ `pickupLocations` 在庫店舗ピックアップ機能をサポートしています
* クエリ `categories`、指定したフィルターに一致するカテゴリのリストを返します。 このクエリは、ページネーションをサポートするという点で、`categoryList` クエリとは異なります。
* ミューテーション `reorderItems` 使用すると、ログインユーザーは、以前の注文のすべての製品を買い物かごに追加できます。

この機能強化およびその他の機能強化について詳しくは [&#128279;](https://developer.adobe.com/commerce/webapi/graphql/)GraphQL開発者ガイド &rbrace; を参照してください。 最近のGraphQLのバグ修正について詳しくは、[ リリースノート ](https://developer.adobe.com/commerce/webapi/graphql/release-notes/) を参照してください。

### PWA Studio

PWA Studioのバージョンとその互換性のあるバージョンの一覧については、[ 互換性 ](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) を参照してください。 機能強化とバグ修正について詳しくは、[PWA Studioリリース ](https://github.com/magento/pwa-studio/releases) を参照してください。

### 機能テストフレームワーク（MFTF）

MFTF v3.0.0 には以下の新機能が含まれており、PHP 7.4 および PHPUnit 9 のサポートが含まれています。

* MFTF ヘルパー（テストフレームワーク外でカスタムアクションを作成できます）
* テストエンティティのスキーマ更新
* テストモジュールのサブフォルダー
* ネストされたアサーション構文
* 非推奨のテストエンティティへの参照を確認して報告する静的チェック

また、このリリースでは、MFTF のメジャーバージョン要件に対するアップグレードテストに追加された、非推奨のアクションおよびアップグレードスクリプトも削除されています。

### ベンダーが開発した拡張機能の強化

このリリースのには、サードパーティベンダーが開発した拡張機能が含まれています。 これらの拡張に対して品質と UX の両方の改善を導入し、MFTF カバレッジを拡張しました。

Commerce Marketplace拡張モジュールのベンダは、2.4.0 用の新しいバージョンの拡張モジュールを公開する際に、PHP 7.4 との互換性を確認する必要があります。

#### Amazon ペイ

このリリースの内容は次のとおりです。

* CSP のアップデート^許可リスト
* 複数アイテムの注文に対して複数の承認を実行する機能
* 日本語アドレスのサポート

#### Braintree支払い

この拡張機能は、コアBraintree統合に代わるものです。 これは、Braintreeコア統合と同じ機能を提供します。 [Braintree支払 ](https://marketplace.magento.com/paypal-module-braintree.html) を参照してください。

#### クラルナ

このリリースには、買い物客が利用可能なクレジットと資金調達オプションを理解するのに役立つ、新しいオンサイトメッセージオプションが含まれています。 また、次の点も改善されています。

* 払戻
* API の効率性
* cookie と単体テスト
* 割引
* 設定には、Klarna のプロモーションメッセージのストアフロント表示を制御するためのオンサイトメッセージセクションが含まれるようになりました

#### 頂点

Vertex のこのリリースには、次の新機能と機能強化が含まれています。

* 管理設定のユーザーエクスペリエンスの向上
* インストールスクリプトやアップグレードスクリプトを XML スキーマファイルやパッチに置き換える
* 非推奨コード（`ApiClient` および `ClientInterface`）の削除

#### ヨッポ

Yotpo の評価とレビューは、ページビルダーと統合されています。

## 修正された問題

2.4.0 コアコードの何百もの問題を修正しました。

### インストール，アップグレード，デプロイメント

<!-- MC-23940-->

* Web サイトと、その web サイトの範囲固有の設定を、期待どおりに `app/etc/config.php` で正常に削除できるようになりました。 以前は、web サイトを削除しようとすると、操作に失敗し、アプリケーションに「`The website with code xxx that was requested wasn't found. Verify the website and try again`」というエラーが表示されていました。 さらに、アプリケーションによってストアフロントに「`Config files have changed. Run app:config:import or setup:upgrade command to synchronize configuration`」というエラーが表示されました。 [GitHub-24061](https://github.com/magento/magento2/issues/24061)

<!-- MC-30140-->

* `index.php` で無効になっている設定は、管理者では編集できなくなりました。

<!-- MC-32405-->

Magento Open Sourceのインストールが正常に完了し、ストア設定が `config.php` で事前定義されている場合、ストアが期待どおりに作成されるようになりました。

<!-- MC-33151-->

* `\Magento\Store\App\Config\Source\RuntimeConfigSource::getEntities` は、`SHOW TABLE STATUS` クエリの数を減らすためにリファクタリングされました。 （この変更は、この関数が 2.3.3 で表示された動作に戻ります）。

<!-- MC-23890-->

* `bin/magento setup:upgrade` を実行してデータベースをアップグレードしようとしても、データスクリプトは再実行されなくなりました。 以前は、アップグレードスクリプトが不必要に再実行されたため、パフォーマンスに影響がありました。 [GitHub-19469](https://github.com/magento/magento2/issues/19469)

<!-- MC-30397-->

* Redis への接続が中断されると、アプリケーションに次の動作が表示されます。 以前は、アプリケーションは現在のページをリロードせず、次のエラーを表示していました：`An error has happened during application run. See exception log for details`。

   * 管理およびストアフロントのセッションの有効期限
   * 管理者およびストアフロントのユーザーは、もう一度ログインする必要があります
   * セッションデータは `var/session/` に保存されます
   * エラーや例外はログに記録されません。

<!-- ENGCOM-6686-->

* 匿名クラスで `bin/magento setup:di:compile` コマンドが失敗しなくなりました。 _Yevhen Sentiabov によってプルリクエスト [26533](https://github.com/magento/magento2/pull/26533)_ ードで送信された修正。 [GitHub-26532](https://github.com/magento/magento2/issues/26532), [GitHub-21555](https://github.com/magento/magento2/issues/21555)

<!-- ENGCOM-5546-->

* デフォルトでMagentoに付属している LESS コンパイラーとは異なる LESS コンパイラーを使用した場合に、アプリケーションの Luma テーマで LESS コンパイラーに関する問題が解決されました。 _Pieter Hoste がプルリクエスト [24003](https://github.com/magento/magento2/pull/24003)_ ードで修正を送信しました。 [GitHub-23619](https://github.com/magento/magento2/issues/23619)

<!-- ENGCOM-6367-->

* メンテナンスモードに切り替える際に、書き込み可能な `env.php` ファイルが不要になりました。 代わりに、アプリケーションは、メンテナンスモード（`Cache-Control`）ですべてのフロントエンドリクエストの `no-cache` ヘッダーを設定します。 以前は、`env.php` が読み取り専用の場合はメンテナンスモードを有効にできず、アプリケーションがメンテナンスモードに切り替える際に FPC を無効にしようとしました。 _プルリクエスト [25790](https://github.com/magento/magento2/pull/25790)_ で Marco k̦Pcke によって送信された修正。 [GitHub-24229](https://github.com/magento/magento2/issues/24229)

<!-- ENGCOM-7236-->

* `ddev` の設定中に、`db-ssl-verify` で未定義のインデックスエラーが発生しなくなりました。 _Daniel Ruf によってプルリクエスト [26763](https://github.com/magento/magento2/pull/26763)_ ードで送信された修正。 [GitHub-26762](https://github.com/magento/magento2/issues/26762)

<!-- ENGCOM-6247-->

* Composer の依存関係が更新され、Redis キーの有効期限が実装されました。これにより、Redis のパフォーマンスが向上しました。 _toxix がプルリクエスト [25488](https://github.com/magento/magento2/pull/25488)_ で送信した修正。 [GitHub-25487](https://github.com/magento/magento2/issues/25487)

### Adobe Stockの統合

<!-- ENGCOM-6507-->

* 選択した画像のハイライト表示をサポートするために、CSS スタイルがAdobe Stockの画像表示装置に追加されました。  _Serhiy Zhovnir によってプルリクエスト [25864](https://github.com/magento/magento2/pull/25864)_ ードで送信された修正。 [GitHub-761](https://github.com/magento/adobe-stock-integration/issues/761)

<!-- ENGCOM-7021-->

* 矢印キーを使用して入力フィールドカーソルを動かしても、Adobe Stock プレビュー画像のナビゲーションがトリガーされなくなりました。  _修正は、Adarsh Manickam によってプルリクエスト [27138](https://github.com/magento/magento2/pull/27138)_ に送信されました。 [GitHub-973](https://github.com/magento/adobe-stock-integration/issues/973)

<!-- ENGCOM-6840-->

* ユーザーがAdobe Stock画像にフィルターを適用しようとすると発生するエラーに対して、アプリケーションがメッセージをキャッシュするようになりました。 _Shankar Konar がプルリクエスト [26502](https://github.com/magento/magento2/pull/26502)_ で修正を送信しました。 [GitHub-863](https://github.com/magento/adobe-stock-integration/issues/863)

<!-- ENGCOM-7195-->

* 「プレビューを保存 **をクリックしても、保存操作を確定しないまま、ウィンドウの左側の垂直スクロールバーにカーソルを移動しても** Adobe Stock画像のプレビューが保存されなくなりました。 _Serhiy Zhovnir によってプルリクエスト [27399](https://github.com/magento/magento2/pull/27399)_ ードで送信された修正。 [GitHub-1002](https://github.com/magento/adobe-stock-integration/issues/1002)

### バックエンド

<!-- MC-25036-->

* JavaScriptの縮小が有効な場合、管理者からメールテンプレート（**管理者**/**マーケティング**/**コミュニケーション**/**メールテンプレート**）をプレビューできるようになりました。 以前は、メールテンプレートをプレビューしようとすると、メールのプレビューポップアップウィンドウが空でした。 [GitHub-25068](https://github.com/magento/magento2/issues/25068)

<!-- ENGCOM-6433-->

* 管理者は、制限付き権限を持つ管理者アカウントの作成後、期待どおりに管理者にログインできるようになりました。 以前は、管理者にアクセスできませんでした。 代わりに、これらの権限を持つユーザーは 404 エラーでストアフロントにリダイレクトされました。 _Eden Duong によってプルリクエスト [25909](https://github.com/magento/magento2/pull/25909)_ ードで送信された修正。 [GitHub-25881](https://github.com/magento/magento2/issues/25881)

<!-- ENGCOM-6785-->

* 製品を複製する際に、URL キー、メタタイトル、メタキーワード、メタ説明などの SEO データがアプリケーションで複製されなくなりました。  _Dasharth patel がプルリクエスト [26659](https://github.com/magento/magento2/pull/26659)_ で修正を送信しました。 [GitHub-26054](https://github.com/magento/magento2/issues/26054)

<!-- ENGCOM-6442-->

* **管理者**/**コンテンツ**/**ページ**/からページを作成中にページから画像を削除すると、アプリケーションがエラーをスローしなくなりました  **新しいページを追加**。 以前は、アプリケーションは開発者コンソールで `500 (Internal Server Error)` というエラーをスローしていました。 _Eden Duong によってプルリクエスト [25924](https://github.com/magento/magento2/pull/25924)_ ードで送信された修正。 [GitHub-25893](https://github.com/magento/magento2/issues/25893)

### バンドル製品

<!-- MC-25251-->

* バンドル製品の `catalog_product_price` の再インデックス操作のパフォーマンスが向上しました。

<!-- MC-29633-->

* デフォルトのストア表示でバンドル製品の **税金クラス** と **動的価格** 設定が無効になっている場合、管理者がバンドル製品の管理者で税金クラスを手動で入力できなくなりました。 以前は、管理者が **税区分** の横にある **デフォルト値の使用** オプションをオフにすると、アプリケーションによってオプションが使用可能になり、管理者が別の値を入力して製品を保存できるようになりました。

<!-- MC-30257-->

* 製品ページでバンドルの製品価格が正しく計算されるようになりました。

<!-- MC-29745-->

* エラーなく、任意の数のバンドル製品を買い物かごに追加できるようになりました。 以前は、バンドル製品を買い物かごに追加してから買い物かごに移動すると、アプリケーションに「`Please correct the quantity for some products`」というエラーが表示されていました。

### キャッシュ

<!-- ENGCOM-7114-->

* `Magento\Framework\Cache` の `cache.xsd` スキーマは、Admin Cache Management を使用してモジュールを無効にした場合に、`instance` 属性を持たないキャッシュタイプが例外を引き起こさないようにリファクタリングされました。 以前は、`instance` 引数を指定せずに `cache.xml` を使用してキャッシュタイプを作成した場合、それを無効にしようとするとアプリケーションが例外をスローしていました。  _Andrii Beziazychnyi がプルリクエスト [27307](https://github.com/magento/magento2/pull/27307)_ で送信した修正。 [GitHub-26224](https://github.com/magento/magento2/issues/26224)

<!-- ENGCOM-6834-->

* デプロイメントにデータベースキャッシュエンジンが設定されている場合、`health_check.php` が失敗しなくなりました。 _Andrii Beziazychnyi がプルリクエスト [25722](https://github.com/magento/magento2/pull/25722)_ で送信した修正。 [GitHub-25669](https://github.com/magento/magento2/issues/25669)

### 買い物かごとチェックアウト

<!-- MC-23870-->

* **バックエンドと同期** 設定が有効になっている場合、チェックアウト中にアプリケーションがエラーをスローしなくなりました。 [GitHub-23833](https://github.com/magento/magento2/issues/23833)

<!-- MC-29786-->

* 配送方法のラジオボタンが、チェックアウトワークフローで期待どおりに有効になりました。

<!-- MC-30258-->

* **手動で適用** 設定を使用した契約条件が有効になっている場合、チェックアウトワークフローの注文レビューページが、複数の住所に出荷されている注文について正常に読み込まれるようになりました。 以前は、レビューページが検証に合格せず、アプリケーションに 404 エラーが表示されていました。

<!-- MC-32330-->

* 価格が買い物かごで更新されている間、アプリケーションに回転アイコンが表示されるようになりました。

<!-- MC-33230-->

* ミニ買い物かごの商品がチェックアウト前に在庫切れになった場合、アプリケーションに情報メッセージが表示されるようになりました。 在庫切れの項目を削除すると、「**チェックアウトに進む**」ボタンが表示されます。 以前は、アプリケーションにこのボタンは表示されていませんでした。

<!-- MC-31391-->

* アップロード対象のファイルが破損している場合に、「**SKU で並べ替え**」をクリックして製品を追加しようとすると、アプリケーションに情報エラーメッセージが表示されるようになりました。 以前は、アプリケーションで空白のページが表示されていました。

<!-- MC-32962-->

* アプリケーションは、ルール条件に一致するバンドル製品の子製品にのみ買い物かご価格ルールを適用するようになりました。 以前は、アプリケーションはバンドル製品に属するすべての子製品に買い物かご価格ルールを適用していました。

<!-- ENGCOM-7485-->

* `StorefrontMiniCartSection` は、MFTF テストでは `StorefrontMinicartSection` に置き換えられました。   _プルリクエスト [27955](https://github.com/magento/magento2/pull/27955)_ ードで Andrii Kalinich によって送信された修正。 [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-6389-->

* 配送先住所フォームの国セレクターコンポーネントへのハードコーディングされた参照が削除されました。  _Mateusz Krzeszowiak によってプルリクエスト [25541](https://github.com/magento/magento2/pull/25541)_ ードで送信された修正。 [GitHub-22416](https://github.com/magento/magento2/issues/22416)

<!-- ENGCOM-6522-->

* Internet Explorer でストアフロントを表示する際にカーソルをアイコンの上に置くと、買い物かごの削除アイコンに下線が表示されなくなりました。  _修正は divyajyothi5321 によってプルリクエスト [26173](https://github.com/magento/magento2/pull/26173)_ で送信されました。 [GitHub-26164](https://github.com/magento/magento2/issues/26164)

<!-- ENGCOM-6615-->

* 請求先と配送先住所の両方に 1 つの住所が選択されている場合に、請求先の住所を変更しても、顧客の配送先住所は変更されなくなりました。 _プルリクエスト [26279](https://github.com/magento/magento2/pull/26279)_ で Yurii Tvardyi が修正を送信。 [GitHub-26276](https://github.com/magento/magento2/issues/26276)

<!-- ENGCOM-6251-->

* ミニ カートのプロモーション領域が、期待どおりにレンダリングされるようになりました。 _Matti Vapa によってプルリクエスト [25375](https://github.com/magento/magento2/pull/25375)_ ードで送信された修正。 [GitHub-25373](https://github.com/magento/magento2/issues/25373)

### 買い物かご価格ルール

<!-- MC-23986-->

* 支払方法に基づく買い物かご価格ルールが、チェックアウトワークフロー中に適用されるようになりました。 [GitHub-24206](https://github.com/magento/magento2/issues/24206)

<!-- ENGCOM-6550-->

* **管理者**/**マーケティング**/**プロモーション**/**カタログ価格ルール** の日付選択ページ要素の動作を修正しました。 _Hitesh によってプルリクエスト [26290](https://github.com/magento/magento2/pull/26290)_ で送信された修正。 [GitHub-26289](https://github.com/magento/magento2/issues/26289)

<!-- ENGCOM-7485-->

* MFTF テストでは、`StorefrontMiniCartSection` は `StorefrontMinicartSection` に置き換えられました。   _プルリクエスト [27955](https://github.com/magento/magento2/pull/27955)_ ードで Andrii Kalinich によって送信された修正。 [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-5822-->

* 新しい買い物かご価格ルールを作成ワークフローの未使用のクーポングリッドが無効になっています。 _Eden Duong によってプルリクエスト [24471](https://github.com/magento/magento2/pull/24471)_ ードで送信された修正。 [GitHub-24468](https://github.com/magento/magento2/issues/24468)

<!-- ENGCOM-6615-->

* 請求先住所を変更しても、請求先住所と出荷先住所の両方に 1 つの住所が選択されている場合に、顧客の出荷先住所が変更されなくなりました。 _プルリクエスト [26279](https://github.com/magento/magento2/pull/26279)_ で Yurii Tvardyi が修正を送信。 [GitHub-26276](https://github.com/magento/magento2/issues/26276)

### カタログ

<!-- MC-25235-->

* スケジュールされた更新に含まれる階層化された製品の名前を変更しても、アプリケーションでエラーがスローされなくなりました。 以前は、新しい名前で製品を保存しようとすると、アプリケーションに次のエラーが表示されていました。`SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '3-0-0-2.0000-0' for key 'UNQ_EBC6A54F44DFA66FA9024CAD97FED6C7', query was: INSERT INTO catalog_product_entity_tier_price (all_groups, customer_group_id, qty, value, website_id, percentage_value, row_id) VALUES (?, ?, ?, ?, ?, ?, ?)`

<!-- MC-29023-->

* カスタム属性値を、管理者から期待どおりに保存できるようになりました。

<!-- MC-29775-->

* **ストア**/**設定**/**カタログ**/**最近表示/比較済み製品**/**現在で表示** が **ストアビュー** に設定されている場合、最近表示製品機能で、マルチストアデプロイメントの現在のストアビューにのみ関連付けられている製品が表示されるようになりました。 以前は、アプリケーションは、製品が割り当てられた web サイトに関係なく、最近すべての web サイトから閲覧された製品を表示していました。

<!-- MC-29896-->

* このアプリケーションは、ミニカートに商品画像を歪みなく表示するようになりました。 以前は、アプリケーションは、画像コンテナの幅と高さ全体を埋めるために、ミニカートに画像を引き伸ばしました。

<!-- MC-29866-->

* `getBasePrice` 関数は、文字列ではなく、期待どおりに float 値を返すようになりました。

<!-- MC-30229-->

* 製品比較機能が期待どおりに動作するようになりました。 現在のユーザーの比較リストにある製品のみが表示されるようになりました。

<!-- MC-30234-->

* テーマにデフォルトの透かしを割り当てることができるようになりました。 以前は、透かしを割り当てた後、アプリケーションが致命的なエラーをスローしていました。

<!-- MC-30540-->

* 多数のバリアント（約 5,000）を持つ設定可能な製品を管理者から正常に編集できるようになりました。 以前は、多数のサブ製品を含む設定可能な製品を編集しようとすると、アプリケーションに次のエラーが表示されていました。`Warning: DOMDocumentFragment::appendXML(): Entity: line 1: parser error : CData section too big found in /vendor/magento/framework/View/TemplateEngine/Xhtml/Template.php on line 60`

<!-- MC-30734-->

* **管理者**/**カタログ**/**製品** の属性セットの並べ替えが、期待どおりにアルファベット順に基づくようになりました。

<!-- MC-30794-->

* 最近表示された製品機能が、マルチストア展開で期待どおりに動作するようになりました。

<!-- MC-31838-->

* 新製品ページの **Web サイトの製品** チェックボックスが、マルチサイトデプロイメントでの制限付き管理者に対してデフォルトで有効になりました。 以前は、デフォルト以外の web サイトのチェックボックスは事前に選択されておらず、管理者がそのチェックボックスを選択しないままにした場合、アプリケーションにエラーメッセージが表示されていました。

<!-- MC-32772-->

* `addToCart` イベントは、データレイヤーで期待どおりに追跡されるようになりました。 以前は、製品の設定可能なオプションを変更して **買い物かごに追加** をクリックすると、新しい `addToCart` イベントがデータレイヤーに追加されていませんでした。

<!-- MC-29449-->

* ミニカートと管理者の買い物かご（**管理者**/**顧客**/**買い物かごを管理**）に、カタログ価格ルールが適用されると、正しい製品価格が表示されるようになりました。 以前は、ストアフロントの買い物かごには正しい製品価格が表示されていましたが、ミニカートと管理者の買い物かごには元の製品価格が表示されていました。

<!-- MC-30777-->

* 管理製品グリッドの web サイト列のフィルタリングが期待どおりに動作するようになりました。 以前は、フィルター結果に正しい製品数が表示されていませんでしたが、一貫して製品総数が 1 と表示されていました。

<!-- MC-31432-->

* 価格条件では、`catalog_product_entity_decimal` を使用して価格でフィルタリングします。 ただし、このテーブルには、設定可能な製品、バンドルの動的な製品、グループ化された製品のレコードはありません。これらの製品には固定価格がないためです。 価格によるフィルタリングに使用する正しいテーブルは `catalog_product_index_price` です。

<!-- ENGCOM-7104-->

* 管理カタログおよび製品リストの MSRP、コスト、特別価格列に通貨記号が表示されるようになりました。 _プルリクエスト [27261](https://github.com/magento/magento2/pull/27261)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-21910](https://github.com/magento/magento2/issues/21910), [GitHub-20906](https://github.com/magento/magento2/issues/20906), [GitHub-20472](https://github.com/magento/magento2/issues/20472)

<!-- ENGCOM-6375-->

* 顧客グループ価格のポップアップ用に追加ウィンドウ（**管理者**/**カタログ**/**製品**/**新製品**/**詳細価格**）を、閉じるアイコンをクリックすると期待どおりに閉じられるようになりました。 _プルリクエスト [25759](https://github.com/magento/magento2/pull/25759)_ で Ashna-Jahan によって送信された修正。 [GitHub-25433](https://github.com/magento/magento2/issues/25433)

<!-- ENGCOM-6300-->

* 新しい製品の説明とタイトル用に提供されたサンプル説明で、二重引用符を含まなくなりました。  _Nathan Morgan がプルリクエスト [25655](https://github.com/magento/magento2/pull/25655)_ ードで送信した修正。 [GitHub-25654](https://github.com/magento/magento2/issues/25654)

<!-- ENGCOM-6424-->

* 無効な価格を使用してカテゴリページで製品をフィルタリングしようとすると、アプリケーションがエラーをスローしなくなりました。 以前は、アプリケーションはシステムログにこのエラーを記録していました。 _Ihor Sviziev がプルリクエスト [25912](https://github.com/magento/magento2/pull/25912)_ ードで修正を送信しました。 [GitHub-25911](https://github.com/magento/magento2/issues/25911)

<!-- ENGCOM-6455-->

* 複数ページカテゴリの検索結果間を移動できるようになりました。 以前は、「戻る」ボタンを使用して結果の最初のページに戻ろうとすると、検索結果の重複したページが作成されていました。 _Douglas Radburn がプルリクエスト [25337](https://github.com/magento/magento2/pull/25337)_ ードで修正を送信しました。 [GitHub-14971](https://github.com/magento/magento2/issues/14971)

<!-- ENGCOM-6194-->

* `Eav\Attribute.php` クラスの `getSourceModel` メソッドの戻り値のタイプを `string|null` に修正しました。 _プルリクエスト [25333](https://github.com/magento/magento2/pull/25333)_ ードで Mychailo によって送信された修正。 [GitHub-25278](https://github.com/magento/magento2/issues/25278)

<!-- ENGCOM-6625-->

* 新しい（重複した）製品を保存しても、製品の画像が数百回重複しなくなりました。 _プルリクエスト [25875](https://github.com/magento/magento2/pull/25875)_ ードで Jeroen によって送信された修正。 [GitHub-9466](https://github.com/magento/magento2/issues/9466)

<!-- ENGCOM-6818-->

* 管理者からの注文の作成中にカスタムオプションが `file` タイプの商品を削除しても、JavaScript エラーがスローされなくなりました。  _プルリクエスト [24843](https://github.com/magento/magento2/pull/24843)_ ードで adrian-martinez-interactiv4 によって送信された修正。 [GitHub-24842](https://github.com/magento/magento2/issues/24842)

<!-- ENGCOM-6959-->

* レイアウトで `product_page_image_large` を使用して画像のない製品を作成すると、プレースホルダー画像が期待どおりに表示されます。 以前は、アプリケーションは次のエラーをスローしていました：`Fatal error: PHP Fatal error: Uncaught TypeError: Argument 1 passed to Magento\Catalog\Block\Product\ImageFactory::getRatio() must be of the type integer, null given`。 _Lukasz Bajsarowicz がプルリクエスト [26974](https://github.com/magento/magento2/pull/26974)_ ードで修正を送信しました。 [GitHub-26973](https://github.com/magento/magento2/issues/26973)

<!-- ENGCOM-6983-->

* `POST /V1/:sku/links` エンドポイントを使用すると、製品に既存のリンクがある場合に、製品リンクに空の製品の配列を設定できます。 以前は、アプリケーションがエラーをスローしました。 _Satish Subramanian がプルリクエスト [26979](https://github.com/magento/magento2/pull/26979)_ で修正を送信しました。 [GitHub-26800](https://github.com/magento/magento2/issues/26800)

<!-- ENGCOM-7151-->

* 製品グリッドの「アクション」ドロップダウンメニューを使用して、管理者から複数の製品の属性を更新した際に、製品に重み付けがあるかどうかを指定できるようになりました。  _Bartomiej Szubert がプルリクエスト [26075](https://github.com/magento/magento2/pull/26075)_ に修正を送信しました。 [GitHub-6310](https://github.com/magento/magento2/issues/6310)

<!-- ENGCOM-7453-->

* ストア設定ページの「**Products per Page on Grid Allowed Values**」フィールドと「**Products per Page on Grid Default Value**」フィールドに検証ロジックが追加されました。 以前は、ストア管理者がこれらのフィールドに使用できない値を入力できていました。  _Lukasz Bajsarowicz がプルリクエスト [27093](https://github.com/magento/magento2/pull/27093)_ ードで修正を送信しました。 [GitHub-27089](https://github.com/magento/magento2/issues/27089)_

### カタログウィジェット

<!-- MC-29167-->

* `CatalogWidget` 製品リストがアンカーカテゴリで期待どおりに機能し、アンカーカテゴリの製品が一致して表示されるようになりました。 以前は、アンカーであったものの、割り当てられた製品が含まれていない親カテゴリを選択すると、ウィジェットに製品が表示されませんでした。

<!-- MC-30260-->

* 選択した親カテゴリのすべての子がアプリケーションに期待どおりに表示されるようになりました。 以前は、アンカーであったのに、割り当てられた製品が含まれていない親カテゴリを選択した場合、アプリケーションにはネストされたすべての製品が表示されませんでした。

<!-- MC-31171-->

* **ストア**/**設定**/**カタログ**/**カタログ**/**最近表示/比較**/**ウィジェット製品をバックエンドストレージと同期** が **はい** に設定されている場合、最近表示された製品ウィジェットは正しく機能するようになりました。

### Cleanup

<!-- ENGCOM-6573-->

* モジュール XML からさらに終了タグを削除しました。 _Tejash Kumbhare によってプルリクエスト [26339](https://github.com/magento/magento2/pull/26339)_ ードで送信された修正。 [GitHub-26338](https://github.com/magento/magento2/issues/26338)

<!-- ENGCOM-6521-->

* チェックアウトワークフローの「確認と支払い」ページのセクションにある **請求先と配送先住所が同じです** チェックボックスの位置がずれていた問題を修正しました。  _修正は divyajyothi5321 によってプルリクエスト [26169](https://github.com/magento/magento2/pull/26169)_ で送信されました。 [GitHub-26168](https://github.com/magento/magento2/issues/26168)

<!-- ENGCOM-6581-->

* チェックアウトワークフローの「発送先住所」セクションのフィールドラベルとアスタリスクの間の不要な空白を削除しました。  _Daniel Ruf によってプルリクエスト [26285](https://github.com/magento/magento2/pull/26285)_ ードで送信された修正。 [GitHub-26275](https://github.com/magento/magento2/issues/26275)

<!-- ENGCOM-6480-->

* チェックアウトワークフローの「発送方法」セクションのラジオボタンの位置のずれを修正しました。  _Hitesh によってプルリクエスト [25966](https://github.com/magento/magento2/pull/25966)_ で送信された修正。 [GitHub-25962](https://github.com/magento/magento2/issues/25962)

<!-- ENGCOM-6579-->

* モバイルビューのメニュー間隔の不一致を修正しました。 _Hitesh によってプルリクエスト [26238](https://github.com/magento/magento2/pull/26238)_ で送信された修正。 [GitHub-26235](https://github.com/magento/magento2/issues/26235)

<!-- ENGCOM-7225-->

* モバイル表示でのミニ買い物かごの編集アイコンと削除アイコンの位置ずれを修正しました。  _Vasilii Burlacu がプルリクエスト [27493](https://github.com/magento/magento2/pull/27493)_ で修正を送信しました。 [GitHub-26652](https://github.com/magento/magento2/issues/26652)

<!-- ENGCOM-6967-->

* 「新規税率/郵便番号の追加」ページ（**管理者**/**店舗**/**税金**/**税金ゾーンおよび税率**）の税率の郵便番号範囲とチェックボックスの不整合を修正しました。 _Satish Subramanian がプルリクエスト [26932](https://github.com/magento/magento2/pull/26932)_ で修正を送信しました。 [GitHub-26917](https://github.com/magento/magento2/issues/26917)

<!-- ENGCOM-7237-->

* セットアップウィザードから管理者へのリンクが期待どおりに動作するようになりました。 _Oleh Usik によってプルリクエスト [26100](https://github.com/magento/magento2/pull/26100)_ で送信された修正。 [GitHub-24990](https://github.com/magento/magento2/issues/24990)

<!-- ENGCOM-6531-->

* 管理のキャッシュ管理グリッドのステータス列で、並べ替えが無効になっています。 _Satish Subramanian がプルリクエスト [26215](https://github.com/magento/magento2/pull/26215)_ で修正を送信しました。 [GitHub-26208](https://github.com/magento/magento2/issues/26208)

<!-- ENGCOM-7015-->

* **管理者**/**ストア**/**属性**/**評価**/**新しい評価を追加** ダイアログのページ要素のミスアライメントを修正しました。 _Satish Subramanian がプルリクエスト [27014](https://github.com/magento/magento2/pull/27014)_ で修正を送信しました。 [GitHub-26992](https://github.com/magento/magento2/issues/26992)

<!-- ENGCOM-6485-->

* デザインの変更を追加ページのカレンダーアイコンの位置のずれを修正しました。 _Eduard Chitoraga によってプルリクエスト [26063](https://github.com/magento/magento2/pull/26063)_ ードで送信された修正。 [GitHub-20379](https://github.com/magento/magento2/issues/20379)

<!-- ENGCOM-6447-->

* ホームページのホバーメニューのサブメニュー表示の不要なスペースを削除しました。 _Hitesh によってプルリクエスト [25973](https://github.com/magento/magento2/pull/25973)_ で送信された修正。 [GitHub-25972](https://github.com/magento/magento2/issues/25972)

<!-- ENGCOM-6534-->

* ストアフロントの製品詳細ページの価格ラベルの位置ずれを修正しました。 _修正は divyajyothi5321 によってプルリクエスト [26237](https://github.com/magento/magento2/pull/26237)_ で送信されました。 [GitHub-25936](https://github.com/magento/magento2/issues/25936)

<!-- ENGCOM-6536-->

* モバイル表示の製品リストページの **買い物かごに追加** ボタンに対する、在庫切れのテキストの位置のずれを修正しました。  _修正は divyajyothi5321 によってプルリクエスト [26183](https://github.com/magento/magento2/pull/26183)_ で送信されました。 [GitHub-26181](https://github.com/magento/magento2/issues/26181)

<!-- ENGCOM-6458-->

* **管理者**/**システム**/**拡張機能**/**統合** に表示される統合成功メッセージが正しく表示されるようになりました。 _修正は divyajyothi5321 によってプルリクエスト [26011](https://github.com/magento/magento2/pull/26011)_ で送信されました。 [GitHub-25930](https://github.com/magento/magento2/issues/25930)

### CMS コンテンツ

<!-- MC-29619-->

* CMSのすべてのページを保存および複製できるようになりました。 以前は、特定のページを複製しようとすると、アプリケーションがこの例外をスローしていました。`Unique constraint violation found`。

<!-- MC-30963-->

* ブロックが異なるストアビューに割り当てられている場合、同じ名前のCMS ブロックを作成できるようになりました。

<!-- MC-30103-->

* ギャラリーから選択の画像サムネールが期待どおりにキャッシュされるようになりました。 以前は、これらの画像はその場でサイズ変更されていました。

<!-- MC-32275-->

* 複数のストアに割り当てられたCMSページを保存しても、エラーがスローされなくなりました。 以前は、CMSページを作成または編集すると、ページは保存されましたが、次のエラーもスローされていました：`Item (Magento\VersionsCms\Model\Hierarchy\Node) with the same ID "PAGE_ID" already exists`。

<!-- MC-32452-->

* CMSの新しいページが、web サイトのストアページ階層に期待どおりに追加されるようになりました。

<!-- ENGCOM-7033-->

* CMS ページのカスタムレイアウトの更新ロジックが改善されました。 アプリケーションは、`cms_page_view_selectable_home_somechanges.xml` から特定のレイアウトの変更を適用するようになりました。 _プルリクエスト [27131](https://github.com/magento/magento2/pull/27131)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-26758](https://github.com/magento/magento2/issues/26758)

### 設定可能な製品

<!-- MC-23546-->

* 設定可能な製品の子製品が、API を使用して正常に無効にできるようになりました。

<!-- MC-30391-->

* **条件をカテゴリ（親のみ）に設定した）買い物かご価格ルールが** 期待どおりに一貫して機能するようになりました。

<!-- MC-30989-->

* 「クロスセル」タブから設定可能な製品を買い物かごに追加できます。 製品を選択し、このタブで **買い物かごに追加** をクリックすると、製品の詳細ページに移動し、特定の製品オプションを選択できます。 以前は、アプリケーションは 404 エラーページにリダイレクトしていました。

<!-- MC-32411-->

* これらの製品をリンクする API 呼び出しが失敗した場合、アプリケーションはシンプルな製品を設定可能な製品にリンクしなくなりました。

<!-- ENGCOM-6483-->

* 設定可能な製品の現在のバリエーション リストの SKU のレンダリングを修正しました。 _KaushikChavda によってプルリクエスト [26007](https://github.com/magento/magento2/pull/26007)_ ードで送信された修正。 [GitHub-25591](https://github.com/magento/magento2/issues/25591)

<!-- ENGCOM-6460-->

* ラベル `system.xml` 関連付けられていないフィールドに **管理者**/**システム**/**設定** の値を入力することで、設定情報を保存できるようになりました。 _Andrii Chorniy によってプルリクエスト [25985](https://github.com/magento/magento2/pull/25985)_ ードで送信された修正。 [GitHub-23899](https://github.com/magento/magento2/issues/23899)

<!-- ENGCOM-6689-->

* `\Magento\ConfigurableProduct\Model\Product\Type\Configurable::isSalable` のパフォーマンスを最適化しました。  _Stanislav Ilnytskyi がプルリクエスト [26071](https://github.com/magento/magento2/pull/26071)_ で修正を送信しました。 [GitHub-26065](https://github.com/magento/magento2/issues/26065)

<!-- ENGCOM-6992-->

* 設定可能な商品画像の更新を行うロジックが改善されました。 以前は、設定可能な製品に関連付けられた単純な製品には、設定可能な製品に関連付けられたデフォルトの画像のみが表示されていました。また、アプリケーションでは、製品に間違ったメインの画像が表示されることがありました。 _プルリクエスト [26560](https://github.com/magento/magento2/pull/26560)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-26473](https://github.com/magento/magento2/issues/26473), [GitHub-26856](https://github.com/magento/magento2/issues/26856), [GitHub-26858](https://github.com/magento/magento2/issues/26858)

<!-- ENGCOM-6520-->

* 設定可能な製品の割引オプションを選択すると、アプリケーションに製品の特別価格が期待どおりに表示されるようになりました。 以前は、割引オプションが選択された場合、`class="normal-price"` は `class="special-price"` に変更されませんでした。 _Ravi Chandra によってプルリクエスト [26170](https://github.com/magento/magento2/pull/26170)_ ードで送信された修正。 [GitHub-24972](https://github.com/magento/magento2/issues/24972)

### の Cookie

<!-- MC-24182-->

* `setRedirectCookie` 関数と `clearRedirectCookie` 関数が期待どおりに動作するようになりました。 以前は、これらの関数は Cookie をブラウザーに送信していましたが、すべての Cookie パラメーターが欠落していました。 [GitHub-24547](https://github.com/magento/magento2/issues/24547)

<!-- ENGCOM-6891-->

* `setRedirectCookie` 関数と `clearRedirectCookie` 関数にメタデータが追加されました。  _修正は Alexander Lukyanov によってプルリクエスト [24612](https://github.com/magento/magento2/pull/24612)_ に送信されました。 [GitHub-24547](https://github.com/magento/magento2/issues/24547)

### カスタム顧客属性

<!-- MC-32301-->

* ストアフロントで会社アカウントを作成する際、**Formsの「使用場所**」フィールドに空の顧客属性フィールドを含めると、アプリケーションがエラーをスローしなくなりました。 以前は、アプリケーションは次のエラーをスローしていました：`PHP Fatal error: Uncaught TypeError: Argument 2 passed to Magento\Eav\Model\Attribute\Data\Text::validateLength() must be of the type string, null given`。

### 顧客

<!-- MC-29102-->

* ゲストとしてニュースレターを購読している顧客は、新しいアカウントの登録後に購読を解除されなくなりました。

<!-- MC-29841-->

* アプリケーションでは、パスワードの変更ごとに新しい `PHPSession` を使用するようになりました。

<!-- MC-30650-->

* **顧客**/**すべての顧客**/**新規顧客を追加** の Web サイトに関連付けドロップダウンメニューを使用して、顧客を正常に作成し、特定の Web サイトに関連付けることができるようになりました。 以前は、マルチサイトデプロイメントでデフォルト以外の web サイトに新しい顧客を関連付けようとすると、アプリケーションに次のエラーが表示されていました。`The store view is not in the associated website`

<!-- MC-29946-->

* 無効なクレジットカードが原因で最初に取引が却下され、その後正常に完了した場合、アプリケーションでは、チェックアウト時に顧客がデフォルトの請求フィールドと出荷フィールドに入力した情報を保存するようになりました。 以前は、顧客が有効な支払い情報を入力すると注文が作成されましたが、チェックアウトワークフローの「自分のアカウント」セクションのデフォルトの請求先住所または出荷先住所は更新されませんでした。

<!-- MC-32325-->

* マルチサイトデプロイメントで管理者から新しい顧客を作成する際に、アプリケーションは顧客グループ設定に従うようになりました。

<!-- MC-31481-->

* `cron` が有効で、カスタマーグリッドインデクサーが **スケジュールに従って更新** に設定されている場合、アプリケーションは **「顧客とアドレス （単一ファイル）** オプションを使用して、顧客データを正常に読み込めるようになりました。 `cron` が実行されると、読み込んだ顧客情報は、期待どおりに管理者で使用できます。 以前は、アプリケーションによって顧客データがインポートされましたが、新しくインポートされた顧客レコードで顧客グリッドが更新されませんでした。

<!-- MC-31117-->

* 生年月日が必要な場合、ストアフロントから新しい顧客を作成できるようになりました。 以前は、有効な DOB 値を入力した場合でも、このフィールドが必要な場合に新しい顧客を作成できませんでした。 [GitHub-26700](https://github.com/magento/magento2/issues/26700)

<!-- MC-31945-->

* 管理者からの顧客の作成で、デフォルトの顧客グループ設定が期待どおりに使用できるようになりました。

<!-- MC-31425-->

* ユーザーがログアウトしてから再度ログインした後、`PHPSessionId` は期待どおりに変更されるようになりました。

<!-- MC-32152-->

* 顧客の買い物かごの管理者表示に、複数の Web サイトのデプロイメントで複数の Web サイトから買い物かごに追加されたすべての製品が表示されるようになりました。 以前は、顧客がデフォルト以外の web サイトから買い物かごに製品を追加した場合、「顧客アカウントを共有 **が** グローバル **に設定されていても、製品は管理者に表示され** せんでした。

<!-- ENGCOM-6667-->

* 管理者が買い物かごを表示すると、顧客が買い物かごに入れた製品のみがアプリケーションに表示されるようになりました。 以前は、管理者から表示すると、顧客の買い物かごにカタログ内のすべての製品が表示されていました。 _Ravinder によってプルリクエスト [26489](https://github.com/magento/magento2/pull/26489)_ で送信された修正。 [GitHub-26437](https://github.com/magento/magento2/issues/26437)

<!-- ENGCOM-7036-->

* 管理者から顧客を編集する際に、「**生年月日** フィールドで検証が期待どおりに機能するようになりました。 以前は、アプリケーションはユーザーのロケールを考慮しておらず、一部の誕生日では次のエラーが表示されていました：`The Date of Birth should not be greater than today`。   _プルリクエスト [27149](https://github.com/magento/magento2/pull/27149)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-27027](https://github.com/magento/magento2/issues/27027)

<!-- ENGCOM-6208-->

* 管理者から注文する際に、「電子メール」フィールドは不要になりました。  _プルリクエスト [24479](https://github.com/magento/magento2/pull/24479)_ ードで solwininfotech によって送信された修正。 [GitHub-22251](https://github.com/magento/magento2/issues/22251)

<!-- ENGCOM-6423-->

* マイアカウント ダッシュボードのモバイルビューに、メールアドレスの値が正しく表示されるようになりました。 _Eden Duong によってプルリクエスト [25942](https://github.com/magento/magento2/pull/25942)_ ードで送信された修正。 [GitHub-25935](https://github.com/magento/magento2/issues/25935)

<!-- ENGCOM-7034-->

* 顧客登録フォームで **アカウントの作成** ボタンを複数回クリックしても、登録要求が複数回送信されなくなりました。 _PrinceCB によってプル要求 [26642](https://github.com/magento/magento2/pull/26642)_ で送信された修正。 [GitHub-26590](https://github.com/magento/magento2/issues/26590)

<!-- MC-29102-->

* ゲストとしてニュースレターを購読している顧客は、新しいアカウントの登録後に購読を解除されなくなりました。

<!-- MC-29841-->

* アプリケーションでは、パスワードの変更ごとに新しい `PHPSession` を使用するようになりました。

<!-- MC-30650-->

* **顧客**/**すべての顧客**/**新規顧客を追加** の Web サイトに関連付けドロップダウンメニューを使用して、顧客を正常に作成し、特定の Web サイトに関連付けることができるようになりました。 以前は、マルチサイトデプロイメントでデフォルト以外の web サイトに新しい顧客を関連付けようとすると、アプリケーションに次のエラーが表示されていました。`The store view is not in the associated website`

<!-- MC-29946-->

* 無効なクレジットカードが原因で最初に取引が却下され、その後正常に完了した場合、アプリケーションでは、チェックアウト時に顧客がデフォルトの請求フィールドと出荷フィールドに入力した情報を保存するようになりました。 以前は、顧客が有効な支払い情報を入力すると注文が作成されましたが、チェックアウトワークフローの「自分のアカウント」セクションのデフォルトの請求先住所または出荷先住所は更新されませんでした。

<!-- MC-32325-->

* マルチサイトデプロイメントで管理者から新しい顧客を作成する際に、アプリケーションは顧客グループ設定に従うようになりました。

<!-- MC-31481-->

* `cron` が有効で、カスタマーグリッドインデクサーが **スケジュールに従って更新** に設定されている場合、アプリケーションは **「顧客とアドレス （単一ファイル）** オプションを使用して、顧客データを正常に読み込めるようになりました。 `cron` が実行されると、読み込んだ顧客情報は、期待どおりに管理者で使用できます。 以前は、アプリケーションによって顧客データがインポートされましたが、新しくインポートされた顧客レコードで顧客グリッドが更新されませんでした。

<!-- MC-31117-->

* 生年月日が必要な場合、ストアフロントから新しい顧客を作成できるようになりました。 以前は、有効な DOB 値を入力した場合でも、このフィールドが必要な場合に新しい顧客を作成できませんでした。 [GitHub-26700](https://github.com/magento/magento2/issues/26700)

<!-- MC-31945-->

* 管理者からの顧客の作成で、デフォルトの顧客グループ設定が期待どおりに使用できるようになりました。

<!-- MC-31435-->

* ユーザーがログアウトしてから再度ログインした後、`PHPSessionId` は期待どおりに変更されるようになりました。

<!-- MC-32152-->

* 顧客の買い物かごの管理者表示に、複数の Web サイトのデプロイメントで複数の Web サイトから買い物かごに追加されたすべての製品が表示されるようになりました。 以前は、顧客がデフォルト以外の web サイトから買い物かごに製品を追加した場合、「顧客アカウントを共有 **が** グローバル **に設定されていても、製品は管理者に表示され** せんでした。

<!-- ENGCOM-7036-->

* 管理者から顧客を編集する際に、「**生年月日** フィールドで検証が期待どおりに機能するようになりました。 以前は、アプリケーションはユーザーのロケールを考慮しておらず、一部の誕生日では次のエラーが表示されていました：`The Date of Birth should not be greater than today`。   _プルリクエスト [27149](https://github.com/magento/magento2/pull/27149)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-27027](https://github.com/magento/magento2/issues/27027)

<!-- ENGCOM-6208-->

* 管理者から注文する際に、「電子メール」フィールドは不要になりました。  _プルリクエスト [24479](https://github.com/magento/magento2/pull/24479)_ ードで solwininfotech によって送信された修正。 [GitHub-22251](https://github.com/magento/magento2/issues/22251)

<!-- ENGCOM-6667-->

* 管理者が買い物かごを表示すると、顧客が買い物かごに入れた製品のみがアプリケーションに表示されるようになりました。 以前は、管理者から表示すると、顧客の買い物かごにカタログ内のすべての製品が表示されていました。 _Ravinder によってプルリクエスト [26489](https://github.com/magento/magento2/pull/26489)_ で送信された修正。 [GitHub-26437](https://github.com/magento/magento2/issues/26437)

<!-- ENGCOM-6423-->

* マイアカウント ダッシュボードに、メールアドレスの値がモバイルビューで正しく表示されるようになりました。 _Eden Duong によってプルリクエスト [25942](https://github.com/magento/magento2/pull/25942)_ ードで送信された修正。 [GitHub-25935](https://github.com/magento/magento2/issues/25935)

<!-- ENGCOM-7034-->

* 顧客登録フォームで **アカウントの作成** ボタンを複数回クリックしても、登録要求が複数回送信されなくなりました。 _PrinceCB によってプル要求 [26642](https://github.com/magento/magento2/pull/26642)_ で送信された修正。 [GitHub-26590](https://github.com/magento/magento2/issues/26590)

### ディレクトリ

<!-- MC-33168-->

* 「デフォルトの状態」ドロップダウンメニューは、「**デフォルトの税宛先計算**」フィールドの値を設定する際に、選択した web サイトに割り当てられた許可済みの国に基づくデータで入力されるようになりました。 以前は、このドロップダウンには、デフォルトの web サイトに割り当てられた国が一覧表示されていました。

### ダウンロード可能

<!-- MC-32306-->

* 読み込みファイルを使用して、SKU と説明でダウンロード可能な製品を一括で更新できるようになりました。 以前は、検証エラーが発生し、読み込みに失敗していました。

### EAV

<!-- MC-29999-->

* アプリケーションは、マルチサイトデプロイメントでチェックアウトワークフローの電話番号フィールドが必須かどうかを決定するストア固有の設定に従うようになりました。 以前は、あるストアはチェックアウトワークフローでこのフィールドを必要とし、別のストアは必要としなかったデプロイメントで、このフィールドを必要としなかったストアでチェックアウト中にフィールドを完了しなかったお客様に、次のエラーが発生しました。`Please check the shipping address information. "telephone" is required. Enter and try again`

<!-- ENGCOM-6489-->

* `attribute option_id` による EAV の並べ替え順が期待どおりに動作するようになりました。 _Tan Sezer によってプルリクエスト [24360](https://github.com/magento/magento2/pull/24360)_ で送信された修正。 [GitHub-24357](https://github.com/magento/magento2/issues/24357)

<!-- ENGCOM-7082-->

* REST を使用して新しい属性を追加し、管理者から属性セットに割り当てた後、新しい製品を作成できるようになりました。 以前は、アプリケーションは 500 エラーをスローしました。  _プルリクエスト [27191](https://github.com/magento/magento2/pull/27191)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-26827](https://github.com/magento/magento2/issues/26827)

### 電子メール

<!-- MC-32842-->

* 顧客が返品をリクエストする際に送信される認証メールには、期待どおりに RMA ステータスが含まれるようになりました。 以前は、このメールには、期待される戻り値のステータスではなく、空の文字列が表示されていました。

<!-- MC-32864-->

* 顧客アカウントがグローバルに共有されるマルチサイト展開でパスワードを忘れた場合に、現在の web サイトからリダイレクトされなくなりました。 以前は、顧客はアカウントが作成された web サイトにリダイレクトされていました。

<!-- MC-31544-->

* 顧客に送信される注文確認メールに、注文された項目のリストが期待どおりに含まれるようになりました。 以前は、デフォルトのテンプレートを読み込んで保存することで管理者でメールテンプレートを作成した場合、このテンプレートから生成されるメールには、並べ替えられた項目のリストが含まれていませんでした。 [GitHub-26882](https://github.com/magento/magento2/issues/26882)

### フレームワーク

* Zend フレームワークの Linux 基盤の Laminas プロジェクトへの移行を反映するため、Zend フレームワークの依存関係が [Laminas プロジェクト ](https://getlaminas.org/about/foundation) に移行されました。 Zend フレームワークは廃止されました。 _Ihor Sviziev がプルリクエスト [26436](https://github.com/magento/magento2/pull/26436)_ ードで修正を送信しました。 [GitHub-26335](https://github.com/magento/magento2/issues/26335)

<!-- MC-25257-->

* 特殊な価格範囲設定（開始日/終了日）が、オランダ語ロケールを使用した管理者アカウントで正しく機能するようになりました。

<!-- MC-29388-->

* `php bin/magento cron:run` は、変更ログテーブルからの項目を複数回処理しなくなりました。 以前は、変更ログテーブルに 100000 つ以上の新しいバージョンがある場合、同じ `entity id` ージに対してアクションを複数回呼び出すことができました。

* コマ `php bin/magento setup:cron:run` ドが削除されました。 crontabs にあるこれに対する参照はアップグレード時に削除してください。

* `update/cron.php` ファイルは 2.4.0 で削除されました。このファイルがインストール上に存在する場合は、安全に削除できます。 また、アップグレード時には crontab でこのファイルへの参照を削除してください。

<!-- MC-30544-->

* 管理者の製品を編集ページで製品を更新する際に、属性を更新アクションで `catalog_product_entity` から製品の `updated_at column` のタイムスタンプが正しく更新されるようになりました。

<!-- MC-30834-->

* `env.php` で `'persistent' => '1'` を設定しても、`setup:upgrade` を実行したときにエラーがスローされなくなりました。

<!-- MC-32243-->

* **無効なフォームキー。 ページを更新してください** ログインページのテキスト文字列は期待どおりに翻訳されました。

<!-- MC-33278-->

* `Magento\Framework\App\DeploymentConfig\Reader::load` 関数のパフォーマンスを改善しました。 以前は、Magentoに対してリクエストが行われた際に、この関数が繰り返し呼び出されたため、メソッドが呼び出されるたびに `config.php` および `env.php config` のファイルが読み込まれていました。

<!-- MC-31728-->

* 管理者が管理者から注文を作成する際に製品をクリックしても、アプリケーションが `blank.html` ページをダウンロードしなくなりました。

<!-- MC-31729-->

* ページ上の存在しない（宣言されていない）コンポーネントの参照手順のデフォルトレイアウトに追加されたキャッシュ不可ブロックが、ページのキャッシュに影響を与えなくなりました。 キャッシュ不可ブロックをデフォルトのレイアウトハンドラーに追加すると、すべてのページがキャッシュ不可になります。 これは、レイアウト生成プロセスが原因です。レイアウトの生成中、アプリケーションは特定のページで使用可能なすべてのレイアウトハンドルを収集し、それらからの指示をページの最終的なレイアウト構造に結合します。 デフォルトのレイアウトハンドルは、すべてのページの基本ハンドルとして使用されます。 その結果、デフォルトハンドラー用に宣言されたレイアウトの更新がすべてのページに表示されます。 [GitHub-9041](https://github.com/magento/magento2/issues/9041)

<!-- MC-31920-->

* MySQL ロックマネージャーがプライマリロックマネージャーになりました。 その結果、MySQL に必要な最小バージョンは 5.7.9 です。

<!-- ENGCOM-6431-->

* `queue_consumer.xml` では、`handler` クラスの数値を使用できるようになりました。 以前は、ハンドラーのパスに数値が含まれていると、XSD の検証が失敗していました。 _Eden Duong によってプルリクエスト [25952](https://github.com/magento/magento2/pull/25952)_ ードで送信された修正。 [GitHub-25731](https://github.com/magento/magento2/issues/25731)

<!-- ENGCOM-6902-->

* クラス `\Magento\Framework\MessageQueue\Topology\Config` のクラス メンバ変数 `$queueIterator` の `doc` ブロックにある誤った `@var` 参照が修正されました。 _Artem Voloznov がプルリクエスト [24976](https://github.com/magento/magento2/pull/24976)_ で送信した修正。 [GitHub-24971](https://github.com/magento/magento2/issues/24971)

<!-- ENGCOM-5305 6684-->

* JavaScript ページの読み込みリスナーが、ドキュメントが「`complete`」とマークされるまで待たずに「`complete`」とマークされるまで待つと、JavaScript コンテンツのレンダリングで重大な遅延が発生する可能性があり、ドキュメントが `loading` ージされなくなった場合にトリガーされるようになりました。 _John Hughes によってプルリクエスト [23313](https://github.com/magento/magento2/pull/23313) とプルリクエスト [50](https://github.com/magento/partners-magento2ee/pull/50)_ で送信された修正。 [GitHub-22909](https://github.com/magento/magento2/issues/22909)

<!-- ENGCOM-6305-->

* 数量が 0 または負の数の商品をウィッシュリストに追加しようとすると、アプリケーションに次の情報メッセージが表示されるようになりました。`Please enter a valid number in this field`。 以前は、アプリケーションに「`We can't update your Wish List right now`」というエラーが表示されていました。 _Pawe Tylek がプルリクエスト [25641](https://github.com/magento/magento2/pull/25641)_ ードで修正を送信しました。 [GitHub-25032](https://github.com/magento/magento2/issues/25032)

<!-- ENGCOM-7071-->

* アプリケーションは、`Magento\Framework\Api\AbstractExtensibleObject` クラスからの DTO クラスの継承をサポートしなくなりました。 PHP 注釈 `@api` がありません  が `AbstractExtensibleModel` に追加され、見つからない `@deprecated` が  `AbstractExtensibleObject` に注釈が追加されました。  _Alexander Taranovsky がプルリクエスト [22011](https://github.com/magento/magento2/pull/22011)_ で送信した修正。 [GitHub-22010](https://github.com/magento/magento2/issues/22010)

<!-- ENGCOM-6552-->

* 英語以外のロケールを実装するストアで製品関連の日付（`news_from_date`、`news_to_date`、`special_price_from_date`、`special_price_to_date` など）を変更した後、製品を期待どおりに保存できるようになりました。 以前は、アプリケーションは次のようなエラーをスローしていました：`Invalid input datetime format of value '22/5/2019`。

### 一般的な修正点

<!-- MC-21347-->

* 顧客モジュールは、レビューモジュールに依存しなくなりました。 以前は、この依存関係が原因でレビューモジュールを無効にすることができませんでした。

<!-- MC-25250-->

* ページのデフォルトの属性セットに、選択ラベルを持つ dropdown 属性が含まれる場合、製品の編集ページが正常に読み込まれるようになりました。

<!-- MC-25260-->

* 管理者の「注文」タブからアクセスできるグラフィカルな注文グラフに、注文数量が正確に反映されるようになりました。

<!-- MC-29273-->

* これらの 2 つの URL が異なる場合、ストアの管理 URL がストアフロント URL にリダイレクトされなくなりました。

<!-- MC-29658-->

* 複数の web サイトで Performance Toolkit プロファイルを使用する場合、サブカテゴリの URL 書き換え生成が正しく機能するようになりました。

<!-- MC-30224-->

* 割り当て先の管理者ロールを削除しなくても、空のユーザーモデルを削除できるようになりました。

<!-- MC-30636-->

* TinyMCE4 エディタは、すべてのHTMLタグをサポートするようになりました。

<!-- MC-31128-->

* クレジットメモの作成ワークフローで「**オフラインでの返金**」ボタンをクリックすると、クレジットメモが期待どおりに生成されるようになりました。 以前は、JavaScriptのエラーによってこのボタンが使用不可になり、クレジット・メモは作成されませんでした。

<!-- MC-31832-->

* マーチャントは、`Decimal` タイプの製品属性を作成できるようになりました。 以前は、以前のバグ修正により、アプリケーションに製品属性タイプ `Price` が表示されていませんでした。 [GitHub-26949](https://github.com/magento/magento2/issues/26949)

<!-- MC-32175-->

* カテゴリページの「デザイン」タブで **レイアウト =製品 – 全幅** が設定されている場合に、ストアフロントでカテゴリページを開こうとすると 500 エラーが返されなくなりました。

<!-- MC-32697-->

* `AbstractSimpleObjectBuilder.php` のバグを修正しました。

<!-- MC-33427-->

* MAP （最低広告価格）がグループ製品で期待どおりに動作するようになりました。

<!-- MC-29998-->

* マルチストアデプロイメントでCMS ページの言語を変更すると、適切なストアビューのホームページにリダイレクトされるようになりました。 以前は、特定のCMS ページで言語を変更すると、404 ページが表示されていました。

<!-- MC-30162-->

* 注文クエリ（`SalesOrderIndexGridAsyncInsertCron`）は、返されるデータセットのサイズとクエリの頻度を減らすためにリファクタリングされました。

<!-- MC-32371-->

* これで、CMS ページを正常に作成して、CMS階層の web サイトのルートカテゴリに割り当てることができます。

<!-- MC-32783-->

* カテゴリ権限が有効な場合（例えば、「ログインしていない **顧客グループにこれらの権限が付与されている場合）、ゲストは製品価格を表示したり** 買い物かごに製品を追加したりできるようになりました。

<!-- MC-32815-->

* 商品ルールが、在庫切れの製品に期待どおりに適用されるようになりました。 以前は、ルールが在庫切れ製品を表示するように設定されている場合でも、アプリケーションは関連製品リストに在庫切れ製品を表示しませんでした。

<!-- MC-33222-->

* 管理者から注文の **配送を追跡** ボタンをクリックすると、トラッキング情報が期待どおりにポップアップウィンドウに表示されるようになりました。 以前は、このリンクをクリックすると、管理者はログインページに移動していました。

<!-- MC-31305-->

* 複数選択の顧客属性を含む登録フォームを顧客が完了しようとするとエラーが発生した場合、アプリケーションに情報エラーメッセージが表示され、登録フォームが引き続き期待どおりに表示されるようになりました。 以前は、アプリケーションで 500 エラーが表示されていました。

<!-- MC-32224-->

* 受注の一部払戻の後に「**クレジット・メモ**」ボタンが表示されるようになりました。 以前は、一部払戻を作成した後は、このボタンが表示されず、残りの受注にはクレジット・メモを作成できませんでした。

<!-- MC-31878-->

* REST を通じた一括注文の更新で、注文ステータスが期待どおりに変更されるようになりました。 以前は、アプリケーションは次のエラーをスローしていました：`report.ERROR: Property "AdditionalInformation" does not have accessor method "setAdditionalInformation" in class "Magento\Sales\Api\Data\OrderPaymentInterface".`

<!-- MC-30398-->

* 属性フィルターが、カテゴリページのショッピングオプションブロックに期待どおりに表示されるようになりました。

<!-- ENGCOM-7175-->

* Internet Explorer で表示される際、管理者の顧客編集ページの「アドレス」タブで、顧客の請求アドレスと配送先住所が期待どおりに表示されるようになりました。 _Vasilii Burlacu がプルリクエスト [27383](https://github.com/magento/magento2/pull/27383)_ で修正を送信しました。 [GitHub-27370](https://github.com/magento/magento2/issues/27370)

<!-- ENGCOM-6546-->

* ブックマーク ビューを削除しても、すべてのブックマーク ビューが編集可能なままになりました。 以前は、複数のブックマークビューを持つアカウントの最初のビューを削除した後、すべてのブックマークビューが編集できなくなりました。 _Bartomiej Szubert がプルリクエスト [26263](https://github.com/magento/magento2/pull/26263)_ に修正を送信しました。 [GitHub-14913](https://github.com/magento/magento2/issues/14913)

<!-- ENGCOM-7042-->

* レイヤー化されたナビゲーションで、スウォッチモジュールのHTML5 検証が機能しなくなりました。 以前は、[W3C マークアップ検証サービスで定義されていない属性に対してHTML検証エラーが発生していましたが ](https://validator.w3.org/) これらの属性はデータ属性に変更されました。 _修正は Nirav Patel によってプルリクエスト [26055](https://github.com/magento/magento2/pull/26055)_ に送信されました。 [GitHub-22363](https://github.com/magento/magento2/issues/22363)

<!-- ENGCOM-7065-->

* 未使用の `require.JS` エイリアス（`critical-css-loader` `) has been removed from app/code/Magento/Theme/view/frontend/requirejs-config.js`。 _修正は Tu Nguyen によってプルリクエスト [26987](https://github.com/magento/magento2/pull/26987)_ に送信されました。 [GitHub-26963](https://github.com/magento/magento2/issues/26963)

<!-- ENGCOM-6242-->

* アプリケーションは PHP7.x の [throwable interface](https://www.php.net/manual/en/class.throwable.php) を実装し、パスワードなどの機密情報を公開する可能性のあるすべてのエラーを検出できるようになりました。 _プルリクエスト [25250](https://github.com/magento/magento2/pull/25250)_ で miszyman によって送信された修正。 [GitHub-23350](https://github.com/magento/magento2/issues/23350)

<!-- ENGCOM-6284-->

* 新しいフォルダーを作成ポップアップウィンドウで新しいフォルダーの名前を入力する際に Esc キーを押すと、フォルダーを作成せずに期待どおりにポップアップが閉じるようになりました。  _Shankar Konar がプルリクエスト [25349](https://github.com/magento/magento2/pull/25349)_ で修正を送信しました。 [GitHub-572](https://github.com/magento/magento2/issues/572)

<!-- ENGCOM-7464-->

* 誤ってネストされたHTMLー構造が修正されました。 以前は、この構造により、関連製品、アップセル製品またはクロスセル製品のリストのレイアウトが崩れていました。 _Pieter Hoste がプルリクエスト [27926](https://github.com/magento/magento2/pull/27926)_ ードで修正を送信しました。 [GitHub-27920](https://github.com/magento/magento2/issues/27920)

<!-- ENGCOM-7144-->

* `ORDER BY` で 2 つの類似した条件が発生していた `addToolbarBlock` への重複した呼び出しを削除しました。  _Vasilii Burlacu がプルリクエスト [27263](https://github.com/magento/magento2/pull/27263)_ で修正を送信しました。 [GitHub-26708](https://github.com/magento/magento2/issues/26708)

<!-- ENGCOM-6014-->

* マーチャントは、管理者ユーザーアカウントに有効期限を設定できるようになりました。 _Laura Folco によってプルリクエスト [22837](https://github.com/magento/magento2/pull/22837)_ ードで送信された修正。 [GitHub-22833](https://github.com/magento/magento2/issues/22833)

<!-- ENGCOM-7071-->

* `@api` の PHP 注釈を `AbstractExtensibleModel` に、`@deprecated` の PHP 注釈を `AbstractExtensibleObject` に、`@see` を `AbstractExtensibleModel` に追加しました。  _Alexander Taranovsky がプルリクエスト [22011](https://github.com/magento/magento2/pull/22011)_ で送信した修正。 [GitHub-22010](https://github.com/magento/magento2/issues/22010)

### GraphQL

<!-- ENGCOM-7074-->

* 買い物かごが非アクティブになり、新しい買い物かご ID が作成された場合、特定の状況下では `Current user does not have an active cart` ではなく、GraphQLのメッセージ `The cart isn't active` が返されるようになりました。 _プルリクエスト [27187](https://github.com/magento/magento2/pull/27187)_ ードで Vadim Malesh によって送信された修正。 [GitHub-26117](https://github.com/magento/magento2/issues/26117)

<!-- ENGCOM-7105-->

* 以前に追加された商品が在庫切れになったときに、GraphQLを使用して買い物かごに商品を追加するとエラーが発生するコードを削除しました。 _AleksLi によってプル要求 [27015](https://github.com/magento/magento2/pull/27015)_ で送信された修正。 [GitHub-26683](https://github.com/magento/magento2/issues/26683)

<!-- ENGCOM-6535-->

* GraphQLで、products クエリでフラグメントを使用する際に、必要な情報の一部が返されなかった問題を修正しました。 _Riccardo Tempesta がプルリクエスト [26218](https://github.com/magento/magento2/pull/26218)_ ードで送信した修正。 [GitHub-26217](https://github.com/magento/magento2/issues/26217)

* GraphQL ミューテーション `setShippingMethodsOnCart`、`available_shipping_methods` 属性の間違ったデータを取得しなくなりました。 _プルリクエスト [27004](https://github.com/magento/magento2/pull/27004)_ ードで Vadim Malesh によって送信された修正。 [GitHub-26742](https://github.com/magento/magento2/issues/26742)

### グループ化された製品

<!-- ENGCOM-6115-->

* 同じグループに属する別のシンプルな製品が在庫切れの場合、そのグループ製品に属するシンプルな製品を買い物かごに追加できるようになりました。  _Gihovani Filipp Pereira Detrio がプルリクエスト [24955](https://github.com/magento/magento2/pull/24955)_ ードで送信したm̩修正。 [GitHub-22304](https://github.com/magento/magento2/issues/22304)

<!-- ENGCOM-6768-->

* アプリケーションは、払い戻されたグループ製品に関するメールを期待どおりに顧客に送信するようになりました。  _Alexander Taranovsky がプルリクエスト [26246](https://github.com/magento/magento2/pull/26246)_ で送信した修正。 [GitHub-26245](https://github.com/magento/magento2/issues/26245)

<!-- MC-30313-->

* グループ化された製品の他の子製品の 1 つが在庫切れの場合、グループ化された製品の子製品を買い物かごに追加できるようになりました。 以前は、1 つの子製品が在庫切れだった場合、他の子製品を買い物かごに追加することはできませんでした。

### 画像

<!-- MC-29523-->

* カテゴリ画像を保存する際に、画像が期待どおりに `pub/media/catalog/category` に保存されるようになりました。 以前は、アプリケーションによってこれらの画像が `pub/media/catalog/tmp/category` に保存されていました。

<!-- MC-30320-->

* 透かし画像でオーバーレイする製品画像が不明瞭にななくなりました。 以前は、透かし画像が適用先の商品画像よりも大きい場合、商品画像が表示されませんでした。

<!-- MC-32273-->

* これで、管理者からカテゴリに画像を正常に保存できるようになりました。 以前は、画像を保存した後に URL の一部が見つからず、画像を再度開くことができませんでした。

<!-- MC-31727-->

* アプリケーションは、アップロード後 `.png` 期待どおりに画像を表示するようになりました。

<!-- ENGCOM-7063-->

* REST を使用して画像を追加または更新すると、画像のサムネールが期待どおりに作成されるようになりました。 _プルリクエスト [27170](https://github.com/magento/magento2/pull/27170)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-26825](https://github.com/magento/magento2/issues/26825)

<!-- ENGCOM-6962-->

* `Block\Product\ImageFactory` で生成された画像のカスタム属性が正しくレンダリングされるようになりました。 以前は、HTML出力のエスケープが誤っているので、独自のカスタム属性を属性マークアップに追加することができませんでした。 _Fix submitted by alexander-aleman in pull request [26959](https://github.com/magento/magento2/pull/26959)_. [GitHub-25219](https://github.com/magento/magento2/issues/25219)

<!-- ENGCOM-5980-->

* iPhoneからストアフロントを表示した際に画像がぼかされなくなりました。  _Dmitriy によってプル要求 [24743](https://github.com/magento/magento2/pull/24743)_ で送信された修正。 [GitHub-24735](https://github.com/magento/magento2/issues/24735)

<!-- ENGCOM-6999-->

* ストアフロントの画像がレスポンシブになりました。 以前は、画像の高さが歪んでいました。  _Sean van Zuidam によってプルリクエスト [27041](https://github.com/magento/magento2/pull/27041)_ ードで送信された修正。 [GitHub-27040](https://github.com/magento/magento2/issues/27040)

<!-- ENGCOM-7253-->

* `Magento_blank` テーマを使用する際に、デフォルトのストアロゴがストアフロントに表示されるようになりました。 _Vasilii Burlacu がプルリクエスト [27497](https://github.com/magento/magento2/pull/27497)_ で修正を送信しました。 [GitHub-27496](https://github.com/magento/magento2/issues/27496)

### インポート/エクスポート

<!-- MC-25206-->

* インポートされたデータに `swatch_image` のストア表示キーが含まれ、その値が `no_selection` の場合、アプリケーションはインポート時にエラーをスローしなくなりました。 以前は、アプリケーションは次のエラーをスローしていました：`Imported resource (image) could not be downloaded from external resource due to timeout or access permissions in row(s): 1`。 [GitHub-25026](https://github.com/magento/magento2/issues/25026)

<!-- MC-29417-->

* 複数のストアビューを持つデプロイメントで製品を読み込む際に `hide_from_product_page` 設定を使用する場合、アプリケーションは画像を期待どおりに更新するようになりました。

<!-- MC-29677-->

* 製品の `entity_id` に等しくない場合に、カスタマイズ可能 `row_id` オプションが期待どおりに読み込まれるようになりました。 以前は、製品の `entity_id` と等しくない場合、アプリケーションはカスタマイズ可能 `row_id` オプションを読み込まなかったため、特定の製品が読み込まれませんでした。

<!-- MC-29916-->

* 設定可能な製品に関連付けられた画像が読み込み時に適切にアップロードされ、製品の編集ページから期待どおりに表示できるようになりました。

<!-- MC-30304-->

* 書き出された `.csv` ファイルに、在庫中または在庫切れの商品を含めるためのフィルター設定が反映されるようになりました。 以前は、アプリケーションは、選択した在庫設定に関係なく、すべての製品を書き出していました。

<!-- MC-30323-->

* 読み込みワークフローの「顧客およびアドレス」単一ファイルオプションを使用して、顧客を正常に読み込みまたは更新できるようになりました。 以前は、このオプションを選択すると、アプリケーションは顧客データをインポートせず、次のエラーが表示されていました：`Invalid data for insert`。

<!-- MC-30357-->

* Stock インデクサーが読み込み後、期待どおりにトリガーされ、製品ステータスが更新されるようになりました。 以前は、Stock インデクサーは、変更された製品在庫データのインデックスを作成しませんでした。

<!-- MC-30528-->

* `store_view_code` が指定されている場合に、設定可能な製品の子製品のすべてのカスタムオプションが正常に読み込まれるようになりました。 これは、設定可能な製品を個別に読み込むか、まとめて読み込むかを選択して機能します。 以前は、読み込みファイルに複数の項目が含まれ、`store_view_code` が指定されている場合、アプリケーションはすべてのカスタムオプションを正常に読み込めませんでした。

<!-- MC-30672-->

* 読み込んだ `.csv` ファイル内で、重複したキーを持つ製品を識別するメッセージが、製品の読み込み時にアプリケーションに表示されるようになりました。 マーチャントはこの情報を使用して競合を解決できます。 以前は、アプリケーションに次のエラーが表示されていました。`Notice: Undefined index: name in /var/www/html/ee233dev/app/code/Magento/CatalogImportExport/Model/Import/Product.php on line 2524`

<!-- MC-29960-->

* **システム**/**エクスポート** リストからディレクトリを削除しようとすると、アプリケーションにより詳細なエラーメッセージが表示され、ダウンロードリンクは表示されません。 以前は、このリストからディレクトリを削除しようとすると、ダウンロードできなかったファイルのダウンロードリンクが引き続き表示され、情報を示さないエラーメッセージが表示されていました。

<!-- MC-29959-->

* 読み込み時に使用される `.csv` ファイルに、ダウンロード可能な製品の正しいリンクが含まれ、ダウンロード可能な製品の読み込みと更新をサポートするように正しくフォーマットされるようになりました。

<!-- MC-30189-->

* 置き換えの読み込み動作を設定し、以前に書き出した `.csv` ファイルを選択して、「**データをチェック**」をクリックすると、アプリケーションは `.csv` ファイルを正常に書き出すようになりました。 以前は、アプリケーションに「`Data validation failed. Please fix the following errors and upload the file again`」と「`Following Error(s) has been occurred during importing process`」というエラーが表示されていました。

<!-- MC-30141-->

* Stock インデクサーが読み込み後、期待どおりにトリガーされ、製品ステータスが更新されるようになりました。 以前は、Stock インデクサーは、変更された製品在庫データのインデックスを作成しませんでした。

<!-- MC-31198-->

* 製品の読み込み時に生成される `.csv` ファイルに、期待どおりにダウンロード可能な製品のグループタイトルが含まれるようになりました。 以前は、読み込み時に不要な `group_title` の検証を行うことで、ダウンロード可能な製品のグループタイトルが表示されていませんでした。

<!-- MC-32153-->

* `cron` が有効な場合、「**（顧客とアドレス （単一ファイル））」オプションを使用して顧客のインポートを実行すると** アプリケーションは、期待どおりに管理者の顧客グリッドにデータを入力します。 `customer_grid indexer` で手動によるインデックス再作成が完了すると、カスタマーグリッドに顧客が表示されます。 以前は、アプリケーションは、新しくインポートされた顧客アドレスで顧客グリッドを更新していませんでした。

<!-- MC-32154-->

* 自動でのインデックス再作成後、アプリケーションで顧客リストが期待どおりに表示されるようになりました。 以前は、`bin/magento index:reindex` を手動で実行しても機能していましたが、自動インデックス再作成後にカスタマーグリッドに顧客情報が表示されませんでした。

<!-- MC-30148-->

* アプリケーションは、製品の読み込みが完了した後、期待どおりに `<Magento_home>/var` から一時ファイルを削除するようになりました。

<!-- MC-31879-->

* ファイルを使用して製品をインポートする際に、アプリケーションによって管理画面に重複した SKU が作成され `.csv` くなりました。

<!-- ENGCOM-6141-->

* 読み込んだ設定可能な属性の値に等号（=）が含まれている場合でも、読み込みが失敗しなくなりました。 _dhoang89 がプルリクエスト [25194](https://github.com/magento/magento2/pull/25194)_ で送信した修正。 [GitHub-25188](https://github.com/magento/magento2/issues/25188)

<!-- ENGCOM-6901-->

* 書き出されるすべてのグリッドデータ（Magento Open Sourceとカスタムデータの両方）に、タイプ `Select` または `Multiselect` のすべての列のオプション値ではなく、オプションラベルが付くようになりました。 以前は、このデータを書き出した場合、書き出されたスプレッドシートには、グリッドに表示された値ではなく、ID を持つ列が含まれていました。 _Maksym Novik によってプルリクエスト [26523](https://github.com/magento/magento2/pull/26523)_ ードで送信された修正。 [GitHub-25963](https://github.com/magento/magento2/issues/25963)

<!-- ENGCOM-7145-->

* `.csv` ファイルを読み込んで製品を更新した後、アプリケーションで、ストアフロントにバンドル製品が期待どおりに表示されるようになりました。 _Pavel Bystritsky によってプルリクエスト [25664](https://github.com/magento/magento2/pull/25664)_ で送信された修正。 [GitHub-25540](https://github.com/magento/magento2/issues/25540)

### 索引

<!-- MC-25236 30779-->

* `indexer_update_all_views` の性能を向上させた。 インデックス作成が高速になり、非アクティブなルールは処理されなくなり、変更された製品のみのエントリがキャッシュに消去されるようになりました。

<!-- MC-29917-->

* ストアフロントの製品価格に、予定されているカタログ価格ルールの更新の適用が正確に反映されるようになりました。 以前は、手動でインデックスを再作成するまで、価格はスケジュールされた買い物かご価格ルールを反映しませんでした（`php bin/magento indexer:reindex catalogrule_rule`）。

<!-- MC-30588-->

* 検索不能な（つまり、`is_searchable`、`is_filterable`、`is_visible_in_advanced_search` 属性が無効になっている）属性を追加した後で、製品データベースのインデックスを正常に再作成できるようになりました。

<!-- ENGCOM-6533-->

* インデックス再作成操作が失敗したときに、インデクサーとインデックス作成操作にかかった時間を識別するメッセージがアプリケーションに表示されるようになりました。 _Lukasz Bajsarowicz がプルリクエスト [26207](https://github.com/magento/magento2/pull/26207)_ ードで修正を送信しました。 [GitHub-26206](https://github.com/magento/magento2/issues/26206)

<!-- ENGCOM-7179-->

* `onthefly` インデクサーとフラットテーブルが有効になっているストアに保存された製品で、web サイトの割り当てが考慮されるようになりました。 以前は、製品からすべての web サイト割り当てを削除して保存すると、指定した web サイト割り当てにもかかわらず、すべてのフラットテーブルに製品が含まれていました。  _Abel Truong がプルリクエスト [27365](https://github.com/magento/magento2/pull/27365)_ で修正を送信しました。 [GitHub-16315](https://github.com/magento/magento2/issues/16315)

### インフラストラクチャ

* Internet Explorer 11.x ブラウザーはサポートされなくなりました。

<!-- MC-32223-->

* 顧客登録フォームの **生年月日** フィールドに関連付けられている検証ロジックで、JavaScript エラーがトリガーされなくなりました。

<!-- ENGCOM-7000-->

* カテゴリリポジトリー `get()` ースのメソッドの `$storeId` をカバーするための統合テストを追加しました。 _Lukasz Bajsarowicz がプルリクエスト [27048](https://github.com/magento/magento2/pull/27048)_ ードで修正を送信しました。 [GitHub-27044](https://github.com/magento/magento2/issues/27044)

<!-- ENGCOM-6378-->

* Safari で **すべての Cookie をブロック** 設定を有効にすると、JavaScript エラーが発生しなくなり、`cookies disabled` のメッセージが期待どおりに表示されます。 以前は、アプリケーションはコンソールに複数の `SecurityError (DOM Exception 18): The operation is insecure` エラーを表示していました。 _プルリクエスト [25324](https://github.com/magento/magento2/pull/25324)_ ードで Rl a̼ Verdugo Lorenzo によって送信された修正。 [GitHub-13865](https://github.com/magento/magento2/issues/13865)

<!-- ENGCOM-6674-->

* 統合テストの実行時にアプリケーションが次のエラーをスローしなくなりました：`Error: Call to a member function findFile() on array (/var/www/html/lib/internal/Magento/Framework/Code/Generator/DefinedClasses.php:59)`。 以前は、`AutoloaderRegistry::getAutoloader` の問題により統合テストがランダムに失敗していました。 _Lukasz Bajsarowicz がプルリクエスト [26480](https://github.com/magento/magento2/pull/26480)_ ードで修正を送信しました。 [GitHub-26479](https://github.com/magento/magento2/issues/26479)

<!-- ENGCOM-6958-->

* `/module-sales/view/frontend/templates/order/order_date.phtml` の `date` タグは `span` に修正されました。 以前は、ストアフロントの **マイアカウント**/**マイ注文** ページで **注文を表示** をクリックすると、アプリケーションが `exception.log` ファイルにエラーを記録していました。 _Andrii Chorniy によってプルリクエスト [25895](https://github.com/magento/magento2/pull/25895)_ ードで送信された修正。 [GitHub-13269](https://github.com/magento/magento2/issues/13269), [GitHub-25738](https://github.com/magento/magento2/issues/25738)

<!-- ENGCOM-6316-->

* JavaScript Mixin モジュールは、高度なバンドルモジュール用の Mixin の読み込みと適用を改善するためにリファクタリングされました。 以前は、アプリケーションは、高度なバンドルモジュールの Mixin を読み込んだり適用したりしませんでした。  _Mateusz Krzeszowiak によってプルリクエスト [25587](https://github.com/magento/magento2/pull/25587)_ ードで送信された修正。 [GitHub-25586](https://github.com/magento/magento2/issues/25586)

<!-- ENGCOM-6344-->

* `grunt clean` コマンドは、生成されたコードとメタデータフォルダーを期待どおりにクリーンアップするようになりました。 _Andrii Beziazychnyi がプルリクエスト [25765](https://github.com/magento/magento2/pull/25765)_ で送信した修正。 [GitHub-25739](https://github.com/magento/magento2/issues/25739)

<!-- ENGCOM-6463-->

* 結果（`ProductMetadata::getVersion`） `getVersion` キャッシュされるようになり、`ProductMetadata::getVersion` メソッドのパフォーマンスが向上しました。  _Lukasz Lewandowski によってプルリクエスト [26001](https://github.com/magento/magento2/pull/26001)_ ードで送信された修正。 [GitHub-24025](https://github.com/magento/magento2/issues/24025)

<!-- ENGCOM-7037-->

* `additional_information` の不明な setter が `OrderPaymentInterface` に追加され、スキーマ宣言と受け入れられるプロパティ間の不整合を解決します。 _Antonino Bonumore によりプルリクエスト [26748](https://github.com/magento/magento2/pull/26748)_ で送信された修正。 [GitHub-26745](https://github.com/magento/magento2/issues/26745), [GitHub-13222](https://github.com/magento/magento2/issues/13222)

### 階層型ナビゲーション

<!-- MC-31763-->

* ストアフロントのプロパティで **&#x200B;**&#x200B;レイヤナビゲーションで使用：フィルタリング可能（結果を含む **が有効になっている場合に、カテゴリページで** はい/いいえ」属性がレンダリングされるようになりました。

<!-- ENGCOM-6807-->

* 冗長な `\Magento\Sales\Model\Order\Email\Sender\ShipmentSender` は廃止され、`\Magento\Sales\Model\Order\Shipment\Sender\EmailSender` に置き換わりました。 _修正は、Adarsh Manickam によってプルリクエスト [26714](https://github.com/magento/magento2/pull/26714)_ に送信されました。 [GitHub-14885](https://github.com/magento/magento2/issues/14885)

### メディアギャラリー

<!-- ENGCOM-6993-->

* メディアギャラリーで新しいフォルダーに名前を付けた後に **Enter** をクリックすると、加えたすべての変更が保存されるようになりました。 以前は、マウスを使用して **OK** を選択する代わりに **Enter** をクリックすると、すべての変更が失われていました。  _プルリクエスト [27029](https://github.com/magento/magento2/pull/27029)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-26847](https://github.com/magento/magento2/issues/26847)

<!-- ENGCOM-7490-->

* これで、メディアギャラリーの下に、プライマリフォルダーと同じ名前のサブフォルダーを作成できます。 以前は、同じ名前でサブフォルダーを保存することができませんでした。 _プルリクエスト [27976](https://github.com/magento/magento2/pull/27976)_ ードで Vadim Malesh によって送信された修正。 [GitHub-1270](https://github.com/magento/adobe-stock-integration/issues/1270)

### メディアストレージ

<!-- MC-32593-->

* `get.php` から画像がリクエストされるたびに `var/resource_config.json` が再生成されなくなりました。 以前は、このファイルは `get.php` への呼び出しごとに書き換えられていました。

### ニュースレター

<!-- MC-31768-->

* 顧客は、ニュースレターを期待どおりに購読できるようになりました。 以前は、顧客が購読を確認しようとすると、アプリケーションに「`This is an invalid subscription confirmation code`」というエラーが表示されていました。

<!-- ENGCOM-6525-->

* ストアフロントのフッターにあるニュースレター入力フィールドが、サポートされているブラウザーで同じようにレンダリングされるようになりました。  _修正は divyajyothi5321 によってプルリクエスト [26182](https://github.com/magento/magento2/pull/26182)_ で送信されました。 [GitHub-26176](https://github.com/magento/magento2/issues/26176)

<!-- ENGCOM-6691-->

* ニュースレターの購読に関するストアフロントメッセージが、HTMLで期待どおりにレンダリングされるようになりました。 _Oleh Usik によってプルリクエスト [26455](https://github.com/magento/magento2/pull/26455)_ で送信された修正。 [GitHub-25162](https://github.com/magento/magento2/issues/25162)

### 注文件数

<!-- MC-33456-->

* Web サイトの表示設定で税金を除外するように指定している場合に、注文概要の小計に除外された税金が表示されなくなりました。 以前は、複数の web サイトが異なる表示設定で設定された場合、ストアレベルの設定にかかわらず、サーバー変数で定義された設定がストアに使用されていました。

### 支払い方法

<!-- MC -->

* サードパーティの支払い方法である Authorize.Net、eWay、CyberSource、Braintree、および Worldpay をコアコードに組み込む機能が削除されました。 マーチャントは、Commerce Marketplaceで利用可能な公式の拡張機能に移行する必要があります。

<!-- MC -->

* Signifyd の不正防止のコア実装はサポートされなくなりました。 マーチャントは、Commerce Marketplaceで利用可能な [Signifyd Fraud &amp; Chargeback Protection 拡張機能 ](https://marketplace.magento.com/signifyd-module-connect.html) に移行する必要があります。

<!-- MC-32546-->

* **Website Payments Pro Hosted Solution** が設定されると、注文を正常に完了し、マーチャントのホームページに戻れるようになりました。 以前は、「マーチャントに戻る **をクリックすると、アプリケーションは次のエラーをスローしていました：`Invalid Form Key. Please refresh the page`**。

<!-- ENGCOM-6606-->

* 請求先住所を切り替えても、ストアフロントのチェックアウトワークフローの支払いセクションにJavaScript関数テキストが表示されなくなりました。 _Pull request [26378](https://github.com/magento/magento2/pull/26378)_ で Chris Pook が修正を送信しました。 [GitHub-26375](https://github.com/magento/magento2/issues/26375)

<!-- ENGCOM-7223-->

* クレジット・メモの概要の **修正払戻** フィールドに正しい金額が表示されるようになりました。  _プルリクエスト [27343](https://github.com/magento/magento2/pull/27343)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-13851](https://github.com/magento/magento2/issues/13851)

<!-- ENGCOM-6524-->

* 見積もりを保存した後で、`quote_payment column additional_information` テーブルから追加情報を削除できるようになりました。 以前は、`\Magento\Payment\Model\Info` の `unsAdditionalInformation` メソッドがデータを正しく初期化しなかったため、見積もりを保存した後でこの情報を削除できませんでした。  _Marco Oliveira によってプルリクエスト [26084](https://github.com/magento/magento2/pull/26084)_ ードで送信された修正。 [GitHub-26083](https://github.com/magento/magento2/issues/26083)

<!-- ENGCOM-6609-->

* 支払い手順は、注文が行われたストア表示から派生するようになりました。 以前は、`BeforeOrderPaymentSaveObserver` の方法でデフォルトのストア表示から支払い手順が取得されたため、支払い手順はデフォルトのストア表示から使用されていました。 _Karyna Tsymbal によってプルリクエスト [26399](https://github.com/magento/magento2/pull/26399)_ ードで送信された修正。 [GitHub-26332](https://github.com/magento/magento2/issues/26332)

<!-- ENGCOM-6953-->

* 複数の店舗がある展開で注文が行われた店舗から、管理者と請求書および出荷請求書の両方に表示される支払い情報を収集するようになりました。 以前は、applicationderived payment information from the default store.  _Bartomiej Szubert がプルリクエスト [26765](https://github.com/magento/magento2/pull/26765)_ に修正を送信しました。 [GitHub-17933](https://github.com/magento/magento2/issues/17933)

#### PayPal

<!-- MC-30498-->

* チェックアウトワークフローで無効な配送先住所を入力した後、顧客が **PayPal で支払う** をクリックするたびに、アプリケーションに情報エラーメッセージが表示されるようになりました。 以前は、顧客が最初にボタンをクリックした場合にのみエラーメッセージが表示され、それ以降のクリックでは表示されませんでした。

<!-- MC-30639-->

* PayPal での支払いが失敗した場合、チェックアウトワークフローの支払いレビューセクションで、注文のステータスが `Processing` に変更されなくなりました。

<!-- MC-30864-->

* Payflow Link 支払い方法を使用して、注文を正常に完了できるようになりました。 以前は、支払い方法ログの注文ステータスが `Approved` であっても、注文ステータスが `Pending` 支払い状態のままであるため、Payflow Link 支払い方法は常に支払いを拒否していました。

<!-- MC-32494-->

* PayPal Payflow Pro を使用して注文された注文は、不正フィルターがトリガーされた際に `Suspected Fraud` ステータスに設定されるようになりました。

<!-- MC-33110-->

* サポートされているクレジットカードで PayPal Express Checkout を使用できるようになりました。 以前は、PayPal Express Checkout を使用して注文を完了しているときにクレジットカードのボタンをクリックすると、アプリケーションがハングし、クレジットカード情報を入力できませんでした。

<!-- MC-33117-->

* PayPal Payflow Pro 内で行われた注文は、不正フィルターがトリガーされた際に `Suspected Fraud` ステータスに設定されるようになりました。 以前は、PayPal の支払いトランザクションステータスは、アプリケーション側で支払い承認が発生する前に検証されませんでした。

<!-- MC-33294-->

* Web サイト制限が有効な場合、Payflow Pro が期待どおりに動作するようになりました。

<!-- MC-31196-->

* PayPal Express Checkout で発注された注文を正常に処理できるようになりました。この場合、注文の配送先住所は、顧客が配送ページのドロップダウンメニューから選択するのではなく、テキストフィールドに手動で入力した国リージョンを指定します。 以前は、アプリケーションによって「受注レビュー」ページに「`Error 500: NOTICE: PHP message: PHP Fatal error: Uncaught Error: Call to a member function getId() on null in httpdocs/vendor/magento/module-paypal/Model/Api/Nvp.php:1527`」というエラーが表示されていました。 [GitHub-26698](https://github.com/magento/magento2/issues/26698)

<!-- MC-31573-->

* PayPal Pro の支払い方法は、Chrome 80 ブラウザーで期待どおりに動作するようになりました。 この支払い方法は、以前は、顧客のセッションへのアクセスを必要とするコールバックエンドポイントを呼び出していました。新しいデフォルトのChrome SameSite cookie 機能では許可されないアクセスです。 [GitHub-26840](https://github.com/magento/magento2/issues/26840)

<!-- MC-31292-->

* 永続チェックアウトカートが有効になっていて、「**ログアウト時に永続性をクリア** 設定が **いいえ** に設定されている場合、PayPal Express を使用して注文の支払いを行うことができるようになりました。 以前は、アプリケーションによってログインページにリダイレクトされていました。

<!-- ENGCOM-6383-->

* Paypal Express および Web Payments Pro からの支払いは、処理が開始されると、期待どおりに `Processing` しい状態に移行するようになりました。 以前は、Paypal Web Payments Pro の支払いは、支払い情報が `Processing` の状態であった場合でも `Pending` の支払い状態のままでした。 _プルリクエスト [25876](https://github.com/magento/magento2/pull/25876)_ ードで Azambon によって送信された修正。 [GitHub-25659](https://github.com/magento/magento2/issues/25659)

### パフォーマンス

<!-- MC-31499-->

* 顧客データセクション無効化ロジックが改善されました。 このリリースでは、カスタム `sections.xml` ール無効化がアクティブな場合のローカルストレージの既知の問題を回避する、すべての顧客セクションのデータを無効にする新しい方法が導入されています。 （以前は、アクションの無効化を含むカスタム *etc/frontend/sections.xml* がある場合、プライベートコンテンツ（ローカルストレージ）が正しく入力されていませんでした）。 [ プライベートコンテンツ ](https://developer.adobe.com/commerce/php/development/cache/page/private-content/) を参照してください。

<!-- MC-31449-->

* 顧客アカウントの読み込みは、読み込み速度を向上させるためにリファクタリングされました。

<!-- MC-23383 ENGCOM-7006-->

* マーチャントは [ 遅延読み込み ](https://en.wikipedia.org/wiki/Lazy_loading) を使用して画像を読み込めるようになりました。 _修正は Timon de Groot によってプルリクエスト [27033](https://github.com/magento/magento2/pull/27033)_ に送信されました。 [GitHub-27032](https://github.com/magento/magento2/issues/27032)

<!-- ENGCOM-6988-->

* ダッシュボードグラフは、`chart.js` ライブラリに移行されました。  _Bartomiej Szubert がプルリクエスト [26923](https://github.com/magento/magento2/pull/26923) に修正を送信しました。 [GitHub-186](https://github.com/magento/community-features/issues/186)_

<!-- ENGCOM-6232-->

* 多数の製品属性を含む大規模なカタログに対して実行される操作のパフォーマンス（3,000～23000 個のオプションの規模）は、属性オプション配列の作成方法をリファクタリングすることで向上しました。 _Behnam Shayani がプルリクエスト [25452](https://github.com/magento/magento2/pull/25452)_ ードで送信した修正。 [GitHub-20966](https://github.com/magento/magento2/issues/20966)

### Pricing

<!-- ENGCOM-6647-->

* 製品を複数回編集した後でも、アプリケーションは階層化された製品の正しい価格を保存して表示するようになりました。 以前は、アプリケーションは製品価格に対して行われた最後の編集を保存しませんでした。 _Ravi Chandra によってプルリクエスト [26162](https://github.com/magento/magento2/pull/26162)_ ードで送信された修正。 [GitHub-25195](https://github.com/magento/magento2/issues/25195)

<!-- ENGCOM-6914-->

* 固定保存と割引保存の両方の割合が、注文の最終価格に正しく適用されるようになりました。 以前は、製品の詳細ページで、アプリケーションの階層価格（固定と割引の両方）の保存率が間違って表示されていました。 _Satish Subramanian がプルリクエスト [26584](https://github.com/magento/magento2/pull/26584)_ で修正を送信しました。 [GitHub-26583](https://github.com/magento/magento2/issues/26583)

<!-- MC-30255-->

* 設定可能な製品の再入荷に関して顧客に送信される在庫アラートメールに、正しい製品価格が含まれるようになりました。 以前は、このメールには製品価格 0 が含まれていました。

<!-- MC-32873-->

* 製品ストックアラートの登録解除が、ユーザーのセッションが期限切れの場合に機能するようになりました。 以前は、「**Click here to stop alerts for this product**」リンクをクリックすると、アプリケーションに 404 エラーが表示されていました。

<!-- MC-31979-->

* 製品アラートの購読解除アクションが期待どおりに動作するようになりました。 以前は、お客様が **この製品のアラートを停止するには、ここをクリック** リンクをクリックすると、アプリケーションに 404 エラーが表示されていました。

### 製品ビデオ

<!-- MC-23743-->

* REST を使用してYouTube ビデオを更新できるようになりました（PUT`rest/V1/products/{SKU}`）。 以前は、アプリケーションでビデオのサムネールが表示されていましたが、「**再生**」ボタンをクリックしてもビデオプレーヤーは読み込まれませんでした。 [GitHub-23194](https://github.com/magento/magento2/issues/23194)

### レポート

<!-- ENGCOM-6635-->

* 製品リストは、設定可能な製品を SKU 別に並べ替えるようになりました。SKU は、バリエーション別に設定可能な製品をグループ化します。 以前は、レポートは `product_id` 別に製品をグループ化していました。 _Lukasz Bajsarowicz がプルリクエスト [25858](https://github.com/magento/magento2/pull/25858)_ ードで修正を送信しました。 [GitHub-25856](https://github.com/magento/magento2/issues/25856)

<!-- ENGCOM-6427-->

* **管理者**/**レポート**/**統計を更新** テーブルの **未定義**&#x200B;**列ではなく、** 更新日= Null **ステータスが** 更新なし **と表示されるようになりました**。 _Eden Duong によってプルリクエスト [25932](https://github.com/magento/magento2/pull/25932)_ ードで送信された修正。 [GitHub-25931](https://github.com/magento/magento2/issues/25931)

<!-- ENGCOM-6925-->

* 低在庫レポートに、無効な製品が含まれなくなりました。 _Mohamed-Asar がプルリクエスト [26862](https://github.com/magento/magento2/pull/26862)_ ードで修正を送信しました。 [GitHub-26838](https://github.com/magento/magento2/issues/26838)

<!-- ENGCOM-7110-->

* これで、アプリケーションの **管理**/**ストア**/**設定**/**一般**/**レポート** の「**年累計の開始日** フィールドに正確な値が表示されるようになりました。 _Priya-V-Panchal によってプルリクエスト [27088](https://github.com/magento/magento2/pull/27088)_ で送信された修正。 [GitHub-27086](https://github.com/magento/magento2/issues/27086)

### レビュー

<!-- MC-29578-->

* ユーザーがボタンを 1 回クリックした後、アプリケーションは **レビューを送信** ボタンを無効にするようになりました。 以前は、アプリケーションは、ユーザーが「**レビューを送信**」ボタンを複数回クリックした場合、最初のクリックおよび複数のレビューの作成後にこのボタンを無効にしていなかった。

<!-- MC-31293-->

* **管理者**/**レポート**/**レビュー**/**製品別** フィルターリストに、結果が期待どおりに表示されるようになりました。 以前は、このリストをフィルタリングしても、アプリケーションに結果が表示されませんでした。

<!-- ENGCOM-6938-->

* 「保留中のレビュー」メニュー項目が、**管理者** / **マーケティング** / **ユーザーコンテンツ** / **保留中のレビュー** で期待どおりにアクティブ化されました。  _Ravinder によってプルリクエスト [26230](https://github.com/magento/magento2/pull/26230)_ で送信された修正。 [GitHub-26229](https://github.com/magento/magento2/issues/26229)

### 売上

<!-- MC-29426-->

* 完了した注文が、支払いシステムとMagento Open Sourceの両方に表示されるようになりました。 以前は、注文は支払いシステムに表示されましたが、Magento Open Sourceには表示されませんでした。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-30000-->

* アプリケーションは、顧客のデフォルトの配送先住所に従うようになりました。 以前は、アプリケーションは設定に従ったデフォルトの請求先住所とデフォルトの出荷先住所に従わず、**請求先住所と同じ** 設定は自動的には有効になっていませんでした。

<!-- MC-30299-->

* 割引を含む受注の払戻が正しく計算されるようになりました。 以前は、アプリケーションが誤って送料と送料の割引を計算し、払い戻し合計が支払い合計と一致しませんでした。

<!-- MC-33165-->

* マルチサイトデプロイメントで新しい顧客が注文を作成すると、アプリケーションによって正しいグループ ID が割り当てられるようになりました。 以前は、アプリケーションはデフォルトの顧客グループの設定を適用していました。

<!-- MC-31786-->

* クレジット・メモ、請求書および出荷の表示権限を含む制限付き権限を持つ管理者は、請求書および出荷を「受注」ページから期待どおりに表示できるようになりました。 以前は、制限付き管理者が注文を表示しようとすると、アプリケーションに「`Something went wrong with processing the default view and we have restored the filter to its original state`」というエラーが表示されていました。

<!-- MC-24023-->

* 顧客が買い物かごに、既存の製品在庫の半分を超えても在庫合計を超えない製品を追加した場合、アプリケーションにエラーが表示されなくなりました。 以前は、このような状況では、アプリケーションに次のエラーが表示されていました。`The requested qty is not available` [Github-24365](https://github.com/magento/magento2/issues/24365)

<!-- ENGCOM-6910-->

* 在庫数が 1 の場合、管理者から買い物かごに製品を正常に追加できるようになりました。 以前は、アプリケーションによって買い物かごに製品が追加されることはなく、次のメッセージが表示されていました：`The requested qty is not available`。 _Serhii Petrychenko がプルリクエスト [26650](https://github.com/magento/magento2/pull/26650) で送信した修正。_ [GitHub-25675](https://github.com/magento/magento2/issues/25675)

<!-- ENGCOM-7090-->

* カスタムオプションの名前が最大文字数を超える製品を、ストア管理者が並べ替えようとした場合に、アプリケーションに情報エラーメッセージが表示されるようになりました。 以前は、これらの条件の下では、アプリケーションはメッセージではなくレポートページを表示していました。 _Mudit Shukla によってプルリクエスト [26348](https://github.com/magento/magento2/pull/26348)_ ードで送信された修正。 [GitHub-26345](https://github.com/magento/magento2/issues/26345)

<!-- ENGCOM-6328-->

* 販売注文住所情報編集フォームのレイアウトは、管理フォームライブラリの規則に合わせてリファクタリングされました。 _Alexey Rakitin によってプルリクエスト [25699](https://github.com/magento/magento2/pull/25699)_ ードで送信された修正。 [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6007-->

* **カタログ**/**カテゴリ** ページの「製品」セクションのチェックボックスが期待どおりに動作するようになりました。  _Denis Kopylov がプルリクエスト [22990](https://github.com/magento/magento2/pull/22990)_ で送信した修正。 [GitHub-22988](https://github.com/magento/magento2/issues/22988)

<!-- ENGCOM-6809-->

* `getCustomer` メソッドは、ブロックで定義された顧客オブジェクト `phpdoc` 返すようになりました。 以前は、このメソッドは `NULL` を返し、`phpdoc` ブロックは、このメソッドが `NULL` を返すことができることをハイライトしていませんでした。 _Fanis Strezos がプルリクエスト [26423](https://github.com/magento/magento2/pull/26423)_ で送信した修正。 [GitHub-25268](https://github.com/magento/magento2/issues/25268)

<!-- ENGCOM-6492-->

* マーチャントが **管理者**/**ストア**/**設定**/**セールス**/**並べ替え**/**注文を許可** を無効にした場合、再注文が期待どおりに無効になりました。  _Eden Duong によってプルリクエスト [26051](https://github.com/magento/magento2/pull/26051)_ ードで送信された修正。 [GitHub-25130](https://github.com/magento/magento2/issues/25130)

<!-- ENGCOM-6627-->

* 管理 `getPrice()` 注文のカスタム価格を設定する際に、メソッドが文字列ではなく float または null を返すようになりました。  _Andrii Chorniy によってプルリクエスト [26313](https://github.com/magento/magento2/pull/26313)_ ードで送信された修正。 [GitHub-25968](https://github.com/magento/magento2/issues/25968)

<!-- ENGCOM-6786-->

* **管理者**/**ストア**/設定/**注文ステータス** の **状態コードとタイトル** 列に、ステータスではなく状態が期待どおりに表示されるようになりました。  _Oleh Usik によってプルリクエスト [26569](https://github.com/magento/magento2/pull/26569)_ で送信された修正。 [GitHub-17847](https://github.com/magento/magento2/issues/17847)

<!-- ENGCOM-6936-->

* PDF請求書は、GB ロケールで作成された場合、正しい購入日を取り込むようになりました。 _Eden Duong によってプルリクエスト [26701](https://github.com/magento/magento2/pull/26701)_ ードで送信された修正。 [GitHub-26675](https://github.com/magento/magento2/issues/26675)

### 販売ルール

<!-- MC-30155-->

* 買い物かご価格ルールが無効になった後、`quote_item.applied_rule_ids` が期待どおりに更新されるようになりました。 [GitHub-24526](https://github.com/magento/magento2/issues/24526)

<!-- MC-32229-->

* 買い物かごの価格ルールを作成または編集しようとすると、アプリケーションにカテゴリツリーが期待どおりに表示されるようになりました。 以前は、ルールの作成時や編集時に「条件」セクションでカテゴリを選択すると、JavaScript エラーが発生していました。

<!-- ENGCOM-6824-->

* 設定可能な製品が最初に買い物かごに追加された際に、アプリケーションが買い物かご価格ルールを使用して、買い物かごレベルの固定割引を正しく計算できるようになりました。 _Lachlan Turner によってプルリクエスト [26623](https://github.com/magento/magento2/pull/26623)_ ードで送信された修正。 [GitHub-26622](https://github.com/magento/magento2/issues/26622)

### 検索 {#search-heading}

* Elasticsearch 7.6.x は、Adobe CommerceとMagento Open Sourceのデフォルトのカタログ検索エンジンになりました。 Elasticsearch 7.6.x をインストールしないと、バージョン 2.4.0 をインストールまたはアップグレードできません。Elasticsearchバージョン 2.x のコードは削除されました。 Elasticsearchバージョン 5.x および 6.x は非推奨となり、サポートされなくなりました。 [ 検索エンジンの前提条件 ](../../../installation/prerequisites/search-engine/overview.md) を参照してください。

<!-- MC-23753-->

* アプリケーションは、ストアフロントカタログ検索文字列で **&lt;** および **>** 記号を正しくレンダリングするようになりました。

<!-- MC-25010-->

* Elasticsearchを実装するデプロイメントで `cron:run` を実行した後、製品がカテゴリ内で期待どおりに表示されるようになりました。

<!-- MC-25254-->

* 新しい製品属性をストアフロントで検索可能にするために、アプリケーションで完全検索の再インデックスが必要にならなくなりました。

<!-- MC-29545-->

* バンドル商品を含む商品リストをアルファベット順に並べ替えた場合、Elasticsearchが期待どおりに機能するようになりました。

<!-- MC-29951-->

* カテゴリ内の設定可能な製品をフィルタリングする際に、フィルタリング結果に在庫切れのオプションが含まれなくなりました。

<!-- MC-30131-->

* Elasticsearchを使用して商品リストページからすべての商品を選択すると、検索結果のすべての商品が期待どおりに表示されるようになりました。 以前は、検索結果が表示されませんでした。

<!-- MC-30201-->

* 1 ページに表示する検索結果の数を変更した場合に、Elasticsearchでカテゴリページの結果が正しく表示されるようになりました。 以前は、検索結果ページに表示する検索結果の数を変更すると、アプリケーションに空白のページが表示され、次のエラーが表示されていました。`"0":"SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near'`

<!-- MC-32430-->

* 在庫切れの設定可能な製品の価格の並べ替えが正しく機能するようになりました。

<!-- MC-25176-->

* 複数の web サイトのデプロイメントで顧客がストアフロントのクイック検索を使用した場合に、アプリケーションで例外がスローされなくなりました。

<!-- ENGCOM-6842-->

* **マーケティング**/**SEO と検索**/**検索語句** のフッターにある「検索語句」オプションをクリックしてマーチャントが検索語句ページを開いても、アプリケーションに警告が表示されなくなりました。  _プルリクエスト [25246](https://github.com/magento/magento2/pull/25246)_ ードで vishal-webkul によって送信された修正。 [GitHub-25245](https://github.com/magento/magento2/issues/25245)

<!-- ENGCOM-7289-->

* モバイルビューで Safari を実行する際に検索入力ボックスをクリックしても、アプリケーションでビューポートのサイズが変更されなくなりました。  _Pawe Tylek がプルリクエスト [27603](https://github.com/magento/magento2/pull/27603) ードで修正を送信しました。 [GitHub-27506](https://github.com/magento/magento2/issues/27506)_

<!-- ENGCOM-6364-->

* Elasticsearchバージョンは、管理者（**ストア**/設定/**設定**/**カタログ**/**カタログ**/**カタログ検索**）の X.0+表記ではなく X.x 表記で識別されるようになりました。 _プルリクエスト [25838](https://github.com/magento/magento2/pull/25838)_ でAndreas Mautz によって送信された修正。 [GitHub-25674](https://github.com/magento/magento2/issues/25674)

### 送料

<!-- MC-32782-->

* 注文された製品の 1 つが仮想製品の場合、注文を複数の住所に出荷できるようになりました。 以前は、アプリケーションは物理製品の注文に成功しましたが、仮想製品の注文は空でした。

<!-- MC-29276-->

* 複数のアドレスに発送される注文に対して、固定金額の買い物かご全体の割引が正しく適用されるようになりました。 以前は、このタイプの割引は、顧客が複数の住所を持つチェックアウトを使用して注文をチェックアウトした場合に複数回適用されていました。 [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- MC-29444-->

* 買い物かご価格ルールの作成中に発送方法を選択できるドロップダウンリストに、有効な値のみが含まれるようになりました。 以前は、このドロップダウンリストには空の値または追加の値が含まれていました。

<!-- MC-30186-->

* 注文アーカイブリストの注文から「アクショ `.pdf`」ドロップダウンリストから **出荷ラベルを印刷** を選択すると、アプリケーションは出荷ラベルを正しい形式で印刷するようになりました。 以前は、アプリケーションで 404 エラーが表示されていました。

<!-- MC-31396-->

* 買い物かごに、送料無料の価格ルールに含まれるカテゴリの製品と、ルールに含まれないカテゴリの製品が含まれている場合、送料無料の価格ルールは関連する製品にのみ影響するようになりました。 以前は、買い物かごに送料無料カテゴリと価格ルールに含まれていない他のカテゴリの両方の製品が含まれていた場合、送料無料はどの製品にも適用されませんでした。

<!-- ENGCOM-6436-->

* ドロップダウン/複数選択ボックスにすべての配送業者が表示されるのではなく、空白ページが表示されなくなりました。 以前は、`vendor/magento/module-shipping/Model/Config/Source/Allmethods.php` の `toOptionArray` 関数でエラーが発生していました。 _Marc Rodriguez がプルリクエスト [25315](https://github.com/magento/magento2/pull/25315)_ で送信した修正。 [GitHub-13136](https://github.com/magento/magento2/issues/13136)

* 複数の所在地に出荷される受注を顧客が作成する場合に、固定金額値引が複数回適用されなくなりました。  _Mahesh Singh によってプルリクエスト [26419](https://github.com/magento/magento2/pull/26419)_ で送信された修正。 [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- ENGCOM-6523-->

* カスタム `di.xml` を実装する `Magento\Ups\Model\Carrier` のプラグインが、開発者モードで正しく機能するようになりました。 以前は、アプリケーションは次のエラーをスローしていました：`1 exception(s): Exception #0 (BadMethodCallException): Missing required argument $data of Magento\Ups\Model\Carrier`。 _Bartomiej Szubert がプルリクエスト [26130](https://github.com/magento/magento2/pull/26130)_ に修正を送信しました。 [GitHub-25390](https://github.com/magento/magento2/issues/25390)

### サイトマップ

<!-- MC-29362-->

* アプリケーションは、サイトマップを生成する際に、期待どおりにプロジェクトベース URL を使用するようになりました。

<!-- ENGCOM-6670-->

* 生成されたサイトマップにホームページの URL が含まれるようになりました。 _プルリクエスト [26445](https://github.com/magento/magento2/pull/26445)_ ードで deepaksnair によって修正が送信されました。 [GitHub-25761](https://github.com/magento/magento2/issues/25761)

### ストア

<!-- MC-25187-->

* 顧客が 1 つのストアにログインし、商品を買い物かごに追加した後、マルチストアのデプロイメントで新しいストアに切り替えても、顧客セッションが期待どおりに保持されるようになりました。 以前は、顧客が 2 番目のストアに移動すると、アプリケーションは顧客をログアウトし、買い物かごを空にしました。

<!-- ENGCOM-4781-->

* アプリケーションは、削除されたストア表示に関連するレコードを、期待どおりに `sale_sequence_meta` テーブルおよび `sales_sequence_profile` テーブルから削除するようになりました。 _Bartomiej Szubert がプルリクエスト [22296](https://github.com/magento/magento2/pull/22296)_ に修正を送信しました。 [GitHub-14958](https://github.com/magento/magento2/issues/14958)

<!-- ENGCOM-6869-->

* ベース URL が異なるストア間で切り替える際に、ストア切り替えボタンが期待どおりに動作するようになりました。 以前は、顧客がストアスイッチャーを使用してストアを切り替えると、ターゲットストアのベース URL が現在のストアとは異なる場合、リクエストは失敗していました。 _Tobias Nilsson がプルリクエスト [26548](https://github.com/magento/magento2/pull/26548)_ ードで修正を送信しました。 [GitHub-23755](https://github.com/magento/magento2/issues/23755), [GitHub-26384](https://github.com/magento/magento2/issues/26384)

### スウォッチ

<!-- MC-30294-->

* マーチャントは、**ストア**/**属性**/**製品**/**新規属性** の **ビジュアルスウォッチ** オプションを使用して、製品にカラースウォッチ属性を正常に追加できるようになりました。 以前は、新しく作成したスウォッチ属性を開こうとすると、JavaScript エラーがトリガーされていました。

<!-- ENGCOM-6750-->

* 設定可能な製品に対して顧客が新しいスウォッチオプションを選択すると、広告された最低価格が期待どおりに変更されるようになりました。 _プルリクエスト [26241](https://github.com/magento/magento2/pull/26241)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-26240](https://github.com/magento/magento2/issues/26240)

<!-- ENGCOM-6685-->

* 新しいスウォッチオプションを選択すると、アプリケーションで、設定可能な製品の最小アドバタイズ価格が重複しなくなりました。 _プルリクエスト [26317](https://github.com/magento/magento2/pull/26317)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-26314](https://github.com/magento/magento2/issues/26314)

<!-- ENGCOM-6966-->

* 新規製品属性ページのスウォッチの管理（属性の値）領域のドロップダウンメニューの動作の問題を修正しました。  _Oleh Usik によってプルリクエスト [26090](https://github.com/magento/magento2/pull/26090)_ で送信された修正。 [GitHub-25910](https://github.com/magento/magento2/issues/25910)

### TargetRule

<!-- MC-31546-->

* ストアフロントで製品に表示される関連製品ブロックに、関連製品ルールで定義された条件を満たす製品が表示されるようになりました。 以前は、アプリケーションには関連製品は表示されていませんでした。

### 税

<!-- MC-29579-->

* 顧客がチェックアウト中に注文の宛先国を変更した場合、アプリケーションは配送料と価格を期待どおりに更新するようになりました。

<!-- MC-30546-->

* 該当する買い物かご価格ルールに基づいて、送料無料が期待どおりに適用されるようになりました。 以前は、注文が送料無料の条件を満たしているかどうかを計算する際に、買い物かご価格ルールで税金が考慮されていませんでした。

### テスト

>[!NOTE]
>
>**MFTF は、2FA が有効な状態でテストを実行するためにGoogle Authenticator を使用するようになりました。 MFTF は、Google Authenticator** を有効にするための追加設定手順がないと 2.4.0 で動作しません。 [2 要素認証（2FA）のための MFTF の設定 ](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/#magento-functional-testing-framework) を参照してください。

<!-- ENGCOM-6585-->

* テストおよびアクショングループのハードコードされた URL は、ページ参照に置き換えられました。 _Lukasz Bajsarowicz がプライベートリポジトリパートナー – magento2ee のプルリクエスト 117 で送信した修正_。 [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-7273-->

* テストでは、CMS ページに関連する管理者アクションを記録するタスクについて説明するようになりました。 _Lukasz Bajsarowicz がプライベートリポジトリパートナー – magento2ee のプルリクエスト 172 で送信した修正_。 [GitHub-171](https://github.com/magento/magento2/issues/171)

<!-- ENGCOM-7040 7051-->

* 無効な機能テスト名が、ベストプラクティスに従って変更されました。 _Lukasz Bajsarowicz がプライベートリポジトリ partners-magento2ee のプルリクエスト [27118](https://github.com/magento/magento2/pull/27118) とプルリクエスト 151 で送信した修正。 [GitHub-27117](https://github.com/magento/magento2/issues/27117)_

<!-- ENGCOM-7026-->

* テストデータを作成した後の再インデックスにMagento Open Source `cron` が使用されるようになりました。該当する場合は、`cache:flush` に代わ `cache:flush config` てインデックスを作成することもできます。 _Lukasz Bajsarowicz がプルリクエスト [26990](https://github.com/magento/magento2/pull/26990)_ ードで修正を送信しました。 [GitHub-26989](https://github.com/magento/magento2/issues/26989)

<!-- ENGCOM-7421-->

* 受け入れテストは、`Magento/Indexer` モジュールと `Magento/Backup` モジュールの命名規則に従うようになりました。  _Shankar Konar がプルリクエスト [27515](https://github.com/magento/magento2/pull/27515)_ で修正を送信しました。 [GitHub-27503](https://github.com/magento/magento2/issues/27503)

<!-- ENGCOM-6791 6825-->

* `AdminReorderWithCatalogPrice` テストはリファクタリングされ、CI 検証プロセスで失敗しなくなりました。 _Lukasz Bajsarowicz がプライベートリポジトリパートナー – magento2ee のプルリクエスト 135 で送信した修正_。 [GitHub-26607](https://github.com/magento/magento2/issues/26607)

<!-- ENGCOM-6780 6795-->

* `AdminAddingNewOptionsWithImagesAndPricesToConfigurableProduct` テストと `StorefrontApplyPromoCodeDuringCheckout` テストはリファクタリングされており、CI 検証プロセスで失敗しなくなりました。 _Lukasz Bajsarowicz がプルリクエスト [26611](https://github.com/magento/magento2/pull/26611) およびプルリクエスト [26614](https://github.com/magento/magento2/pull/26614)_ で送信した修正。 [GitHub-26612](https://github.com/magento/magento2/issues/26612), [GitHub-26610](https://github.com/magento/magento2/issues/26610)

<!-- ENGCOM-6621-->

* `DeleteProduct and DeleteCustomer Action Groups` のテストはリファクタリングされており、CI 検証プロセスで失敗しなくなりました。 _Lukasz Bajsarowicz がプルリクエスト [26407](https://github.com/magento/magento2/pull/26407)_ ードで修正を送信しました。 [GitHub-26396](https://github.com/magento/magento2/issues/26396)

<!-- ENGCOM-6608-->

* `AdminMoveAnchoredCategoryTest.xml` のテストはリファクタリングされており、CI 検証プロセスで失敗しなくなりました。 _Lukasz Bajsarowicz がプルリクエスト [26395](https://github.com/magento/magento2/pull/26395)_ ードで修正を送信しました。 [GitHub-26396](https://github.com/magento/magento2/issues/26396)

#### 統合テスト

<!-- ENGCOM-7143-->

* 統合テストで連続したリクエストが失敗しなくなりました。 以前は、リクエストオブジェクトがディスパッチ間で共有されているので、テストは失敗していました。 `resetRequest` メソッドは、`request` の状態を空にします。 _Lukasz Bajsarowicz がプルリクエスト [27300](https://github.com/magento/magento2/pull/27300)_ ードで修正を送信しました。 [GitHub-27299](https://github.com/magento/magento2/issues/27299)

<!-- ENGCOM-7262-->

* メール機能に対応するために、追加の統合テスト `Magento_Customer` 追加されました。 _Lukasz Bajsarowicz がプルリクエスト [27606](https://github.com/magento/magento2/pull/27606)_ ードで修正を送信しました。 [GitHub-27607](https://github.com/magento/magento2/issues/27607)

#### PHP 単体テスト

<!-- ENGCOM-7435 7306-->

* PHP ユニットテストで、この致命的なエラーがスローされなくなりました。`Fatal error: Class Mock_CartExtensionInterface_0ba80a0b contains 2 abstract methods and must therefore be declared abstract or implement the remaining methods (Magento\Quote\Api\Data\CartExtensionInterface::getAmazonOrderReferenceId, Magento\Quote\Api\Data\CartExtensionInterface::setAmazonOrderReferenceId) in /var/www/html/vendor/phpunit/phpunit-mock-objects/src/Generator.php(264) : eval()'d code on line 1` _Lukasz Bajsarowicz がプライベートリポジトリパートナー（magento2ee および [27701](https://github.com/magento/magento2/pull/27701)_）のプルリクエスト 178 で送信した修正。 [GitHub-27638](https://github.com/magento/magento2/issues/27638)

<!-- ENGCOM-7271-->

* `Offline_Payments` のテストは、PHPUnit 8 と互換性を持つようになりました。  _Pull request [27627](https://github.com/magento/magento2/pull/27627)_ で Cristiano Pacheco によって送信された修正。 [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-7243 7284 7291-->

* `Framework`、`AdminAnalytics`、`AdminNotification`、`AMPQ` の単体テストが PHPUnit 8 向けに更新されました。 _Ihor Sviziev がプルリクエスト [27522](https://github.com/magento/magento2/pull/27522)、[27521](https://github.com/magento/magento2/pull/27521)、[27519](https://github.com/magento/magento2/pull/27519)、[27522](https://github.com/magento/magento2/pull/27522)_ で送信した修正。 [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-6542-->

* これで、インターネットに接続せずに `\Magento\Downloadable\Test\Unit\Helper\DownloadTest` 単体テストを実行できます。  _プルリクエスト [26264](https://github.com/magento/magento2/pull/26264)_ ードで aleromano89 によって送信された修正。 [GitHub-23521](https://github.com/magento/magento2/issues/23521)

<!-- ENGCOM-6695-->

* `app/code/Magento/Fedex/Model/Source/Generic.php` の単体テストを追加しました。 _Satish Subramanian がプルリクエスト [26549](https://github.com/magento/magento2/pull/26549)_ で修正を送信しました。

<!-- ENGCOM-7251 7283 7472-->

* 複数のテストに `<magentoCron>` が追加され、部分的なインデックス再作成がトリガーになりました。 この変更により、`Magento_Bundle`、`CatalogImportExport`、`CatalogInventory`、`CatalogRule`、`Backend`、`Braintree` および `Captcha` を対象とする機能テストで偽陰性が発生する問題に対処できます。 _Lukasz Bajsarowicz がプルリクエスト [27322](https://github.com/magento/magento2/pull/27322)、[27323](https://github.com/magento/magento2/pull/27323)、[27321](https://github.com/magento/magento2/pull/27321)_ で送信した修正。 [GitHub-27320](https://github.com/magento/magento2/issues/27320)

<!-- ENGCOM-6844-->

* `<amOnPage>` のすべての間違った使用法は、テストで該当する場合、管理者がログアウトする適切な `<actionGroup>` に置き換えられました。 _Lukasz Bajsarowicz がプライベートリポジトリパートナー – magento2ee のプルリクエスト 116 で送信した修正_。 [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-6352-->

* テストの各アクション グループは、MFTF のベスト プラクティスに従って個別のファイルに移動され、一貫性のないファイル名が修正されました。 次のモジュールのテストが影響を受けています。

   * module-catalog-permissions
   * module-shared-catalog
   * module-catalog-event
   * module-banner
   * module-admin-gws
   * module-advanced-checkout
   * module-shipping
   * module-ui
   * module-shipping
   * module-checkout-address-search
   * module-sales
   * module-catalog
   * module-catalog-rule-staging
   * module-visual-merchandiser
   * module-customer

  _プルリクエスト [25800](https://github.com/magento/magento2/pull/25800)、[26323](https://github.com/magento/magento2/pull/26323)、[26321](https://github.com/magento/magento2/pull/26321)、[26320](https://github.com/magento/magento2/pull/26320)、[26319](https://github.com/magento/magento2/pull/26319)、[26322](https://github.com/magento/magento2/pull/26322)、[25828](https://github.com/magento/magento2/pull/25828)、[26329](https://github.com/magento/magento2/pull/26329) （およびプライベートリポジトリーパートナー – magento2ee のプルリクエスト 104、105、106、107、108、109、111、119、120、121）で Lukasz Bajsarowicz によって送信された修正）_。 [GitHub-22853](https://github.com/magento/magento2/issues/22853)

### テーマ

<!-- MC-29804-->

* 動的ブロックの表示に影響を与える `JsFooterPlugin.php` のバグを修正しました。 以前は、`/banner/ajax/load/url`: `Uncaught TypeError: strpos() expects parameter 1 to be string, null given in` に直接アクセスすると、アプリケーションにこのエラーが表示されていました。

<!-- ENGCOM-6708-->

* `i18n` メソッドには、アンダースコアのテンプレートに文字列を追加する機能があります。  _プルリクエスト [26435](https://github.com/magento/magento2/pull/26435)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-18012](https://github.com/magento/magento2/issues/18012)

<!-- ENGCOM-6666-->

* `section-config` モジュールはリファクタリングされました。 このリファクタリングにより、`data-mage-init` で初期化される前に、サードパーティモジュールがPOSTリクエストを行ったり、顧客データを直接要求したりすることで発生するエラーが減少しました。 _Mateusz Krzeszowiak によってプルリクエスト [25764](https://github.com/magento/magento2/pull/25764)_ ードで送信された修正。 [GitHub-17125](https://github.com/magento/magento2/issues/17125)

<!-- ENGCOM-6924-->

* `LoadCssAsync`HTMLフォーマットエラーが修正されました。 _Satish Subramanian がプルリクエスト [26764](https://github.com/magento/magento2/pull/26764)_ で修正を送信しました。 [GitHub-26760](https://github.com/magento/magento2/issues/26760)

<!-- ENGCOM-7052-->

* 新しいテーマの作成の一環として `default.xml` および `catalog_product_view.xml` ファイルを作成する場合、アプリケーションはこれらのページを作成するか、期待どおりにログファイルにエラーを記録します。 以前は、アプリケーションはファイルにエラー `vendor/magento/framework/View/Page/Config/Renderer.php` 記録していました。 _Vinh Le によってプルリクエスト [27026](https://github.com/magento/magento2/pull/27026)_ ードで送信された修正。 [GitHub-27009](https://github.com/magento/magento2/issues/27009)

### 翻訳とロケール

<!-- MC-24186-->

* **管理者**/**ストア**/**設定**/**詳細**/**開発者**/**インライン翻訳**/**ストアフロントに対して有効** が設定されている場合、インライン翻訳がストアフロントで期待どおりに機能するようになりました。

<!-- MC-31663-->

* ストアフロントに対して有効にした場合、インライン翻訳が期待どおりに機能するようになりました。

<!-- ENGCOM-7064-->

* 製品 URL キーが期待どおりに表記変換されるようになりました。 _DanieliMi によってプルリクエスト [26506](https://github.com/magento/magento2/pull/26506)_ で送信された修正。 [GitHub-26499](https://github.com/magento/magento2/issues/26499)

<!-- ENGCOM-6899-->

* `es_US Spanish (United States)` ロケールがサポートされるようになりました。 _Vinh Le によってプルリクエスト [26857](https://github.com/magento/magento2/pull/26857)_ ードで送信された修正。 [GitHub-26843](https://github.com/magento/magento2/issues/26843)

<!-- ENGCOM-6996-->

* 数値プレースホルダーの数とJavaScript コードのプレースホルダーの数が同じになりました。 以前は、数値プレースホルダーのカウントが %1 で始まる間、JavaScript コードは 0% と見なされていました。  _プルリクエスト [25359](https://github.com/magento/magento2/pull/25359)_ ードで korostii によって送信された修正。 [GitHub-25243](https://github.com/magento/magento2/issues/25243)

<!-- ENGCOM-6557-->

* 製品の詳細ページ（`page.main.title`）のページタイトルの翻訳を無効にできるようになりました。このページはデフォルトで有効になっています。 _Bartomiej Szubert がプルリクエスト [26269](https://github.com/magento/magento2/pull/26269)_ に修正を送信しました。 [GitHub-7065](https://github.com/magento/magento2/issues/7065)

<!-- ENGCOM-7465-->

* 請求書PDFでのアラビア語とヘブライ語のレンダリングに関する問題が解決されました。 _Ihor Sviziev がプルリクエスト [27887](https://github.com/magento/magento2/pull/27887)_ ードで修正を送信しました。 [GitHub-25769](https://github.com/magento/magento2/issues/25769)

<!-- ENGCOM-6646-->

* 言語パックの継承順序が、ドキュメントの説明に従って、期待どおりに最初にリストされる最初に使用される順序で適用されるようになりました。  _プルリクエスト [26420](https://github.com/magento/magento2/pull/26420)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-8691](https://github.com/magento/magento2/issues/8691)

<!-- ENGCOM-6443-->

* ラテン文字のみがサポートされているロケールのフォルダー名にラテン文字以外の文字を入力すると、このエラーメッセージが表示されるようになりました：`Please rename the folder using only Latin letters, numbers, underscores and dashes`。 _Eden Duong によってプルリクエスト [25904](https://github.com/magento/magento2/pull/25904) ードで送信された修正。 [GitHub-25896](https://github.com/magento/magento2/issues/25896)_

<!-- ENGCOM-6539-->

* `directory_country_region_name` の `locale` 列の長さが 8 から 16 に長くなり、`zh_Hans_CN` などのロケールをサポートするようになりました。 _Bartomiej Szubert がプルリクエスト [26268](https://github.com/magento/magento2/pull/26268)_ に修正を送信しました。 [GitHub-14001](https://github.com/magento/magento2/issues/14001)

### UI

<!-- ENGCOM-7490-->

* 「戻る」ボタンが **管理者**/**ストア**/**注文ステータス**/**注文ステータスを編集** から期待どおりに動作するようになりました。 _プルリクエスト [27976](https://github.com/magento/magento2/pull/27976)_ ードで Vadim Malesh によって送信された修正。 [GitHub-1270](https://github.com/magento/magento2/issues/1270)

<!-- ENGCOM-6692-->

* Adobe Stockリストの「**ファイル名**」フィールドで矢印キーを使用してカーソルを動かしても、プレビューイメージが予期せず変更されなくなりました。 _修正は、Adarsh Manickam によってプルリクエスト [25991](https://github.com/magento/magento2/pull/25991)_ に送信されました。 [GitHub-847](https://github.com/magento/magento2/issues/847)

<!-- ENGCOM-6414-->

* **管理者**/**システム**/**統合** ページの「現在のユーザー ID の検証」セクションの「**パスワード**」フィールドに、スタイルが期待どおりに継承されるようになりました。 _Eduard Chitoraga によってプルリクエスト [25918](https://github.com/magento/magento2/pull/25918)_ ードで送信された修正。 [GitHub-25917](https://github.com/magento/magento2/issues/25917)

<!-- ENGCOM-6482-->

* ストアフロントでJavaScript バリデーターによって検証された入力も、管理者の検証に合格します。 以前は、JavScript バリデーターは改行をストアフロントでは 1 文字としてカウントしていましたが、サーバー側では改行 `\Magento\Catalog\Model\Product\Option\Type\maxCharacters`2 文字としてカウントしていました。 _Grzegorz Bogusz がプルリクエスト [26033](https://github.com/magento/magento2/pull/26033)_ で修正を送信しました。 [GitHub-25974](https://github.com/magento/magento2/issues/25974)

<!-- ENGCOM-6517-->

* `setTitle()` 呼び出しを使用してモーダルタイトルを変更しても、`subTitle` タグが消去されなくなりました。 以前は、タイトルとサブタイトルを持つポップアップまたはカスタムモーダルを作成しようとした後、`setTitle()` メソッドを使用してタイトルを変更すると、`subTitle` が消去されていました。 _Andrea Parmeggiani がプルリクエスト [26142](https://github.com/magento/magento2/pull/26142)_ で送信した修正。 [GitHub-26141](https://github.com/magento/magento2/issues/26141)

<!-- ENGCOM-6464-->

* 「管理マーケティング」タブのサブメニューが、メニュー項目の長さを期待どおりに自動的に調整できるようになりました。  また、水平方向にスクロールできるようになりました。  _プルリクエスト [26034](https://github.com/magento/magento2/pull/26034)_ ードで Pawe Tylek が送信した修正。 [GitHub-18687](https://github.com/magento/magento2/issues/18687)

<!-- ENGCOM-6519-->

* テーブル `quote` 列 `customer_note` で、型 `text` が期待どおりに使用されるようになりました。 以前は、タイプ `varchar(255)` を使用していました。 _Ravi Chandra によってプルリクエスト [26160](https://github.com/magento/magento2/pull/26160)_ ードで送信された修正。 [GitHub-26155](https://github.com/magento/magento2/issues/26155)

<!-- ENGCOM-7153-->

* **My Account**/**Address Book** Address Entries テーブルのテーブルヘッダーの表示の問題を修正しました。  _Abrar Pathan がプルリクエスト [27336](https://github.com/magento/magento2/pull/27336)_ で修正を送信しました。 [GitHub-27335](https://github.com/magento/magento2/issues/27335)

<!-- ENGCOM-5986-->

* レイヤードナビゲーション価格ステップで使用される通貨記号が、期待どおりにデフォルト設定に基づくようになりました。  _Bartomiej Szubert がプルリクエスト [24815](https://github.com/magento/magento2/pull/24815)_ に修正を送信しました。 [GitHub-21684](https://github.com/magento/magento2/issues/21684)

<!-- ENGCOM-6324-->

* ベラルーシ通貨（BYR）の記号が BYN に更新されました。 _Bartomiej Szubert がプルリクエスト [25723](https://github.com/magento/magento2/pull/25723)_ に修正を送信しました。 [GitHub-24713](https://github.com/magento/magento2/issues/24713)

<!-- ENGCOM-6622-->

* カタログページの「製品を比較」セクションが、解像度が 767 px 未満のディスプレイでモバイルビューに期待どおりに表示されるようになりました。 _Hitesh によってプルリクエスト [26418](https://github.com/magento/magento2/pull/26418)_ で送信された修正。 [GitHub-26416](https://github.com/magento/magento2/issues/26416)

<!-- ENGCOM-6376-->

* 製品ページのスクロールが、モバイル表示で期待どおりに機能するようになりました。  _Mateusz Krzeszowiak によってプルリクエスト [25385](https://github.com/magento/magento2/pull/25385)_ ードで送信された修正。 [GitHub-10518](https://github.com/magento/magento2/issues/10518), [GitHub-21717](https://github.com/magento/magento2/issues/21717)

<!-- ENGCOM-6368-->

* モバイル表示で、製品ページのギャラリーサムネール画像を期待どおりにスクロールできるようになりました。 _Fix submitted by iGerchak in pull request [25839](https://github.com/magento/magento2/pull/25839)_. [GitHub-21014](https://github.com/magento/magento2/issues/21014)

<!-- ENGCOM-6425-->

* **管理者**/**コンテンツ**/**テーマ** でテーマタイトルをクリックしても、レコードが重複しなくなりました。 _Eden Duong によってプルリクエスト [25926](https://github.com/magento/magento2/pull/25926)_ ードで送信された修正。 [GitHub-25925](https://github.com/magento/magento2/issues/25925)

<!-- ENGCOM-6328-->

* 管理者の請求先住所/配送先住所ページのレイアウトは、管理者フォームの表示規則に合わせてリファクタリングされました。 _Alexey Rakitin によってプルリクエスト [25699](https://github.com/magento/magento2/pull/25699)_ ードで送信された修正。 [GitHub-23481](https://github.com/magento/magento2/issues/23481), [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6628 6593-->

* 製品の詳細ページの「比較に追加」リンクが、解像度が 640 px 未満のディスプレイのモバイルビューで正しくレンダリングされるようになりました。 _修正は、プルリクエスト [26424](https://github.com/magento/magento2/pull/26424) で Pawe Tylek によって送信され、プルリクエスト [26365](https://github.com/magento/magento2/pull/26365)_ で Tejash Kumbhare によって送信されました。 [GitHub-26364](https://github.com/magento/magento2/issues/26364)

<!-- ENGCOM-6607-->

* モバイル表示のカテゴリページの **並べ替え基準** ラベルが **並べ替え基準** ボタンと重ならなくなりました。 _Andrii Kartavtsev によってプルリクエスト [26381](https://github.com/magento/magento2/pull/26381)_ ードで送信された修正。 [GitHub-25300](https://github.com/magento/magento2/issues/25300)

<!-- ENGCOM-7137-->

* 「**デフォルトを使用**」チェックボックスを有効にして、ダウンロード可能な製品のサンプルタイトルおよびリンクタイトルの値を更新できるようになりました。 _Abel Truong がプルリクエスト [27295](https://github.com/magento/magento2/pull/27295)_ で修正を送信しました。 [GitHub-27169](https://github.com/magento/magento2/issues/27169)

<!-- ENGCOM-6532-->

* ミニ カートの **更新** ボタンと **数量** フィールドの間隔を修正しました。  _Hitesh によってプルリクエスト [26234](https://github.com/magento/magento2/pull/26234)_ で送信された修正。 [GitHub-26227](https://github.com/magento/magento2/issues/26227)

<!-- ENGCOM-7032-->

* アドレス帳ページの追加のアドレス エントリ テーブルの下のボーダーの色が、`thead` と `tbody` のボーダーの色と一致するようになりました。 _Tejash Kumbhare によってプルリクエスト [26649](https://github.com/magento/magento2/pull/26649)_ ードで送信された修正。 [GitHub-26648](https://github.com/magento/magento2/issues/26648)

<!-- ENGCOM-7195-->

* ユーザーがモーダルオーバーレイをクリックしても、プロンプトモーダルで確認アクションが実行されなくなりました。 _Serhiy Zhovnir によってプルリクエスト [27399](https://github.com/magento/magento2/pull/27399)_ ードで送信された修正。

### URL

<!-- ENGCOM-7112-->

* カテゴリリポジトリー（save メソッド）のリファクタリングが完了しました。これにより、以前は、カテゴリ URL キーを変更する際に一意のパスを作成することができませんでした。 _プルリクエスト [27304](https://github.com/magento/magento2/pull/27304)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-14080](https://github.com/magento/magento2/issues/14080)

<!-- ENGCOM-7208-->

* カテゴリ URL キーロジックの検証が改善されました。 _プルリクエスト [27412](https://github.com/magento/magento2/pull/27412)_ で Sergiy Vasiutynskyi によって送信された修正。 [GitHub-13689](https://github.com/magento/magento2/issues/13689)

### URL の書き換え

<!-- MC-31147-->

* CMSページで言語を変更するお客様は、選択したストアビューに正常に移動できるようになりました。 以前は、アプリケーションで 404 エラーが表示されていました。

<!-- ENGCOM-6997-->

* カテゴリパスの組み込みを有効にした製品 URL の URL 書き換え生成が、期待どおりに動作するようになりました。 以前は、複数のストアビューを使用するデプロイメントで、アプリケーションが、レビュー固有の URL パスではなくカテゴリ URL パスのデフォルト値を使用して、誤った URL 書き換えを生成することがありました。 _Pieter Hoste がプルリクエスト [26784](https://github.com/magento/magento2/pull/26784)_ ードで修正を送信しました。 [GitHub-25124](https://github.com/magento/magento2/issues/25124), [GitHub-11616](https://github.com/magento/magento2/issues/11616)

<!-- ENGCOM-6995-->

* リクエストパスがターゲットパスと同じ場合に、URL リダイレクトを防ぐためのチェックを追加しました。 _Bartomiej Szubert がプルリクエスト [26902](https://github.com/magento/magento2/pull/26902)_ に修正を送信しました。 [GitHub-20309](https://github.com/magento/magento2/issues/20309)

<!-- ENGCOM-6303-->

* URL の書き換え操作で、URL の末尾にスラッシュが含まれている場合に、URL からクエリ文字列が削除されなくなりました。  _Alexey Arendarenko によってプルリクエスト [25603](https://github.com/magento/magento2/pull/25603)_ ードで送信された修正。 [GitHub-18717](https://github.com/magento/magento2/issues/18717)

### VAT

<!-- ENGCOM-7458-->

* [EU Vat 番号 ](https://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl) の VAT 検証 URL を修正しました。  _プルリクエスト [27886](https://github.com/magento/magento2/pull/27886)_ で Shikha Mishra が修正を送信しました。 [GitHub-27874](https://github.com/magento/magento2/issues/27874)

### Web API フレームワーク

<!-- MC-29891-->

* POSTの `/rest/default/async/bulk/V1/orders` 呼び出しの問題を修正しました。

<!-- MC-30675-->

* POSTの `/rest/default/async/bulk/V1/products` 呼び出しの問題を修正しました。

<!-- ENGCOM-6945-->

* `is_subscribed` 拡張属性を取得するために、`getList` メソッドがリファクタリングされました。 以前は、API を使用して顧客エンティティを取得する際に、この属性を取得できませんでした。 _プルリクエスト [25311](https://github.com/magento/magento2/pull/25311)_ で enriquei4 によって送信された修正。 [GitHub-13252](https://github.com/magento/magento2/issues/13252)

<!-- ENGCOM-6500-->

* `/V1/customers/:id` を通じて顧客情報を更新しても、`group_id` が不必要にリセットされなくなりました。 以前は、REST を使用して顧客を更新した場合、本文に顧客グループが含まれていなければ、顧客グループは 1 に変更されていました。 _MaxRomanov4669 がプルリクエスト [25958](https://github.com/magento/magento2/pull/25958)_ で送信した修正。 [GitHub-14663](https://github.com/magento/magento2/issues/14663)

<!-- ENGCOM-6920-->

* サービス契約の Nullable ゲッターが、web API で使用される際にリフレクションエラーをスローしなくなりました。 null を返すメソッドと有効な型が、順序に関係なく正しく動作するようになりました。  _プルリクエスト [25806](https://github.com/magento/magento2/pull/25806)_ で Marco k̦Pcke によって送信された修正。 [GitHub-25656](https://github.com/magento/magento2/issues/25656)

<!-- ENGCOM-7075-->

* POST `/V1/guest-carts/:cartId/items` を使用して、商品を特定の買い物かごに追加できるようになりました。 以前は、この呼び出しを使用すると、アプリケーションは `cartId` の値を無視していました。 _プルリクエスト [27172](https://github.com/magento/magento2/pull/27172)_ ードで Vadim Malesh によって送信された修正。 [GitHub-14086](https://github.com/magento/magento2/issues/14086)

<!-- ENGCOM-7102-->

* `PUT /V1/cmsPage/:id` エンドポイントを使用して、他のフィールドの値を変更せずにCMS ページのタイトルを保存できるようになりました。 _プルリクエスト [27237](https://github.com/magento/magento2/pull/27237)_ ードで Vadim Malesh によって送信された修正。 [GitHub-24704](https://github.com/magento/magento2/issues/24704)

<!-- ENGCOM-7011-->

* REST リクエストの結果のページネーションが正確になりました。 以前は、特定のページから結果を要求した場合（例えば `page_size` = 1 で `current_page` 値が範囲外だった場合）、呼び出しは、情報メッセージではなく、結果の最後のページを繰り返して返していました。  _Lukasz Bajsarowicz がプルリクエスト [26988](https://github.com/magento/magento2/pull/26988)_ ードで修正を送信しました。 [GitHub-26986](https://github.com/magento/magento2/issues/26986)、[GitHub-8099](https://github.com/magento/magento2/issues/8099)

<!-- ENGCOM-6540-->

* GET`/V1/orders/items/{id}` の結果に、ギフトメッセージデータを含む拡張属性要素が含まれるようになりました。 _Laura Folco によってプルリクエスト [25946](https://github.com/magento/magento2/pull/25946)_ ードで送信された修正。 [GitHub-19093](https://github.com/magento/magento2/issues/19093)

### ウィッシュリスト

<!-- MC-29988-->

* ウィッシュリストは、ストア表示レベルで有効になっており、グローバルレベルで無効になっている場合、期待どおりに機能するようになりました。 以前は、これらの設定が行われている場合、ウィッシュリストに製品を追加すると 404 エラーが発生していました。

<!-- ENGCOM-6518-->

* 許可されている数を超えるメールアドレスでウィッシュリストを共有しようとした場合に表示されるエラーメッセージを改善しました。  _修正は divyajyothi5321 によってプルリクエスト [26066](https://github.com/magento/magento2/pull/26066)_ で送信されました。 [GitHub-26064](https://github.com/magento/magento2/issues/26064)

<!-- ENGCOM-6723-->

* 解像度が 768 ピクセルより大きく 1023 ピクセル未満のディスプレイに、アプリケーションのウィッシュリストページが期待どおりに表示されるようになりました。 _Hitesh によってプルリクエスト [26546](https://github.com/magento/magento2/pull/26546)_ で送信された修正。 [GitHub-26543](https://github.com/magento/magento2/issues/26543)

<!-- ENGCOM-7062-->

* **ウィッシュリストを共有** をクリックすると生成されるメールに、ウィッシュリストページと同じ製品画像が表示されるようになりました。 _Michael Bottens によってプルリクエスト [27125](https://github.com/magento/magento2/pull/27125) ードで送信された修正。 [GitHub-27124](https://github.com/magento/magento2/issues/27124)_

<!-- ENGCOM-6602-->

* お客様は、グループ化された製品の一部であるシンプルな製品と、数量が異なる同じシンプルな製品の両方をウィッシュリストに追加できるようになりました。  _MaxRomanov4669 がプルリクエスト [26258](https://github.com/magento/magento2/pull/26258)_ で送信した修正。 [GitHub-11209](https://github.com/magento/magento2/issues/11209)

### WYSIWYG

<!-- ENGCOM-6275-->

* WYSIWYG イメージアップローダで、`pub/media/wysiwyg` がストレージルートとして使用されるようになりました。 以前は、アップロードされたでは `pub/media` がストレージルートとして使用されていたため、画像アップローダコードに対する最近の変更の後、アップロードされた画像にアクセスできなくなりました。 _Pieter Hoste がプルリクエスト [24878](https://github.com/magento/magento2/pull/24878)_ ードで修正を送信しました。 [GitHub-22609](https://github.com/magento/magento2/issues/22609)

<!-- ENGCOM-7045-->

* Chrome ブラウザーの TinyMCE4 で、2 バイト文字が期待どおりに処理されるようになりました。 以前は、TinyMCE4 はChrome上で 2 バイト文字（中国語で使用される文字など）を適切に処理できませんでした。 _プルリクエスト [25454](https://github.com/magento/magento2/pull/25454)_ で西弘和氏より修正を提出。 [GitHub-24637](https://github.com/magento/magento2/issues/24637)

## 既知の問題 – 一般

**問題**:PHP 7.4.2 がインストールされているデプロイメントで、ストアフロントのエラーメッセージに異常が発生します。 PHP 7.4.2 で 2.4.0 をデプロイする場合、ストアフロントのエラーメッセージ内のスペース記号はプラス（+）文字に置き換えられます。  このバグは PHP 7.4.2 に固有のものであり、Magento Open Sourceで修正することはできません。 **回避策**：他のバージョンの PHP 7.4.x を使用することをお勧めします。ナレッジベースの記事 [ ストアフロントでの生のメッセージデータ表示 ](https://support.magento.com/hc/en-us/articles/360045804332) を参照してください。<!-- MC-34170-->

**問題**：マーチャントは、管理の「パッケージを作成」ページから注文した製品をパッケージに追加してパッケージを保存することができません。 ナレッジベースの記事 [ 配送ラベルの作成 ](https://support.magento.com/hc/en-us/articles/360046750171) を参照してください。 この問題のホットフィックス **MC-35514-2.4.0-CE-composer.patch** が [ リリース ](https://magento.com/tech-resources/download) から利用可能になりました。<!-- MC-35514-->

**問題**:CLI コマンドの `Store` モジュールの API に依存しているサードパーティの拡張機能をインストールすると、アプリケーションでインストール中にこのエラーメッセージが表示されます：`The default website isn't defined. Set the website and try again`。 **回避策**: Composer からサードパーティの拡張機能への依存関係を削除し、Magentoをインストールしてから、サードパーティの拡張機能をインストールします。

**問題**：買い物かごの下部にある **選択を買い物かごに追加** ボタンが機能しません。 **回避策**：ページ上部の「**選択内容を買い物かごに追加**」ボタンを使用します。 ナレッジベースの記事 [ 「買い物かごに選択項目を追加する」ボタンが機能しない ](https://support.magento.com/hc/en-us/articles/360045838312) を参照してください。<!-- MC-35313-->

**問題**:**SKU による製品の追加** と **製品の追加** により、マーチャントは管理者から新しい注文を作成できません  JavaScriptのバンドルが有効な場合、注文作成ページにボタンが表示されない。  **回避策**：お使いのデプロイメントでJavaScriptのバンドルを無効にします。<!-- MC-36044-->

**問題**：複数のアドレスに出荷されている注文をチェックアウトする際に、顧客が報酬ポイントを削除しようとすると、アプリケーションに `404 not found` エラーが発生します。<!-- MC-35955-->

**問題**：顧客のウィッシュリストから設定可能な製品を編集すると、次の予期しない動作が発生します。製品の設定ページに予期しないフィールドが表示され、「**OK**」をクリックしても製品の設定ページが表示されない。 また、次のメッセージも表示されます。`Please load Wish List item` **回避策**：製品の設定ページをリロードします。<!-- MC-35617-->

**問題**：注文リストが複数のページにまたがる場合、顧客は 1 ページに表示される注文数を変更できません。 現在、注文の最後のページに移動し、ページごとに表示される注文数を変更しようとすると、アプリケーションはこのメッセージを表示します（`You have placed no orders`）。 ナレッジベースの記事 [ 注文の表示エラー ](https://support.magento.com/hc/en-us/articles/360046802271) を参照してください。  **回避策**:「マイ注文」ページを再度開くと、「注文」リストが表示されます。<!-- MC-34153-->

**問題**：新しい税務処理基準を追加ページ（**ストア**/**税務処理基準**）の「**税率のエクスポート**」ボタンを直接クリックしても、`tax_rates.csv` ファイルが期待どおりにダウンロードされません。 **回避策**:「**税率のエクスポート**」ボタンの端をクリックします。  ナレッジベースの記事 [ 書き出し税率が機能しない ](https://support.magento.com/hc/en-us/articles/360045850032) を参照してください。<!-- MC-35345-->

**問題**：管理者の顧客アクティビティ ページの最後に注文された項目、比較リストの製品、最近比較した製品セクションの **更新** ボタンが期待どおりに動作しません。 現在、アプリケーションは、「**更新**」ボタンをクリックするたびにページをスクロールし、製品名を表示しません。 ナレッジベースの記事 [ 顧客のアクティビティの更新が機能しない ](https://magento.zendesk.com/hc/en-us/articles/360046091332) を参照してください。<!-- MC-35296-->

## 既知の問題 – VBE

### Amazon ペイ

* **問題**:Amazon Pay でのチェックアウト中にユーザーが **標準チェックアウトに戻る** をクリックすると、チェックアウトワークフローに支払い方法が表示されない。 **回避策**：チェックアウトページを更新して、見つからないメソッドを表示します。 <!-- BUNDLE-2661-->

* **問題**：新しい買い物かご価格ルールを作成する際に使用可能な「支払方法」ドロップダウン・リストに、同一の 2 つのAmazon支払方法が表示されます。 <!-- BUNDLE-2685-->

### Braintree

* **問題**：管理者が「Braintree精算レポート」ページ（**管理者** > **レポート**）にアクセスしようとすると、アプリケーションにエラーが表示されます。 現在、アプリケーションは次のメッセージを表示します：`An error has happened during application run. See exception log for details`。 ナレッジベースの記事「[Braintree決済レポートの読み込みに失敗 ](https://support.magento.com/hc/en-us/articles/360046798251)」を参照してください。 この問題のホットフィックス **BUNDLE-2683_SettlementReport.patch** が [ リリース ](https://magento.com/tech-resources/download) から利用できるようになりました。<!-- BUNDLE-2683-->

* **問題**：マーチャントは、Venmo が有効で、**カード支払のために Vault を有効にする** 設定が無効になっているデプロイメントで、注文に対する部分請求書を作成できません。 現在、アプリケーションには次のエラーが表示されます：`The "vault_capture" command doesn't exist. Verify the command and try again`。<!-- BUNDLE-2647-->

* **問題**：新しい買い物かご価格ルールを作成する際に使用できる「支払い方法」ドロップダウンリストに、同じ PayPal メソッドが 2 つ表示されます。   <!-- BUNDLE-2686-->

* **問題**: **営業** > **Braintree仮想ターミナル** を開く際にアプリケーションでエラーが発生します。 フォームに破損した UI 要素が含まれていても、支払いを受け入れます。 **回避策**：正しいBraintree資格情報を保存します。これにより、折りたたまれている入力フィールドが修正されます。 ナレッジベースの記事「[Braintree仮想ターミナルページが破損してい ](https://support.magento.com/hc/en-us/articles/360046800071) す」を参照してください。 この問題のホットフィックス **BUNDLE-2670_VirtualTerminal.patch** が [ リリース ](https://magento.com/tech-resources/download) から利用できるようになりました。<!-- BUNDLE-2670-->

* **問題**：顧客がチェックアウト中にローカルの支払い方法を選択すると、エラーメッセージが表示される国は次のとおりです。ベルギー、オランダ、イタリア、スペイン、ポーランド。  **回避策**：エラーメッセージを無視して、支払いを続行します。

### クラルナ

* **問題**:Klarna オンサイトメッセージ（**管理者**/**ストア**/**設定**/**Klarna 設定**）で **デザインテーマ** フィールドを空白のままにすると、空白のページが表示されます。  **回避策**：デザインテーマを選択して保存します。 <!-- BUNDLE-2623-->

### 頂点

* **問題**：住所の検証が無効になっている場合でも、チェックアウトワークフローの「発送」セクションに「**住所の検証**」ボタンが表示されます。 アドレスバリデーターは、更新されたアドレスを再確認せず、アドレス検証が有効な場合でも、誤ったアドレスを最初に入力した後に顧客が正しいアドレスを入力すると、アドレスが無効であることを示すメッセージを引き続き表示します。 **回避策**：頂点アドレスの検証を無効にします。<!-- BUNDLE-2604-->

## コミュニティの投稿

より広いMagento Open Sourceコミュニティに感謝し、今回のリリースへの貢献を認めたいと思います。 現在のリリースに対するコミュニティの投稿について学べる、次の方法を確認してください。

* コミュニティメンバーがこのリリースの修正を提供している場合は、これらのメモの修正済みの問題の節で、「*コミュニティメンバーが提供する修正@member_name*」というフレーズで修正を識別します。

* コミュニティエンジニアリングチーム [ のMagento貢献者 ](https://magento.biterg.io/app/kibana) は、貢献した上位の個人とパートナーのリストを月別、四半期別、年別に管理しています。 その投稿者ページから、GitHub の結合された PR へのリンクをフォローできます。

### パートナーの投稿

次の表に、パートナー様のコントリビューションを示します。 この表は、プルリクエストを行ったパートナー、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）の一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-0-partner.md}}

### 個々のコントリビューターの投稿

次の表に、コミュニティメンバーからの投稿を示します。 この表は、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）、プルリクエストを行ったコミュニティメンバーの一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-0-issues.md}}

### 必要システム構成

当社の技術スタックは、PHP と MySQL をベースに構築されています。 詳しくは、[ システム要件 ](../../../installation/system-requirements.md) を参照してください。

### インストールとアップグレードの手順

Composer を使用してMagento Open Source 2.4.0 をインストールできます。

## 移行ツールキット

データ移行ツールは、既存のMagento 1.x ストアデータをMagento 2.x に転送するのに役立ちます。このコマンドラインインターフェイスには、検証、進行状況のトラッキング、ログ記録、テストなどの機能が含まれています。 インストール手順については、[ データ移行ツールのインストール ](../../../tools/data-migration-tool/install.md) を参照してください。 [ データ移行リポジトリ ](https://github.com/magento/data-migration-tool) の調査または貢献を検討します。

[Code Migration Toolkit](https://github.com/magento/code-migration) は、既存のMagento 1.x のストア拡張機能とカスタマイズ内容をMagento 2.x に転送するのに役立ちます。コマンドラインインターフェイスには、Magento 1.x のモジュールとレイアウトを変換するためのスクリプトが含まれています。
