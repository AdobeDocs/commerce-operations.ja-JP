---
title: Magento Open Source2.4.0 リリースノート
description: 2.4.5Magento Open Sourceリリースの新機能、機能強化、バグ修正および既知の問題について説明します。
exl-id: 058f9dfe-7b03-405b-96cc-3904c910e0f6
source-git-commit: 55e0e688999c47f72593df46648609d9f9f98398
workflow-type: tm+mt
source-wordcount: '19090'
ht-degree: 0%

---

# Magento Open Source2.4.0 リリースノート

Magento Open Source2.4.0 では、PHP 7.4、Elasticsearch7.6.x、MySQL 8.0 のサポートが導入されました。セキュリティの大幅な変更には、デフォルトで Admin での 2 要素認証の有効化が含まれています。

**このリリースでは、Authorize.Net メソッドの統合がコアコードから削除されました。 マーチャントは、Commerce Marketplaceで利用可能な公式の拡張機能に移行する必要があります**.

>[!NOTE]
>
>**Braintree支払統合**:2.4.0 以前は、マーチャントがCommerce Marketplaceから公式のBraintree支払統合拡張機能をインストールして設定し、コア統合を置き換えることをお勧めしました。 このリリース (2.4.0) では、拡張機能がリリースに含まれるようになりました。 マーチャントは、2.4.0 デプロイメントでBraintreeが正しく機能するように、追加の手順に従う必要があります。 詳しくは、 [Braintree](https://docs.magento.com/user-guide/payment/braintree.html) 2.4.0 への移行方法の詳細

このリリースには、2.3.5-p1 に含まれていたコア品質に対するすべての改善、コアコードの 100 件以上の新しい修正、30 件のセキュリティ強化が含まれています。 これには、コミュニティメンバーによる 226 の GitHub の問題の解決が含まれています。 このコミュニティへの投稿は、コアコードの小規模なクリーンアップから、Inventory managementおよびGraphQLの大幅な機能強化まで多岐にわたります。

>[!NOTE]
>
>マイナーリリースは、コードを大幅に強化しました。 2.4.0 にアップグレードする前に、環境が最小限の [技術スタック要件](../../../installation/system-requirements.md).

{{bics}}

>[!NOTE]
>
>通常、セキュリティリリースのパッケージ名には —p1 が付きます。 ただし、2.3.5 では、これらの命名規則から逸脱することは避けられませんでした。その結果、後続のセキュリティパッケージ名に一時的なリップル効果が生じました。 特に、フル機能 2.3.5 リリースは 2.3.5-p1 です。 2.4.0 GA が 2.3.5-p2 になるとリリースされるセキュリティリリースです。 今後のリリースでは、通常の命名規則に戻ることをお勧めします。

## 適用 `AC-3022.patch` DHL を輸送船に供給し続ける

DHL はスキーマバージョン 6.2 を導入し、近い将来にスキーマバージョン 6.0 を廃止します。 DHL 統合をサポートするAdobe Commerce 2.4.4 以前のバージョンでは、バージョン 6.0 のみがサポートされています。これらのリリースをデプロイするマーチャントは、次のリリースを適用する必要があります。 `AC-3022.patch` 最も早い便宜で、DHL を輸送船として提供し続ける。 詳しくは、 [パッチを適用して、DHL を配送先として提供し続けます](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) パッチのダウンロードとインストールに関する情報については、ナレッジベースの記事を参照してください。

## 使用可能なセキュリティパッチ

業者は、四半期ごとの完全リリース（2.3.5-p2 など）で提供される数百の機能修正や機能強化を適用することなく、時間に依存するセキュリティ修正をインストールできるようになりました。 パッチ 2.3.5.2（Composer パッケージ 2.3.5-p2）は、前四半期のリリース 2.3.5-p1 で特定された脆弱性に対する修正を提供するセキュリティパッチです。 2.3.5 リリースに適用されたすべてのホットフィックスが、このセキュリティパッチに含まれています。 (A) *ホットフィックス* は、特定の問題やバグに対処する、リリースされたバージョンの修正を提供します )。

セキュリティパッチの一般情報については、 [新しいセキュリティパッチリリースの概要](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287)セキュリティパッチ（パッチ 2.3.5-p2 を含む）のダウンロードと適用の手順については、 [オンプレミスでの迅速なインストールを開始](../../../installation/composer.md). セキュリティパッチには、セキュリティバグ修正のみが含まれ、完全なパッチに含まれる追加のセキュリティ強化は含まれません。

## その他のリリース情報

これらの機能のコードは四半期ごとのリリースにバンドルされていますが、これらのプロジェクト (Inventory managementやProgressive Web Application(PWA)Studio など ) の一部も個別にリリースされています。 これらのプロジェクトのバグ修正は、個別のプロジェクト固有のリリース情報に記載されています。この情報は、各プロジェクトのドキュメントに記載されています。

## ハイライト

このリリースでは、次の点に注意してください。

### 大幅なセキュリティ強化

このリリースには、30 件を超えるセキュリティ修正とプラットフォームのセキュリティ強化が含まれています。

#### 30 を超えるセキュリティ強化が行われ、リモートコード実行 (RCE) およびクロスサイトスクリプティング (XSS) の脆弱性を閉じるのに役立ちます。

これらの問題に関する確認済みの攻撃は、現在までには発生していません。 ただし、一部の脆弱性は、顧客情報にアクセスするために悪用されたり、管理者セッションを引き継ぐ可能性があります。 これらの問題のほとんどは、攻撃者が最初に管理者へのアクセス権を取得する必要があります。 その結果、以下の取り組みに限定されない限り、管理者を保護するために必要なすべての手順を実行するように促されます。IP許可リストに加える、 [二段階認証](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)、VPN の使用、ではなく一意の場所の使用 `/admin`、およびパスワードの正常性が向上しました。 詳しくは、 [セキュリティ更新プログラムのMagento](https://helpx.adobe.com/security/products/magento/apsb20-47.html) これらの修正された問題に関する議論を これらの修正された問題に関する議論を

#### その他のセキュリティ強化

* **管理者アカウント、magento.com ユーザーアカウント、Cloud SSH アクセス用の 2FA の実装**

   * **Admin アカウントの保護**. 管理者に 2 要素認証 (2FA) が必要になりました。 管理者ユーザーは、まず、UI または Web API を使用して管理者にログインする前に、2FA を設定する必要があります。 2FA はデフォルトで有効になっています。 2FA モジュールを無効にすることを強くお勧めします。  この追加の認証手順により、悪意のあるユーザーが認証なしで Admin にログインするのを困難にします。 詳しくは、 [二段階認証 (2FA)](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html). <!-- MC-22631-->

   * **アカウントの保護**. 2 要素認証 (2FA) は、オプションのセキュリティ層を追加し、magento.com アカウントを、不要な方法でアカウントを使用したいと考える権限のないユーザーからより適切に保護します。 詳しくは、 [アカウントの保護](https://docs.magento.com/user-guide/magento/magento-account-secure.html).

* **Cloud SSH アクセスの保護**. クラウドインフラストラクチャのAdobeは、クラウド環境への SSH アクセスに関する認証要件を管理するための多要素認証 (MFA) の実施を提供します。 2FA の多要素認証は、プロジェクトではデフォルトで有効になっていません。  Adobeでは、この機能を有効にすることを強くお勧めします。 サポートが必要な場合は、サポートにお問い合わせください。 詳しくは、 [SSH アクセス用の多要素認証の有効化](https://devdocs.magento.com/cloud/project/project-enable-mfa-enforcement.html).

* **テンプレートフィルターの厳密モードがデフォルトで有効になりました**. レガシーモードでテンプレートフィルターを使用するコンポーネント（CMS ページやブロックを含む）は、リモートコード実行 (RCE) に対して脆弱性を持つ可能性があります。 厳密モードをデフォルトで有効にすると、RCE 攻撃を意図的に有効にできなくなります。 <!-- MC-22982-->

* **UI データプロバイダーのデータレンダリングがデフォルトで無効になりました**. これにより、悪意のあるユーザーが任意の JavaScript を実行する機会がなくなります。 <!-- MC-17356-->

* **新規 `\Magento\Framework\Escaper` クラス**. このクラスは `.phtml` テンプレートおよびHTMLの生成を担当する PHP クラス。 このクラスには、複数のコンテキストに関連するHTMLのサニタイズメソッドが含まれます。 この `$escaper` ローカル変数は、次の場所で使用できます。 `.phtml` 廃止された代わりに、テンプレートおよびを使用してください `$block->escape{method}`. 用途 `$escaper` ではなく `$block` ～の使用として `$block->escape{method}` は非推奨（廃止予定）となりました。

* **新しい security.txt ファイルのサポート**. このファイルは、セキュリティ研究者がサイト管理者に潜在的なセキュリティ問題を報告するのに役立つ、サーバ上の業界標準のファイルです。

* **コンテンツセキュリティポリシー (CSP) のサポートの強化**. `SecureHtmlRenderer` はフレームワークに追加され、で使用できます。 `.phtml` インラインをホワイトリストに登録するテンプレート `style` および `script` タグ。 デフォルトの CSP 設定では、インラインスクリプトとスタイルは許可されません。XML ファイルで上書きできます。 <!-- MC-34433-->

{{cve-notice}}

### プラットフォームのアップグレード

次のプラットフォームアップグレードは、Web サイトのセキュリティとパフォーマンスを強化するのに役立ちます。 PHP および PHPUnit、Elasticsearch、MySQL、その他の依存関係のサポート対象バージョンは、 [テクノロジースタック要件](../../../installation/system-requirements.md).

* **PHP 7.4 のサポートが導入され、PHP 7.1 および 7.2 は非推奨（廃止予定）となりました。**. 2.4.0 では、PHP 7.4 のサポートが導入されています。

* **PHPUnit 9.x のサポートと PHPUnit 6.5 の廃止**. PHP 7.4 では、最新の PHPUnit テストフレームワーク (PHPUnit 9.x) を使用する必要があります。Commerce Marketplace拡張ベンダーは、すべての新しい拡張バージョンが PHP 7.4 と互換性があること、およびすべてのユニットテストと統合テストが PHPUnit 9 で実行するように構成されていることを確認する必要があります。

* **Elasticsearch7.6.x のサポート**. Elasticsearch7.6.x がAdobe CommerceおよびAdobe Commerceのデフォルトのカタログ検索エンジンになりました。 Elasticsearch7.6.x もインストールしないと、バージョン 2.4.0 をインストールまたはアップグレードできません。Elasticsearchバージョン 2.x コードは削除されました。 Elasticsearchのバージョン 5.x および 6.x は非推奨となり、サポートされなくなりました。 詳しくは、 [検索エンジンの前提条件](../../../installation/prerequisites/search-engine/overview.md).

* **MySQL 8.0 のサポート**. バージョン 2.4.x は MySQL 8.x をサポートしています。（2.4.0 は MySQL 8.0.20 でテストされました。） マーチャントは、パフォーマンス、セキュリティ、信頼性の向上を活用するために、MySQL 8.x にデプロイメントを移行することをお勧めします。 MySQL 5.7 はMagento2.4.x で引き続きサポートされますが、MySQL 5.6 はサポートされなくなりました。 MySQL 5.6 データベースで 2.4.x をホストすることはできません。 詳しくは、 [MySQL](../../../installation/prerequisites/database/mysql.md).

* **MySQL カタログ検索エンジンの削除**. MySQL 検索エンジンが 2.4.0 から削除され、デフォルトの検索エンジンとして「Elasticsearch」に置き換えられました。 Elasticsearchは、優れた検索機能とカタログパフォーマンスの最適化を提供します。  2.4.0 をインストールしてデプロイするには、すべてのマーチャントにElasticsearchが必要です。 [Elasticsearchがインストールされていることを確認](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/prepare/prerequisites.html).

* **MariaDB 10.4 のサポート**. MySQL 8.0 のサポートは、マーチャントが MariaDB 10.4 をMagento Open Sourceでデプロイする機会を提供します。 マーチャントは引き続き 2.4.0 で MariaDB 10.2 を使用できますが、パフォーマンスと信頼性を向上させるために、MariaDB 10.4 にアップグレードすることをお勧めします。 MariaDB 10.0 および 10.1 はサポートされなくなりました（このリリースで MySQL 5.6 のサポートが削除されたため）。

* **Zend Framework 上の依存関係を [Laminas プロジェクト](https://getlaminas.org/about/foundation)** Zend Framework の Linux Foundation の Laminas Project への移行を反映させる。 Zend Framework は非推奨です。 詳しくは、 [Laminas プロジェクトへの Zend Framework の移行](https://community.magento.com/t5/Magento-DevBlog/Migration-of-Zend-Framework-to-the-Laminas-Project/ba-p/443251) DevBlog 投稿。

* **コントローラの分解** を使用すると、拡張機能開発者は「レイヤスーパータイプ」クラスを使用せずに、ActionInterface を直接実装できます。 詳しくは、 [コントローラの分解](https://community.magento.com/t5/Magento-DevBlog/Decomposition-of-Magento-Controllers/ba-p/430883) DevBlog 投稿。 _プルリクエストで Vinai Kopp が開始した機能強化 [16268](https://github.com/magento/magento2/pull/16268) Lukasz Bajsarowicz がプルリクエストで確定 [26778](https://github.com/magento/magento2/pull/26778)_. [GitHub-9582](https://github.com/magento/magento2/issues/9582)

* **Signifyd 不正保護コードのコア統合の削除**. このコア機能はサポートされなくなりました。 商人は [Signifyd Fraud &amp; Chargeback Protection 拡張機能](https://marketplace.magento.com/signifyd-module-connect.html) これはCommerce Marketplaceで使用できます。

* この **コアBraintreeモジュールがコードベースから削除されました**. Braintree支払モジュールで同じ機能セットが提供されるようになりました。 詳しくは、 [Braintree支払](https://marketplace.magento.com/paypal-module-braintree.html).

* Internet Explorer 11.x ブラウザーのサポートは終了しました。

### インフラストラクチャの改善

このリリースには、フレームワークおよびこれらのモジュールの品質を向上させる、コア品質の機能強化が含まれています。顧客アカウント、カタログ、CMS、インポート、買い物かごとチェックアウト、B2B。

* **サードパーティの支払い方法のコア統合の削除**. このリリースでは、Authorize.Net 支払い方法の統合がコアコードから削除されました。 マーチャントは、Commerce Marketplaceで利用可能な公式の拡張機能に移行する必要があります。 詳しくは、 [支払統合の廃止](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Magento-core-payment-integrations/ba-p/426445) devblog 投稿。 <!-- MC-29029-->

* **Elasticsearch（新しいデフォルトの検索エンジン）の部分単語検索のサポート**. Elasticsearchで、クイック検索を使用する際に、製品名と SKU に対する検索用語で部分的な単語の使用がサポートされるようになりました。 この機能は MySQL 検索エンジンでサポートされていました。MySQL 検索エンジンはこのリリースで廃止され、Elasticsearchで置き換えられました。

* **PayPal JavaScript SDK のアップグレード**. PayPal Express Checkout の統合は、必要なリスクパラメーターを自動的に収集して PayPal に渡す SDK である最新の PayPal JavaScript SDK に移行しました。 PayPal Express Checkout 支払い方法の動作は変わりません。 ただし、この SDK を最新バージョンにアップグレードすると、マーチャントは最新の機能とセキュリティの強化にアクセスできます。 <!-- MC-30962-->

* **Web セットアップウィザードの廃止と削除**. 2.4.0 をインストールまたはアップグレードするには、コマンドラインを使用する必要があります。 [インストールMagento](../../../installation/advanced.md).

* **Composer の更新プラグイン**. Composer プラグインは、ルートプロジェクトに加える必要のある変更を解決することで、アップグレードプロセスを合理化します `composer.json` ファイルを更新してから、新しいバージョンに更新してください。 このプラグインは、カスタマイズ部分の上書きを防ぎます。 詳しくは、 [composer のルートプラグインを使用したアップグレード](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/implementation/perform-upgrade.html).

* **販売者が買い物を支援**. この機能を使用すると、商人は顧客に代わってストアフロントを表示できます。 お客様は、ストアフロントでのアカウントへのアクセスを許可することを選択しています。 このコミュニティが開発した機能には、 [MAGEFAN](https://magefan.com/). 詳しくは、 [販売者が買い物を支援](https://docs.magento.com/user-guide/configuration/customers/login-as-customer.html). 次の機能が含まれます。

   * 顧客アカウントにログインできる管理者を制御する ACL は、Web サイトごとに設定できます
   * 複数の Web サイトおよび顧客アカウント範囲との互換性
   * 顧客に代わっておこなわれた注文は、ストアフロントと管理者に記録されます
   * すべてのセッションは、管理者がログアウトすると破棄され、管理者は顧客のパスワードにアクセスできません。

### パフォーマンスの向上

* **顧客データセクションの無効化ロジックの改善**. このリリースでは、すべての顧客セクションデータを無効にする新しい方法が導入され、カスタムの場合にローカルストレージの既知の問題を回避できます `sections.xml` 無効化がアクティブです。  ( 以前は、 *etc/frontend/sections.xml* （アクションの無効化を使用）。 詳しくは、 [非公開コンテンツ](https://developer.adobe.com/commerce/php/development/cache/page/private-content/).

* **Redis のパフォーマンスに対する複数の最適化**. この機能強化により、各要求で実行される Redis に対するクエリの数が最小限に抑えられます。 最適化の対象は次のとおりです。

   * Redis とMagento間のネットワークデータ転送のサイズの縮小

   * CPU サイクルの消費を削減し、読み込む必要のある項目を自動的に決定するアダプタの機能を改善

   * Redis 書き込み操作の競合状態の低減
   詳しくは、 [ページとデフォルトのキャッシュに Redis を使用](../../../configuration/cache/redis-pg-cache.md) および [キャッシュの設定](../../../configuration/cache/caching-overview.md).

* **在庫テーブルに対する SQL クエリの結果のキャッシュを改善しました**. 次の機能強化が含まれます。

   * に対する SQL クエリのキャッシュ `inventory_stock_sales_channel` テーブル（16 ではなく 1 個のクエリ）

   * に対するクエリの結果のキャッシュ `inventory_stock` テーブル（16 ではなく 1 個のクエリ）

* **買い物かごへの迅速な注文に対するパフォーマンスが最大 25～30%向上**.

* マーチャントが [遅延読み込み](https://en.wikipedia.org/wiki/Lazy_loading) 画像を読み込みます。

### Adobe Stock統合 v2.0

**メディアギャラリーから在庫画像のプレビューのライセンスを取得できます**. メディアギャラリーでAdobe Stockのプレビュー画像を検索できるようになり、Stock プレビュー画像のライセンスを取得する手順が減りました。

### ニューメディアギャラリー

以前の Media Gallery に代わる新しいメディアアセット用の検索可能なインターフェイスが提供されます。 管理者は、この機能の以前のバージョンと比べて、画像の検索、フィルタリング、並べ替えを最大 30 倍高速におこなうことができるようになりました。 マーチャントは、このツールを使用してストアフロントの画像の使用状況を評価できます。 拡張機能の開発者は、メディアギャラリー用に開発された拡張機能は、新しいメディアギャラリーでは期待どおりに動作しないことに注意する必要があります。

### Inventory management

Inventory managementのこのリリースの機能強化には、ストア内でのピックアップとバンドル製品のサポートが含まれています。 詳しくは、 [Inventory managementリリースノート](https://experienceleague.adobe.com/docs/commerce-admin/inventory/release-notes.html) 最近のInventory managementのバグ修正の詳細を説明します。

### GraphQL

GraphQLの機能強化は次のとおりです。

* `pickupLocations` クエリは、在庫の店頭取得機能をサポートしています
* `categories` クエリは、指定したフィルターに一致するカテゴリのリストを返します。 このクエリは `categoryList` クエリを実行して、ページネーションをサポートする必要があります。
* `reorderItems` ミューテーションを使用すると、ログインしたユーザーは、以前の注文のすべての製品を買い物かごに追加できます。

詳しくは、 [GraphQL Developer Guide](https://devdocs.magento.com/guides/v2.4/graphql/) を参照してください。 詳しくは、 [リリースノート](https://devdocs.magento.com/guides/v2.4/graphql/release-notes.html) 最近のGraphQLのバグ修正の詳細を説明します。

### PWA Studio

詳しくは、 [互換性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) を参照してください。 機能強化とバグ修正について詳しくは、 [PWA Studioリリース](https://github.com/magento/pwa-studio/releases).

### 機能テストフレームワーク (MFTF)

MFTF v3.0.0 には、次の新機能が含まれ、PHP 7.4 および PHPUnit 9 のサポートが含まれます。

* MFTF ヘルパー。テストフレームワーク外でカスタムアクションを作成できます。
* テストエンティティのスキーマ更新
* テストモジュールのサブフォルダー
* ネストされたアサーション構文
* 非推奨のテストエンティティへの参照を確認してレポートする静的チェック

また、このリリースでは、MFTF のメジャーバージョン要件に対するアップグレードテストに追加された、非推奨のアクションとアップグレードスクリプトも削除されます。

### ベンダーが開発した拡張機能の強化

のこのリリースには、サードパーティベンダーが開発した拡張機能が含まれています。 これらの拡張機能に対する品質と UX の両方の改善と、MFTF カバレッジの拡大を紹介します。

Commerce Marketplace拡張機能のベンダーは、2.4.0 用の新しいバージョンを公開する際に、拡張機能が PHP 7.4 と互換性があることを確認する必要があります。

#### Amazon Pay

このリリースには、次が含まれます。

* CSP の更許可リスト新
* 複数項目の順序で複数の認証を実行する機能
* 日本語アドレスのサポート

#### Braintree支払

この拡張機能は、アドビのコアBraintree統合に代わるものです。 これは、Braintreeコア統合と同じ機能を提供します。 詳しくは、 [Braintree支払](https://marketplace.magento.com/paypal-module-braintree.html).

#### クラルナ

このリリースには、買い物客が利用可能なクレジットおよびファイナンスオプションを理解できるようにする、新しいオンサイトメッセージオプションが含まれています。 また、次の機能強化も含まれています。

* 払い戻し
* API の効率
* cookie と単体テスト
* 割引
* 構成設定に、Klarna のプロモーションメッセージのストアフロント表示を制御するためのオンサイトメッセージセクションが含まれるようになりました。

#### 頂点

このリリースの Vertex には、次の新機能と機能強化が含まれています。

* 管理設定ユーザーエクスペリエンスの改善
* XML スキーマファイルとパッチを使用したインストールおよびアップグレードスクリプトの置き換え
* 非推奨のコード (`ApiClient` および `ClientInterface`)

#### ヨトポ

Yotpo の評価とレビューは、Page Builder と統合されています。

## 修正された問題

2.4.0 コアコードでの数百の問題を修正しました。

### インストール、アップグレード、導入

<!-- MC-23940-->

* Web サイトを、Web サイトのスコープ固有の設定と共に、 `app/etc/config.php` 期待どおり 以前は、Web サイトを削除しようとすると、操作が失敗し、アプリケーションで次のエラーが表示されていました。 `The website with code xxx that was requested wasn't found. Verify the website and try again`. さらに、ストアフロントに次のエラーが表示されました。 `Config files have changed. Run app:config:import or setup:upgrade command to synchronize configuration`. [GitHub-24061](https://github.com/magento/magento2/issues/24061)

<!-- MC-30140-->

* で無効になっている設定 `index.php` は、管理者から編集できなくなりました。

<!-- MC-32405-->

Magento Open Sourceのインストールが正常に完了し、ストアの設定が `config.php`.

<!-- MC-33151-->

* `\Magento\Store\App\Config\Source\RuntimeConfigSource::getEntities` の数を減らすためにリファクタリングされました `SHOW TABLE STATUS` クエリを実行します。 （この変更は、2.3.3 で表示された動作に戻ります）。

<!-- MC-23890-->

* を実行してデータベースをアップグレードしようとすると、データスクリプトが再実行されなくなりました。 `bin/magento setup:upgrade`. 以前は、アップグレードスクリプトが不必要に再実行され、パフォーマンスに影響を与えていました。 [GitHub-19469](https://github.com/magento/magento2/issues/19469)

<!-- MC-30397-->

* Redis への接続が中断された場合に、アプリケーションで次の動作が表示されるようになりました。 以前は、アプリケーションは現在のページを再読み込みせず、次のエラーを表示していました。 `An error has happened during application run. See exception log for details`.

   * 管理およびストアフロントセッションの有効期限が切れます
   * 管理者およびストアフロントユーザーは再度ログインする必要があります
   * セッションデータの保存先 `var/session/`
   * エラーや例外はログに記録されません。

<!-- ENGCOM-6686-->

* この `bin/magento setup:di:compile` コマンドが匿名クラスで失敗しなくなりました。 _プルリクエストで Yevhen Sentiabov から送信された修正 [26533](https://github.com/magento/magento2/pull/26533)_. [GitHub-26532](https://github.com/magento/magento2/issues/26532), [GitHub-21555](https://github.com/magento/magento2/issues/21555)

<!-- ENGCOM-5546-->

* Magentoの Luma テーマで、別の LESS コンパイラを使用する際の LESS コンパイルの問題が、デフォルトでアプリケーションに付属している LESS コンパイラよりも解決されました。 _Pieter Hoste がプル要求で送信した修正 [24003](https://github.com/magento/magento2/pull/24003)_. [GitHub-23619](https://github.com/magento/magento2/issues/23619)

<!-- ENGCOM-6367-->

* 書き込み可能な `env.php` ファイルを作成します。 代わりに、アプリケーションは `no-cache` メンテナンスモード (`Cache-Control`) をクリックします。 以前は、メンテナンスモードを有効にできませんでした。 `env.php` が読み取り専用であり、アプリケーションがメンテナンスモードに切り替える際に FPC を無効にしようとしました。 _プル要求で Marco Pcke によっk̦て送信された修正 [25790](https://github.com/magento/magento2/pull/25790)_. [GitHub-24229](https://github.com/magento/magento2/issues/24229)

<!-- ENGCOM-7236-->

* `db-ssl-verify`  が `ddev` 設定。 _Daniel Ruf によってプル要求で送信された修正 [26763](https://github.com/magento/magento2/pull/26763)_. [GitHub-26762](https://github.com/magento/magento2/issues/26762)

<!-- ENGCOM-6247-->

* Redis キーの有効期限を実装するために、Composer の依存関係が更新され、Redis のパフォーマンスが向上しました。 _プル要求で Toxix によって送信された修正 [25488](https://github.com/magento/magento2/pull/25488)_. [GitHub-25487](https://github.com/magento/magento2/issues/25487)

### Adobe Stock統合

<!-- ENGCOM-6507-->

* Adobe Stockの画像表示に CSS スタイルが追加され、選択した画像のハイライト表示に対応しました。  _プルリクエストで Serhiy Zhovnir によって送信された修正 [25864](https://github.com/magento/magento2/pull/25864)_. [GitHub-761](https://github.com/magento/adobe-stock-integration/issues/761)

<!-- ENGCOM-7021-->

* 矢印キーを使用して入力フィールドカーソルを移動しても、Adobe Stockプレビュー画像のナビゲーションがトリガーされなくなりました。  _プルリクエストで Adarsh Manickam から送信された修正 [27138](https://github.com/magento/magento2/pull/27138)_. [GitHub-973](https://github.com/magento/adobe-stock-integration/issues/973)

<!-- ENGCOM-6840-->

* お客様がAdobe Stock画像にフィルターを適用しようとした際に発生したエラーのメッセージをアプリケーションがキャッシュするようになりました。 _プルリクエストで Shankar Konar によって送信された修正 [26502](https://github.com/magento/magento2/pull/26502)_. [GitHub-863](https://github.com/magento/adobe-stock-integration/issues/863)

<!-- ENGCOM-7195-->

* クリック後にカーソルをウィンドウの左側の垂直スクロールバーに移動したときに、Adobe Stock画像のプレビューが保存されなくなりました。 **プレビューを保存** ただし、保存操作を確認していません。 _プルリクエストで Serhiy Zhovnir によって送信された修正 [27399](https://github.com/magento/magento2/pull/27399)_. [GitHub-1002](https://github.com/magento/adobe-stock-integration/issues/1002)

### バックエンド

<!-- MC-25036-->

* メールテンプレート (**管理者** > **マーケティング** > **通信** > **メールテンプレート**) は、JavaScript の縮小が有効な場合に、管理者からプレビューできるようになりました。 以前は、E メールテンプレートをプレビューしようとすると、E メールのプレビューポップアップウィンドウが空になっていました。 [GitHub-25068](https://github.com/magento/magento2/issues/25068)

<!-- ENGCOM-6433-->

* 制限付き権限を持つ管理者アカウントを作成した後、管理者が期待どおりに管理者にログインできるようになりました。 以前は、管理者にアクセスできませんでした。 代わりに、これらの権限を持つユーザーは、404 エラーでストアフロントにリダイレクトされていました。 _プル要求で Eden Duong から送信された修正 [25909](https://github.com/magento/magento2/pull/25909)_. [GitHub-25881](https://github.com/magento/magento2/issues/25881)

<!-- ENGCOM-6785-->

* 製品を複製する際に、URL キー、メタタイトル、メタキーワード、メタ説明などの SEO データがアプリケーションで重複しなくなりました。  _プルリクエストのダッシュパスパテルから送信された修正 [26659](https://github.com/magento/magento2/pull/26659)_. [GitHub-26054](https://github.com/magento/magento2/issues/26054)

<!-- ENGCOM-6442-->

* 画像を **管理者**  > **コンテンツ** > **ページ**  >  **新しいページを追加**. 以前は、アプリケーションはデベロッパーコンソールで次のエラーをスローしていました。 `500 (Internal Server Error)`. _プル要求で Eden Duong から送信された修正 [25924](https://github.com/magento/magento2/pull/25924)_. [GitHub-25893](https://github.com/magento/magento2/issues/25893)

### 製品のバンドル

<!-- MC-25251-->

* のパフォーマンス `catalog_product_price` バンドル製品のインデックス再作成操作が改善されました。

<!-- MC-29633-->

* バンドル製品の **税区分** および **動的な価格** の設定は、デフォルトのストア表示では無効になっています。 以前は、管理者が **デフォルト値を使用** 隣のオプション **税区分**&#x200B;を指定した場合、アプリケーションによって「 」オプションが有効になり、管理者が別の値を入力して製品を保存できるようになりました。

<!-- MC-30257-->

* バンドル製品の価格が製品ページで正しく計算されるようになりました。

<!-- MC-29745-->

* これで、任意の数のバンドル製品をエラーなく買い物かごに追加できます。 以前は、買い物かごにバンドル製品を追加してから買い物かごに移動すると、次のエラーが表示されていました。 `Please correct the quantity for some products`.

### キャッシュ

<!-- ENGCOM-7114-->

* この `cache.xsd` スキーマから `Magento\Framework\Cache` がリファクタリングされ、 `instance` 管理キャッシュ管理でモジュールを無効にした場合、属性は例外を引き起こさなくなりました。 以前は、 `cache.xml` 無しに `instance` 引数を指定しない場合、アプリケーションは、無効にしようとしたときに例外をスローしました。  _Andrii Beziazychnyi がプル要求で提出した修正 [27307](https://github.com/magento/magento2/pull/27307)_. [GitHub-26224](https://github.com/magento/magento2/issues/26224)

<!-- ENGCOM-6834-->

* `health_check.php` デプロイメントでデータベースキャッシュエンジンが設定されている場合、が失敗しなくなりました。 _Andrii Beziazychnyi がプル要求で提出した修正 [25722](https://github.com/magento/magento2/pull/25722)_. [GitHub-25669](https://github.com/magento/magento2/issues/25669)

### 買い物かごとチェックアウト

<!-- MC-23870-->

* これで、 **バックエンドと同期** 設定が有効になっています。 [GitHub-23833](https://github.com/magento/magento2/issues/23833)

<!-- MC-29786-->

* 発送方法のラジオボタンが、チェックアウトワークフローで期待どおりに有効になりました。

<!-- MC-30258-->

* チェックアウトワークフローの注文レビューページが、Terms &amp; Conditions with to the Checkout **手動で適用** の設定が有効になっています。 以前は、レビューページが検証に合格せず、アプリケーションで 404 エラーが表示されていました。

<!-- MC-32330-->

* 価格が買い物かごで更新される間、アプリケーションに回転アイコンが表示されるようになりました。

<!-- MC-33230-->

* ミニカート内の製品がチェックアウト前に在庫切れになった場合に、情報メッセージがアプリケーションに表示されるようになりました。 在庫切れの項目を削除すると、 **チェックアウトに進む** 」ボタンをクリックします。 以前は、このボタンはアプリケーションに表示されませんでした。

<!-- MC-31391-->

* 製品を追加しようとしたときに、「 **SKU 別の注文** アップロード用のファイルが破損している場合。 以前は、アプリに空白のページが表示されていました。

<!-- MC-32962-->

* 買い物かごの価格ルールが、ルール条件に一致するバンドル製品の子製品にのみ適用されるようになりました。 以前は、アプリケーションは、バンドル製品に属するすべての子製品に買い物かごの価格ルールを適用していました。

<!-- ENGCOM-7485-->

* `StorefrontMiniCartSection`  は、`StorefrontMinicartSection` （MFTF テスト）   _Andrii Kalinich がプル要求で提出した Fix [27955](https://github.com/magento/magento2/pull/27955)_. [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-6389-->

* 配送先住所フォームの国セレクターコンポーネントへのハードコードされた参照は削除されました。  _プルリクエストで Mateusz Krzeszowiak から送信された修正 [25541](https://github.com/magento/magento2/pull/25541)_. [GitHub-22416](https://github.com/magento/magento2/issues/22416)

<!-- ENGCOM-6522-->

* Internet Explorer でストアフロントを表示する際に、カーソルをアイコンの上に置いたときに、アプリケーションが買い物かごの削除アイコンに下線を引かなくなりました。  _プル要求で divyajyothi5321 によって送信された修正 [26173](https://github.com/magento/magento2/pull/26173)_. [GitHub-26164](https://github.com/magento/magento2/issues/26164)

<!-- ENGCOM-6615-->

* 請求先住所と配送先住所の両方に 1 つの住所が選択されている場合、請求先住所を変更しても、顧客の配送先住所は変更されなくなりました。 _プルリクエストで Yuri Tvardyi によって送信された修正 [26279](https://github.com/magento/magento2/pull/26279)_. [GitHub-26276](https://github.com/magento/magento2/issues/26276)

<!-- ENGCOM-6251-->

* ミニカートのプロモーション領域が、期待どおりにレンダリングされるようになりました。 _プル要求で Matti Vapa から送信された修正 [25375](https://github.com/magento/magento2/pull/25375)_. [GitHub-25373](https://github.com/magento/magento2/issues/25373)

### 買い物かごの価格ルール

<!-- MC-23986-->

* 支払い方法に基づく買い物かごの価格ルールが、チェックアウトワークフローの間に適用されるようになりました。 [GitHub-24206](https://github.com/magento/magento2/issues/24206)

<!-- ENGCOM-6550-->

* 日付選択ページ要素の動作を修正しました。 **管理者** > **マーケティング** > **プロモーション** > **カタログ価格ルール**. _プルリクエストで Hitesh から送信された修正 [26290](https://github.com/magento/magento2/pull/26290)_. [GitHub-26289](https://github.com/magento/magento2/issues/26289)

<!-- ENGCOM-7485-->

* `StorefrontMiniCartSection`  は、 `StorefrontMinicartSection` （MFTF テスト）   _Andrii Kalinich がプル要求で提出した Fix [27955](https://github.com/magento/magento2/pull/27955)_. [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-5822-->

* 新しい買い物かご価格ルールの作成ワークフローの未使用のクーポングリッドが無効になりました。 _プル要求で Eden Duong から送信された修正 [24471](https://github.com/magento/magento2/pull/24471)_. [GitHub-24468](https://github.com/magento/magento2/issues/24468)

<!-- ENGCOM-6615-->

* 請求先住所を変更しても、請求先住所と送付先住所の両方に 1 つの住所が選択されている場合、顧客の配送先住所は変更されなくなりました。 _プルリクエストで Yuri Tvardyi によって送信された修正 [26279](https://github.com/magento/magento2/pull/26279)_. [GitHub-26276](https://github.com/magento/magento2/issues/26276)

### カタログ

<!-- MC-25235-->

* スケジュールされた更新に含まれる階層型製品の名前を変更した場合に、アプリケーションでエラーがスローされなくなりました。 以前は、新しい名前で製品を保存しようとすると、次のエラーが表示されていました。 `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '3-0-0-2.0000-0' for key 'UNQ_EBC6A54F44DFA66FA9024CAD97FED6C7', query was: INSERT INTO catalog_product_entity_tier_price (all_groups, customer_group_id, qty, value, website_id, percentage_value, row_id) VALUES (?, ?, ?, ?, ?, ?, ?)`

<!-- MC-29023-->

* カスタム属性値を管理者から期待どおりに保存できるようになりました。

<!-- MC-29775-->

* 最近表示した製品機能で、マルチストアデプロイメントの現在のストア表示にのみ関連付けられた製品が、 **ストア** > **設定** > **カタログ** > **最近表示された/比較対象の製品** > **現在の項目で表示** が **ストア表示**. 以前は、製品が割り当てられた Web サイトに関係なく、すべての Web サイトで最近表示された製品が表示されていました。

<!-- MC-29896-->

* ミニカートに製品画像が歪みなく表示されるようになりました。 以前は、画像コンテナの幅と高さ全体に収まるようにミニカート内の画像が拡大されていました。

<!-- MC-29866-->

* この `getBasePrice` 関数は、文字列ではなく、期待どおりに float 値を返すようになりました。

<!-- MC-30229-->

* 製品の比較機能が期待どおりに動作するようになりました。 現在のユーザーの比較リストにある製品のみが表示されるようになりました。

<!-- MC-30234-->

* テーマにデフォルトの透かしを割り当てることができるようになりました。 以前は、透かしを割り当てた後、アプリケーションは致命的なエラーをスローしました。

<!-- MC-30540-->

* 多数のバリエーション（約 5,000）を持つ設定可能な製品を管理者から正常に編集できるようになりました。 以前は、多数のサブプロダクトを含む設定可能なプロダクトを編集しようとすると、次のエラーが表示されていました。 `Warning: DOMDocumentFragment::appendXML(): Entity: line 1: parser error : CData section too big found in /vendor/magento/framework/View/TemplateEngine/Xhtml/Template.php on line 60`

<!-- MC-30734-->

* での属性セットの並べ替え **管理者** > **カタログ** > **製品** が、期待どおりのアルファベット順に基づいているようになりました。

<!-- MC-30794-->

* マルチストアデプロイメントで、最近表示された製品機能が期待どおりに動作するようになりました。

<!-- MC-31838-->

* この **Web サイト内の製品** 新しい製品ページのチェックボックスが、マルチサイト展開の制限付き管理者に対して、デフォルトで有効になりました。 以前は、デフォルト以外の Web サイトのチェックボックスは事前に選択されておらず、管理者がチェックボックスを選択しなかった場合、アプリケーションでエラーメッセージが表示されていました。

<!-- MC-32772-->

* `addToCart` イベントがデータレイヤーで期待どおりに追跡されるようになりました。 以前は、製品の設定可能なオプションを変更した後、 **買い物かごに追加**、新しい `addToCart` イベントがデータレイヤーに追加されませんでした。

<!-- MC-29449-->

* ミニカートと管理買い物かご (**管理者** > **顧客** > **買い物かごを管理**) カタログ価格ルールが適用される際に、正しい製品価格が表示されるようになりました。 以前は、ストアフロントの買い物かごに正しい製品価格が表示されていましたが、ミニ買い物かごと管理買い物かごには元の製品価格が表示されていました。

<!-- MC-30777-->

* 管理製品グリッド Web サイト列のフィルタリングが期待どおりに機能するようになりました。 以前は、フィルター結果に正しい製品数が表示されませんでしたが、一貫して製品の合計数を 1 と表示していました。

<!-- MC-31432-->

* 価格条件の使用 `catalog_product_entity_decimal` 価格でフィルターする場合。 ただし、このテーブルには、設定可能な製品、バンドルの動的な製品、グループ化された製品のレコードは含まれていません。これらの製品には固定価格がありません。 価格でのフィルタリングに使用する正しいテーブルは、 `catalog_product_index_price`.

<!-- ENGCOM-7104-->

* 管理カタログおよび製品リストで、MSRP、コスト、特別価格の各列に通貨記号が表示されるようになりました。 _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27261](https://github.com/magento/magento2/pull/27261)_. [GitHub-21910](https://github.com/magento/magento2/issues/21910), [GitHub-20906](https://github.com/magento/magento2/issues/20906), [GitHub-20472](https://github.com/magento/magento2/issues/20472)

<!-- ENGCOM-6375-->

* 「顧客グループ価格用に追加」ポップアップウィンドウ (**管理者** > **カタログ**  > **製品** > **新製品** > **高度な価格**) が閉じるアイコンをクリックしたときに、期待どおりに閉じるようになりました。 _Ashna-Jahan がプル要求で送信した修正 [25759](https://github.com/magento/magento2/pull/25759)_. [GitHub-25433](https://github.com/magento/magento2/issues/25433)

<!-- ENGCOM-6300-->

* 新しい製品の説明とタイトルに対して提供されるサンプルの説明に、二重引用符は含まれなくなりました。  _Nathan Morgan がプル要求で提出したフィックス [25655](https://github.com/magento/magento2/pull/25655)_. [GitHub-25654](https://github.com/magento/magento2/issues/25654)

<!-- ENGCOM-6424-->

* 無効な価格を使用してカテゴリページ上の製品をフィルターしようとしても、アプリケーションでエラーがスローされなくなりました。 以前は、アプリケーションはこのエラーをシステムログに記録していました。 _プルリクエストで Ihor Sviziev によって送信された修正 [25912](https://github.com/magento/magento2/pull/25912)_. [GitHub-25911](https://github.com/magento/magento2/issues/25911)

<!-- ENGCOM-6455-->

* 複数ページのカテゴリ検索結果間を移動できるようになりました。 以前は、戻るボタンを使用して結果の最初のページに戻ろうとすると、アプリケーションで検索結果の重複ページが作成されていました。 _プル要求で Douglas Radburn によって提出された Fix [25337](https://github.com/magento/magento2/pull/25337)_. [GitHub-14971](https://github.com/magento/magento2/issues/14971)

<!-- ENGCOM-6194-->

* 戻り値の型をに修正しました。 `string|null` の `getSourceModel` メソッド `Eav\Attribute.php` クラス。 _プル要求で Mychailo から送信された修正 [25333](https://github.com/magento/magento2/pull/25333)_. [GitHub-25278](https://github.com/magento/magento2/issues/25278)

<!-- ENGCOM-6625-->

* 新しい（重複した）製品を保存しても、製品の画像が何百回も重複しなくなりました。 _プル要求で Jeroen から送信された修正 [25875](https://github.com/magento/magento2/pull/25875)_. [GitHub-9466](https://github.com/magento/magento2/issues/9466)

<!-- ENGCOM-6818-->

* タイプのカスタムオプションを含む製品を削除した場合に、アプリケーションで JavaScript エラーがスローされなくなりました `file` 管理者からの注文の作成中に  _プルリクエストで adrian-martinez-interactiv4 によって送信された修正 [24843](https://github.com/magento/magento2/pull/24843)_. [GitHub-24842](https://github.com/magento/magento2/issues/24842)

<!-- ENGCOM-6959-->

* を使用した、画像のない製品の作成 `product_page_image_large` レイアウトでは、プレースホルダー画像が期待どおりに表示されます。 以前は、アプリケーションは次のエラーをスローしていました： `Fatal error: PHP Fatal error: Uncaught TypeError: Argument 1 passed to Magento\Catalog\Block\Product\ImageFactory::getRatio() must be of the type integer, null given`. _Lukasz Bajsarowicz がプル要求で送信した修正 [26974](https://github.com/magento/magento2/pull/26974)_. [GitHub-26973](https://github.com/magento/magento2/issues/26973)

<!-- ENGCOM-6983-->

* 以下を使用して、 `POST /V1/:sku/links` 製品に既存のリンクがある場合に、製品の空の配列で製品リンクを設定するエンドポイント。 以前は、アプリケーションはエラーをスローしていました。 _プルリクエストで Sathish Subramanian から送信された修正 [26979](https://github.com/magento/magento2/pull/26979)_. [GitHub-26800](https://github.com/magento/magento2/issues/26800)

<!-- ENGCOM-7151-->

* 製品グリッドのアクションドロップダウンメニューを使用して、管理者から複数の製品属性を更新する際に、製品の重み付けを持つかどうかを指定できるようになりました。  _プルリクエストで Bartomiej Szubert によって送信された修正 [26075](https://github.com/magento/magento2/pull/26075)_. [GitHub-6310](https://github.com/magento/magento2/issues/6310)

<!-- ENGCOM-7453-->

* 検証ロジックが **グリッドの許容値の 1 ページあたりの製品数** および **グリッドのデフォルト値の 1 ページあたりの製品** ストア設定ページのフィールド。 以前は、ストア管理者は、これらのフィールドに使用できない値を入力できました。  _Lukasz Bajsarowicz がプル要求で送信した修正 [27093](https://github.com/magento/magento2/pull/27093)_. [GitHub-27089](https://github.com/magento/magento2/issues/27089)_

### カタログウィジェット

<!-- MC-29167-->

* この `CatalogWidget` 製品リストがアンカーカテゴリで期待どおりに動作し、アンカーカテゴリの製品が一致して表示されるようになりました。 以前は、アンカーであるが、製品が割り当てられていない親カテゴリを選択した場合、製品はウィジェットに表示されませんでした。

<!-- MC-30260-->

* 選択した親カテゴリのすべての子が期待どおりに表示されるようになりました。 以前は、アンカーである親カテゴリを選択していて、割り当てられた製品が含まれていない場合、ネストされた製品はすべて表示されませんでした。

<!-- MC-31171-->

* 最近表示された製品ウィジェットが、 **ストア** > **設定** > **カタログ** > **カタログ** > **最近表示された/比較** > **ウィジェット製品をバックエンドストレージと同期** が **はい**.

### クリーンアップ

<!-- ENGCOM-6573-->

* モジュール XML から余分な終了タグを削除しました。 _プルリクエストで Tejash Kumbhare から送信された修正 [26339](https://github.com/magento/magento2/pull/26339)_. [GitHub-26338](https://github.com/magento/magento2/issues/26338)

<!-- ENGCOM-6521-->

* 修正された位置ずれ **請求先住所と配送先住所が同じです** チェックアウトワークフローの「確認と支払い」ページセクションにあるチェックボックス。  _プル要求で divyajyothi5321 によって送信された修正 [26169](https://github.com/magento/magento2/pull/26169)_. [GitHub-26168](https://github.com/magento/magento2/issues/26168)

<!-- ENGCOM-6581-->

* チェックアウトワークフローの「配送先住所」セクションのフィールドラベルとアスタリスクの間の不要な空白を削除しました。  _Daniel Ruf によってプル要求で送信された修正 [26285](https://github.com/magento/magento2/pull/26285)_. [GitHub-26275](https://github.com/magento/magento2/issues/26275)

<!-- ENGCOM-6480-->

* チェックアウトワークフローの [ 発送方法 ] セクションのラジオボタンの位置がずれた問題を修正しました。  _プルリクエストで Hitesh から送信された修正 [25966](https://github.com/magento/magento2/pull/25966)_. [GitHub-25962](https://github.com/magento/magento2/issues/25962)

<!-- ENGCOM-6579-->

* モバイル表示でのメニューの間隔の一貫性が修正されました。 _プルリクエストで Hitesh から送信された修正 [26238](https://github.com/magento/magento2/pull/26238)_. [GitHub-26235](https://github.com/magento/magento2/issues/26235)

<!-- ENGCOM-7225-->

* モバイル表示でのミニカートの編集アイコンと削除アイコンの位置ずれを修正。  _プルリクエストで Vasilii Burlacu から送信された修正 [27493](https://github.com/magento/magento2/pull/27493)_. [GitHub-26652](https://github.com/magento/magento2/issues/26652)

<!-- ENGCOM-6967-->

* 「新しい税率/郵便番号の追加」ページの税率郵便番号範囲およびチェックボックスのずれを修正しました (**管理者**  >  **ストア**  >  **税金** >  **税ゾーンと税率**) をクリックします。 _プルリクエストで Sathish Subramanian から送信された修正 [26932](https://github.com/magento/magento2/pull/26932)_. [GitHub-26917](https://github.com/magento/magento2/issues/26917)

<!-- ENGCOM-7237-->

* セットアップウィザードから管理者へのリンクが正常に機能するようになりました。 _Oleh Usik がプル要求で提出した修正 [26100](https://github.com/magento/magento2/pull/26100)_. [GitHub-24990](https://github.com/magento/magento2/issues/24990)

<!-- ENGCOM-6531-->

* 管理のキャッシュ管理グリッドのステータス列で並べ替えが無効になりました。 _プルリクエストで Sathish Subramanian から送信された修正 [26215](https://github.com/magento/magento2/pull/26215)_. [GitHub-26208](https://github.com/magento/magento2/issues/26208)

<!-- ENGCOM-7015-->

* 上のページ要素の位置のずれを修正しました。 **管理者** >  **ストア**  >  **属性**  > **評価** >  **新しい評価を追加** ダイアログ。 _プルリクエストで Sathish Subramanian から送信された修正 [27014](https://github.com/magento/magento2/pull/27014)_. [GitHub-26992](https://github.com/magento/magento2/issues/26992)

<!-- ENGCOM-6485-->

* [ デザインの変更を追加 ] ページのカレンダーアイコンの位置がずれていた問題を修正しました。 _プルリクエストで Eduard Chitoraga から送信された修正 [26063](https://github.com/magento/magento2/pull/26063)_. [GitHub-20379](https://github.com/magento/magento2/issues/20379)

<!-- ENGCOM-6447-->

* ホームページのホバーメニューに表示されるサブメニューの不要なスペースを削除しました。 _プルリクエストで Hitesh から送信された修正 [25973](https://github.com/magento/magento2/pull/25973)_. [GitHub-25972](https://github.com/magento/magento2/issues/25972)

<!-- ENGCOM-6534-->

* 店頭の製品詳細ページの価格ラベルのずれを修正しました。 _プル要求で divyajyothi5321 によって送信された修正 [26237](https://github.com/magento/magento2/pull/26237)_. [GitHub-25936](https://github.com/magento/magento2/issues/25936)

<!-- ENGCOM-6536-->

* 在庫切れのテキストの、  **買い物かごに追加** ボタンをクリックします。  _プル要求で divyajyothi5321 によって送信された修正 [26183](https://github.com/magento/magento2/pull/26183)_. [GitHub-26181](https://github.com/magento/magento2/issues/26181)

<!-- ENGCOM-6458-->

* 統合成功メッセージが  **管理者**  > **システム** > **拡張機能** > **統合** が正しく表示されるようになりました。 _プル要求で divyajyothi5321 によって送信された修正 [26011](https://github.com/magento/magento2/pull/26011)_. [GitHub-25930](https://github.com/magento/magento2/issues/25930)

### CMS コンテンツ

<!-- MC-29619-->

* すべての CMS ページを保存および複製できるようになりました。 以前は、特定のページを複製しようとすると、アプリケーションが次の例外をスローしていました。 `Unique constraint violation found`.

<!-- MC-30963-->

* ブロックが異なるストアビューに割り当てられている場合、同じ名前の CMS ブロックをアプリケーションで作成できるようになりました。

<!-- MC-30103-->

* ギャラリー画像のサムネールから選択を選択し、期待どおりにキャッシュされるようになりました。 以前は、これらの画像はその場でサイズ変更されていました。

<!-- MC-32275-->

* 複数のストアに割り当てられた CMS ページを保存した際に、アプリケーションがエラーをスローしなくなりました。 以前は、CMS ページを作成または編集した際に、アプリケーションはページを保存しましたが、次のエラーもスローしていました。 `Item (Magento\VersionsCms\Model\Hierarchy\Node) with the same ID "PAGE_ID" already exists`.

<!-- MC-32452-->

* 新しい CMS ページが、Web サイトのストアページ階層に対して期待どおりに追加されるようになりました。

<!-- ENGCOM-7033-->

* CMS ページのカスタムレイアウトの更新ロジックが改善されました。 以下の特定のレイアウト変更が適用されるようになりました： `cms_page_view_selectable_home_somechanges.xml`. _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27131](https://github.com/magento/magento2/pull/27131)_. [GitHub-26758](https://github.com/magento/magento2/issues/26758)

### 設定可能な製品

<!-- MC-23546-->

* 設定可能な製品の子製品を API で正常に無効にできるようになりました。

<!-- MC-30391-->

* を使用した買い物かごの価格ルール **カテゴリとして設定された条件（親のみ）** 現在は、一貫して期待どおりに動作します。

<!-- MC-30989-->

* 「クロス販売」タブから設定可能な製品を買い物かごに追加できるようになりました。 製品を選択し、 **買い物かごに追加** このタブから、製品の詳細ページが表示され、特定の製品オプションを選択できます。 以前は、404 エラーページにリダイレクトされていました。

<!-- MC-32411-->

* これらの製品をリンクする API 呼び出しが失敗した場合に、アプリケーションが単純な製品を設定可能な製品にリンクしなくなりました。

<!-- ENGCOM-6483-->

* 設定可能な製品に対して「現在のバリエーション」リストの SKU のレンダリングを修正しました。 _プルリクエストで KaushikChavda から送信された修正 [26007](https://github.com/magento/magento2/pull/26007)_. [GitHub-25591](https://github.com/magento/magento2/issues/25591)

<!-- ENGCOM-6460-->

* これで、 `system.xml` 値を  **管理者** > **システム** > **設定** ラベルが関連付けられていないフィールド内で使用されます。 _プルリクエストで Andrii Chorniy によって送信された修正 [25985](https://github.com/magento/magento2/pull/25985)_. [GitHub-23899](https://github.com/magento/magento2/issues/23899)

<!-- ENGCOM-6689-->

* のパフォーマンス `\Magento\ConfigurableProduct\Model\Product\Type\Configurable::isSalable` は最適化されています。  _Stanislav Ilnytskyi がプル要求で提出した修正 [26071](https://github.com/magento/magento2/pull/26071)_. [GitHub-26065](https://github.com/magento/magento2/issues/26065)

<!-- ENGCOM-6992-->

* 設定可能な製品画像の更新を担当するロジックが改善されました。 以前は、設定可能な製品に関連付けられた単純な製品には、設定可能な製品に関連付けられたデフォルトの画像のみが表示され、アプリケーションで製品に対して誤ったメイン画像が表示されることがありました。 _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [26560](https://github.com/magento/magento2/pull/26560)_. [GitHub-26473](https://github.com/magento/magento2/issues/26473), [GitHub-26856](https://github.com/magento/magento2/issues/26856), [GitHub-26858](https://github.com/magento/magento2/issues/26858)

<!-- ENGCOM-6520-->

* 設定可能な製品の割引オプションを選択した場合、アプリケーションで製品の特別価格が期待どおりに表示されるようになりました。 以前は、 `class="normal-price"` は次の値に変更されませんでした： `class="special-price"` 割引オプションが選択された場合。 _プル要求で Ravi Chandra から送信された修正 [26170](https://github.com/magento/magento2/pull/26170)_. [GitHub-24972](https://github.com/magento/magento2/issues/24972)

### Cookie

<!-- MC-24182-->

* この `setRedirectCookie` および `clearRedirectCookie` 関数が期待どおりに動作するようになりました。 以前は、これらの関数は Cookie をブラウザーに送信していましたが、すべての Cookie パラメーターが欠落していました。 [GitHub-24547](https://github.com/magento/magento2/issues/24547)

<!-- ENGCOM-6891-->

* メタデータが `setRedirectCookie` および `clearRedirectCookie` 関数  _プル要求で Alexander Lukyanov によって送信された修正 [24612](https://github.com/magento/magento2/pull/24612)_. [GitHub-24547](https://github.com/magento/magento2/issues/24547)

### カスタム顧客属性

<!-- MC-32301-->

* 空の顧客属性フィールドを **Formsを使用** フィールドに値を入力します。 以前は、アプリケーションは次のエラーをスローしていました： `PHP Fatal error: Uncaught TypeError: Argument 2 passed to Magento\Eav\Model\Attribute\Data\Text::validateLength() must be of the type string, null given`.

### 顧客

<!-- MC-29102-->

* ゲストとしてニュースレターを購読したお客様は、新しいアカウントの登録後、購読解除されなくなります。

<!-- MC-29841-->

* 新しい `PHPSession` パスワードを変更するたびに、

<!-- MC-30650-->

* これで、顧客を作成し、Web サイトに関連付けドロップダウンメニュー ( **顧客** > **すべての顧客** > **新しい顧客の追加**. 以前は、マルチサイトデプロイメントで新しい顧客をデフォルト以外の Web サイトに関連付けようとすると、次のエラーが表示されていました。 `The store view is not in the associated website`.

<!-- MC-29946-->

* 無効なクレジットカードが原因でトランザクションが最初に拒否されたが、後で正常に完了した場合に、顧客がチェックアウト時にデフォルトの請求および配送フィールドに入力した情報が保存されるようになりました。 以前は、顧客が有効な支払い情報を入力すると、アプリケーションが注文を作成していましたが、チェックアウトワークフローの「マイアカウント」セクションのデフォルトの請求先住所や配送先住所は更新されませんでした。

<!-- MC-32325-->

* マルチサイト展開で管理者から新しい顧客を作成する場合、このアプリケーションでは顧客グループ設定が使用されるようになりました。

<!-- MC-31481-->

* これで、アプリケーションは、 **顧客とアドレス（単一ファイル）** オプション `cron` が有効になっていて、顧客グリッドインデクサーが **スケジュール別に更新**. 後 `cron` を実行すると、読み込んだ顧客情報を管理者が期待どおりに使用できます。 以前は、アプリケーションは顧客データをインポートしましたが、顧客グリッドは新しくインポートされた顧客レコードで更新されませんでした。

<!-- MC-31117-->

* 生年月日が必要な場合に、ストアフロントから新しい顧客を作成できるようになりました。 以前は、有効な DOB 値を入力した場合でも、このフィールドが必須の場合は新しい顧客を作成できませんでした。 [GitHub-26700](https://github.com/magento/magento2/issues/26700)

<!-- MC-31945-->

* 管理者からの顧客の作成で、デフォルトの顧客グループ設定が期待どおりに優先されるようになりました。

<!-- MC-31425-->

* この `PHPSessionId` は、お客様がログアウトしてから再度ログインした後に、期待どおりに変更されるようになりました。

<!-- MC-32152-->

* 顧客カートの管理表示に、複数 Web サイトのデプロイメントで、複数の Web サイトから買い物かごに追加されたすべての製品が表示されるようになりました。 以前は、顧客がデフォルト以外の Web サイトから買い物かごに製品を追加した場合、その製品は管理画面に表示されませんでした ( **顧客アカウントの共有** が **グローバル**.

<!-- ENGCOM-6667-->

* 管理者から買い物かごが表示されたときに、顧客が買い物かごに入れた製品のみが表示されるようになりました。 以前は、顧客の買い物かごには、カタログ内のすべての製品が管理者から表示されていました。 _プル要求で Ravinder から送信された修正 [26489](https://github.com/magento/magento2/pull/26489)_. [GitHub-26437](https://github.com/magento/magento2/issues/26437)

<!-- ENGCOM-7036-->

* 現在は、 **生年月日** フィールドを編集しているときに、管理者から顧客を編集する際に使用します。 以前は、アプリケーションはユーザーのロケールを考慮せず、一部の誕生日に対して次のエラーが表示されていました。 `The Date of Birth should not be greater than today`.   _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27149](https://github.com/magento/magento2/pull/27149)_. [GitHub-27027](https://github.com/magento/magento2/issues/27027)

<!-- ENGCOM-6208-->

* 管理者からの注文時に、電子メールフィールドが必要なくなりました。  _プルリクエストで solwininfotech によって送信された修正 [24479](https://github.com/magento/magento2/pull/24479)_. [GitHub-22251](https://github.com/magento/magento2/issues/22251)

<!-- ENGCOM-6423-->

* マイアカウントダッシュボードで、モバイル表示で電子メールアドレスの値が正しく表示されるようになりました。 _プル要求で Eden Duong から送信された修正 [25942](https://github.com/magento/magento2/pull/25942)_. [GitHub-25935](https://github.com/magento/magento2/issues/25935)

<!-- ENGCOM-7034-->

* クリック **アカウントの作成** ボタンを複数回クリックしても、登録リクエストが複数回送信されなくなりました。 _プル要求で princeCB によって送信された修正 [26642](https://github.com/magento/magento2/pull/26642)_. [GitHub-26590](https://github.com/magento/magento2/issues/26590)

<!-- MC-29102-->

* ゲストとしてニュースレターを購読したお客様は、新しいアカウントの登録後、購読解除されなくなります。

<!-- MC-29841-->

* 新しい `PHPSession` パスワードを変更するたびに、

<!-- MC-30650-->

* これで、顧客を作成し、Web サイトに関連付けドロップダウンメニュー ( **顧客** > **すべての顧客** > **新しい顧客の追加**. 以前は、マルチサイトデプロイメントで新しい顧客をデフォルト以外の Web サイトに関連付けようとすると、次のエラーが表示されていました。 `The store view is not in the associated website`.

<!-- MC-29946-->

* 無効なクレジットカードが原因でトランザクションが最初に拒否されたが、後で正常に完了した場合に、顧客がチェックアウト時にデフォルトの請求および配送フィールドに入力した情報が保存されるようになりました。 以前は、顧客が有効な支払い情報を入力すると、アプリケーションが注文を作成していましたが、チェックアウトワークフローの「マイアカウント」セクションのデフォルトの請求先住所や配送先住所は更新されませんでした。

<!-- MC-32325-->

* マルチサイト展開で管理者から新しい顧客を作成する場合、このアプリケーションでは顧客グループ設定が使用されるようになりました。

<!-- MC-31481-->

* これで、アプリケーションは、 **顧客とアドレス（単一ファイル）** オプション `cron` が有効になっていて、顧客グリッドインデクサーが **スケジュール別に更新**. 後 `cron` を実行すると、読み込んだ顧客情報を管理者が期待どおりに使用できます。 以前は、アプリケーションは顧客データをインポートしましたが、顧客グリッドは新しくインポートされた顧客レコードで更新されませんでした。

<!-- MC-31117-->

* 生年月日が必要な場合に、ストアフロントから新しい顧客を作成できるようになりました。 以前は、有効な DOB 値を入力した場合でも、このフィールドが必須の場合は新しい顧客を作成できませんでした。 [GitHub-26700](https://github.com/magento/magento2/issues/26700)

<!-- MC-31945-->

* 管理者からの顧客の作成で、デフォルトの顧客グループ設定が期待どおりに優先されるようになりました。

<!-- MC-31435-->

* この `PHPSessionId` は、お客様がログアウトしてから再度ログインした後に、期待どおりに変更されるようになりました。

<!-- MC-32152-->

* 顧客カートの管理表示に、複数 Web サイトのデプロイメントで、複数の Web サイトから買い物かごに追加されたすべての製品が表示されるようになりました。 以前は、顧客がデフォルト以外の Web サイトから買い物かごに製品を追加した場合、その製品は管理画面に表示されませんでした ( **顧客アカウントの共有** が **グローバル**.

<!-- ENGCOM-7036-->

* 現在は、 **生年月日** フィールドを編集しているときに、管理者から顧客を編集する際に使用します。 以前は、アプリケーションはユーザーのロケールを考慮せず、一部の誕生日に対して次のエラーが表示されていました。 `The Date of Birth should not be greater than today`.   _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27149](https://github.com/magento/magento2/pull/27149)_. [GitHub-27027](https://github.com/magento/magento2/issues/27027)

<!-- ENGCOM-6208-->

* 管理者からの注文時に、電子メールフィールドが必要なくなりました。  _プルリクエストで solwininfotech によって送信された修正 [24479](https://github.com/magento/magento2/pull/24479)_. [GitHub-22251](https://github.com/magento/magento2/issues/22251)

<!-- ENGCOM-6667-->

* 管理者から買い物かごが表示されたときに、顧客が買い物かごに入れた製品のみが表示されるようになりました。 以前は、顧客の買い物かごには、カタログ内のすべての製品が管理者から表示されていました。 _プル要求で Ravinder から送信された修正 [26489](https://github.com/magento/magento2/pull/26489)_. [GitHub-26437](https://github.com/magento/magento2/issues/26437)

<!-- ENGCOM-6423-->

* マイアカウントダッシュボードに、モバイル表示で電子メールアドレスの値が正しく表示されるようになりました。 _プル要求で Eden Duong から送信された修正 [25942](https://github.com/magento/magento2/pull/25942)_. [GitHub-25935](https://github.com/magento/magento2/issues/25935)

<!-- ENGCOM-7034-->

* クリック **アカウントの作成** ボタンを複数回クリックしても、登録リクエストが複数回送信されなくなりました。 _プル要求で princeCB によって送信された修正 [26642](https://github.com/magento/magento2/pull/26642)_. [GitHub-26590](https://github.com/magento/magento2/issues/26590)

### ディレクトリ

<!-- MC-33168-->

* デフォルトの州ドロップダウンメニューが、選択した Web サイトに割り当てられた許可された国と、 **デフォルトの税金宛先の計算** フィールドに入力します。 以前は、このドロップダウンには、デフォルト Web サイトに割り当てられた国が一覧表示されていました。

### ダウンロード可能

<!-- MC-32306-->

* インポートファイルを使用して、SKU と説明でダウンロード可能な製品を一括更新できるようになりました。 以前は、検証エラーが発生し、インポートに失敗していました。

### 房室

<!-- MC-29999-->

* アプリケーションは、マルチサイトデプロイメントでチェックアウトワークフローの電話番号フィールドが必要かどうかを決定する、ストア固有の設定に従うようになりました。 以前は、あるストアがチェックアウトワークフローでこのフィールドを必要とし、別のストアがこのフィールドを必要としなかったデプロイメントで、必要のないストアのチェックアウト中にこのフィールドを完了しなかったお客様に次のエラーが発生していました。 `Please check the shipping address information. "telephone" is required. Enter and try again`.

<!-- ENGCOM-6489-->

* EAV 並べ替え順 `attribute option_id` は、期待どおりに機能します。 _Tan Sezer がプル要求で送信した修正 [24360](https://github.com/magento/magento2/pull/24360)_. [GitHub-24357](https://github.com/magento/magento2/issues/24357)

<!-- ENGCOM-7082-->

* REST で新しい属性を追加し、管理者から属性セットに割り当てた後に、新しい製品を作成できるようになりました。 以前は、アプリケーションは 500 エラーをスローしていました。  _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27191](https://github.com/magento/magento2/pull/27191)_. [GitHub-26827](https://github.com/magento/magento2/issues/26827)

### 電子メール

<!-- MC-32842-->

* 返品要求時に顧客に送信される承認 E メールに、期待どおりの RMA ステータスが含まれるようになりました。 以前は、この電子メールで、期待された戻りステータスではなく空の文字列が表示されていました。

<!-- MC-32864-->

* 顧客アカウントがグローバルに共有されるマルチサイトデプロイメントでパスワードを忘れたと報告された場合、顧客は現在の Web サイトからリダイレクトされなくなりました。 以前は、のお客様は、アカウントが作成された Web サイトにリダイレクトされていました。

<!-- MC-31544-->

* 顧客に送信される注文確認 E メールに、注文済み項目のリストが期待どおりに含まれるようになりました。 以前は、デフォルトのテンプレートを読み込んで保存することで、管理者で電子メールテンプレートを作成した場合、このテンプレートから生成された電子メールには、順序付けされた項目のリストが含まれていませんでした。 [GitHub-26882](https://github.com/magento/magento2/issues/26882)

### フレームワーク

* Zend Framework への依存関係は、 [Laminas プロジェクト](https://getlaminas.org/about/foundation) Zend Framework の Linux Foundation の Laminas Project への移行を反映させる。 Zend Framework は非推奨です。 _プルリクエストで Ihor Sviziev によって送信された修正 [26436](https://github.com/magento/magento2/pull/26436)_. [GitHub-26335](https://github.com/magento/magento2/issues/26335)

<!-- MC-25257-->

* 特別な価格範囲設定（開始日/終了日）が、オランダ語ロケールを使用する管理者アカウントで正しく機能するようになりました。

<!-- MC-29388-->

* `php bin/magento cron:run` では、変更ログテーブルの項目が複数回処理されなくなりました。 以前は、変更ログテーブルに100000以上の新しいバージョンがある場合、同じ `entity id`.

* `php bin/magento setup:cron:run` コマンドが削除されました。 crontabs でのこれへの参照は、アップグレード時に削除する必要があります。

* この `update/cron.php` ファイルは 2.4.0 で削除されました。このファイルがインストールに存在する場合は、安全に削除できます。 また、アップグレード時に crontabs でこのファイルへの参照を削除します。

<!-- MC-30544-->

* 属性を更新アクションによって、製品のタイムスタンプが正しく更新されるようになりました。 `updated_at column` から `catalog_product_entity` 管理者の「製品の編集」ページで製品を更新する場合。

<!-- MC-30834-->

* 設定 `'persistent' => '1'` in `env.php` 実行時にエラーがスローされなくなりました `setup:upgrade`.

<!-- MC-32243-->

* この **無効なフォームキーです。 ページを更新してください** ログインページのテキスト文字列が期待どおりに翻訳されるようになりました。

<!-- MC-33278-->

* のパフォーマンスが向上しました `Magento\Framework\App\DeploymentConfig\Reader::load` 関数に置き換えます。 以前は、Magentoに対してリクエストがおこなわれた際に、この関数が繰り返し呼び出され、結果は `config.php` および `env.php config` メソッドを呼び出すたびに読み込まれるファイル。

<!-- MC-31728-->

* アプリケーションが `blank.html` 管理者が製品をクリックしたときに、管理者から注文を作成したときにページが表示される問題を修正しました。

<!-- MC-31729-->

* ページ上の存在しない（宣言されていない）コンポーネントに関するリファレンス手順で、デフォルトのレイアウトに追加された、キャッシュ不可のブロックがページキャッシュに影響を与えなくなりました。 デフォルトのレイアウトハンドラーにキャッシュ不可のブロックを追加すると、すべてのページがキャッシュ不可になります。 これは、レイアウトの生成プロセスによるものです。レイアウトの生成中に、アプリケーションは特定のページで使用可能なすべてのレイアウトハンドルを収集し、それらのハンドルからの指示をページの最終的なレイアウト構造に結合します。 デフォルトのレイアウトハンドルは、各ページの基本ハンドルとして使用されます。 その結果、デフォルトのハンドラーに対して宣言されたレイアウトの更新がすべてのページに表示されます。 [GitHub-9041](https://github.com/magento/magento2/issues/9041)

<!-- MC-31920-->

* MySQL ロックマネージャがプライマリロックマネージャになりました。 その結果、MySQL の最小限の必要バージョンは 5.7.9 です。

<!-- ENGCOM-6431-->

* `queue_consumer.xml` 現在は、 `handler` クラス。 以前は、ハンドラーのパスに数値が含まれている場合、XSD 検証に失敗していました。 _プル要求で Eden Duong から送信された修正 [25952](https://github.com/magento/magento2/pull/25952)_. [GitHub-25731](https://github.com/magento/magento2/issues/25731)

<!-- ENGCOM-6902-->

* 誤った `@var` 参照 `doc` クラスメンバー変数のブロック `$queueIterator` 授業中 `\Magento\Framework\MessageQueue\Topology\Config` が修正されました。 _プルリクエストで Artem Voloznov によって送信された修正 [24976](https://github.com/magento/magento2/pull/24976)_. [GitHub-24971](https://github.com/magento/magento2/issues/24971)

<!-- ENGCOM-5305 6684-->

* ドキュメントが存在しなくなったときに JavaScript ページ読み込みリスナーが起動するようになりました `loading` ～とマークされるまで待つよりむしろ `complete` ドキュメントが `complete` JavaScript コンテンツのレンダリングに深刻な遅延が生じる可能性があります。 _プル要求で John Hughes から送信された修正 [23313](https://github.com/magento/magento2/pull/23313) およびプルリクエスト [50](https://github.com/magento/partners-magento2ee/pull/50)_. [GitHub-22909](https://github.com/magento/magento2/issues/22909)

<!-- ENGCOM-6305-->

* 数量が 0 または負の数の製品をウィッシュリストに追加しようとすると、以下の情報メッセージが表示されるようになりました。 `Please enter a valid number in this field`. 以前は、アプリケーションで次のエラーが表示されていました。 `We can't update your Wish List right now`. _プル要求で Pawe Tylek によって送信された修正 [25641](https://github.com/magento/magento2/pull/25641)_. [GitHub-25032](https://github.com/magento/magento2/issues/25032)

<!-- ENGCOM-7071-->

* アプリケーションは、 `Magento\Framework\Api\AbstractExtensibleObject` クラス。 PHP 注釈がありません `@api`  は次に追加されています： `AbstractExtensibleModel`、および見つからない `@deprecated`  注釈が次に追加されました： `AbstractExtensibleObject`.  _プルリクエストで Alexander Taranovsky によって送信された修正 [22011](https://github.com/magento/magento2/pull/22011)_. [GitHub-22010](https://github.com/magento/magento2/issues/22010)

<!-- ENGCOM-6552-->

* 製品関連の日付 ( 例えば、 `news_from_date`, `news_to_date`, `special_price_from_date`, `special_price_to_date`) は、英語以外のロケールの実装を格納しています。 以前は、アプリケーションは次のようなエラーをスローしていました。  `Invalid input datetime format of value '22/5/2019`.

### 一般的な修正点

<!-- MC-21347-->

* 顧客モジュールは、レビューモジュールに依存しなくなりました。 以前は、この依存関係が原因でレビューモジュールを無効にできませんでした。

<!-- MC-25250-->

* ページのデフォルト属性セットに選択ラベル付きのドロップダウン属性が含まれている場合、製品編集ページが正常に読み込まれるようになりました。

<!-- MC-25260-->

* 管理の「注文」タブからアクセスできるグラフィカルな注文グラフに、注文の数量が正確に反映されるようになりました。

<!-- MC-29273-->

* ストアの管理者 URL は、これら 2 つの URL が異なる場合に、ストアフロント URL にリダイレクトされなくなりました。

<!-- MC-29658-->

* 複数の Web サイトで performance toolkit プロファイルを使用する場合、サブカテゴリの URL 書き換え生成が正しく機能するようになりました。

<!-- MC-30224-->

* 割り当て先の管理者ロールを削除せずに、空のユーザーモデルを削除できるようになりました。

<!-- MC-30636-->

* TinyMCE4 エディターで、すべてのHTMLタグがサポートされます。

<!-- MC-31128-->

* クリック **オフラインで払い戻し** 「クレジットメモの作成」ワークフローのボタンで、期待どおりにクレジットメモが生成されるようになりました。 以前は、JavaScript エラーがこのボタンを無効にしており、アプリケーションはクレジットメモを作成していませんでした。

<!-- MC-31832-->

* マーチャントがタイプの製品属性を作成できるようになりました `Decimal`. 以前は、以前のバグ修正により、アプリケーションで製品属性タイプが表示されませんでした `Price`. [GitHub-26949](https://github.com/magento/magento2/issues/26949)

<!-- MC-32175-->

* ストアフロントでカテゴリページを開こうとしたときに、アプリケーションが 500 エラーを返さなくなりました。 **レイアウト=製品 — 全幅** は、カテゴリページの「デザイン」タブで設定されました。

<!-- MC-32697-->

* でのバグを修正しました。 `AbstractSimpleObjectBuilder.php`.

<!-- MC-33427-->

* MAP （最小アドバタイズ価格）が、グループ製品で期待どおりに動作するようになりました。

<!-- MC-29998-->

* マルチストアデプロイメントで CMS ページの言語を変更すると、アプリケーションは適切なストアビューのホームページにリダイレクトされるようになりました。 以前は、特定の CMS ページで言語を変更した場合、アプリケーションに 404 ページが表示されていました。

<!-- MC-30162-->

* 注文クエリ (`SalesOrderIndexGridAsyncInsertCron`) は、返されるデータセットのサイズとクエリの頻度を減らすためにリファクタリングされています。

<!-- MC-32371-->

* これで、CMS ページを作成し、CMS 階層内の Web サイトのルートカテゴリに割り当てることができます。

<!-- MC-32783-->

* カテゴリ権限が有効な場合 ( 例えば、 **ログインしていません** お客様グループには、これらの権限が付与されています )。

<!-- MC-32815-->

* 製品ルールが在庫切れの製品に期待どおりに適用されるようになりました。 以前は、在庫切れの製品を表示するようにルールが設定されている場合でも、関連製品リストに在庫切れの製品が表示されませんでした。

<!-- MC-33222-->

* クリック **送料を追跡** ボタンをクリックすると、トラッキング情報が期待どおりにポップアップウィンドウに表示されるようになりました。 以前は、このリンクをクリックすると、管理者がログインページに移動していました。

<!-- MC-31305-->

* 複数選択の顧客属性を含む登録フォームを顧客が完了しようとすると、エラーが発生した場合、アプリケーションに情報エラーメッセージが表示され、登録フォームが期待どおりに表示され続けます。 以前は、アプリケーションで 500 エラーが表示されていました。

<!-- MC-32224-->

* これで、アプリケーションに「 **クレジットメモ** ボタンをクリックします。 以前は、一部払い戻しを作成した後は、このボタンが表示されず、残りの注文に対してクレジットメモを作成できませんでした。

<!-- MC-31878-->

* REST を通じた一括注文更新で、注文ステータスが期待どおりに変更されるようになりました。 以前は、アプリケーションは次のエラーをスローしていました： `report.ERROR: Property "AdditionalInformation" does not have accessor method "setAdditionalInformation" in class "Magento\Sales\Api\Data\OrderPaymentInterface".`

<!-- MC-30398-->

* カテゴリページの「買い物オプション」ブロックで、属性フィルターが期待どおりに表示されるようになりました。

<!-- ENGCOM-7175-->

* 顧客の請求および配送先住所が、Internet Explorer で表示された場合に、管理者の顧客編集ページの「アドレス」タブに期待どおりに表示されるようになりました。 _プルリクエストで Vasilii Burlacu から送信された修正 [27383](https://github.com/magento/magento2/pull/27383)_. [GitHub-27370](https://github.com/magento/magento2/issues/27370)

<!-- ENGCOM-6546-->

* 削除したブックマークビューは、すべて編集可能なままになりました。 以前は、複数のブックマークビューを持つアカウントの最初のビューを削除すると、すべてのブックマークビューが編集できなくなりました。 _プルリクエストで Bartomiej Szubert によって送信された修正 [26263](https://github.com/magento/magento2/pull/26263)_. [GitHub-14913](https://github.com/magento/magento2/issues/14913)

<!-- ENGCOM-7042-->

* レイヤーナビゲーションが、HTMLモジュールのスウォッチ 5 の検証で破損することがなくなりました。 以前は、HTMLの検証エラーは、 [W3C マークアップ検証サービス](https://validator.w3.org/)に値を入力する必要がありますが、これらの属性はデータ属性に変更されています。 _プルリクエストで Nirav Patel から送信された修正 [26055](https://github.com/magento/magento2/pull/26055)_. [GitHub-22363](https://github.com/magento/magento2/issues/22363)

<!-- ENGCOM-7065-->

* 未使用 `require.JS` エイリアス (`critical-css-loader``) has been removed from app/code/Magento/Theme/view/frontend/requirejs-config.js`. _プル要求で Tu Nguyen によって送信された修正 [26987](https://github.com/magento/magento2/pull/26987)_. [GitHub-26963](https://github.com/magento/magento2/issues/26963)

<!-- ENGCOM-6242-->

* 現在、このアプリケーションは PHP7.x の [スルー可能なインターフェイス](https://www.php.net/manual/en/class.throwable.php) を使用して、パスワードなどの機密情報を公開する可能性のあるすべてのエラーを取得できるようにします。 _プル要求で miszyman によって送信された修正 [25250](https://github.com/magento/magento2/pull/25250)_. [GitHub-23350](https://github.com/magento/magento2/issues/23350)

<!-- ENGCOM-6284-->

* 新規フォルダーを作成ポップアップウィンドウで新規フォルダーの名前を入力する際に ESC キーを押すと、フォルダーを作成せずに、期待どおりにポップアップが閉じるようになりました。  _プルリクエストで Shankar Konar によって送信された修正 [25349](https://github.com/magento/magento2/pull/25349)_. [GitHub-572](https://github.com/magento/magento2/issues/572)

<!-- ENGCOM-7464-->

* 誤ってネストされたHTML構造が修正されました。 以前は、この構造により、関連する製品、アップセルまたはクロスセル製品のリストのレイアウトが壊れていました。 _Pieter Hoste がプル要求で送信した修正 [27926](https://github.com/magento/magento2/pull/27926)_. [GitHub-27920](https://github.com/magento/magento2/issues/27920)

<!-- ENGCOM-7144-->

* への重複呼び出しを削除しました `addToolbarBlock`は、 `ORDER BY`.  _プルリクエストで Vasilii Burlacu から送信された修正 [27263](https://github.com/magento/magento2/pull/27263)_. [GitHub-26708](https://github.com/magento/magento2/issues/26708)

<!-- ENGCOM-6014-->

* マーチャントが管理者ユーザーアカウントで有効期限を設定できるようになりました。 _プル要求で Laura Folco から送信された修正 [22837](https://github.com/magento/magento2/pull/22837)_. [GitHub-22833](https://github.com/magento/magento2/issues/22833)

<!-- ENGCOM-7071-->

* 次の項目を追加しました： `@api`  に対する PHP 注釈 `AbstractExtensibleModel`、 `@deprecated` に対する PHP 注釈 `AbstractExtensibleObject`、および `@see` から `AbstractExtensibleModel`.  _プルリクエストで Alexander Taranovsky によって送信された修正 [22011](https://github.com/magento/magento2/pull/22011)_. [GitHub-22010](https://github.com/magento/magento2/issues/22010)

### GraphQL

<!-- ENGCOM-7074-->

* これで、アプリケーションがGraphQLメッセージを返します `The cart isn't active` の代わりに `Current user does not have an active cart` 特定の状況で、買い物かごが非アクティブになり、新しい買い物かご ID が作成される。 _プル要求で Vadim Malesh から送信された修正 [27187](https://github.com/magento/magento2/pull/27187)_. [GitHub-26117](https://github.com/magento/magento2/issues/26117)

<!-- ENGCOM-7105-->

* 以前に追加した製品が在庫切れになったときに、GraphQLを使用して買い物かごに製品を追加するとエラーが発生するコードを削除しました。 _プル要求で AleksLi によって送信された修正 [27015](https://github.com/magento/magento2/pull/27015)_. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

<!-- ENGCOM-6535-->

* 製品クエリでフラグメントを使用する際に、アプリケーションが必要な情報をすべて返さなかったGraphQLの問題を修正しました。 _プルリクエストで Riccardo Tempesta から送信された修正 [26218](https://github.com/magento/magento2/pull/26218)_. [GitHub-26217](https://github.com/magento/magento2/issues/26217)

* GraphQL突然変異 `setShippingMethodsOnCart` では、  `available_shipping_methods` 属性。 _プル要求で Vadim Malesh から送信された修正 [27004](https://github.com/magento/magento2/pull/27004)_. [GitHub-26742](https://github.com/magento/magento2/issues/26742)

### グループ化された製品

<!-- ENGCOM-6115-->

* 同じグループに属する別の単純製品が在庫切れの場合、グループ製品に属する単純製品を買い物かごに追加できるようになりました。  _Gihovani Filipp Pereira Detrio からプル要求で提出さm̩れた修正 [24955](https://github.com/magento/magento2/pull/24955)_. [GitHub-22304](https://github.com/magento/magento2/issues/22304)

<!-- ENGCOM-6768-->

* これで、アプリケーションは、返金されたグループ製品に関する電子メールを期待どおりに顧客に送信するようになりました。  _プルリクエストで Alexander Taranovsky によって送信された修正 [26246](https://github.com/magento/magento2/pull/26246)_. [GitHub-26245](https://github.com/magento/magento2/issues/26245)

<!-- MC-30313-->

* グループ化された製品の他の子製品のいずれかが在庫切れの場合に、その製品の子製品を買い物かごに追加できるようになりました。 以前は、1 つの子製品が在庫切れの場合、他の子製品を買い物かごに追加することはできませんでした。

### 画像

<!-- MC-29523-->

* 画像はに保存されるようになりました `pub/media/catalog/category` カテゴリ画像を保存する際に期待どおりに実行されます。 以前は、アプリケーションはこれらの画像を `pub/media/catalog/tmp/category`.

<!-- MC-30320-->

* 透かし画像によって、オーバーレイする製品画像が難読化されなくなりました。 以前は、透かし画像が適用先の製品画像より大きい場合、製品画像は表示されませんでした。

<!-- MC-32273-->

* これで、管理者からカテゴリに画像を正常に保存できます。 以前は、画像を保存した後、URL の一部が見つからず、画像を再度開くことができませんでした。

<!-- MC-31727-->

* アプリケーションが表示されます `.png` アップロード後の画像が期待どおりに表示されます。

<!-- ENGCOM-7063-->

* REST を使用して画像を追加または更新すると、画像のサムネールが期待どおりに作成されるようになりました。 _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27170](https://github.com/magento/magento2/pull/27170)_. [GitHub-26825](https://github.com/magento/magento2/issues/26825)

<!-- ENGCOM-6962-->

* で生成された画像のカスタム属性 `Block\Product\ImageFactory` 現在は、正しくレンダリングされます。 以前は、HTML出力のエスケープが正しくないので、独自のカスタム属性を属性マークアップに追加できませんでした。 _プル要求で alexander-aleman によって送信された修正 [26959](https://github.com/magento/magento2/pull/26959)_. [GitHub-25219](https://github.com/magento/magento2/issues/25219)

<!-- ENGCOM-5980-->

* ストアフロントをiPhoneから表示したときに、画像がぼやけなくなりました。  _プル要求で Dmitriy から送信された修正 [24743](https://github.com/magento/magento2/pull/24743)_. [GitHub-24735](https://github.com/magento/magento2/issues/24735)

<!-- ENGCOM-6999-->

* ストアフロントの画像が反応するようになりました。 以前は、画像の高さがゆがんでいました。  _Sean van Zuidam がプル要求で提出した Fix [27041](https://github.com/magento/magento2/pull/27041)_. [GitHub-27040](https://github.com/magento/magento2/issues/27040)

<!-- ENGCOM-7253-->

* ストアのデフォルトのロゴが、 `Magento_blank` テーマが使用されます。 _プルリクエストで Vasilii Burlacu から送信された修正 [27497](https://github.com/magento/magento2/pull/27497)_. [GitHub-27496](https://github.com/magento/magento2/issues/27496)

### インポート/エクスポート

<!-- MC-25206-->

* インポートしたデータに `swatch_image` store-view キーの値は `no_selection`. 以前は、アプリケーションは次のエラーをスローしていました： `Imported resource (image) could not be downloaded from external resource due to timeout or access permissions in row(s): 1`. [GitHub-25026](https://github.com/magento/magento2/issues/25026)

<!-- MC-29417-->

* 画像は、 `hide_from_product_page` 設定は、複数のストアビューを持つデプロイメントで製品を読み込む際に使用します。

<!-- MC-29677-->

* カスタマイズ可能なオプションが、 `row_id` が製品の `entity_id`. 以前は、カスタマイズ可能なオプションを読み込むことはできませんでした ( `row_id` は製品の `entity_id`」と表示され、特定の製品が読み込まれなくなっていました。

<!-- MC-29916-->

* 設定可能な製品に関連付けられた画像がインポート時に正しくアップロードされ、製品の編集ページで期待どおりに表示できるようになりました。

<!-- MC-30304-->

* 書き出し済み `.csv` ファイルに、在庫内または在庫切れの製品を含めるためのフィルター設定が反映されるようになりました。 以前は、選択した在庫設定に関係なく、すべての製品が書き出されていました。

<!-- MC-30323-->

* インポートワークフローの「顧客とアドレスの単一ファイル」オプションを使用して、顧客を正常にインポートまたは更新できるようになりました。 以前は、このオプションを選択した場合、アプリケーションは顧客データをインポートせず、次のエラーが表示されていました。 `Invalid data for insert`.

<!-- MC-30357-->

* 読み込み後に Stock Indexer が期待どおりにトリガーされ、製品のステータスが更新されるようになりました。 以前は、Stock Indexer は、変更された製品在庫データのインデックスを作成していませんでした。

<!-- MC-30528-->

* これで、設定可能な製品の子製品に対するすべてのカスタムオプションが、 `store_view_code` が指定されている。 これは、設定可能な製品を個別に読み込むか、または一括して読み込むかを選択するかに関係なく機能します。 以前は、インポートファイルに複数の項目が含まれていて、すべてのカスタムオプションが正常にインポートされませんでした。 `store_view_code` が指定されました。

<!-- MC-30672-->

* 製品の読み込み中に、読み込まれた製品を識別するメッセージがアプリケーションに表示されるようになりました `.csv` ファイルのキーが重複しています。 商人はこの情報を使用して競合を解決できます。 以前は、アプリケーションで次のエラーが表示されていました。 `Notice: Undefined index: name in /var/www/html/ee233dev/app/code/Magento/CatalogImportExport/Model/Import/Product.php on line 2524`

<!-- MC-29960-->

* ディレクトリを **システム** > **書き出し** リスト。 以前は、このリストからディレクトリを削除しようとしても、ダウンロードできないファイルのダウンロードリンクが表示され、情報の不明なエラーメッセージが表示されていました。

<!-- MC-29959-->

* この `.csv` 読み込み時に使用されるファイルに、ダウンロード可能な製品の正しいリンクが含まれ、ダウンロード可能な製品の読み込みと更新をサポートするように正しくフォーマットされるようになりました。

<!-- MC-30189-->

* これで、アプリケーションが `.csv` ファイル：置換のインポート動作を設定する場合、以前にエクスポートしたファイルを選択します `.csv` ファイルを選択し、 **データを確認**. 以前は、アプリケーションで次のエラーが表示されていました。 `Data validation failed. Please fix the following errors and upload the file again` および `Following Error(s) has been occurred during importing process`.

<!-- MC-30141-->

* 読み込み後に Stock Indexer が期待どおりにトリガーされ、製品のステータスが更新されるようになりました。 以前は、Stock Indexer は、変更された製品在庫データのインデックスを作成していませんでした。

<!-- MC-31198-->

* `.csv` 製品の読み込み時に生成されるファイルに、期待どおりにダウンロード可能な製品のグループタイトルが含まれるようになりました。 以前は、 `group_title` 読み込み中に、ダウンロード可能な製品のグループタイトルが表示されませんでした。

<!-- MC-32153-->

* 条件 `cron` が有効になっている場合は、 **( 顧客と住所（単一ファイル）)** 」オプションを選択すると、データが期待どおりに管理者顧客グリッドに入力されます。 顧客グリッドには、手動でインデックスを再作成する処理が完了すると、顧客が表示されます。 `customer_grid indexer`. 以前は、新しく読み込んだ顧客アドレスで顧客グリッドが更新されませんでした。

<!-- MC-32154-->

* 自動インデックス再作成後、お客様のリストが期待どおりに表示されるようになりました。 以前は、手動で `bin/magento index:reindex` 自動インデックス再作成後、顧客グリッドに顧客情報が表示されなかった問題を修正しました。

<!-- MC-30148-->

* アプリケーションは、次の場所から一時ファイルを削除するようになりました： `<Magento_home>/var` 製品の読み込みが完了した後に期待どおりに実行されます。

<!-- MC-31879-->

* 製品が `.csv` ファイル。

<!-- ENGCOM-6141-->

* 読み込まれた設定可能な属性の値に等号 (=) が含まれている場合に、読み込みが失敗しなくなりました。 _プル要求で dhoang89 によって送信された修正 [25194](https://github.com/magento/magento2/pull/25194)_. [GitHub-25188](https://github.com/magento/magento2/issues/25188)

<!-- ENGCOM-6901-->

* 書き出されたすべてのグリッドデータ (Magento Open Sourceとカスタムの両方 ) に、タイプを持つすべての列のオプション値の代わりに、オプションラベルが追加されました `Select` または `Multiselect`. 以前は、このデータを書き出すと、書き出されたスプレッドシートには、グリッドに表示された値ではなく、ID を持つ列が含まれていました。 _プルリクエストで Maksym Novik から送信された修正 [26523](https://github.com/magento/magento2/pull/26523)_. [GitHub-25963](https://github.com/magento/magento2/issues/25963)

<!-- ENGCOM-7145-->

* 製品を読み込んで更新した後、ストアフロントにバンドル製品が期待どおりに表示されるようになりました。 `.csv` ファイル。 _Pavel Bystritsky がプル要求で提出した Fix [25664](https://github.com/magento/magento2/pull/25664)_. [GitHub-25540](https://github.com/magento/magento2/issues/25540)

### 索引

<!-- MC-25236 30779-->

* の性能が向上しました `indexer_update_all_views`. インデックス作成が高速化され、非アクティブなルールは処理されなくなり、変更された製品のみに対するエントリのキャッシュがクリアされます。

<!-- MC-29917-->

* ストアフロントの商品価格が、予定されたカタログ価格ルールの更新の適用を正確に反映するようになりました。 以前は、手動でインデックスを再作成する (`php bin/magento indexer:reindex catalogrule_rule`) をクリックします。

<!-- MC-30588-->

* 検索できない属性 ( `is_searchable`, `is_filterable`, `is_visible_in_advanced_search` 属性が無効になっている場合 )。

<!-- ENGCOM-6533-->

* インデクサーを識別するメッセージと、インデックス再作成操作が失敗した場合にインデックス作成操作に要した時間が表示されるようになりました。 _Lukasz Bajsarowicz がプル要求で送信した修正 [26207](https://github.com/magento/magento2/pull/26207)_. [GitHub-26206](https://github.com/magento/magento2/issues/26206)

<!-- ENGCOM-7179-->

* が  `onthefly` インデクサーおよびフラットテーブルが web サイトの割り当てに従って有効になりました。 以前は、Web サイトの割り当てをすべて製品から削除して保存した場合、指定した Web サイトの割り当てに関わらず、すべてのフラットテーブルに製品が含まれていました。  _プル要求で Abel Truong によって送信された修正 [27365](https://github.com/magento/magento2/pull/27365)_. [GitHub-16315](https://github.com/magento/magento2/issues/16315)

### インフラ

* Internet Explorer 11.x ブラウザーのサポートは終了しました。

<!-- MC-32223-->

* 次に関連付けられている検証ロジック： **生年月日** 顧客登録フォームのフィールドに JavaScript エラーがトリガーされなくなりました。

<!-- ENGCOM-7000-->

* 対象となる統合テストを追加しました。 `$storeId` カテゴリリポジトリ用 `get()` メソッド。 _Lukasz Bajsarowicz がプル要求で送信した修正 [27048](https://github.com/magento/magento2/pull/27048)_. [GitHub-27044](https://github.com/magento/magento2/issues/27044)

<!-- ENGCOM-6378-->

* の有効化 **すべての Cookie をブロックする** Safari でを設定しても JavaScript エラーが発生しなくなり、アプリケーションが `cookies disabled` メッセージが期待どおりに表示されます。 以前は、アプリケーションに複数の `SecurityError (DOM Exception 18): The operation is insecure` コンソールのエラー。 _プル要求で Rl a̼ Verdugo Lorenzo から提出された修正 [25324](https://github.com/magento/magento2/pull/25324)_. [GitHub-13865](https://github.com/magento/magento2/issues/13865)

<!-- ENGCOM-6674-->

* 統合テストを実行する際に、アプリケーションで次のエラーがスローされなくなりました。 `Error: Call to a member function findFile() on array (/var/www/html/lib/internal/Magento/Framework/Code/Generator/DefinedClasses.php:59)`. 以前は、 `AutoloaderRegistry::getAutoloader` を使用すると、統合テストがランダムに失敗していました。 _Lukasz Bajsarowicz がプル要求で送信した修正 [26480](https://github.com/magento/magento2/pull/26480)_. [GitHub-26479](https://github.com/magento/magento2/issues/26479)

<!-- ENGCOM-6958-->

* この `date` タグイン `/module-sales/view/frontend/templates/order/order_date.phtml`  は次の値に修正されました： `span`. 以前は、アプリケーションが `exception.log` ファイル（クリック時） **注文を表示** 店頭で **マイアカウント** > **注文** ページ。 _プルリクエストで Andrii Chorniy によって送信された修正 [25895](https://github.com/magento/magento2/pull/25895)_. [GitHub-13269](https://github.com/magento/magento2/issues/13269), [GitHub-25738](https://github.com/magento/magento2/issues/25738)

<!-- ENGCOM-6316-->

* 高度なバンドルモジュール用の mixin の読み込みと適用を改善するために、JavaScript mixin モジュールのリファクタリングがおこなわれました。 以前は、アプリケーションは高度なバンドルモジュールの Mixin を読み込んだり適用したりしませんでした。  _プルリクエストで Mateusz Krzeszowiak から送信された修正 [25587](https://github.com/magento/magento2/pull/25587)_. [GitHub-25586](https://github.com/magento/magento2/issues/25586)

<!-- ENGCOM-6344-->

* この `grunt clean` コマンドで、生成されたコードおよびメタデータフォルダーが正常にクリーンアップされるようになりました。 _Andrii Beziazychnyi がプル要求で提出した修正 [25765](https://github.com/magento/magento2/pull/25765)_. [GitHub-25739](https://github.com/magento/magento2/issues/25739)

<!-- ENGCOM-6463-->

* `getVersion` 結果 (`ProductMetadata::getVersion`) がキャッシュされ、のパフォーマンスが向上しました。 `ProductMetadata::getVersion` メソッド。  _プルリクエストで Lukasz Lewandowski によって送信された修正 [26001](https://github.com/magento/magento2/pull/26001)_. [GitHub-24025](https://github.com/magento/magento2/issues/24025)

<!-- ENGCOM-7037-->

* のセッターが見つかりません `additional_information` は次に追加されています： `OrderPaymentInterface`：スキーマ宣言と受け入れられたプロパティの不整合を解決します。 _プルリクエストで Antonino Bonumore から送信された修正 [26748](https://github.com/magento/magento2/pull/26748)_. [GitHub-26745](https://github.com/magento/magento2/issues/26745), [GitHub-13222](https://github.com/magento/magento2/issues/13222)

### レイヤーナビゲーション

<!-- MC-31763-->

* これで、アプリケーションによって **はい/いいえ** 属性を **レイヤーナビゲーションで使用：フィルタリング可能（結果を含む）** ストアフロントのプロパティの場合は有効です。

<!-- ENGCOM-6807-->

* 冗長 `\Magento\Sales\Model\Order\Email\Sender\ShipmentSender` は次の点で非推奨（廃止予定）になりました：  `\Magento\Sales\Model\Order\Shipment\Sender\EmailSender`. _プルリクエストで Adarsh Manickam から送信された修正 [26714](https://github.com/magento/magento2/pull/26714)_. [GitHub-14885](https://github.com/magento/magento2/issues/14885)

### メディアギャラリー

<!-- ENGCOM-6993-->

* クリック **入力** メディアギャラリーで新しいフォルダに名前を付けると、加えた変更がすべて保存されます。 以前は、 **入力** マウスを使用して **OK** 結果として、すべての変更が失われました。  _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27029](https://github.com/magento/magento2/pull/27029)_. [GitHub-26847](https://github.com/magento/magento2/issues/26847)

<!-- ENGCOM-7490-->

* メディアギャラリーの下に、プライマリフォルダと同じ名前のサブフォルダを作成できるようになりました。 以前は、同じ名前のサブフォルダーを保存できませんでした。 _プル要求で Vadim Malesh から送信された修正 [27976](https://github.com/magento/magento2/pull/27976)_. [GitHub-1270](https://github.com/magento/adobe-stock-integration/issues/1270)

### メディアストレージ

<!-- MC-32593-->

* `var/resource_config.json` は、が画像を要求したときに再生成されなくなりました。 `get.php`. 以前は、このファイルは、 `get.php`.

### ニュースレター

<!-- MC-31768-->

* お客様は、ニュースレターを期待どおりに購読できるようになりました。 以前は、顧客が購読を確認しようとすると、アプリケーションに次のエラーが表示されていました。 `This is an invalid subscription confirmation code`.

<!-- ENGCOM-6525-->

* ストアフロントフッターのニュースレター入力フィールドが、サポートされている任意のブラウザーで同じようにレンダリングされるようになりました。  _プル要求で divyajyothi5321 によって送信された修正 [26182](https://github.com/magento/magento2/pull/26182)_. [GitHub-26176](https://github.com/magento/magento2/issues/26176)

<!-- ENGCOM-6691-->

* ニュースレターの購読に関するストアフロントメッセージが、HTMLで期待どおりにレンダリングされるようになりました。 _Oleh Usik がプル要求で提出した修正 [26455](https://github.com/magento/magento2/pull/26455)_. [GitHub-25162](https://github.com/magento/magento2/issues/25162)

### 注文

<!-- MC-33456-->

* 注文の概要の小計で、Web サイトの表示設定で税を除外するよう指定されている場合に、除外された税が表示されなくなりました。 以前は、異なる表示設定で複数の Web サイトが設定されていた場合、ストアレベルの設定にもかかわらず、サーバー変数で定義された設定がストアに使用されていました。

### 支払い方法

<!-- MC -->

* コアコードへのサードパーティの支払い方法 Authorize.Net、eWay、CyberSource、Braintree、Worldpay の統合が削除されました。 マーチャントは、Commerce Marketplace上にある正式な拡張機能に移行する必要があります。

<!-- MC -->

* Signifyd 不正保護のコア実装はサポートされなくなりました。 商人は [Signifyd Fraud &amp; Chargeback Protection 拡張機能](https://marketplace.magento.com/signifyd-module-connect.html) これはCommerce Marketplaceで利用できます。

<!-- MC-32546-->

* これで、注文を正常に完了し、商人のホームページに戻ることができます。 **Web サイト支払い Pro Hosted Solution** が設定されている。 以前は、 **商人に戻る**&#x200B;を呼び出すと、アプリケーションは次のエラーをスローしました： `Invalid Form Key. Please refresh the page`.

<!-- ENGCOM-6606-->

* 請求先住所を切り替えても、ストアフロントチェックアウトワークフローの支払いセクションに JavaScript 関数テキストが表示されなくなりました。 _プル要求で Chris Pook から送信された修正 [26378](https://github.com/magento/magento2/pull/26378)_. [GitHub-26375](https://github.com/magento/magento2/issues/26375)

<!-- ENGCOM-7223-->

* 現在は、クレジットメモに正しい金額が **調整払い戻し** クレジット・メモの概要のフィールド。  _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27343](https://github.com/magento/magento2/pull/27343)_. [GitHub-13851](https://github.com/magento/magento2/issues/13851)

<!-- ENGCOM-6524-->

* これで、 `quote_payment column additional_information` 表を参照してください。 以前は、見積もりを保存した後はこの情報を削除できませんでした。 `unsAdditionalInformation` メソッド `\Magento\Payment\Model\Info` はデータを正しく初期化しませんでした。  _プル要求で Marco Oliveira によって送信された修正 [26084](https://github.com/magento/magento2/pull/26084)_. [GitHub-26083](https://github.com/magento/magento2/issues/26083)

<!-- ENGCOM-6609-->

* 支払い手順は、注文がおこなわれたストア表示から派生するようになりました。 以前は、支払い指示がデフォルトのストア表示から使用されていました。これは、 `BeforeOrderPaymentSaveObserver` メソッドはデフォルトのストア表示から支払い指示を取得しました。 _プルリクエストで Karyna Tsymbal から送信された修正 [26399](https://github.com/magento/magento2/pull/26399)_. [GitHub-26332](https://github.com/magento/magento2/issues/26332)

<!-- ENGCOM-6953-->

* 管理者と請求書および出荷請求書の両方に表示される支払情報が、複数の店舗を持つデプロイメントで注文が行われた店舗から収集されるようになりました。 以前は、アプリケーションがデフォルトのストアから支払い情報を導き出していました。  _プルリクエストで Bartomiej Szubert によって送信された修正 [26765](https://github.com/magento/magento2/pull/26765)_. [GitHub-17933](https://github.com/magento/magento2/issues/17933)

#### PayPal

<!-- MC-30498-->

* 顧客がクリックするたびに、情報のエラーメッセージがアプリケーションに表示されるようになりました **PayPal で支払う** チェックアウトワークフローで無効な発送先住所を入力した後。 以前は、お客様が最初にボタンをクリックしたときにのみアプリケーションでエラーメッセージが表示され、それ以降のクリックではエラーメッセージが表示されませんでした。

<!-- MC-30639-->

* アプリケーションは注文のステータスを「 `Processing` （ PayPal を使用した支払いが失敗した場合のチェックアウトワークフローの「支払いレビュー」セクション）を参照してください。

<!-- MC-30864-->

* これで、ペイフローリンクの支払い方法を使用して注文を正常に完了できます。 以前は、注文ステータスが `Pending` 支払い方法ログの注文ステータスが `Approved`.

<!-- MC-32494-->

* PayPal Payflow Pro を使用して行われた注文は、次のように設定されました。 `Suspected Fraud` ステータス（不正フィルターがトリガーされた場合）

<!-- MC-33110-->

* PayPal Express Checkout を、サポートされているクレジットカードと共に使用できるようになりました。 以前は、PayPal Express Checkout を使用して注文を完了する際にクレジットカードのボタンをクリックすると、申し込みが停止し、クレジットカード情報を入力できませんでした。

<!-- MC-33117-->

* PayPal Payflow Pro 内で行われた注文は、次のように設定されました。 `Suspected Fraud` ステータス（不正フィルターがトリガーされた場合） 以前は、PayPal の支払取引状況は、申込側で支払承認が行われる前に検証されませんでした。

<!-- MC-33294-->

* Web サイト制限が有効な場合、Payflow Pro が期待どおりに動作するようになりました。

<!-- MC-31196-->

* PayPal Express Checkout での注文の処理が正常に行われ、注文の配送先住所が、配送ページのドロップダウンメニューから選択されるのではなく、顧客がテキストフィールドに手動で入力した国地域を指定するようになりました。 以前は、アプリケーションが注文レビューページに次のエラーを表示していました。 `Error 500: NOTICE: PHP message: PHP Fatal error: Uncaught Error: Call to a member function getId() on null in httpdocs/vendor/magento/module-paypal/Model/Api/Nvp.php:1527`. [GitHub-26698](https://github.com/magento/magento2/issues/26698)

<!-- MC-31573-->

* Chrome 80 ブラウザーで PayPal Pro の支払い方法が期待どおりに動作するようになりました。 この支払い方法は、以前、顧客のセッションへのアクセスを必要とするコールバックエンドポイント（新しいデフォルトの Chrome SameSite cookie 機能で許可されていないアクセス）を呼び出していました。 [GitHub-26840](https://github.com/magento/magento2/issues/26840)

<!-- MC-31292-->

* PayPal Express を使用して、永続的なチェックアウトカートが有効になり、 **ログアウト時に永続性をクリア** 設定が **いいえ**. 以前は、アプリケーションによってログインページにリダイレクトされていました。

<!-- ENGCOM-6383-->

* Paypal Express と Web Payments Pro からの支払いが、 `Processing` 処理が開始された後に、状態が期待どおりに変化します。 以前は、Paypal Web Payments Pro の支払いは `Pending` 支払情報が `Processing` 状態。 _プル要求でアザンボンから送信された修正 [25876](https://github.com/magento/magento2/pull/25876)_. [GitHub-25659](https://github.com/magento/magento2/issues/25659)

### パフォーマンス

<!-- MC-31499-->

* 顧客データセクションの無効化ロジックが改善されました。 このリリースでは、すべての顧客セクションデータを無効にする新しい方法が導入され、カスタムの場合にローカルストレージの既知の問題を回避できます `sections.xml` 無効化がアクティブです。 ( 以前は、 *etc/frontend/sections.xml* （アクションの無効化を使用）。 詳しくは、 [非公開コンテンツ](https://developer.adobe.com/commerce/php/development/cache/page/private-content/).

<!-- MC-31449-->

* 顧客アカウントのインポートがリファクタリングされ、インポート速度が向上しました。

<!-- MC-23383 ENGCOM-7006-->

* マーチャントが [遅延読み込み](https://en.wikipedia.org/wiki/Lazy_loading) 画像を読み込みます。 _プル要求で Timon de Groot によって送信された修正 [27033](https://github.com/magento/magento2/pull/27033)_. [GitHub-27032](https://github.com/magento/magento2/issues/27032)

<!-- ENGCOM-6988-->

* ダッシュボードのグラフは `chart.js` ライブラリ。  _プルリクエストで Bartomiej Szubert によって送信された修正 [26923](https://github.com/magento/magento2/pull/26923). [GitHub-186](https://github.com/magento/community-features/issues/186)_

<!-- ENGCOM-6232-->

* 多数の製品属性を含む大規模なカタログで実行される操作 (3,000～23000オプションのスケール ) は、属性オプション配列の構築方法のリファクタリングによって改善されました。 _プルリクエストで Behnam Shayani によって送信された修正 [25452](https://github.com/magento/magento2/pull/25452)_. [GitHub-20966](https://github.com/magento/magento2/issues/20966)

### 価格

<!-- ENGCOM-6647-->

* 製品を複数回編集した後でも、アプリケーションは階層化された製品の正しい価格を保存し、表示するようになりました。 以前は、製品価格に対して行った最後の編集内容は保存されませんでした。 _プル要求で Ravi Chandra から送信された修正 [26162](https://github.com/magento/magento2/pull/26162)_. [GitHub-25195](https://github.com/magento/magento2/issues/25195)

<!-- ENGCOM-6914-->

* 固定保存率と割引保存率の両方が、注文の最終価格に正しく適用されるようになりました。 以前は、製品の詳細ページに、アプリケーションの間違った階層価格（固定価格と割引の両方）の保存率が表示されていました。 _プルリクエストで Sathish Subramanian から送信された修正 [26584](https://github.com/magento/magento2/pull/26584)_. [GitHub-26583](https://github.com/magento/magento2/issues/26583)

<!-- MC-30255-->

* 設定可能な製品の再在庫に関して顧客に送信される在庫アラート E メールに、正しい製品価格が含まれるようになりました。 以前は、この E メールには製品価格が 0 と表示されていました。

<!-- MC-32873-->

* ユーザーのセッションが期限切れになった場合に、製品在庫アラート配信停止が機能するようになりました。 以前は、 **この製品のアラートを停止するには、ここをクリックしてください** リンクをクリックすると、404 エラーが表示されていました。

<!-- MC-31979-->

* 製品アラートの購読解除アクションが期待どおりに動作するようになりました。 以前は、 **この製品のアラートを停止するには、ここをクリックしてください** リンクをクリックすると、404 エラーが表示されていました。

### 製品ビデオ

<!-- MC-23743-->

* REST を使用してYouTubeビデオを更新できるようになりました (PUT `rest/V1/products/{SKU}`) をクリックします。 以前は、アプリケーションでビデオのサムネールが表示されましたが、ビデオプレーヤーが **再生** 」ボタンをクリックします。 [GitHub-23194](https://github.com/magento/magento2/issues/23194)

### レポート

<!-- ENGCOM-6635-->

* 製品リストで、設定可能な製品を SKU 別に並べ替えるようになりました。SKU は、設定可能な製品をバリエーション別にグループ化します。 以前は、レポートは `product_id`. _Lukasz Bajsarowicz がプル要求で送信した修正 [25858](https://github.com/magento/magento2/pull/25858)_. [GitHub-25856](https://github.com/magento/magento2/issues/25856)

<!-- ENGCOM-6427-->

* この **管理者** > **レポート** > **統計を更新** 表示される **At = Null に更新** ステータス： **なし** 内 **更新済み** 列の代わりに **未定義**. _プル要求で Eden Duong から送信された修正 [25932](https://github.com/magento/magento2/pull/25932)_. [GitHub-25931](https://github.com/magento/magento2/issues/25931)

<!-- ENGCOM-6925-->

* 低在庫レポートに無効な製品が含まれなくなりました。 _プルリクエストで Mohamed-Asar によって送信された修正 [26862](https://github.com/magento/magento2/pull/26862)_. [GitHub-26838](https://github.com/magento/magento2/issues/26838)

<!-- ENGCOM-7110-->

* 現在は、 **年度累計開始**  ～に入る **管理者**  >  **ストア**  >  **設定**  >  **一般**  >  **レポート**. _Priya-V-Panchal によってプル要求で送信された修正 [27088](https://github.com/magento/magento2/pull/27088)_. [GitHub-27086](https://github.com/magento/magento2/issues/27086)

### レビュー

<!-- MC-29578-->

* これで、アプリケーションが **レビューを送信** ボタンをクリックします。 以前は、ユーザーが最初に「 **レビューを送信** ボタンを複数回クリックします。

<!-- MC-31293-->

* この **管理者** > **レポート** > **レビュー** > **製品別** フィルターリストに、期待どおりの結果が表示されるようになりました。 以前は、このリストをフィルターしようとした際に、アプリケーションに結果が表示されませんでした。

<!-- ENGCOM-6938-->

* 保留中のレビューメニュー項目が、次の日に期待どおりに有効化されました： **管理者** >  **マーケティング** > **ユーザーコンテンツ** > **保留中のレビュー**.  _プル要求で Ravinder から送信された修正 [26230](https://github.com/magento/magento2/pull/26230)_. [GitHub-26229](https://github.com/magento/magento2/issues/26229)

### セールス

<!-- MC-29426-->

* 完了した注文は、支払いシステムとMagento Open Sourceの両方に表示されます。 以前は、注文は支払いシステムに表示されましたが、Magento Open Sourceでは表示されませんでした。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-30000-->

* アプリケーションは、お客様のデフォルトの配送先住所に従うようになりました。 以前は、アプリケーションは、設定に従ってデフォルトの請求およびデフォルトの配送先住所を尊重しませんでした。 **請求先住所と同じ** の設定は自動的には有効になりませんでした。

<!-- MC-30299-->

* 割引を含む注文の払い戻しが正しく計算されるようになりました。 以前は、申し込みで配送税と配送料割引が正しく計算されず、払い戻し済みの合計が支払済みの合計と一致しませんでした。

<!-- MC-33165-->

* 新しい顧客がマルチサイトデプロイメントで注文を作成すると、アプリケーションは正しいグループ ID を割り当てるようになりました。 以前は、デフォルトの顧客グループから設定が適用されていました。

<!-- MC-31786-->

* クレジット・メモ、請求書および出荷の表示権限を含む制限付き権限を持つ管理者は、「オーダー」ページから期待どおりに請求書および出荷を表示できるようになりました。 以前は、制限付き管理者が注文を表示しようとすると、次のエラーが表示されていました。 `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- MC-24023-->

* 顧客が買い物かごに商品の数量を追加し、その数量が既存の製品在庫の半分を超えていて、在庫の総数を超えていない場合、アプリケーションはエラーを表示しなくなりました。 以前は、この状況では、次のエラーが表示されていました。 `The requested qty is not available`. [Github-24365](https://github.com/magento/magento2/issues/24365)

<!-- ENGCOM-6910-->

* 在庫数量が 1 の場合、管理者が製品を買い物かごに正常に追加できるようになりました。 以前は、アプリケーションは製品を買い物かごに追加せず、次のメッセージを表示していました。 `The requested qty is not available`. _プルリクエストで Serhii Petrychenko によって送信された修正 [26650](https://github.com/magento/magento2/pull/26650)._ [GitHub-25675](https://github.com/magento/magento2/issues/25675)

<!-- ENGCOM-7090-->

* ストア管理者が、カスタムオプションの名前が最大文字数を超える製品を再注文しようとすると、情報エラーメッセージが表示されるようになりました。 以前は、これらの条件では、アプリケーションはメッセージではなくレポートページを表示していました。 _プルリクエストで Mudit Shukla によって送信された修正 [26348](https://github.com/magento/magento2/pull/26348)_. [GitHub-26345](https://github.com/magento/magento2/issues/26345)

<!-- ENGCOM-6328-->

* 管理フォームライブラリの規則に合わせて、販売注文住所情報編集フォームのレイアウトがリファクタリングされました。 _プルリクエストで Alexey Rakitin によって送信された修正 [25699](https://github.com/magento/magento2/pull/25699)_. [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6007-->

* の「製品」セクションのチェックボックス **カタログ** > **カテゴリ** ページが期待どおりに動作するようになりました。  _プル要求で Denis Kopylov によって送信された修正 [22990](https://github.com/magento/magento2/pull/22990)_. [GitHub-22988](https://github.com/magento/magento2/issues/22988)

<!-- ENGCOM-6809-->

* この `getCustomer` メソッドは、 `phpdoc` ブロック 以前は、このメソッドが `NULL`、および `phpdoc` ブロックは、このメソッドが返す可能性があることを強調表示しませんでした `NULL`. _プル要求で Fanis Strezos が提出した修正 [26423](https://github.com/magento/magento2/pull/26423)_. [GitHub-25268](https://github.com/magento/magento2/issues/25268)

<!-- ENGCOM-6492-->

* 商人が  **管理者** > **ストア**  >  **設定**  >  **セールス**  >  **並べ替え**  >  **注文を許可**.  _プル要求で Eden Duong から送信された修正 [26051](https://github.com/magento/magento2/pull/26051)_. [GitHub-25130](https://github.com/magento/magento2/issues/25130)

<!-- ENGCOM-6627-->

* `getPrice()` メソッドで、管理で注文のカスタム価格を設定する際に、文字列ではなく float または null を返すようになりました。  _プルリクエストで Andrii Chorniy によって送信された修正 [26313](https://github.com/magento/magento2/pull/26313)_. [GitHub-25968](https://github.com/magento/magento2/issues/25968)

<!-- ENGCOM-6786-->

* この **都道府県コードとタイトル** の列 **管理者** > **ストア**  /設定/  **注文ステータス** 現在は、ステータスの代わりに状態を期待どおりに表示します。  _Oleh Usik がプル要求で提出した修正 [26569](https://github.com/magento/magento2/pull/26569)_. [GitHub-17847](https://github.com/magento/magento2/issues/17847)

<!-- ENGCOM-6936-->

* PDF請求書を GB ロケールで作成した場合、正しい購入日が取り込まれるようになりました。 _プル要求で Eden Duong から送信された修正 [26701](https://github.com/magento/magento2/pull/26701)_. [GitHub-26675](https://github.com/magento/magento2/issues/26675)

### セールスルール

<!-- MC-30155-->

* `quote_item.applied_rule_ids` は、買い物かごの価格ルールを無効にした後、期待どおりに更新されるようになりました。 [GitHub-24526](https://github.com/magento/magento2/issues/24526)

<!-- MC-32229-->

* 買い物かごの価格ルールを作成または編集しようとすると、カテゴリツリーが期待どおりに表示されるようになりました。 以前は、ルールの作成時や編集時に「条件」セクションでカテゴリを選択すると、JavaScript エラーが発生していました。

<!-- ENGCOM-6824-->

* 設定可能な製品が最初に買い物かごに追加されたときに、買い物かご価格ルールを使用して買い物かごレベルの固定割引が正しく計算されるようになりました。 _Lachlan Turner がプル要求で送信した修正 [26623](https://github.com/magento/magento2/pull/26623)_. [GitHub-26622](https://github.com/magento/magento2/issues/26622)

### 検索 {#search-heading}

* Elasticsearch7.6.x がAdobe CommerceおよびMagento Open Sourceのデフォルトのカタログ検索エンジンになりました。 Elasticsearch7.6.x もインストールしないと、バージョン 2.4.0 をインストールまたはアップグレードできません。Elasticsearchバージョン 2.x コードは削除されました。 Elasticsearchのバージョン 5.x および 6.x は非推奨となり、サポートされなくなりました。 詳しくは、 [検索エンジンの前提条件](../../../installation/prerequisites/search-engine/overview.md).

<!-- MC-23753-->

* これで、アプリケーションによって **&lt;** および **>** 記号が storefront カタログ検索文字列に正しく含まれている。

<!-- MC-25010-->

* 実行後のカテゴリで、製品が期待どおりに表示されるようになりました。 `cron:run` デプロイメント実装Elasticsearch。

<!-- MC-25254-->

* 新しい製品属性をストアフロントで検索できるようにするために、アプリケーションで完全な検索のインデックスを再作成する必要がなくなりました。

<!-- MC-29545-->

* Elasticsearchは、バンドル製品を含む製品リストを、アルファベット順に製品名で並べ替えた場合に、期待どおりに動作するようになりました。

<!-- MC-29951-->

* カテゴリ内の設定可能な製品をフィルタリングする際に、結果のフィルタリングに在庫切れオプションが含まれなくなりました。

<!-- MC-30131-->

* Elasticsearchを使用して製品リストページからすべての製品を選択すると、検索結果のすべての製品が期待どおりに表示されるようになりました。 以前は、検索結果が表示されなかった問題を修正しました。

<!-- MC-30201-->

* Elasticsearchで、ページごとに表示される検索結果の数を変更した場合、カテゴリページからの結果が正しく表示されるようになりました。 以前は、検索結果ページに表示する検索結果の数を変更すると、空白のページが表示され、次のエラーが発生していました。 `"0":"SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near'`

<!-- MC-32430-->

* 在庫切れの設定可能な製品に対して、価格の並べ替えが正しく機能するようになりました。

<!-- MC-25176-->

* お客様が複数の Web サイトデプロイメントでストアフロントのクイック検索を使用する際に、アプリケーションが例外をスローしなくなりました。

<!-- ENGCOM-6842-->

* 商人がのフッターにある「検索語句」オプションをクリックして検索語句ページを開いた場合、アプリケーションで警告が表示されなくなりました。 **マーケティング** > **SEO と検索** > **検索語句**.  _プルリクエストで vishal-webkul によって送信された修正 [25246](https://github.com/magento/magento2/pull/25246)_. [GitHub-25245](https://github.com/magento/magento2/issues/25245)

<!-- ENGCOM-7289-->

* Safari をモバイル表示で実行しているときに検索入力ボックスをクリックした場合に、アプリケーションがビューポートのサイズを変更しなくなりました。  _プル要求で Pawe Tylek によって送信された修正 [27603](https://github.com/magento/magento2/pull/27603). [GitHub-27506](https://github.com/magento/magento2/issues/27506)_

<!-- ENGCOM-6364-->

* Elasticsearchのバージョンは、管理 (**ストア** /設定/ **設定** > **カタログ** > **カタログ** > **カタログ検索**) をクリックします。 _プルリクエストでAndreas Mautz から送信された修正 [25838](https://github.com/magento/magento2/pull/25838)_. [GitHub-25674](https://github.com/magento/magento2/issues/25674)

### 送料

<!-- MC-32782-->

* 注文された製品の 1 つが仮想製品の場合、複数の住所に注文を出荷できるようになりました。 以前は、アプリケーションは物理的な製品の注文を正常に行いましたが、仮想的な製品注文は空でした。

<!-- MC-29276-->

* 複数の住所に出荷される注文に対して、固定金額の買い物かご全体の割引が正しく適用されるようになりました。 以前は、複数の住所でチェックアウトを使用して注文をチェックアウトした場合、このタイプの割引が複数回適用されていました。 [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- MC-29444-->

* 買い物かごの価格ルールの作成中に発送方法を選択するために使用できるドロップダウンリストに、有効な値のみが含まれるようになりました。 以前は、このドロップダウンリストには空の値または追加の値が含まれていました。

<!-- MC-30186-->

* 出荷ラベルが `.pdf` 選択したときに期待どおりにファイルを作成 **発送ラベルの印刷** を選択します。 以前は、アプリケーションで 404 エラーが表示されていました。

<!-- MC-31396-->

* 無料発送価格ルールは、買い物かごに、無料発送価格ルールに含まれるカテゴリの製品と、ルールに含まれないカテゴリの製品が含まれる場合に、関連する製品のみに影響を与えるようになりました。 以前は、買い物かごに、価格ルールに含まれない他のカテゴリと共に、無料配送カテゴリの両方の製品が含まれていた場合、どの製品にも無料配送は適用されませんでした。

<!-- ENGCOM-6436-->

* ドロップダウン/複数選択ボックスにすべての配送業者が表示される代わりに、空白のページが表示されなくなりました。 以前は、 `toOptionArray` 機能する `vendor/magento/module-shipping/Model/Config/Source/Allmethods.php` が発生しました。 _プルリクエストで Marc Rodriguez から送信された修正 [25315](https://github.com/magento/magento2/pull/25315)_. [GitHub-13136](https://github.com/magento/magento2/issues/13136)

* 顧客が複数の住所に出荷される注文を作成する際に、アプリケーションは固定金額の割引を複数回適用しなくなりました。  _プルリクエストで Mahesh Singh から送信された修正 [26419](https://github.com/magento/magento2/pull/26419)_. [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- ENGCOM-6523-->

* のプラグイン `Magento\Ups\Model\Carrier` カスタム `di.xml` 開発者モードで適切に動作するようになりました。 以前は、アプリケーションは次のエラーをスローしていました： `1 exception(s): Exception #0 (BadMethodCallException): Missing required argument $data of Magento\Ups\Model\Carrier`. _プルリクエストで Bartomiej Szubert によって送信された修正 [26130](https://github.com/magento/magento2/pull/26130)_. [GitHub-25390](https://github.com/magento/magento2/issues/25390)

### サイトマップ

<!-- MC-29362-->

* サイトマップを生成する際に、アプリケーションでプロジェクトのベース URL が期待どおりに使用されるようになりました。

<!-- ENGCOM-6670-->

* 生成されたサイトマップに、ホームページの URL が含まれるようになりました。 _プルリクエストで deepaksnair によって送信された修正 [26445](https://github.com/magento/magento2/pull/26445)_. [GitHub-25761](https://github.com/magento/magento2/issues/25761)

### ストア

<!-- MC-25187-->

* 顧客セッションが、顧客が 1 つのストアにログインし、製品が買い物かごに追加された後、マルチストアデプロイメントの新しいストアに切り替わったときに、期待どおりに保持されるようになりました。 以前は、顧客が 2 番目のストアに移動すると、アプリケーションは顧客をログアウトし、買い物かごを空にしていました。

<!-- ENGCOM-4781-->

* 削除されたストア表示に関連するレコードが、 `sale_sequence_meta` および `sales_sequence_profile` テーブルが期待どおりに表示されます。 _プルリクエストで Bartomiej Szubert によって送信された修正 [22296](https://github.com/magento/magento2/pull/22296)_. [GitHub-14958](https://github.com/magento/magento2/issues/14958)

<!-- ENGCOM-6869-->

* ベース URL が異なるストアを切り替える際に、ストアスイッチャーが期待どおりに動作するようになりました。 以前は、顧客がストア切り替えボタンを使用してストアを切り替えた場合、ターゲットストアのベース URL が現在のストアと異なる場合、リクエストは失敗していました。 _プル要求で Tobias Nilsson によって送信された修正 [26548](https://github.com/magento/magento2/pull/26548)_. [GitHub-23755](https://github.com/magento/magento2/issues/23755), [GitHub-26384](https://github.com/magento/magento2/issues/26384)

### スウォッチ

<!-- MC-30294-->

* マーチャントは、 **ビジュアルスウォッチ** オプション： **ストア** > **属性** > **製品** > **新規属性**. 以前は、新しく作成したスウォッチ属性を開こうとすると、JavaScript エラーが発生していました。

<!-- ENGCOM-6750-->

* お客様が設定可能な製品の新しいスウォッチオプションを選択すると、Minimum Advertised Price が期待どおりに変更されるようになりました。 _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [26241](https://github.com/magento/magento2/pull/26241)_. [GitHub-26240](https://github.com/magento/magento2/issues/26240)

<!-- ENGCOM-6685-->

* 新しいスウォッチオプションを選択した場合、設定可能な製品の最小アドバタイズ価格がアプリケーションで重複しなくなりました。 _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [26317](https://github.com/magento/magento2/pull/26317)_. [GitHub-26314](https://github.com/magento/magento2/issues/26314)

<!-- ENGCOM-6966-->

* 「新しい製品属性」ページの「スウォッチを管理」（「属性の値」）領域にあるドロップダウンメニューの動作に関する問題を修正しました。  _Oleh Usik がプル要求で提出した修正 [26090](https://github.com/magento/magento2/pull/26090)_. [GitHub-25910](https://github.com/magento/magento2/issues/25910)

### TargetRule

<!-- MC-31546-->

* ストアフロントで製品に対して表示される関連製品ブロックに、関連製品ルールで定義された条件を満たした製品が表示されるようになりました。 以前は、アプリケーションに関連製品が表示されていませんでした。

### 税

<!-- MC-29579-->

* 顧客がチェックアウト中に注文の宛先の国を変更した場合、アプリケーションが出荷率と価格を期待どおりに更新するようになりました。

<!-- MC-30546-->

* 適用可能な買い物かごの価格ルールに基づいて、送料が期待どおりに適用されるようになりました。 以前は、注文が送料無料の条件を満たしているかどうかを計算する際に、買い物かごの価格ルールで税が考慮されていませんでした。

### テスト

>[!NOTE]
>
>**MFTF は、2FA が有効な状態で、Google Authenticator を使用してテストを実行するようになりました。 MFTF は、Google Authenticator を有効にする追加の設定手順がないと、2.4.0 では動作しません**. 詳しくは、  [二段階認証 (2FA) 用の MFTF の設定](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html#magento-functional-testing-framework).

<!-- ENGCOM-6585-->

* テストおよびアクショングループのハードコードされた URL は、ページ参照で置き換えられました。 _Lukasz Bajsarowicz がプルリクエストで提出した修正 117 をプライベートリポジトリの partners-magento2ee で修正しました。_. [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-7273-->

* テストでは、CMS ページに関連する管理アクションのログ記録のタスクをカバーするようになりました。 _Lukasz Bajsarowicz がプル要求で 172 に提出した Fix をプライベートリポジトリの partners-magento2ee に保存_. [GitHub-171](https://github.com/magento/magento2/issues/171)

<!-- ENGCOM-7040 7051-->

* 無効な機能テスト名が、ベストプラクティスに従って修正されました。 _Lukasz Bajsarowicz がプル要求で送信した修正 [27118](https://github.com/magento/magento2/pull/27118) プライベートリポジトリの partners-magento2ee でのプル要求 151。 [GitHub-27117](https://github.com/magento/magento2/issues/27117)_

<!-- ENGCOM-7026-->

* Magento Open Source `cron` は、テストデータを作成した後のインデックス再作成に使用されるようになりました。また、該当する場合は `cache:flush config` 置き換え `cache:flush`. _Lukasz Bajsarowicz がプル要求で送信した修正 [26990](https://github.com/magento/magento2/pull/26990)_. [GitHub-26989](https://github.com/magento/magento2/issues/26989)

<!-- ENGCOM-7421-->

* 受け入れテストで、 `Magento/Indexer` および `Magento/Backup` モジュール。  _プルリクエストで Shankar Konar によって送信された修正 [27515](https://github.com/magento/magento2/pull/27515)_. [GitHub-27503](https://github.com/magento/magento2/issues/27503)

<!-- ENGCOM-6791 6825-->

* この `AdminReorderWithCatalogPrice` テストはリファクタリングされ、CI 検証プロセス中に失敗しなくなりました。 _Lukasz Bajsarowicz がプル要求で 135 に提出した Fix をプライベートリポジトリの partners-magento2ee に保存_. [GitHub-26607](https://github.com/magento/magento2/issues/26607)

<!-- ENGCOM-6780 6795-->

* この `AdminAddingNewOptionsWithImagesAndPricesToConfigurableProduct` および `StorefrontApplyPromoCodeDuringCheckout` テストはリファクタリングされ、CI 検証プロセス中に失敗しなくなりました。 _Lukasz Bajsarowicz がプル要求で送信した修正 [26611](https://github.com/magento/magento2/pull/26611) およびプルリクエスト [26614](https://github.com/magento/magento2/pull/26614)_. [GitHub-26612](https://github.com/magento/magento2/issues/26612), [GitHub-26610](https://github.com/magento/magento2/issues/26610)

<!-- ENGCOM-6621-->

* この `DeleteProduct and DeleteCustomer Action Groups` テストはリファクタリングされ、CI 検証プロセス中に失敗しなくなりました。 _Lukasz Bajsarowicz がプル要求で送信した修正 [26407](https://github.com/magento/magento2/pull/26407)_. [GitHub-26396](https://github.com/magento/magento2/issues/26396)

<!-- ENGCOM-6608-->

* この `AdminMoveAnchoredCategoryTest.xml` テストはリファクタリングされ、CI 検証プロセス中に失敗しなくなりました。 _Lukasz Bajsarowicz がプル要求で送信した修正 [26395](https://github.com/magento/magento2/pull/26395)_. [GitHub-26396](https://github.com/magento/magento2/issues/26396)

#### 統合テスト

<!-- ENGCOM-7143-->

* 統合テストの連続したリクエストは失敗しなくなりました。 以前は、リクエストオブジェクトが Dispatches 間で共有されていたので、テストに失敗していました。 この `resetRequest` メソッドが `request`. _Lukasz Bajsarowicz がプル要求で送信した修正 [27300](https://github.com/magento/magento2/pull/27300)_. [GitHub-27299](https://github.com/magento/magento2/issues/27299)

<!-- ENGCOM-7262-->

* のサポートに統合テストが追加されました。 `Magento_Customer` 電子メール機能。 _Lukasz Bajsarowicz がプル要求で送信した修正 [27606](https://github.com/magento/magento2/pull/27606)_. [GitHub-27607](https://github.com/magento/magento2/issues/27607)

#### PHP の単体テスト

<!-- ENGCOM-7435 7306-->

* PHP のユニットテストでは、この致命的なエラーは発生しなくなりました。 `Fatal error: Class Mock_CartExtensionInterface_0ba80a0b contains 2 abstract methods and must therefore be declared abstract or implement the remaining methods (Magento\Quote\Api\Data\CartExtensionInterface::getAmazonOrderReferenceId, Magento\Quote\Api\Data\CartExtensionInterface::setAmazonOrderReferenceId) in /var/www/html/vendor/phpunit/phpunit-mock-objects/src/Generator.php(264) : eval()'d code on line 1`. _Lukasz Bajsarowicz がプル要求で送信した修正（プライベートリポジトリの partners-magento2ee に 178）および [27701](https://github.com/magento/magento2/pull/27701)_. [GitHub-27638](https://github.com/magento/magento2/issues/27638)

<!-- ENGCOM-7271-->

* テスト対象 `Offline_Payments` は、PHPUnit 8 と互換性があります。  _プルリクエストで Cristiano Pacheco によって送信された修正 [27627](https://github.com/magento/magento2/pull/27627)_. [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-7243 7284 7291-->

* 単体テスト `Framework`, `AdminAnalytics`, `AdminNotification`、および `AMPQ` は、PHPUnit 8 用に更新されました。 _プル要求で Ihor Sviziev によって送信された修正 [27522](https://github.com/magento/magento2/pull/27522), [27521](https://github.com/magento/magento2/pull/27521), [27519](https://github.com/magento/magento2/pull/27519), [27522](https://github.com/magento/magento2/pull/27522)_. [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-6542-->

* これで、 `\Magento\Downloadable\Test\Unit\Helper\DownloadTest` インターネットに接続されていない単体テスト。  _プル要求で aleromano89 によって送信された修正 [26264](https://github.com/magento/magento2/pull/26264)_. [GitHub-23521](https://github.com/magento/magento2/issues/23521)

<!-- ENGCOM-6695-->

* の単体テストを追加しました。 `app/code/Magento/Fedex/Model/Source/Generic.php`. _プルリクエストで Sathish Subramanian から送信された修正 [26549](https://github.com/magento/magento2/pull/26549)_.

<!-- ENGCOM-7251 7283 7472-->

* `<magentoCron>` は複数のテストに追加されました。このテストでは、部分的なインデックス再作成をトリガーしています。 この変更により、対象となる機能テストで偽陰性が発生した問題に対処します。 `Magento_Bundle`, `CatalogImportExport`, `CatalogInventory`, `CatalogRule`, `Backend`, `Braintree`、および `Captcha`. _プルリクエストで Lukasz Bajsarowicz によって送信された修正 [27322](https://github.com/magento/magento2/pull/27322), [27323](https://github.com/magento/magento2/pull/27323), [27321](https://github.com/magento/magento2/pull/27321)_. [GitHub-27320](https://github.com/magento/magento2/issues/27320)

<!-- ENGCOM-6844-->

* の誤った使用 `<amOnPage>` 適切な `<actionGroup>` （該当する場合はテストにログアウト） _Lukasz Bajsarowicz がプルリクエストで提出した Fix 116、プライベートリポジトリの partners-magento2ee_. [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-6352-->

* テスト内の各アクショングループは、MFTF のベストプラクティスに従って別のファイルに移動され、一貫性のないファイル名が修正されました。 次のモジュールのテストが影響を受けました：

   * module-catalog-permissions
   * module-shared-catalog
   * module-catalog-event
   * module-banner
   * module-admin-gws
   * module-advanced-checkout
   * モジュール輸送
   * module-ui
   * モジュール輸送
   * module-checkout-address-search
   * module-sales
   * module-catalog
   * module-catalog-rule-staging
   * module-visual-merchandiser
   * module-customer

   _プルリクエストで Lukasz Bajsarowicz によって送信された修正 [25800](https://github.com/magento/magento2/pull/25800), [26323](https://github.com/magento/magento2/pull/26323), [26321](https://github.com/magento/magento2/pull/26321), [26320](https://github.com/magento/magento2/pull/26320), [26319](https://github.com/magento/magento2/pull/26319), [26322](https://github.com/magento/magento2/pull/26322), [25828](https://github.com/magento/magento2/pull/25828), [26329](https://github.com/magento/magento2/pull/26329) （およびプライベートリポジトリの partners-magento2ee のプルリクエスト 104、105、106、107、108、109、111、119、120、121）_. [GitHub-22853](https://github.com/magento/magento2/issues/22853)

### テーマ

<!-- MC-29804-->

* でバグを解決しました `JsFooterPlugin.php` 動的ブロックの表示に影響を与えた 以前は、に直接アクセスすると、アプリケーションがこのエラーを表示していました `/banner/ajax/load/url`: `Uncaught TypeError: strpos() expects parameter 1 to be string, null given in`.

<!-- ENGCOM-6708-->

* この `i18n` メソッドを使用すると、文字列をアンダースコアテンプレートに追加できます。  _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [26435](https://github.com/magento/magento2/pull/26435)_. [GitHub-18012](https://github.com/magento/magento2/issues/18012)

<!-- ENGCOM-6666-->

* この `section-config` モジュールがリファクタリングされました。 このリファクタリングにより、POSTリクエストをおこなうサードパーティモジュールや、モジュールが `data-mage-init`. _プルリクエストで Mateusz Krzeszowiak から送信された修正 [25764](https://github.com/magento/magento2/pull/25764)_. [GitHub-17125](https://github.com/magento/magento2/issues/17125)

<!-- ENGCOM-6924-->

* `LoadCssAsync` HTML形式のエラーを修正しました。 _プルリクエストで Sathish Subramanian から送信された修正 [26764](https://github.com/magento/magento2/pull/26764)_. [GitHub-26760](https://github.com/magento/magento2/issues/26760)

<!-- ENGCOM-7052-->

* 作成時 `default.xml` および `catalog_product_view.xml` ファイルを新しいテーマの作成の一環として使用すると、これらのページが作成されるか、またはエラーがログファイルに期待どおりに記録されます。 以前は、アプリケーションは次の場所にエラーを記録していました： `vendor/magento/framework/View/Page/Config/Renderer.php` ファイル。 _Vinh Le がプル要求で提出した修正 [27026](https://github.com/magento/magento2/pull/27026)_. [GitHub-27009](https://github.com/magento/magento2/issues/27009)

### 翻訳とロケール

<!-- MC-24186-->

* インライン翻訳が、 **管理者** > **ストア** > **設定** > **詳細** > **開発者** > **インラインを翻訳** > **Storefront が有効** が設定されている。

<!-- MC-31663-->

* ストアフロントでインライン翻訳を有効にした場合、期待どおりに動作するようになりました。

<!-- ENGCOM-7064-->

* 製品 URL キーが想定どおりに表記変換されるようになりました。 _プルリクエストで DanieliMi によって送信された修正 [26506](https://github.com/magento/magento2/pull/26506)_. [GitHub-26499](https://github.com/magento/magento2/issues/26499)

<!-- ENGCOM-6899-->

* この `es_US Spanish (United States)` ロケールがサポートされるようになりました。 _Vinh Le がプル要求で提出した修正 [26857](https://github.com/magento/magento2/pull/26857)_. [GitHub-26843](https://github.com/magento/magento2/issues/26843)

<!-- ENGCOM-6996-->

* 数値プレースホルダー数と JavaScript コードプレースホルダー数が同じになりました。 以前は、数値プレースホルダーカウントが%1 で始まる間、JavaScript コードは 0%と想定されていました。  _プルリクエストでコロスティによって送信された修正 [25359](https://github.com/magento/magento2/pull/25359)_. [GitHub-25243](https://github.com/magento/magento2/issues/25243)

<!-- ENGCOM-6557-->

* これで、製品の詳細ページのページタイトルの翻訳を無効にできます (`page.main.title`) です。これはデフォルトで有効になっています。 _プルリクエストで Bartomiej Szubert によって送信された修正 [26269](https://github.com/magento/magento2/pull/26269)_. [GitHub-7065](https://github.com/magento/magento2/issues/7065)

<!-- ENGCOM-7465-->

* 請求書PDFでのアラビア語とヘブライ語のレンダリングに関する問題が解決されました。 _プルリクエストで Ihor Sviziev によって送信された修正 [27887](https://github.com/magento/magento2/pull/27887)_. [GitHub-25769](https://github.com/magento/magento2/issues/25769)

<!-- ENGCOM-6646-->

* 言語パックの継承順序が、ドキュメントで説明されているように、一覧に記載された、最初に使用されたベースで期待どおりに適用されるようになりました。  _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [26420](https://github.com/magento/magento2/pull/26420)_. [GitHub-8691](https://github.com/magento/magento2/issues/8691)

<!-- ENGCOM-6443-->

* サポートされているロケールでフォルダ名に非ラテン文字を入力すると、次のエラーメッセージが表示されるようになりました。 `Please rename the folder using only Latin letters, numbers, underscores and dashes`. _プル要求で Eden Duong から送信された修正 [25904](https://github.com/magento/magento2/pull/25904). [GitHub-25896](https://github.com/magento/magento2/issues/25896)_

<!-- ENGCOM-6539-->

* の長さ `locale` 列 `directory_country_region_name` が 8 から 16 に増加し、次のようなロケールをサポートするようになりました。  `zh_Hans_CN`. _プルリクエストで Bartomiej Szubert によって送信された修正 [26268](https://github.com/magento/magento2/pull/26268)_. [GitHub-14001](https://github.com/magento/magento2/issues/14001)

### UI

<!-- ENGCOM-7490-->

* 「戻る」ボタンが次の場所で期待どおりに動作するようになりました。 **管理者** > **ストア** > **注文ステータス** > **注文ステータスの編集**. _プル要求で Vadim Malesh から送信された修正 [27976](https://github.com/magento/magento2/pull/27976)_. [GitHub-1270](https://github.com/magento/magento2/issues/1270)

<!-- ENGCOM-6692-->

* 矢印キーを使用して **ファイル名** フィールドに値を入力します。Adobe Stock _プルリクエストで Adarsh Manickam から送信された修正 [25991](https://github.com/magento/magento2/pull/25991)_. [GitHub-847](https://github.com/magento/magento2/issues/847)

<!-- ENGCOM-6414-->

* この **パスワード**  フィールドを選択します。 **管理者** > **システム** > **統合** ページは期待どおりにスタイルを継承するようになりました。 _プルリクエストで Eduard Chitoraga から送信された修正 [25918](https://github.com/magento/magento2/pull/25918)_. [GitHub-25917](https://github.com/magento/magento2/issues/25917)

<!-- ENGCOM-6482-->

* ストアフロントの JavaScript バリデーターによって検証された入力も、管理者での検証に合格します。 以前は、JavaScript バリデーターはストアフロントでは改行を 1 文字としてカウントしていましたが、サーバー側では `\Magento\Catalog\Model\Product\Option\Type\maxCharacters` は改行を 2 文字としてカウントしました。 _プル要求で Grzegorz Boguz によって送信された修正 [26033](https://github.com/magento/magento2/pull/26033)_. [GitHub-25974](https://github.com/magento/magento2/issues/25974)

<!-- ENGCOM-6517-->

* この `subTitle` タグは、 `setTitle()` 呼び出し。 以前は、タイトルとサブタイトルを含むポップアップまたはカスタムモーダルを作成しようとしたときに、 `setTitle()` メソッド `subTitle` が消去されました。 _プル要求で Andrea Parmeggiani によって送信された修正 [26142](https://github.com/magento/magento2/pull/26142)_. [GitHub-26141](https://github.com/magento/magento2/issues/26141)

<!-- ENGCOM-6464-->

* 「管理マーケティング」タブのサブメニューは、メニュー項目の長さに合わせて自動的に調整されるようになりました。  水平方向にスクロールすることもできます。  _プル要求で Pawel Tylek によって送信された修正 [26034](https://github.com/magento/magento2/pull/26034)_. [GitHub-18687](https://github.com/magento/magento2/issues/18687)

<!-- ENGCOM-6519-->

* テーブル `quote`  列 `customer_note` 現在は、タイプを使用しています `text` 期待どおり 以前は、次のタイプを使用していました。 `varchar(255)`. _プル要求で Ravi Chandra から送信された修正 [26160](https://github.com/magento/magento2/pull/26160)_. [GitHub-26155](https://github.com/magento/magento2/issues/26155)

<!-- ENGCOM-7153-->

* 上のテーブルヘッダーの表示の問題を修正しました。 **マイアカウント**  > **アドレス帳**  [ 住所エントリ ] テーブル。  _プル要求で Abrar Pathan によって送信された修正 [27336](https://github.com/magento/magento2/pull/27336)_. [GitHub-27335](https://github.com/magento/magento2/issues/27335)

<!-- ENGCOM-5986-->

* レイヤーナビゲーション価格ステップで使用される通貨記号が、デフォルト設定に基づくようになりました。  _プルリクエストで Bartomiej Szubert によって送信された修正 [24815](https://github.com/magento/magento2/pull/24815)_. [GitHub-21684](https://github.com/magento/magento2/issues/21684)

<!-- ENGCOM-6324-->

* ベラルーシ通貨 (BYR) のシンボルを BYN に更新しました。 _プルリクエストで Bartomiej Szubert によって送信された修正 [25723](https://github.com/magento/magento2/pull/25723)_. [GitHub-24713](https://github.com/magento/magento2/issues/24713)

<!-- ENGCOM-6622-->

* カタログページの「製品を比較」セクションが、解像度 767 px 未満のモバイル表示で、期待どおりに表示されるようになりました。 _プルリクエストで Hitesh から送信された修正 [26418](https://github.com/magento/magento2/pull/26418)_. [GitHub-26416](https://github.com/magento/magento2/issues/26416)

<!-- ENGCOM-6376-->

* モバイル表示で、製品ページのスクロールが期待どおりに動作するようになりました。  _プルリクエストで Mateusz Krzeszowiak から送信された修正 [25385](https://github.com/magento/magento2/pull/25385)_. [GitHub-10518](https://github.com/magento/magento2/issues/10518), [GitHub-21717](https://github.com/magento/magento2/issues/21717)

<!-- ENGCOM-6368-->

* モバイル表示で、製品ページ上のギャラリーのサムネール画像を期待どおりにスクロールできるようになりました。 _プル要求で iGerchak から送信された修正 [25839](https://github.com/magento/magento2/pull/25839)_. [GitHub-21014](https://github.com/magento/magento2/issues/21014)

<!-- ENGCOM-6425-->

* 次のテーマタイトルをクリック： **管理者**  > **コンテンツ** > **テーマ** では、レコードが重複しなくなりました。 _プル要求で Eden Duong から送信された修正 [25926](https://github.com/magento/magento2/pull/25926)_. [GitHub-25925](https://github.com/magento/magento2/issues/25925)

<!-- ENGCOM-6328-->

* 管理フォームの表示規則に従って、管理請求先住所/配送先住所ページのレイアウトがリファクタリングされました。 _プルリクエストで Alexey Rakitin によって送信された修正 [25699](https://github.com/magento/magento2/pull/25699)_. [GitHub-23481](https://github.com/magento/magento2/issues/23481), [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6628 6593-->

* 製品の詳細ページの「比較に追加」リンクが、解像度 640px 未満のディスプレイのモバイル表示で正しくレンダリングされるようになりました。 _プル要求で Pawe Tylek によって送信された修正 [26424](https://github.com/magento/magento2/pull/26424) プル要求に Tejash Kumbhare を含む [26365](https://github.com/magento/magento2/pull/26365)_. [GitHub-26364](https://github.com/magento/magento2/issues/26364)

<!-- ENGCOM-6607-->

* この **並べ替え基準** ラベルが **購入者** 」ボタンをクリックします。 _プルリクエストで Andrii Kartavtsev によって送信された修正 [26381](https://github.com/magento/magento2/pull/26381)_. [GitHub-25300](https://github.com/magento/magento2/issues/25300)

<!-- ENGCOM-7137-->

* ダウンロード可能な製品のサンプルとリンクのタイトルの値を更新するには、  **デフォルトを使用** チェックボックス。 _プル要求で Abel Truong によって送信された修正 [27295](https://github.com/magento/magento2/pull/27295)_. [GitHub-27169](https://github.com/magento/magento2/issues/27169)

<!-- ENGCOM-6532-->

* 修正後の **更新** ボタンと **数量** 」フィールドをクリックします。  _プルリクエストで Hitesh から送信された修正 [26234](https://github.com/magento/magento2/pull/26234)_. [GitHub-26227](https://github.com/magento/magento2/issues/26227)

<!-- ENGCOM-7032-->

* [ アドレス帳 ] ページの [ 追加のアドレス項目 ] テーブルの下の罫線の色が一致するようになりました `thead` および `tbody` 境界線の色。 _プルリクエストで Tejash Kumbhare から送信された修正 [26649](https://github.com/magento/magento2/pull/26649)_. [GitHub-26648](https://github.com/magento/magento2/issues/26648)

<!-- ENGCOM-7195-->

* ユーザーがモーダルオーバーレイをクリックしたときに確認操作が実行されなくなりました。 _プルリクエストで Serhiy Zhovnir によって送信された修正 [27399](https://github.com/magento/magento2/pull/27399)_.

### URL

<!-- ENGCOM-7112-->

* カテゴリリポジトリ（保存方法）がリファクタリングされました。以前は、カテゴリ URL キーを変更する際に一意のパスを作成できませんでした。 _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27304](https://github.com/magento/magento2/pull/27304)_. [GitHub-14080](https://github.com/magento/magento2/issues/14080)

<!-- ENGCOM-7208-->

* カテゴリ URL のキーロジックの検証が改善されました。 _プルリクエストで Sergiy Vasiutynskyi から送信された修正 [27412](https://github.com/magento/magento2/pull/27412)_. [GitHub-13689](https://github.com/magento/magento2/issues/13689)

### URL の書き換え

<!-- MC-31147-->

* CMS ページで言語を変更した顧客は、選択したストア表示に正常に移動できるようになりました。 以前は、アプリケーションで 404 エラーが表示されていました。

<!-- ENGCOM-6997-->

* カテゴリパスの追加を有効にした製品 URL の URL 書き換え生成が、期待どおりに動作するようになりました。 以前は、複数のストア表示を持つデプロイメントで、アプリケーションが誤った URL を生成していた場合に、ストレビュー固有の URL パスの代わりに、カテゴリの URL パスのデフォルト値を使用して書き換えをおこなっていました。 _Pieter Hoste がプル要求で送信した修正 [26784](https://github.com/magento/magento2/pull/26784)_. [GitHub-25124](https://github.com/magento/magento2/issues/25124), [GitHub-11616](https://github.com/magento/magento2/issues/11616)

<!-- ENGCOM-6995-->

* リクエストパスがターゲットパスと同じ場合に URL のリダイレクトを防ぐためのチェックを追加しました。 _プルリクエストで Bartomiej Szubert によって送信された修正 [26902](https://github.com/magento/magento2/pull/26902)_. [GitHub-20309](https://github.com/magento/magento2/issues/20309)

<!-- ENGCOM-6303-->

* URL の書き換え操作で、URL の末尾にスラッシュが使用されている場合に、URL からクエリ文字列が削除されなくなりました。  _プルリクエストで Alexey Arendarenko によって送信された修正 [25603](https://github.com/magento/magento2/pull/25603)_. [GitHub-18717](https://github.com/magento/magento2/issues/18717)

### VAT

<!-- ENGCOM-7458-->

* 次の VAT 検証 URL を修正しました： [EU Vat 番号](https://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl).  _Shikha Mishra がプル要求で提出した修正 [27886](https://github.com/magento/magento2/pull/27886)_. [GitHub-27874](https://github.com/magento/magento2/issues/27874)

### Web API フレームワーク

<!-- MC-29891-->

* POST `/rest/default/async/bulk/V1/orders` 呼び出し。

<!-- MC-30675-->

* POST `/rest/default/async/bulk/V1/products` 呼び出し。

<!-- ENGCOM-6945-->

* この `getList` メソッドがリファクタリングされ、取得されました `is_subscribed` extension 属性。 以前は、API を使用して顧客エンティティを取得する際に、この属性を取得できませんでした。 _プルリクエストで enriquei4 から送信された修正 [25311](https://github.com/magento/magento2/pull/25311)_. [GitHub-13252](https://github.com/magento/magento2/issues/13252)

<!-- ENGCOM-6500-->

* を使用した顧客情報の更新 `/V1/customers/:id` リセットされなくなりました `group_id` 不必要に 以前は、REST を使用して顧客を更新した場合、本文に顧客グループが含まれていないと、顧客グループが 1 に変更されていました。 _プル要求で MaxRomanov4669 によって送信された修正 [25958](https://github.com/magento/magento2/pull/25958)_. [GitHub-14663](https://github.com/magento/magento2/issues/14663)

<!-- ENGCOM-6920-->

* Web API で使用した場合に、サービス契約の NULL 許容ゲッターが反射エラーをスローしなくなりました。 null および有効な型を返すメソッドが、順序に関係なく正しく動作するようになりました。  _プル要求で Marco Pcke によっk̦て送信された修正 [25806](https://github.com/magento/magento2/pull/25806)_. [GitHub-25656](https://github.com/magento/magento2/issues/25656)

<!-- ENGCOM-7075-->

* これで、POST `/V1/guest-carts/:cartId/items` をクリックして、特定の買い物かごに製品を追加します。 以前は、この呼び出しを使用した場合、アプリケーションは `cartId`. _プル要求で Vadim Malesh から送信された修正 [27172](https://github.com/magento/magento2/pull/27172)_. [GitHub-14086](https://github.com/magento/magento2/issues/14086)

<!-- ENGCOM-7102-->

* これで、 `PUT /V1/cmsPage/:id` endpoint を使用すると、他のフィールドの値を変更せずに CMS のページタイトルを保存できます。 _プル要求で Vadim Malesh から送信された修正 [27237](https://github.com/magento/magento2/pull/27237)_. [GitHub-24704](https://github.com/magento/magento2/issues/24704)

<!-- ENGCOM-7011-->

* REST リクエストの結果のページネーションが正確になりました。 以前は、特定のページからの結果をリクエストした場合 ( 例： `page_size` = 1 および a `current_page` の値（範囲外）の場合、呼び出しによって、情報メッセージではなく、結果の最後のページが繰り返されていました。  _Lukasz Bajsarowicz がプル要求で送信した修正 [26988](https://github.com/magento/magento2/pull/26988)_. [GitHub-26986](https://github.com/magento/magento2/issues/26986), [GitHub-8099](https://github.com/magento/magento2/issues/8099)

<!-- ENGCOM-6540-->

* GETの結果 `/V1/orders/items/{id}` に、ギフトメッセージデータを含む拡張属性要素が含まれるようになりました。 _プル要求で Laura Folco から送信された修正 [25946](https://github.com/magento/magento2/pull/25946)_. [GitHub-19093](https://github.com/magento/magento2/issues/19093)

### ウィッシュリスト

<!-- MC-29988-->

* ウィッシュリストがストアビューレベルで有効になり、グローバルレベルで無効になっている場合、ウィッシュリストは期待どおりに動作するようになりました。 以前は、これらの設定が適用されていると、製品をウィッシュリストに追加すると 404 エラーが発生していました。

<!-- ENGCOM-6518-->

* 許可されている数を超える電子メールアドレスで顧客がウィッシュリストを共有しようとした場合に表示されるエラーメッセージを改善しました。  _プル要求で divyajyothi5321 によって送信された修正 [26066](https://github.com/magento/magento2/pull/26066)_. [GitHub-26064](https://github.com/magento/magento2/issues/26064)

<!-- ENGCOM-6723-->

* アプリケーションに、期待どおりにマイウィッシュリストページが表示され、解像度が 768px より大きく 1,023px 未満になりました。 _プルリクエストで Hitesh から送信された修正 [26546](https://github.com/magento/magento2/pull/26546)_. [GitHub-26543](https://github.com/magento/magento2/issues/26543)

<!-- ENGCOM-7062-->

* クリック時に生成される電子メール **ウィッシュリストを共有** には、ウィッシュリストページと同じ製品画像が表示されます。 _Michael Bottens によってプル要求で送信された修正 [27125](https://github.com/magento/magento2/pull/27125). [GitHub-27124](https://github.com/magento/magento2/issues/27124)_

<!-- ENGCOM-6602-->

* 顧客は、グループ化された製品の一部であるシンプルな製品と、数量が異なる同じシンプルな製品の両方をウィッシュリストに追加できるようになりました。  _プル要求で MaxRomanov4669 によって送信された修正 [26258](https://github.com/magento/magento2/pull/26258)_. [GitHub-11209](https://github.com/magento/magento2/issues/11209)

### WYSIWYG

<!-- ENGCOM-6275-->

* WYSIWYG 画像アップローダで、 `pub/media/wysiwyg` をストレージルートとして設定します。 以前は、アップロード済みの `pub/media` をストレージルートとして使用することで、画像アップローダコードに最近変更した後で、アップロードされた画像にアクセスできなくなります。 _Pieter Hoste がプル要求で送信した修正 [24878](https://github.com/magento/magento2/pull/24878)_. [GitHub-22609](https://github.com/magento/magento2/issues/22609)

<!-- ENGCOM-7045-->

* Chrome ブラウザーの TinyMCE4 で、全角文字が期待どおりに処理されるようになりました。 以前は、Chrome でダブルバイト文字（中国語で使用されるなど）を正しく処理できませんでした。 _西裕和 (Hirokazu Nishi) のプルリクエストで提出した修正 [25454](https://github.com/magento/magento2/pull/25454)_. [GitHub-24637](https://github.com/magento/magento2/issues/24637)

## 既知の問題 — 一般

**問題**:ストアフロントのエラーメッセージの異常は、PHP 7.4.2 がインストールされているデプロイメントで発生します。 PHP 7.4.2 で 2.4.0 がデプロイされた場合、ストアフロントエラーメッセージのスペース記号はプラス (+) 文字に置き換えられます。  このバグは PHP 7.4.2 にネイティブであり、Magento Open Sourceでは修正できません。 **回避策**:他のバージョンの PHP 7.4.x を使用することをお勧めします。詳しくは、 [ストアフロントに生のメッセージデータを表示](https://support.magento.com/hc/en-us/articles/360045804332)  ナレッジベース記事。 <!-- MC-34170-->

**問題**:マーチャントは、管理パッケージの作成ページから注文した製品をパッケージに追加してパッケージを保存することはできません。 詳しくは、 [発送ラベルの作成](https://support.magento.com/hc/en-us/articles/360046750171) ナレッジベース記事。 この **MC-35514-2.4.0-CE-composer.patch** この問題のホットフィックスは、次の場所から利用できます： [リリース](https://magento.com/tech-resources/download). <!-- MC-35514-->

**問題**:アプリケーションは、の API に依存するサードパーティの拡張機能を使用し、インストール中にこのエラーメッセージを表示します `Store` CLI コマンドのモジュール： `The default website isn't defined. Set the website and try again`. **回避策**:Composer からサードパーティの拡張機能への依存関係を削除し、Magentoをインストールしてから、サードパーティの拡張機能をインストールします。

**問題**:この **買い物かごへの選択の追加** ボタンが動作しない。 **回避策**:以下を使用： **買い物かごへの選択の追加** 」ボタンをクリックします。 詳しくは、 [カートへの選択項目の追加ボタンが機能しない](https://support.magento.com/hc/en-us/articles/360045838312) ナレッジベース記事。 <!-- MC-35313-->

**問題**:管理者から新しい注文を作成できません。 **SKU 別の製品の追加** および **製品を追加**  JavaScript のバンドルを有効にすると、注文の作成ページにボタンが表示されない。  **回避策**:デプロイメントで JavaScript のバンドルを無効にします。 <!-- MC-36044-->

**問題**:アプリケーション a `404 not found` 顧客が複数の住所に出荷される注文をチェックアウトする際に報酬ポイントを削除しようとするとエラーが発生しました。 <!-- MC-35955-->

**問題**:顧客のウィッシュリストから設定可能な製品を編集すると、次の予期しない動作が発生します。[ 製品の設定 ] ページに予期しないフィールドが表示され、[ 製品の設定 ] ページは、 **OK**. また、次のメッセージも表示されます。 `Please load Wish List item`. **回避策**:製品の設定ページを再読み込みします。 <!-- MC-35617-->

**問題**:注文リストが複数のページにまたがる場合、顧客は、1 ページあたりに表示される注文数を変更できません。 現在、注文の最後のページに移動し、ページごとに表示される注文数を変更しようとすると、アプリケーションはこのメッセージを表示します。 `You have placed no orders`. 詳しくは、 [注文の表示エラー](https://support.magento.com/hc/en-us/articles/360046802271) ナレッジベース記事。  **回避策**:マイ注文ページを再度開くと、注文リストが表示されます。 <!-- MC-34153-->

**問題**:直接 **税率のエクスポート** 「新規税務処理基準の追加」ページのボタン (**ストア** > **税務処理基準**) はダウンロードしません `tax_rates.csv` ファイルに書き込まれます。 **回避策**:[  **税率のエクスポート** 」ボタンをクリックします。  詳しくは、 [書き出し税率が機能しない](https://support.magento.com/hc/en-us/articles/360045850032)  ナレッジベース記事。 <!-- MC-35345-->

**問題**:この **更新** 管理顧客アクティビティページの「最後に注文した品目」、「比較リストの製品」、「最近比較した製品」の各セクションのボタンが期待どおりに機能しません。 現在、 **更新** ボタンがクリックされ、製品名は表示されません。 詳しくは、 [顧客のアクティビティの更新が機能しない](https://magento.zendesk.com/hc/en-us/articles/360046091332) ナレッジベース記事。 <!-- MC-35296-->

## 既知の問題 — VBE

### Amazon Pay

* **問題**:顧客がクリックしたときに支払い方法がチェックアウトワークフローに表示されません **標準チェックアウトに戻る** Amazon Pay のチェックアウト時に **回避策**:「チェックアウト」ページを更新して、見つからないメソッドを表示します。  <!-- BUNDLE-2661-->

* **問題**:新しい買い物かご価格ルールの作成時に使用できる「支払い方法」ドロップダウンリストに、同じ 2 つのAmazon支払い方法が表示されます。  <!-- BUNDLE-2685-->

### Braintree

* **問題**:管理者が「Braintree決済レポート」ページ (**管理者** > **レポート** ) をクリックします。 現在、アプリケーションには次のメッセージが表示されます。 `An error has happened during application run. See exception log for details`. 詳しくは、 [Braintree決済レポートの読み込みに失敗しました](https://support.magento.com/hc/en-us/articles/360046798251) ナレッジベース記事。 この **BUNDLE-2683_SettlementReport.patch** この問題のホットフィックスは、次の場所から利用できます： [リリース](https://magento.com/tech-resources/download). <!-- BUNDLE-2683-->

* **問題**:Venmo が有効になっていて、 **カードの支払い用に Vault を有効にする** の設定は無効です。 現在、アプリケーションは次のエラーを表示します。 `The "vault_capture" command doesn't exist. Verify the command and try again`.  <!-- BUNDLE-2647-->

* **問題**:新しい買い物かごの価格ルールの作成時に使用できる「支払い方法」ドロップダウンリストに、2 つの同一の PayPal メソッドが表示されます。   <!-- BUNDLE-2686-->

* **問題**:アプリケーションが開く際にエラーが発生しました **セールス** > **Braintree仮想端末**. フォームに破損した UI 要素が含まれていますが、まだ支払いを受け入れています。 **回避策**:正しいBraintree資格情報を保存します。これにより、折りたたまれた入力フィールドが修正されます。 詳しくは、 [Braintreeの仮想ターミナルページが壊れています](https://support.magento.com/hc/en-us/articles/360046800071)  ナレッジベース記事。 この **BUNDLE-2670_VirtualTerminal.patch** この問題のホットフィックスは、次の場所から利用できます： [リリース](https://magento.com/tech-resources/download). <!-- BUNDLE-2670-->

* **問題**:顧客がチェックアウト時に現地支払い方法を選択すると、次の国でエラーメッセージが表示されます。ベルギー、オランダ、イタリア、スペイン、ポーランド。  **回避策**:エラーメッセージを無視し、支払いを続行します。

### クラルナ

* **問題**:を **デザインテーマ** Klarna オンサイトメッセージ (**管理者**  >  **ストア**  >  **設定**  > **Klarna 設定**) を指定すると、空白のページになります。  **回避策**:デザインテーマを選択して保存します。  <!-- BUNDLE-2623-->

### 頂点

* **問題**:アプリケーションに  **住所の検証** ボタンをクリックします。 アドレスバリデーターは、更新されたアドレスを再確認せず、アドレス検証が有効な場合でも、誤ったアドレスを入力した後、顧客が正しいアドレスを入力した場合、アドレスが無効であることを示すメッセージを引き続き表示します。 **回避策**:頂点アドレスの検証を無効にします。 <!-- BUNDLE-2604-->

## コミュニティへの貢献

私たちは、より広いMagento Open Sourceコミュニティに感謝し、このリリースに対する彼らの貢献を認めたいと思います。 現在のリリースに対するコミュニティの貢献については、次の方法を確認してください。

* コミュニティメンバーがこのリリースの修正を提供している場合は、これらのノートの「修正された問題」セクションで、「*コミュニティメンバー@member_nameが提供する修正*&quot;.

* コミュニティエンジニアリングチーム [Magento寄稿者](https://magento.biterg.io/app/kibana) は、貢献度の高い個人およびパートナーのリストを月、四半期、年別に管理しています。 寄稿者ページから、GitHub 上の結合された PR へのリンクをたどることができます。

### パートナーへの貢献

次の表に、パートナーによる貢献の概要を示します。 この表は、プル要求に貢献したパートナー、外部プル要求、およびそれに関連付けられている GitHub 問題番号（使用可能な場合）を示しています。

{{$include /help/_includes/release-notes/engcomm-2-4-0-partner.md}}

### 個々の投稿者への投稿

次の表に、コミュニティメンバーからの投稿を示します。 この表は、外部のプルリクエスト、関連付けられている GitHub の問題番号（使用可能な場合）、およびプルリクエストを寄稿したコミュニティメンバーを示しています。

{{$include /help/_includes/release-notes/engcomm-2-4-0-issues.md}}

### 必要システム構成

当社の技術スタックは、PHP および MySQL 上で構築されています。 詳しくは、 [必要システム構成](../../../installation/system-requirements.md).

### インストールおよびアップグレードの手順

Composer を使用してMagento Open Source2.4.0 をインストールできます。

## 移行ツールキット

データ移行ツールは、既存のMagento1.x のストアデータをMagento2.x に転送するのに役立ちます。このコマンドラインインターフェイスには、検証、進行状況の追跡、ログ、テストの各機能が含まれます。 インストール手順については、 [データ移行ツールのインストール](../../../tools/data-migration-tool/install.md). 詳細を調べたり、 [データ移行リポジトリ](https://github.com/magento/data-migration-tool).

この [コード移行ツールキット](https://github.com/magento/code-migration) は、既存のMagento1.x のストア拡張機能とカスタマイズをMagento2.x に転送するのに役立ちます。コマンドラインインターフェイスには、Magento1.x のモジュールとレイアウトを変換するためのスクリプトが含まれています。
