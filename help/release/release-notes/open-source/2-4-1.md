---
title: Magento Open Source 2.4.1 リリースノート
description: 2.4.1 Magento Open Source リリースの新機能、機能強化、バグ修正および既知の問題について説明します。
recommendations: noCatalog
exl-id: 63d04bfc-96c9-4fe3-b3c1-252f1243459a
source-git-commit: 55512521254c49511100a557a4b00cf3ebee0311
workflow-type: tm+mt
source-wordcount: '13109'
ht-degree: 0%

---

# Magento Open Source 2.4.1 リリースノート

Magento Open Source 2.4.1 では、パフォーマンスとセキュリティが強化されました。 セキュリティの強化として、cookie の `SameSite` 属性のサポート、支払いに関連する API エンドポイントと注文関連 API エンドポイントの CAPTCHA 保護の追加、注文ストアフロントページの追加などがあります。

このリリースには、2.4.0 に含まれていたコア品質のすべての改善、コアコードに対する 150 を超える新しい修正、15 を超えるセキュリティ強化が含まれています。 コミュニティメンバーによる約 300 件の GitHub 問題の解決が含まれています。 これらのコミュニティの貢献度は、コアコードの小規模なクリーンアップから、GraphQLでの大幅な機能強化まで多岐にわたります。

2.4.0 で特定された既知の問題はすべて、このリリースで修正されました。

{{bics}}

## セキュリティパッチを利用できます

マーチャントは、完全な四半期リリース（2.4.0-p1 など）が提供する何百もの機能修正や機能強化を適用しなくても、時間に依存するセキュリティ修正をインストールできるようになりました。 パッチ 2.4.0.1 （Composer パッケージ 2.4.0-p1）は、以前の四半期リリース 2.4.0 で特定された脆弱性の修正を提供するセキュリティパッチです。2.4.0 リリースに適用されたすべてのホットフィックスが、このセキュリティパッチに含まれています。 （*ホットフィックス* は、特定の問題やバグに対処するリリースバージョンの修正を提供します。）

セキュリティパッチの一般的な情報については、[&#x200B; 新しいセキュリティパッチリリースの概要 &#x200B;](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287) を参照してください。 セキュリティパッチ（パッチ 2.3.5-p2 を含む）のダウンロードと適用の手順については、[&#x200B; オンプレミスでのクイックスタートのインストール &#x200B;](../../../installation/composer.md) を参照してください。 セキュリティパッチには、セキュリティバグ修正のみが含まれ、完全なパッチに含まれる追加のセキュリティ機能強化は含まれません。

## 配送業者として DHL を引き続き提供するには、`AC-3022.patch` を適用してください

DHL ではスキーマバージョン 6.2 を導入しており、近い将来、スキーマバージョン 6.0 を廃止する予定です。 DHL 統合をサポートするAdobe Commerce 2.4.4 以前のバージョンは、バージョン 6.0 のみをサポートしています。これらのリリースをデプロイするマーチャントは、DHL を配送業者として引き続き提供するために、できるだけ早い時期に `AC-3022.patch` を適用する必要があります。 パッチのダウンロードとインストールについては、ナレッジベースの記事 [DHL を引き続き配送業者として提供するためのパッチを適用する &#x200B;](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) を参照してください。

## その他のリリース情報

これらの機能のコードは四半期ごとのリリースにバンドルされていますが、これらのプロジェクトのいくつか（例：Progressive Web Applications （PWA） Studio）も独立してリリースされています。 これらのプロジェクトのバグ修正は、各プロジェクトのドキュメントで利用できる別のプロジェクト固有のリリース情報に記載されています。

## ハイライト

このリリースのハイライトは次のとおりです。

### セキュリティの大幅な強化

このリリースには、15 を超えるセキュリティ修正と platform セキュリティの改善が含まれています。 すべてのセキュリティ修正は 2.4.0-p1 および 2.3.6 に移植されています。

#### リモートコード実行（RCE）およびクロスサイトスクリプティング（XSS）の脆弱性を閉じるのに役立つ 15 を超えるセキュリティ強化

これらの問題に関連する確認された攻撃は、今日まで行われていません。 ただし、特定の脆弱性が悪用されて、顧客情報にアクセスしたり、管理者のセッションを引き継いだりする可能性があります。 これらの問題のほとんどは、攻撃者が最初に管理者へのアクセス権を取得する必要があります。 そのため、IP許可リストに加える、[&#x200B; 二要素認証 &#x200B;](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)、VPN の使用、`/admin` ではなく一意の場所の使用、適切なパスワードハイジーンなど、管理者を守るために必要なすべての手順を実行してください。 修正された問題については、[Magento用のセキュリティアップデート &#x200B;](https://helpx.adobe.com/jp/security/products/magento/apsb20-59.html) を参照してください。

#### その他のセキュリティ機能強化

このリリースのセキュリティの改善点は次のとおりです。

* **CAPTCHA** 保護が次の製品領域に追加されました。

   * ストアフロントページと REST およびGraphQL エンドポイントの <!-- MC-36067--> への注文
   * 支払いに関連する REST およびGraphQL エンドポイント。<!-- MC-36064-->

  これらの追加のページに対する CAPTCHA 保護は、デフォルトで無効になっています。 CAPTCHA でカバーされる他のページと同様に、管理者で有効にすることができます。 この保護は、カード攻撃から店舗を保護するためのアンチブルートフォースメカニズムとして追加されています。 [CAPTCHA](https://experienceleague.adobe.com/ja/docs/commerce-admin/systems/security/captcha/security-captcha) を参照してください。

* **cookie の SameSite 属性のサポート**。 新しい cookie 分類システムのGoogle Chrome適用をサポートするために、cookie を処理するアプリケーションクラスを更新して、`SameSite` cookie 属性をサポートするようになりました。 この属性はデフォルトで `Lax` に設定されていますが、明示的に上書きできます。<!-- MC-35389-->

* **セキュリティ スキャン ツールの強化**。 Adobeは、デジタルスキミング防止のリーダーである [Sanguine Security](https://sansec.io/) と提携し、8,700 件を超える脅威情報のデータベースを Security Scan Tool に統合しました。 このパートナーシップにより、マーチャントは、マルウェアのプロアクティブな検出と誤検出の削減を通じて、サイトのセキュリティステータスに関するリアルタイムのインサイトを取得できます。 マーチャントは、https://account.magento.com/scannerにアクセスしてツールに登録できます。 詳しくは、[&#x200B; セキュリティ強化スキャンツールでストアフロントを保護する &#x200B;](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool) のブログ投稿を参照してください。

{{cve-notice}}

### インフラストラクチャの改善

このリリースには、フレームワークと次の機能領域の品質を向上させるコア品質の機能強化が含まれています。顧客アカウント、カタログ、CMS、OMS、インポート/エクスポート、プロモーションとターゲティング、買い物かごとチェックアウト、ステージングとプレビュー。

### パフォーマンスの向上

* **Redis とMagento間のネットワーク転送の小型化**。 `bin/magento di:compile` コマンドの実行中にプラグインリスト設定が生成されるようになりました。 この設定情報は、範囲に基づいて、生成されたメタデータフォルダーに書き込まれます。 以前は、この情報はキャッシュに保存されていました。 結果として、パフォーマンスが向上し、多くのシナリオでネットワーク・キャッシュ・サイズと実行時間が短縮されます。<!-- MC-31617-->

* **メッセージキューコンシューマーパフォーマンスの強化**。 3 つの新しい設定が、コンシューマーキューのCPUの使用量の減少をサポートします。 これらのオプションパラメーターを使用すると、コンシューマーに対する制御を強化し、サーバーリソースを節約できます。 [、](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/)、`maxIdleTime` の各パラメーターの説明については、`sleep` メッセージキューの設定 `onlySpawnWhenMessageAvailable` を参照してください。

* **コマンドの** 実行時間が改善されました `bin/magento`。

### Adobe Stockの統合

このリリースには、Adobe Stock Integration v2.1.0 が含まれています。

### 新しいメディアギャラリー

新しいメディアギャラリーは、管理者でデフォルトで有効になりました。 マーチャントは、メディアギャラリーの画像に対してこれらのアクションを実行できるようになりました。

* 画像を一括削除
* ストアフロントで使用されていない重複した画像と画像を識別して、メディアストレージを最適化します
* 商品やカテゴリのコンテンツ、CMSブロックなど、画像が使用されているストアフロント領域で画像をフィルタリングします
* 画像メタデータの操作
   * Media Gallery にアップロードされた画像からのメタデータの表示
   * 画像メタデータ（タイトル、説明、キーワード）の編集
   * メタデータによる画像の検索

### GraphQL

このリリースでは、次の機能に対するGraphQLのサポートが追加されました。

* **製品レビュー**。 顧客とゲストは製品レビューを書くことができます。 お客様は、製品のレビュー履歴を取得できます。 レビューインフラストラクチャに関する情報の取得については、[&#x200B; 製品レビューの作成 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/create-review/) および [productReviewRatingsMetadata クエリ &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/product-review-ratings-metadata/) を参照してください。<!-- MC-32349-->

* **ギフトオプション**. すべてのお客様とゲストは、ご注文にギフトメッセージを追加できます。 お客様は、ギフト包装、ギフト領収書、印刷カードを注文に追加することもできます。 [`setGiftOptionsOnCart` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/set-gift-options/) および [`updateCartItems` mutation を参照してください &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/update-items/)<!-- MC-32345-->

* **注文履歴**. すべての顧客は、請求書、出荷、払い戻しを含む、注文履歴に関する詳細を表示できます。<!-- MC-20635-->

* **買い物かごに追加**。 [`addProductsToCart` のミューテーションを使用すると &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/add-products/) 任意のタイプの製品をアクティブな買い物かごに追加できます。 `addSimpleProductsToCart` のような単一目的の突然変異の代わりに、この突然変異を使用することをお勧めします。 _プルリクエスト [27914](https://github.com/magento/magento2/pull/27914)_ で Yaroslav Rogoza によって送信された修正。 [GitHub-28524](https://github.com/magento/magento2/issues/28524) <!-- MC-21513-->

* **保管されている支払い方法**。 ログイン済みのお客様は、お支払いの詳細（Braintree クレジットカードおよび PayPal 対応Braintreeを含む）をマイアカウントに保存できるようになりました。

* **Magento Open Sourceでのウィッシュリストのサポート**。 ウィッシュリストに [&#x200B; アイテムを追加 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/add-products/) したり、[&#x200B; アイテムを更新 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/update-products/) したり、[&#x200B; アイテムを削除 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/remove-products/) したりできます。

* **顧客アカウントの管理の向上**。 顧客アカウントを管理するための [`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-v2/) と [`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-v2/) の突然変異を追加しました。 これらの新しいミューテーションには、`createCustomer` と `updateCustomer` のミューテーションとは異なる入力オブジェクトが必要です。 顧客のメールアドレスを変更するには、新しい [`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-email/) ミューテーションを使用します。

* **Payflow Pro Vault のサポート**。 [Payflow Pro Vault](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/payflow-pro-vault/) 支払い方法のGraphQL Vault サポートを追加しました。 _Oleh Usik によってプルリクエスト [28821](https://github.com/magento/magento2/pull/28821)_ で送信された修正。 [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* GraphQL [`storeConfig` クエリが更新され &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) 新しいお客様の設定が含まれるようになりました。 _Oleh Usik によってプルリクエスト [27876](https://github.com/magento/magento2/pull/27876)_ で送信された修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* [`requestPasswordResetEmail` のミューテーションを追加しました。これは &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/request-password-reset-email/) 指定されたメールアドレスのパスワードリセットメールをトリガーします。 _Oleh Usik によってプルリクエスト [27876](https://github.com/magento/magento2/pull/27876)_ で送信された修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **クラルナ・GraphQL**。 [Klarna の支払い方法 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/klarna/) および [`createKlarnaPaymentsSession`](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/mutations/create-klarna-payments-session/) の Klarna GraphQLに関するトピックを追加または更新しました

これらの機能強化について詳しくは、[GraphQL開発者ガイド &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/) を参照してください。

### PWA Studio

PWA Studio v8.0.0 では、次の新機能と機能強化が導入されています。

* デザイントークン、タイポグラフィ、カラー、コアコンポーネントおよびページレイアウトに適用される Venia スタイルガイドを更新しました。<!-- PWA-519 419-->

* Venia ミニ買い物かごエクスペリエンス <!-- PWA-236--> ージの改善

* Venia ストアフロント <!-- PWA-295--> ージでの複数ロケールおよびローカライズされたコンテンツの初期サポート

* Venia ストアフロント <!-- PWA-247--> ージのマイアカウントのエクスペリエンスに関する多数の改善

PWA Studioのバージョンと互換性のあるバージョンのリストについては、[&#x200B; 互換性 &#x200B;](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) を参照してください。 機能強化とバグ修正について詳しくは、[PWA Studio リリース &#x200B;](https://github.com/magento/pwa-studio/releases) を参照してください。

### 機能テストフレームワーク（MFTF）

MFTF 3.1.0 が利用可能になりました。 [&#x200B; 機能テストフレームワークの変更ログ &#x200B;](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md) を参照してください。

### ベンダーが開発した拡張機能

このリリースの機能および変更点については、以下の記事を参照してください。

* [Amazon支払 &#x200B;](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html?lang=ja)

* [dotdigital Engagement Cloud](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html)

* [&#x200B; クルナ &#x200B;](https://marketplace.magento.com/klarna-m2-klarna.html)

* [&#x200B; 頂点クラウド &#x200B;](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Yotpo 製品レビュー &#x200B;](https://marketplace.magento.com/yotpo-module-yotpo.html)

## 修正された問題

2.4.1 コアコードの何百もの問題を修正しました。

### インストール，アップグレード，デプロイメント

<!-- MC-36113-->

* CLI コマンドのストアモジュールの API に依存しているサードパーティ拡張機能を使用したインストールが失敗しなくなりました。 以前は、アプリケーションで「`The default website isn't defined. Set the website and try again`」というエラーメッセージが表示されていました。 これは、2.4.0 の既知の問題でした。

<!-- MC-33273-->

* `bin/magento setup:di:compile` は、致命的なエラーをスローしなくなりました。 以前は、このコマンドを初めて実行したときにアプリケーションがエラーをスローしていましたが、2 回目の実行でコンパイルに成功しました。

<!-- MC-34429-->

* `Magento\Framework\Encryption\Encryptor` でプラグインが宣言されている場合に、アップグレードが失敗しなくなりました。

<!-- MC-36231-->

* `bin/magento setup:static-content:deploy` を実行した後に一部のテーマがデプロイされない場合に、アプリケーションに情報エラーメッセージが表示されるようになりました。 以前は、デプロイメントが正常に完了しても、すべてのパッケージがデプロイされたわけではない場合、アプリケーションにエラーが表示されませんでした。 コマンドを有効な並列処理で実行し、各テーマを展開する時間が長いと、指定された最大実行時間が経過すると、テーマが展開されなくても、このコマンドは正常に終了します。

<!-- MC-35001-->

* Web サイトの範囲が変更されても、Klarna 支払い（**ストア**/**設定**/**販売**/**支払い方法**/**Klarna**）の「**デフォルトを使用**」チェックボックスが期待どおりにオンのままになりました。

<!-- MC-33788-->

* アップグレードしても、Galera クラスタが突然失敗することがなくなりました。 以前は、アップグレード直後にインデックスを再作成すると、Galera クラスタが突然終了していました。 アップグレード中に、インデックステーブルが変更され、エンジンが `MEMORY` から `InnoDB` に変更されます。 この時点で、これらのテーブルの内容は Galera クラスタのノード間で非同期になりました。 [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* PageBuilder モジュールを無効にしても、製品ページのレンダリングに影響しなくなりました。 以前は、モジュールを無効にすると製品ページのカスタムレイアウトが消え、アプリケーションに空白のページが表示されていました。

<!-- ENGCOM-7219-->

* Composer を使用してMagento Open Sourceをインストールした後、`bin/magento sampledata:deploy` を使用してサンプルデータを期待どおりにデプロイできるようになりました。 以前は、アプリケーションは次のエラーをスローしていました：`Git installations must deploy sample data from GitHub; see [Clone sample data Git repositories](../../../installation/sample-data/git-repositories.md) for more information`。 _Andrii Beziazychnyi がプルリクエスト [27481](https://github.com/magento/magento2/pull/27481)_ で送信した修正。 [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* `Datepicker` コンポーネントの不要な読み込みを排除することで、ストアフロントのパフォーマンスが向上しました。 _Mateusz Krzeszowiak によってプルリクエスト [27860](https://github.com/magento/magento2/pull/27860)_ ードで送信された修正。 [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* `bin/magento setup:upgrade` を実行しても、キャッシュに関する不要な情報が表示されなくなりました。 _Satish Subramanian がプルリクエスト [27567](https://github.com/magento/magento2/pull/27567)_ で修正を送信しました。 [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- MC-17959 ENGCOM-7629-->

* `bin/magento config:show <vendor_module>/general/value` を実行すると、`0` または空の文字列が期待どおりに返されるようになりました。 以前は、`Configuration for path: "vendor_module/general/value" doesn't exist` が返されていました。 _プルリクエスト [28549](https://github.com/magento/magento2/pull/28549)_ ードで Vadim Malesh によって送信された修正。 [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all` では、言語パラメーターが設定されていない場合、ストアフロントで使用されるすべての言語と、管理者ユーザーが設定するすべての言語をデプロイするようになりました。 （`en_US` は常にデフォルトでデプロイされます） _プルリクエスト [28922](https://github.com/magento/magento2/pull/28922)_ ードで Anton Evers によって送信された修正。 [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* バックアップ機能が無効になっている場合、アプリケーションに「バックアップ」メニューが表示されなくなります。 _Eden Duong によってプルリクエスト [29222](https://github.com/magento/magento2/pull/29222)_ ードで送信された修正。 [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* カタログ画像ヘルパーの初期化で、`DataObject` ではなく製品モデルが使用されるようになりました。 _プルリクエスト [29435](https://github.com/magento/magento2/pull/29435)_ で jmonteros422 によって送信された修正。 [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* 管理者ユーザーは、空の **顧客トークンの有効期間（時間）** フィールド（管理者 **ストア**/**設定**/**サービス**/**OAuth**/**アクセストークンの有効期限**）を保存できるようになりました。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* **古い URL の永続的なリダイレクトを作成** 設定が、カテゴリに対してデフォルトで無効になりました。 _プルリクエスト [28752](https://github.com/magento/magento2/pull/28752)_ ードで Vadim Malesh によって送信された修正。 [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### Adobe Stockの統合

<!-- ENGCOM-7776-->

* フィルターがクリアされた後、Adobe Stockの画像グリッド内の画像が適切に配置されるようになりました。 _Nazar Klovanych がプルリクエスト [28366](https://github.com/magento/magento2/pull/28366)_ ードで修正を送信しました。 [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824)、[GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* Adobe Stock Gallery の画像の詳細ページの **使用されている場所** フィールドで、画像が商品に関連付けられているかどうかを正確に識別できるようになりました。 _Nazar Klovanych がプルリクエスト [28798](https://github.com/magento/magento2/pull/28798)_ ードで修正を送信しました。 [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute` では、パラメーターで指定されていないキーワードへのリンクを削除し、画像の詳細の編集中にキーワードタグを削除すると、新しいリンクを挿入するようになりました。 _プルリクエスト [29207](https://github.com/magento/magento2/pull/29207)_ で jmonteros422 によって送信された修正。 [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* 以前に保存され、ライセンスが付与されていないAdobe Stock画像に対してマーチャントが `Login failed` ライセンス **をクリックするとアプリケーションに表示される** メッセージには、HTML タグが含まれなくなりました。 _プルリクエスト [29398](https://github.com/magento/magento2/pull/29398)_ ードで yolouiese によって修正が送信されました。 [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* 画像の詳細ページの **使用されている場所** セクションにあるリンクをクリックすると、画像でフィルタリングされているすべてのエンティティを表示するグリッドが表示されるようになりました。 アセットフィルターも正しく設定され、表示されます。 以前は、アプリケーションの「**適用されたフィルター** セクションにアセットタイトルが表示されていませんでした。 _Nazar Klovanych がプルリクエスト [29367](https://github.com/magento/magento2/pull/29367)_ ードで修正を送信しました。 [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* 画像が使用中でない場合、画像の詳細ページの **使用中** セクションが表示されなくなりました。 _Nazar Klovanych がプルリクエスト [29367](https://github.com/magento/magento2/pull/29367)_ ードで修正を送信しました。 [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* 最大文字数を超える新しい画像タグを追加した際の表示の問題を修正しました。 _Nazar Klovanych がプルリクエスト [29367](https://github.com/magento/magento2/pull/29367)_ ードで修正を送信しました。 [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* 画像の「詳細 **使用されている場所** セクションのアセットフィルターを使用して、Assetsを期待どおりに確認できるようになりました。 _Nazar Klovanych がプルリクエスト [29367](https://github.com/magento/magento2/pull/29367)_ ードで修正を送信しました。 [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* 異なるエンティティで使用される画像に関する情報（`page` や `category` など）が、画像の詳細ページに修正されてリストされるようになりました。 _Nazar Klovanych がプルリクエスト [29367](https://github.com/magento/magento2/pull/29367)_ ードで修正を送信しました。 [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-8006-->

* Media Gallery が無効になっている場合に、マーチャントが関連する画像を使用して製品を保存しようとすると、アプリケーションが例外をスローしなくなりました。 _Nazar Klovanych がプルリクエスト [29492](https://github.com/magento/magento2/pull/29492)_ ードで修正を送信しました。 [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

<!-- ENGCOM-8019-->

* メディアギャラリー内の画像の「使用されている場所」セクションでリンクをクリックすると、画像によってフィルタリングされたエンティティのグリッドが期待どおりに開くようになりました。 以前は、グリッドの「適用されたフィルター」セクションに画像タイトルが表示されていませんでした。 _Nazar Klovanych がプルリクエスト [29429](https://github.com/magento/magento2/pull/29429)_ ードで修正を送信しました。 [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* メディアギャラリーで複数の画像を順番に編集する場合、アプリケーションでタグを正しく追加できるようになりました。 _Nazar Klovanych がプルリクエスト [29429](https://github.com/magento/magento2/pull/29429)_ ードで修正を送信しました。 [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* マーチャントがタグを削除して画像の詳細を保存した後、アプリケーションがAdobe Stock画像のタグを削除するようになりました。 以前は、ページが更新されるまで、タグは削除されませんでした。 _修正は、Honeymay Louiese Ignacio によってプルリクエスト [29400](https://github.com/magento/magento2/pull/29400)_ に送信されました。 [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon ペイ

* Amazon Pay は、支払いオプションをレンダリングする前に、ユーザーが既にログインしているかどうかを確認するようになりました。

* 多要素認証と放棄された買い物かごの問題が解決されました。

* Amazon Pay で、メールおよびその他の表示されている場所に `store name` が正しく入力されるようになりました。  Amazon Pay 設定の「**ストア名**」フィールドが空の場合、ストアのデフォルト名（管理者でストアに指定した名前）が取得されます。

* 辞退シナリオに関するローカライゼーション/翻訳の問題が解決されました。 表示されるテキストが常に英語になるわけではありません。

### バンドル製品

<!-- MC-36281-->

* Inventory がインストールされている配置で製品を作成しようとしたときに、`Magento_InventoryBundleProduct` モジュールが無効になっている場合、アプリケーションで例外がスローされなくなりました。

<!-- MC-34261-->

* バンドル製品を含む注文に対するオフライン払い戻しが正しく計算されるようになりました。

<!-- MC-24363-->

* シンプルな製品に階層価格も割り当てられている場合、ミニカートにバンドル製品の正しい価格が表示されるようになりました。 [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* マーチャントは、製品の返品を必要とせずに払い戻しを提供するバンドル製品のクレジットメモを作成できるようになりました。 以前は、アプリケーションがエラーをスローしました。 _プルリクエスト [27455](https://github.com/magento/magento2/pull/27455)_ に Dzung Nguyen が修正を送信しました。 [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* 買い物客が必要なオプションを選択せずにバンドル製品を買い物かごに追加しても、アプリケーションに冗長な検証メッセージが表示されなくなりました。 _プルリクエスト [27455](https://github.com/magento/magento2/pull/27455)_ に Dzung Nguyen が修正を送信しました。 [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 -->

_Micha ウ Derlatka がプルリクエスト [29256](https://github.com/magento/magento2/pull/29256)_ で修正を送信しました。 [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### キャッシュ

<!-- MC-36096-->

* ローカルキャッシュストレージは、**ストア**/**設定**/**一般**/**Web**/**デフォルトの Cookie 設定** で設定された期間保持されるようになりました。 以前は、cookie の有効期限は 1 日にハードコードされていたため、この設定と同期されていませんでした。 その結果、ウェルカムメッセージで、期待される期間に顧客の情報を返す保持ができませんでした。

<!-- ENGCOM-7780-->

* ページキャッシュ `config` への呼び出し数が減少しました。 _Lukasz Bajsarowicz がプルリクエスト [28992](https://github.com/magento/magento2/pull/28992)_ ードで修正を送信しました。 [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* 大きなカタログのインデックスがスケジュールに従って再作成されると、Varnish が `Connection reset by peer` エラーをスローしなくなりました。 _Matthew O&#39;Loughlin がプルリクエスト [26256](https://github.com/magento/magento2/pull/26256)_ で送信した修正。 [GitHub-8815](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* 管理で製品を編集した際に、関連のない製品のフルページキャッシュがクリアされなくなりました。 [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### 買い物かごとチェックアウト

<!-- ENGCOM-7950-->

* 直接 SQL クエリはデータプロバイダーに置き換えられ、チェックアウトパフォーマンスが向上しました。 _Lukasz Bajsarowicz がプルリクエスト [29376](https://github.com/magento/magento2/pull/29376)_ ードで修正を送信しました。 [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* 比較リストと最近比較した製品リストの製品が、期待どおりに動作するようになりました。 以前は、比較リストが展開された際に、リストに製品が含まれていることを示すセクションが表示されていても、アプリケーションに製品が表示されていませんでした。

<!-- MC-35329-->

* 顧客の **買い物かごを管理** ページの **SKU によって買い物かごに追加** セクションの **削除** ボタンが、複数の行が選択されている場合に期待どおりに機能するようになりました。

<!-- MC-34999-->

* 入力した数字が有効な SKU と一致するが、これらの数字の大文字と小文字が異なる場合に、SKU で製品を注文しようとすると、アプリケーションがエラーをスローしなくなりました。 以前は、有効な SKU と完全には一致しない **マイアカウント**/**注文別 SKU** で SKU を入力すると、アプリケーションがエラーをスローしていました。

<!-- MC-25042-->

* 顧客の配送先住所が国を許可リストで特定された国にあり、そのリストにその国のみが含まれている場合、チェックアウト時にデフォルトで顧客の配送先住所が選択されるようになりました。 以前は、アプリケーションはアドレスをデフォルトとして選択せず、次のエラーメッセージを表示していました：`Please specify a regionId in shipping address`。

<!-- MC-24043-->

* マーチャントは、**買い物かご全体に対する固定金額割引** が適用される際に、**マーケティング**/**買い物かごの価格ルール**/**新しいルールを追加** の「アクション」タブで **出荷金額に適用** を有効にできるようになりました。 [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* 買い物客がチェックアウトを開始してからストアフロントのホームページに移動した後、永続性 cookie を設定解除しようとすると、アプリケーションが例外をスローしなくなりました。 以前は、買い物客が「自分ではない **をクリックした場合ホ** ムページのリンクで、アプリケーションが次の例外をスローしました：`The shipping address is missing. Set the address and try again`。 [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* 顧客が在庫切れの製品を買い物かごに追加すると、アプリケーションに「買い物かごに追加」成功メッセージが表示されるようになりました。 以前は、製品は追加されましたが、アプリケーションに成功メッセージが表示されませんでした。

<!-- MC-35989-->

* カスタムアドレス属性が、チェックアウトワークフローの支払いステップに表示されるフォームに期待どおりに含まれるようになりました。

<!-- MC-36060-->

* **アカウント**/**アドレス帳**/**新しいアドレスを追加** で、「**都道府県/地域**」入力ボックスが期待どおりに有効になりました。

<!-- ENGCOM-7746-->

* **配送料に適用** が有効になっている場合、配送料の予想通りに割引が適用されるようになりました。 _プルリクエスト [28839](https://github.com/magento/magento2/pull/28839)_ ードで Andrii Kalinich によって送信された修正。 [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* ミニ買い物かごを閉じるのをサポートするコードをリファクタリングして、`closeSidebar` 関数を削除しました。 `[data-action="close"]` 要素に適切なクリックバインディングが追加されました。 _プルリクエスト [28906](https://github.com/magento/magento2/pull/28906)_ で lumnn によって修正が送信されました。 [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* 新しい **買い物かごページに「買い物かごをクリアする」ボタンを表示** 構成設定により、買い物かごの表示ページに **買い物かごをクリア** ボタンを表示する制御が可能になります。 デフォルトでは、この設定は無効になっています。 _Pavlo Sydorenko がプルリクエスト [27917](https://github.com/magento/magento2/pull/27917)_ ードで修正を送信しました。 [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* チェックアウトワークフローの「電話」フィールドに検証が追加されました。 _Oleh Usik によってプルリクエスト [27537](https://github.com/magento/magento2/pull/27537)_ で送信された修正。 [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* 「**Shareable**」および「**Disable Guest Checkout if Cart Contains Downloadable Items**」設定が無効になっている場合、買い物かごにダウンロード可能な製品が含まれていると、ゲストのチェックアウトが期待どおりに無効になりました。 _修正は Rani Priya によってプルリクエスト [23972](https://github.com/magento/magento2/pull/23972)_ に送信されました。 [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* 買い物客が顧客アカウントのサイドバーから買い物かごに製品を追加すると、アプリケーションに表示される成功メッセージには、買い物客の買い物かごへのリンクが含まれるようになりました。 _プルリクエスト [27977](https://github.com/magento/magento2/pull/27977)_ で Ajith によって送信された修正。 [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* アプリケーションは、チェックアウトワークフローの接頭辞ドロップダウンオプションメニューに対して、デフォルトで空の値を選択するようになりました。 _プルリクエスト [28238](https://github.com/magento/magento2/pull/28238)_ ードで Vadim Malesh によって送信された修正。 [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* 買い物かごから複数の項目を削除するとアプリケーションに表示されるポップアップメッセージに、削除対象として選択したエンティティの数とタイプが正確に記述されるようになりました。 _Nazar Klovanych がプルリクエスト [29490](https://github.com/magento/magento2/pull/29490)_ ードで修正を送信しました。 [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* ゲストユーザーがチェックアウトを完了すると、アプリケーションに顧客登録フォームが表示されるようになりました。

<!-- MC-35607-->

* カスタムの顧客アドレス属性フィールドが、ストアフロントのチェックアウトワークフローで期待どおりに表示されるようになりました。

<!-- ENGCOM-7793-->

* チェックアウト時に、アクティブな見積の現在の顧客グループが取得されるようになりました。 以前は、アプリケーションは、製品が最初に買い物かごに追加されたときにアクティブだった顧客グループを使用していました。その顧客グループがチェックアウト前に削除された場合、アプリケーションはエラーをスローしました。 _Konstantin がプルリクエスト [28902](https://github.com/magento/magento2/pull/28902)_ で修正を送信しました。 [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### カタログ

<!-- MC-31068-->

* このアプリケーションは、チェックアウト前に、買い物客の買い物かごから無効な製品を削除するようになりました。 以前は、チェックアウトが完了する前に無効になった商品を買い物客が買い物かごに追加すると、アプリケーションによって無効になった商品は買い物かごから削除されましたが、その商品は見積もりに残り、買い物客はチェックアウトできませんでした。 [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* アプリケーションは、ベストセラーの製品を期待どおりに並べ替えるようになりました。 以前は、製品数と並べ替え結果のページネーションの両方が間違っていました。 [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* 買い物客は、製品の比較サイドバーの製品名をクリックして、製品の詳細ページを開くことができるようになりました。 _Eduard Chitoraga によってプルリクエスト [27451](https://github.com/magento/magento2/pull/27451)_ ードで送信された修正。 [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* 管理者がカテゴリを削除した場合、`children_count` の値は正の値のままになりました。 以前は、管理者がカテゴリを削除すると、残りのカテゴリの `children_count` は負の値になっていました。 _Vitaliy Prokopov によってプルリクエスト [28044](https://github.com/magento/magento2/pull/28044)_ ードで送信された修正。 [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* 新しい製品を作成する際に、**属性に選択したデフォルトのオプション（** 設定 **/** Web **/** デフォルトのレイアウト **/** デフォルトの製品レイアウト `page_layout`）が使用されるようになりました。 以前は、選択したデフォルト値は適用されていませんでした。

<!-- MC-34258-->

* これで、在庫製品の在庫に対して一括処理を正常に実行できます。 以前は、在庫製品の在庫に対して一括アクションを実行しようとすると、空白のページが表示されていました。 アプリケーションを開発者モードでこのアクションを実行した場合、アプリケーションは次のエラーをスローしました：`Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`。

<!-- MC-32552-->

* カタログ カテゴリに製品を追加するときに、[ 製品 ] タブの **製品を追加** をクリックすると表示される合計レコード数が、製品の並べ替え順に基づいて変更されなくなりました。

<!-- ENGCOM-7854 -->

* `{products(filter: {sku: {eq: "some sku"}}) {…}` クエリは、想定される通貨に変換された値を返すようになりました。 以前は、`price_tiers.final_price.value` は基本通貨で特別価格を表示していました。 _Pull request [28890](https://github.com/magento/magento2/pull/28890)_ で Petkovski Marjan によって送信された修正。 [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### Cleanup

<!-- ENGCOM-7281-->

* 管理販売注文グリッド チェックボックスのミスアライメントを修正しました。 _修正は Tu Nguyen によってプルリクエスト [27642](https://github.com/magento/magento2/pull/27642)_ に送信されました。 [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* 販売注文住所保存ハンドラーの配送先住所 ID ゲッターのスペルミスを修正しました。 _Konstantin がプルリクエスト [28810](https://github.com/magento/magento2/pull/28810)_ で修正を送信しました。 [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* `getRegionNameExpresion` メソッド名を `getRegionNameExpression` に修正しました。 _Pierre Grimaud がプルリクエスト [28832](https://github.com/magento/magento2/pull/28832)_ ードで修正を送信しました。 [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* `init` および `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php` から冗長な `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php` メソッドが削除されました。 _Oleh Usik によってプルリクエスト [28650](https://github.com/magento/magento2/pull/28650)_ で送信された修正。 [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* ポリフィ `localStorage` ルが `base` から `frontend` に移動されました。 _Ihor Sviziev がプルリクエスト [28749](https://github.com/magento/magento2/pull/28749)_ ードで修正を送信しました。 [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* Adobe Commerceのロゴを更新し、`magento/magento2` リポジトリのメインの README ファイルから不要なスペースを削除しました。 _修正は、Rafael Cora r̻ Gomes によってプルリクエスト [28891](https://github.com/magento/magento2/pull/28891)_ で送信されました。 [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* 不要な `overflowed` クラスがミニ買い物かごサイドバーウィジェットから削除されました。 _プルリクエスト [28963](https://github.com/magento/magento2/pull/28963)_ で lumnn によって修正が送信されました。 [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* 出荷ページの誤った CSS セレクターが修正されました。 _修正は Tu Nguyen によってプルリクエスト [28639](https://github.com/magento/magento2/pull/28639)_ に送信されました。 [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* `lib/internal/Magento/Framework/App/Request/Http.php` ファイルは、ロジックを最適化し、冗長な変数割り当てを削除し、関数内での戻り値の過剰な使用を排除することで簡略化されました。 _Pull request [28608](https://github.com/magento/magento2/pull/28608)_ で Chris Snedaker が修正を送信しました。 [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* `bin/magento module:status` コマンドは、引数として複数のモジュール名を受け入れるようになりました。 _プルリクエスト [28250](https://github.com/magento/magento2/pull/28250)_ ードで Chandru Rajendran によって送信された修正。 [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* `\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable` のクラス説明に誤字が修正されました。 _Benjamin Rosenberger によってプルリクエスト [29451](https://github.com/magento/magento2/pull/29451)_ ードで送信された修正。 [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* `TierPriceManagement` クラスは、冗長なコードを削除するためにリファクタリングされました。 _Lukasz Bajsarowicz がプルリクエスト [29202](https://github.com/magento/magento2/pull/29202)_ ードで修正を送信しました。 [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* 読み `autoload.php` すさとリターン速度を向上させるためにリファクタリングが行われました。 _Vitaliy Ryaboy によってプルリクエスト [28923](https://github.com/magento/magento2/pull/28923)_ ードで送信された修正。 [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### CMS コンテンツ

<!-- MC-35971-->

* 選択したデフォルトのストア表示の「階層」タブに、選択した親ページが期待どおりに表示されるようになりました。

<!-- ENGCOM-7602-->

* 新しいストアビューに、異なるストアビューのページと同じ URL キーを持つCMS ページが含まれている場合、ストアビューの作成時にエラーがスローされなくなりました。 _プルリクエスト [28421](https://github.com/magento/magento2/pull/28421)_ ードで Vadim Malesh によって送信された修正。 [GitHub-28357](https://github.com/magento/magento2/issues/28357)

### 設定可能な製品

<!-- MC-33523-->

* 設定可能な製品編集の現在のバリエーション リストのページネーションの問題が修正されました。

<!-- MC-33406-->

* 買い物客が設定可能な製品のオプションを選択するたびに、アプリケーションは関連製品価格ボックスを更新しなくなりました。 以前は、買い物客が設定可能な製品のオプションを選択するたびに、アプリケーションによって価格ボックスが更新されていました。

<!-- MC-29882-->

* 管理者による注文の作成ページに、設定可能な製品の正しい価格と、カスタマイズ可能なオプションが表示されるようになりました。 予想通り、表示される価格は、子製品の価格とカスタムオプションの価格の合計です。 以前は、アプリケーションにはカスタムオプション価格のみが表示されていました。 [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* 買い物かごの価格ルールが適用された場合、注文概要に正しい割引額が表示されるようになりました。 以前は、出荷割引を計算する際に、ルールで金額が正しく丸められていませんでした。

<!-- MC-33765-->

* 制限付き範囲の管理者アカウントから作成された管理者ユーザーアカウントで、期待どおりに属性を持つ設定可能な製品を作成できるようになりました。 以前は、アプリケーションは次のエラーをスローしていました：`Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`。

<!-- ENGCOM-7787-->

* `/V1/products` 値が 0 の設定可能な製品に対して POST リク `int` ストを使用しても、アプリケーションで検証エラーがスローされなくなりました。 以前は、アプリケーションは次のエラーをスローしていました。`Product with id "%1" does not contain required attribute "%2"."` _Vadim Malesh がプルリクエスト [29001](https://github.com/magento/magento2/pull/29001)_ で送信した修正。 [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* 親製品の設定オプション属性は、新しい設定可能な製品の `size` 属性に割り当てられなくなりました。 _Abel Truong がプルリクエスト [27339](https://github.com/magento/magento2/pull/27339)_ で修正を送信しました。 [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### の Cookie

<!-- ENGCOM-7156-->

* アプリケーションは、セッションごとに最大 1 つの `mage-translation-file-version` と `mage-translation-storage` つの Cookie を作成するようになりました。 _Ihor Sviziev がプルリクエスト [27364](https://github.com/magento/magento2/pull/27364)_ ードで修正を送信しました。 [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* メッセージキューコンシューマー設定は、コンシューマーの制御とサーバーリソースの節約に役立つ新しいパラメーターで拡張されており、コンシューマーキューのCPUの使用を減らす可能性があります。

   * `maxIdleTime` は、キューからの新しいメッセージの最大待機時間を秒単位で定義します。
   * `sleep` 新しいメッセージがキュー内で使用可能かどうかを確認するまでのスリープ時間を秒単位で指定します。
   * 関連 `onlySpawnWhenMessageAvailable` るキューに使用可能なメッセージが存在する場合にのみコンシューマーを起動するかどうかを指定します。 この設定は、すべてのコンシューマーに対してデフォルトでグローバルに有効になっていますが、コンシューマーごとに設定できます。

<!-- ENGCOM-7863-->

* 次のような `cron` 式  `3/10 * * * *` は現在、期待どおりにスケジュールされています。 _プルリクエスト [28930](https://github.com/magento/magento2/pull/28930)_ ードで Anton Evers によって送信された修正。 [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes` は、期限切れの引用符をすべて一度に読み込まなくなりました。 以前は、期限切れの引用符がすべて同時に読み込まれたため、アプリケーションがこの致命的なエラーで失敗していました：`PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`,

### CSS

<!-- ENGCOM-7678-->

* **重大な CSS** が有効になっている場合、アプリケーションで CSS の重複が発生しなくなりました。 _修正は Tu Nguyen によってプルリクエスト [28480](https://github.com/magento/magento2/pull/28480)_ に送信されました。 [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* サーバーサイド LESS コンパイラーで、`bin/magento setup:static-content:deploy -f` を実行した際に、すべてのリモート CSS ファイルが期待どおりに読み込まれるようになりました。 以前は、アプリケーションはリモートファイルをインポートせず、エラーをスローしていました。 [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### 顧客

<!-- MC-33679-->

* 管理者の顧客アドレスの地域名が期待どおりに翻訳されるようになりました。

<!-- MC-36226-->

* **都道府県** フィールドが、アドレスを編集ページ（**マイアカウント**/**アドレス帳**）で期待どおりに入力されるようになりました。

<!-- MC-34655-->

* 非表示の reCAPTCHA が有効になっているストアフロント全体で、顧客がフォームの **送信** ボタンを複数回クリックしても、アプリケーションがエラーをスローしなくなりました。 以前は、このボタンを複数回クリックすると、`Internal error: Make sure you are using reCaptcha V3 api keys` のような内部エラーが発生していました。

<!-- MC-33522-->

* 管理者から削除された顧客を保存すると、エラーメッセージのみが生成されるようになりました。 以前は、アプリケーションで空白のページが表示され、次の文字列を含むレポートが生成されていました：`"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`。

<!-- MC-33357-->

* アカウントが削除されたばかりの顧客のアドレスを管理者が保存しようとすると、アプリケーションにエラーメッセージが期待どおりに表示されるようになりました。 以前は、アプリケーションに空白のメッセージボックスが表示されていました。

<!-- MC-33150-->

* チェックアウトワークフローとアドレス帳の住所フィールドのラベルが、一貫性を保つために編集されました。

<!-- ENGCOM-7244 -->

* フロントエンドのラベルは、値が null でない場合、ラベルを格納するようにフォールバックするようになりました。 以前は、顧客属性はデフォルトのフロントエンドラベルを使用していました。 _Toan Nguyen によってプルリクエスト [27064](https://github.com/magento/magento2/pull/27064)_ に送信された修正。 [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* レイアウト XML の `sortOrder` リンク数が修正されました。 以前は、この順序は逆になり、降順で使用されていました。 _修正は Tu Nguyen によってプルリクエスト [27340](https://github.com/magento/magento2/pull/27340)_ に送信されました。 [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### ディレクトリ

<!-- MC-32271-->

* 都道府県ドロップダウンメニューの形式が、管理全体で統一されました。

### dotdigital

* カタログに存在しない製品 SKU が注文に含まれている場合でも、注文の同期が失敗しなくなりました。

* 空の商品カテゴリは web insight データに含まれなくなりました。

* Web 動作トラッキングが、特定のテーマ設定を持つマーチャントで機能するようになりました。 新しいフォールバックセレクターでこれを解決します。

* cron を使用して顧客同期が実行された際に、購読者ステータスデータフィールドに空の値が含まれなくなりました。 （アプリのエミュレーションにより、この問題が解決されます）。

* デフォルトレベルで dotdigital アカウントが有効になっていても、メインの web サイトで無効になっている場合、アドレス帳のマッピングが期待どおりに機能するようになりました。

* プラス （「+」）記号を含んだメールアドレスに対して、クーポンが（クーポン生成に外部の動的コンテンツ URL を使用して）生成されるようになりました。

* `last_subscribed_at` 値が null の場合、連絡先は再サブスクライブされなくなりました。

* 以前のバージョンに影響を与えたアップグレードエラー（4.5.2 以降）は解決されました。

* 4.5.3 で導入されたリグレッションの問題が修正されました。この問題は、購読者のエクスポートを準備する際に、購読者のステータスを取得する方法を使用する場合に影響を与えました。

* 同期された購読者の合計数（ログおよび画面に表示）が正しく計算されるようになりました。

### ダウンロード可能

<!-- MC-35026-->

* マイダウンロード製品エリアに、グループ化された製品の一部である購入したダウンロード可能な製品へのリンクが期待どおりに表示されるようになりました。

<!-- MC-34262-->

* 管理製品ページでダウンロード可能な製品の「**サンプル**」ボタンをクリックすると、サンプルが期待どおりにダウンロードされるようになりました。 以前は、「**サンプル**」をクリックすると、アプリケーションに「`The product that was requested doesn't exist. Verify the product and try again`」というエラーが表示されていました。

<!-- ENGCOM-7757-->

* 買い物客は、在庫切れのダウンロード可能な製品のサンプルをダウンロードできるようになりました。 以前は、買い物客がサンプルをダウンロードしようとすると、アプリケーションで新しいタブが開きましたが、情報メッセージが表示されなかったか、ダウンロードプロセスが開始されませんでした。 _プルリクエスト [28898](https://github.com/magento/magento2/pull/28898)_ ードで Vadim Malesh によって送信された修正。 [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* 買い物客がダウンロード可能な製品の配送先住所を設定しようとするとアプリケーションに表示される例外メッセージが改善されました。 _Micha ウ Derlatka がプルリクエスト [28904](https://github.com/magento/magento2/pull/28904)_ で修正を送信しました。 [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* REST PUT呼び出しを使用して製品の値を更新する場合、製品の `stock_item` データは更新され、ダウンロード可能な製品のリンクとサンプルは期待どおりに保持さ `stock_item` ます。 以前は、製品のアップデート後に、製品にコンテンツをダウンロードするためのリンクが含まれなくなりました。 _プルリクエスト [28799](https://github.com/magento/magento2/pull/28799)_ ードで Vadim Malesh によって送信された修正。 [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* ダウンロード可能な製品のみを含む注文の配送先住所を顧客が設定した場合に、より詳しい情報を示すメッセージが表示されるようになりました。

### 電子メール

<!-- MC-32789-->

* 注文の作成後に顧客メールが変更された場合、アプリケーションは、注文の変更に関するメール通知を正しい顧客メールに送信するようになりました。

<!-- MC-36015-->

* 顧客に送信される注文更新メールに、正しい注文ステータスが含まれるようになりました。 以前は、注文ステータスが `processing` から別のステータスに変更された場合、注文メールにステータスの変更が反映されていませんでした。

<!-- MC-34107-->

* ゲストのチェックアウト時に、既存のアカウントに関する誤解を招くメッセージがアプリケーションに表示されなくなりました。 以前は、ゲストがチェックアウトページに移動してから出荷ページに戻ると、アプリケーションに次のエラーが表示されていました。`You already have an account with us. Sign in or continue as guest`

<!-- MC-33905-->

* カスタムメールテンプレートで、ネイティブのデフォルトのメールテンプレートと同じ要素が読み込まれるようになりました。 以前は、変数値を含む一部の要素が欠落していました。

<!-- ENGCOM-7576-->

* メールのプレビューテンプレートから不要な CSS が削除されました。 _修正は Tu Nguyen によってプルリクエスト [27828](https://github.com/magento/magento2/pull/27828)_ に送信されました。 [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* フッターによって既に表示されているテキストを複製する、メールテンプレートのテキストが削除されました。 _プルリクエスト [27356](https://github.com/magento/magento2/pull/27356)_ ードで Pawe Tylek が送信した修正。 [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* 製品アラートのメールが、アラートを登録したストアから送信されるようになりました。 以前は、このメールは常にデフォルトストアから送信されていました。 _プルリクエスト [26534](https://github.com/magento/magento2/pull/26534)_ ードで Maciej Pawwłowski によって送信された修正。 [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* 重複する `customer.name` 変数がメールテンプレートから削除されました。 _プルリクエスト [29054](https://github.com/magento/magento2/pull/29054)_ ードで Pawe Tylek が送信した修正。 [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33700-->

* でメールを送信するメールテンプレートを作成できるようになりました  `Content-Type: "text/plain"`。 以前は、アプリケーションは、テンプレートで指定されたコンテンツタイプを無視していました。 _プルリクエスト [26474](https://github.com/magento/magento2/pull/26474)_ ードで twoonesixdigital によって送信された修正。 [GitHub-26471](https://github.com/magento/magento2/issues/26471)

### フレームワーク

<!-- MC-35893-->

* 管理 **ストア**/**設定**/一般/**詳細レポート** ページの **データを送信する時刻** フィールドが正しくレンダリングされるようになりました。

<!-- MC-34153-->

* 買い物客は、注文リストが複数のページにまたがる場合に、ページごとに表示される注文数を変更できるようになりました。 以前は、買い物客が注文の最後のページに移動し、ページごとに表示される注文数を変更しようとすると、アプリケーションに次のメッセージが表示されていました：`You have placed no orders`。 これは 2.4.0 の既知の問題でした。

<!-- MC-35020-->

* レベル 2 のキャッシュを実装する際に、カテゴリに製品を追加できるようになりました。

<!-- MC-29755-->

* `X-Magento-Tags` ヘッダーが、HTTP 仕様で許可されているサイズを超えなくなりました。 以前は、多くの製品を含むカテゴリページで `X-Magento-Tag` ヘッダーが返され、503 エラーが発生していました。

<!-- MC-34257-->

* REST API を使用して出荷を作成した場合、`sales_order_shipment_track_save_commit_after` が期待どおりにトリガーされるようになりました。

<!-- MC-33898-->

* 存在しない依存関係が原因で `di compile` が失敗した場合、アプリケーションに情報エラーメッセージが表示されるようになりました。 以前は、表示されるメッセージには、例外が発生したクラスが識別されていませんでした。

<!-- MC-32929-->

* 許可されたすべてのメモリを Redis が使用する際に、アプリケーションが次の致命的なエラーをスローしなくなりました：`report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'.`

<!-- MC-18021-->

* 買い物客は、買い物かごモジュールが無効な場合に、買い物かごに複数の `Persistent` 品を追加できるようになりました。 [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### 一般的な修正点

<!-- MC-36048-->

* 管理者（**ストア**/**属性**/**製品**）で製品を並べ替えると、検索条件を満たすすべての製品が表示されるようになりました。 以前は、アプリケーションにレコードが表示されず、レコードを並べ替えるには、検索結果の最初のページに移動する必要がありました。

<!-- MC-36343-->

* `tracking.phtml` の URL を囲む不要な引用符やエスケープが削除されました。

<!-- MC-35998-->

* ユーザーが静的ディレクトリの下にある既存のリソースファイルにアクセスしようとしたときに SCD OnDemand および実稼動モードが有効になっている場合、`var/log/system.log` に表示されるメッセージの精度が向上しました。 アプリケーションで 404 エラーがログに記録されるようになりました。 以前は、開発者モードでエラーが発生した場合に記録されるのと同じメッセージがアプリケーションによって記録されていました。

<!-- ENGCOM-7286-->

* JavaScriptの縮小が正しく機能するようになりました。 縮小ファイルリゾルバーで、変数がグローバルスコープにリークされなくなりました。 以前は、window 下の `ctx`、`origNameToUrl`、`baseUrl` 変数が漏洩していました。 _Mateusz Krzeszowiak によってプルリクエスト [27622](https://github.com/magento/magento2/pull/27622)_ ードで送信された修正。 [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* オブジェクトの作成を妨げるエラーをデバッグする際に、元の例外メッセージを出力およびログに記録するようになりました。 以前は、メッセージはログにのみ記録されていました。 _修正は、Marvin Hinz によってプルリクエスト [26572](https://github.com/magento/magento2/pull/26572)_ で送信されました。 [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* データベースの変更がコミットされた後のコールバックの実行が改善されました。 以前は、1 つのコールバックが例外で失敗した場合、すべてのコールバックが失敗していました。 _Alok Patel がプルリクエスト [27134](https://github.com/magento/magento2/pull/27134)_ に修正を送信しました。 [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* 依存関係が定義されていないモジュールの Mixin で、次のエラーがスローされなくなりました。`TypeError: Cannot read property 'map' of null` _Mateusz Krzeszowiak によってプルリクエスト [27690](https://github.com/magento/magento2/pull/27690)_ ードで送信された修正。 [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* ストレージ ポリフィルがロードされ、`localStorage` または `sessionStorage` が使用できない場合にのみ適用されるようになりました。 _Mateusz Krzeszowiak によってプルリクエスト [27619](https://github.com/magento/magento2/pull/27619)_ ードで送信された修正。 [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* 複数ページのストアフロントの注文リストが、買い物客が 2 番目または後続の結果ページから 1 ページに表示される結果の数を変更した場合に、期待どおりに動作するようになりました。 以前は、買い物客が **マイアカウント**/**マイオーダー** リストに表示される検索結果の数を変更すると、アプリケーションにこのエラーが表示されていました：`You have placed no orders`。 _プルリクエスト [28417](https://github.com/magento/magento2/pull/28417)_ ードで Vadim Malesh によって送信された修正。 [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* 非推奨（廃止予定）の `addWarning` メソッドは、セキュリティモジュールの `addWarningMessage` メソッドに置き換えられました。 _プルリクエスト [28264](https://github.com/magento/magento2/pull/28264)_ で kishorekumarkesavan によって送信された修正。 [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* `bin/magento` コマンドラインコマンドを使用して生成されたコードが、要件とコーディング標準に一致するようになりました。 _Lukasz Bajsarowicz がプルリクエスト [28351](https://github.com/magento/magento2/pull/28351)_ ードで修正を送信しました。 [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- ENGCOM-7511-->

* `backend_type = static` を使用して属性を保存すると、`frontend_class` フィールドのコンテンツが削除されなくなりました。 _プルリクエスト [27369](https://github.com/magento/magento2/pull/27369)_ で jiten-patel が送信した修正。 [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* テーマによって読み込まれるファイルから不要なコードと `responsive.js` が削除されました。 _Mateusz Krzeszowiak によってプルリクエスト [27617](https://github.com/magento/magento2/pull/27617)_ ードで送信された修正。 [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* 管理 CAPTCHA 設定ページの **シンボル数** フィールドに検証が追加されました。 _Eden Duong によってプルリクエスト [29199](https://github.com/magento/magento2/pull/29199)_ ードで送信された修正。 [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* RSS フィードが正しく読み込まれるようになりました。 以前は、ページが更新されたときにフィードは期待どおりに読み込まれましたが、初回は読み込まれませんでした。 _プルリクエスト [29455](https://github.com/magento/magento2/pull/29455)_ ードで Vadim Malesh によって送信された修正。 [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* 買い物客が再度ログインした際に、期限切れの永続セッションが期待どおりに更新されるようになりました。

<!-- MC-35230-->

* **ストア**/**設定**/**詳細**/**管理者** で設定したパスワードの有効期間が優先されるようになりました。 過去に、「パスワードを忘れた場合 **をクリックした場合パスワードのリセットを求めるメッセージが表示された**、パスワードのリセットを省略できます。

<!-- MC-34369-->

* クーポンコードは、指定した製品にのみ適用されるようになりました。 以前は、アプリケーションはカート内のすべての製品にクーポンコードを適用しました。 [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* 在庫または価格の更新が発生した場合に、買い物かごの有効期限設定が再設定されなくなりました。 以前は、買い物かごが 24 時間以内に有効期限が設定されていて、在庫の更新または価格の更新が発生すると、インデクサーによって `updated_at table` が入力され、有効期限が再設定されていました。

<!-- MC-33313-->

* 管理者がアクティブな買い物かごを持つ顧客を顧客グループに割り当てると、アプリケーションが致命的なエラーをスローしなくなりました。

<!-- ENGCOM-7834 -->

* Chrome ブラウザーの実行時に、商品ページで **開発者ツール**/**ネットワーク** からツールバーオプションを選択しても、`toolbar.js` が 2 回初期化されなくなりました。 _プルリクエスト [28838](https://github.com/magento/magento2/pull/28838)_ ードで Pawe Tylek が送信した修正。 [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* アプリケーションは、管理者ユーザーの ACL 役割 ID を製品カテゴリツリーキャッシュ ID に追加するようになりました。 これにより、範囲が制限された管理者が期待どおりに表示できるカテゴリツリーが制限されます。 _プルリクエスト [27429](https://github.com/magento/magento2/pull/27429)_ で quangdo-aligent によって送信された修正。 [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* 買い物客は、チェックアウト時にギフトメッセージオプションを選択できます。 GraphQLでは、様々なタイプの買い物かご商品に対するギフトメッセージオプションについて説明するようになりました。 [`setGiftOptionsOnCart` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/set-gift-options/) および [`updateCartItems` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/update-items/) を参照してください。 Oleh Usik によってプルリクエスト [28519](https://github.com/magento/magento2/pull/28105)、[27956](https://github.com/magento/magento2/pull/27956)、[28072](https://github.com/magento/magento2/pull/28072)、[28072](https://github.com/magento/magento2/pull/28072) で送信された修正（_F） [GitHub-28519](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* 顧客とゲストは製品レビューを書くことができます。 また、お客様は製品のレビュー履歴を取得することもできます。 レビューインフラストラクチャに関する情報の取得については、[&#x200B; 製品レビューの作成 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/products/mutations/create-review/) および [productReviewRatingsMetadata クエリ &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/product-review-ratings-metadata/) を参照してください。 _Eduard Chitoraga によってプルリクエスト [27882](https://github.com/magento/magento2/pull/27882)_ ードで送信された修正。 [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7968 -->

* [`addProductsToCart` のミューテーションを使用すると &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/add-products/) 任意のタイプの製品をアクティブな買い物かごに追加できます。 `addSimpleProductsToCart` のような単一目的の突然変異の代わりに、この突然変異を使用することをお勧めします。 _プルリクエスト [27914](https://github.com/magento/magento2/pull/27914)_ で Yaroslav Rogoza によって送信された修正。 [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- MC-34187-->

* 新しい `availableStores` クエリは、同じ web サイトで使用可能な複数のストアの設定属性のリストを（現在のストアに基づいて）返します。 Web サイトのリストは公開されません。 クエリ [`availableStores` 参照してください &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/)。 _Dmitriy Gallyamov によってプルリクエスト [28794](https://github.com/magento/magento2/pull/28794)_ で送信された修正。 [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* GraphQLでは、認証トークンのみを使用して、ユーザーの種類と ID を取得するようになりました。 以前GraphQLは、認証トークンが空の場合に、アクティブな顧客の cookie を使用してこの情報を取得していました。 _Alexander Taranovsky がプルリクエスト [27373](https://github.com/magento/magento2/pull/27373)_ で送信した修正。 [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* 顧客アカウントを管理するための [`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-v2/) と [`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-v2/) の突然変異を追加しました。 これらの新しいミューテーションには、`createCustomer` と `updateCustomer` のミューテーションとは異なる入力オブジェクトが必要です。 顧客のメールアドレスを変更するには、新しい [`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-email/) ミューテーションを使用します。 _Micha ウ Derlatka がプルリクエスト [28888](https://github.com/magento/magento2/pull/28888)_ で修正を送信しました。 [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* `updateCustomer` ミューテーションを使用して、`INT` 引数に無効な `gender` 値を設定できなくなりました。 _Alexander Taranovsky がプルリクエスト [28487](https://github.com/magento/magento2/pull/28487)_ で送信した修正。 [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* `subscribeEmailToNewsletter` のミューテーションを使用して、顧客にニュースレターを登録できます。 [`subscribeEmailToNewsletter` mutation](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/subscribe-email-to-newsletter/) を参照してください。 _Alexander Taranovsky がプルリクエスト [27586](https://github.com/magento/magento2/pull/27586)_ で送信した修正。 [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* `setShippingMethodsOnCart` ミューテーションリゾルバーの冗長ロジックを削除しました。 _Alexander Taranovsky がプルリクエスト [27349](https://github.com/magento/magento2/pull/27349)_ で送信した修正。 [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* `Please provide Email of sender` の突然変異に関連する `sendEmailToFriend` エラーのテストカバレッジを追加しました。 _Alexander Taranovsky がプルリクエスト [28034](https://github.com/magento/magento2/pull/28034)_ で送信した修正。 [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* `products` クエリは、期待どおりにデフォルトのストア表示に製品属性オプションラベルを返すようになりました。 以前は、このクエリは、管理者用に設定された製品属性オプションラベルを返していました。 _Dmitriy Gallyamov によってプルリクエスト [28647](https://github.com/magento/magento2/pull/28647)_ で送信された修正。 [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* カスタム属性の集計で、ストア固有のオプション値が返されるようになりました。 _Dmitriy Gallyamov によってプルリクエスト [28647](https://github.com/magento/magento2/pull/28647)_ で送信された修正。 [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* 製品の集計で返される価格間隔を、数値にのみできるようになりました（ワイルドカードは使用できません）。 _Dmitriy Gallyamov によってプルリクエスト [28745](https://github.com/magento/magento2/pull/28745)_ で送信された修正。 [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* フラグメントを使用する場合、`categoryList` クエリが正しい応答を返すようになりました。 _Ulzii がプルリクエスト [28710](https://github.com/magento/magento2/pull/28710)_ で修正を送信しました。 [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* GraphQL製品検索で、設定済みのカテゴリ権限が考慮されるようになりました。 以前は、製品検索で **有効** 設定（**ストア**/**設定**/**カタログ**/**カタログ**/**カテゴリ権限**）が無視されていました。 _プルリクエスト [28757](https://github.com/magento/magento2/pull/28757) で Petkovski Marjan によって送信された修正と、プライベートリポジトリ`partners-magento2ee`_ でプルリクエスト 271 を送信しました。 [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* カート内の他の項目が在庫切れの場合に、`addSimpleProductToCart` を使用してカートに製品を追加できるようになりました。 以前は、アプリケーションは次のエラーを返していました：`Some of the products are out of stock`。 [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* デフォルトのGraphQL `Category` メソッドは、期待どおりにカテゴリ位置で並べ替えられるようになりました。 _Derrik Nyomo によってプルリクエスト [29301](https://github.com/magento/magento2/pull/29301)_ ードで送信された修正。 [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* Magento Open Sourceにウィッシュリストのサポートを追加しました。 ウィッシュリストに [&#x200B; アイテムを追加 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/add-products/) したり、[&#x200B; アイテムを更新 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/update-products/) したり、[&#x200B; アイテムを削除 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/remove-products/) したりできます。 _Eduard Chitoraga によってプルリクエスト [28205](https://github.com/magento/magento2/pull/28205)_ ードで送信された修正。 [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* 顧客アカウントを管理するための [`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/create-v2/) と [`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-v2/) の突然変異を追加しました。 これらの新しいミューテーションには、`createCustomer` と `updateCustomer` のミューテーションとは異なる入力オブジェクトが必要です。 顧客のメールアドレスを変更するには、新しい [`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/update-email/) ミューテーションを使用します。

* [Payflow Pro Vault](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/payflow-pro-vault/) 支払い方法のGraphQL Vault サポートを追加しました。 _Oleh Usik によってプルリクエスト [28821](https://github.com/magento/magento2/pull/28821)_ で送信された修正。 [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* GraphQL [`storeConfig` クエリが更新され &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) 新しいお客様の設定が含まれるようになりました。 _Oleh Usik によってプルリクエスト [27876](https://github.com/magento/magento2/pull/27876)_ で送信された修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* [`resetPassword` のミューテーションを追加しました &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/reset-password/)。 _Oleh Usik によってプルリクエスト [27876](https://github.com/magento/magento2/pull/27876)_ で送信された修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* [`resetPassword` のミューテーションを追加しました &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/reset-password/)。 _Oleh Usik によってプルリクエスト [27876](https://github.com/magento/magento2/pull/27876)_ で送信された修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* [`requestPasswordResetEmail` のミューテーションを追加しました。これは &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/mutations/request-password-reset-email/) 指定されたメールアドレスのパスワードリセットメールをトリガーします。 _Oleh Usik によってプルリクエスト [27876](https://github.com/magento/magento2/pull/27876)_ で送信された修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* [Klarna の支払い方法 &#x200B;](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/klarna/) の Klarna GraphQLに関するトピックを追加または更新しました [`createKlarnaPaymentsSession`](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/mutations/create-klarna-payments-session/)

### 画像

<!-- ENGCOM-7691-->

* サムネール画像のHTML マークアップが改善されました。 _修正は Tu Nguyen によってプルリクエスト [28642](https://github.com/magento/magento2/pull/28642)_ に送信されました。 [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### インポート/エクスポート

<!-- MC-35479-->

* これで、`error_report.csv` ファイルがコンテンツと共にダウンロードされ、期待どおりに `var/import_history/` ディレクトリ内で使用できるようになります。 以前は、このファイルは読み込み後に生成されませんでした。

<!-- ENGCOM-7616-->

* CSV ファイルを使用して製品を読み込むと、`error_report.csv` ファイルが期待どおりに生成されるようになりました。 以前は、アプリケーションによってファイルが生成されましたが、読み込みの完了後に削除されました。 _プルリクエスト [28460](https://github.com/magento/magento2/pull/28460)_ ードで Vadim Malesh によって送信された修正。 [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* コードベース全体で冗長なクラスインポートを削除しました。 _Oleh Usik によってプルリクエスト [28696](https://github.com/magento/magento2/pull/28696)_ で送信された修正。 [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* 地域が定義されていない国の地域を含む顧客アドレスがアプリケーションで正常に読み込まれるようになりました。 以前は、アプリケーションは次のエラーをスローしていました：`Please enter a valid region`。

<!-- MC-33277-->

* 新しい書き出しをスケジュールするときに、マーチャントがエンティティタイプを選択すると、アプリケーションは正しいエンティティ属性セットを読み込むようになりました。

<!-- MC-32956-->

* 管理者が管理で製品を作成してカテゴリに割り当てると、`catalog_category_product` テーブル内の製品の位置が期待どおりに更新されるようになりました。 以前は、新製品の位置には常に 0 の値が割り当てられていました。

<!-- MC-34939-->

* 顧客データが管理者から正常に書き出され、書き出しデータグリッドに顧客データが期待どおりに表示されるようになりました。 以前は、書き出し中にメモリ割り当てに関連するエラーが発生していました。

<!-- MC-34657-->

* 読み込んだ CSV ファイルで、関連する製品情報が期待どおりに取り込まれるようになりました。 以前は、CSV ファイルを初めて読み込む際に、関連する製品情報が一貫してアップロードされませんでした。

<!-- MC-37424-->

* `AdvancedPricing.php` の未使用の構成パラメーターを削除しました。 [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### 索引

<!-- ENGCOM-7073-->

* `Magento_CacheInvalidate` では、リク `PURGE` ストを行う際に、大きなタグパターンを正しく処理するようになりました。 `sendPurgeRequest` は、呼び出し元が `implode()` を使用する代わりにタグの配列を処理するようにリファクタリングされています。 _Matthew O&#39;Loughlin がプルリクエスト [26256](https://github.com/magento/magento2/pull/26256)_ で送信した修正。 [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* インデックスを再作成した後、共有インデクサーを実行すると、共有インデクサーのステータスが **有効**`bin/magento indexer:status` なるようになりました。 以前は、完全な再インデックス後、共有インデクサーのステータスは **無効** でした。

### インフラストラクチャ

<!-- MC-37243-->

* PHP 7.4.9 を実行するデプロイメントでカタログおよび製品ページを読み込む際に問題が発生しなくなりました。 以前は、カタログおよび製品ページを読み込もうとすると、アプリケーションがこのエラーをスローしていました：`There has been an error processing your request. Exception printing is disabled by default for security reasons`。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* 実稼動モードでレイアウトをレンダリングした際に発生したすべての例外が、例外ログファイル（`var/report`）に記録されるようになりました。 以前は、アプリケーションは、これらのメッセージを重大な問題としてシステムログに記録していました。

<!-- ENGCOM-7154-->

* `ipcre.backtrack_limi`t および `pcre.recursion_limit` が約 1000000 に増加したため、正規表現が大きなページで適切に機能するようになりました。 _Mateusz Krzeszowiak によってプルリクエスト [27270](https://github.com/magento/magento2/pull/27270)_ ードで送信された修正。 [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* インターセプターの生成が改善されました。 `} else {` ステートメントはインターセプターから削除され、`array_map` は `foreach` に置き換えられました。 _Lukasz Bajsarowicz がプルリクエスト [27902](https://github.com/magento/magento2/pull/27902)_ ードで修正を送信しました。 [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* クラス全体で配列の作成に一貫性が生まれるようになりました（`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`）。 _修正は、Nathan de Graaf によってプルリクエスト [28515](https://github.com/magento/magento2/pull/28515)_ に送信されました。 [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* フレームワーク名前空間でプラグインを禁止するベストプラクティスに従うために、プラグインはフレームワークから移行されました。 _Lukasz Bajsarowicz がプルリクエスト [27965](https://github.com/magento/magento2/pull/27965)_ ードで修正を送信しました。 [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7778-->

* 新しい `UrlFilterApplier` コンポーネントを使用して、GETの URL パラメーターを使用して商品、`cms_page` および `cms_block` グリッドにフィルターを適用できるようになりました。 _Gabriel da Gama がプルリクエスト [28932](https://github.com/magento/magento2/pull/28932)_ で送信した修正。 [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-7713-->

* インターセプターが生成されると、アプリケーションが `Undefined class constant` エラーをスローしなくなりました。 _Vova Yatsyuk がプルリクエスト [28797](https://github.com/magento/magento2/pull/28797)_ で送信した修正。 [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* 既に使用されている名前を使用して統合を保存すると、アプリケーションが統合例外をスローしても、フォームデータが保持されるようになりました。 _Aditya Yadav によってプルリクエスト [26660](https://github.com/magento/magento2/pull/26660)_ ードで送信された修正。 [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* アプリケーションは、`X-Forwarded-For` のヘッダーを 32 文字に切り捨てなくなりました。 _Ihor Sviziev がプルリクエスト [27221](https://github.com/magento/magento2/pull/27221)_ ードで修正を送信しました。 [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* カスタム管理ドメインを使用する場合、リダイレクトが内部かどうかを確認するロジックが管理者で正しく機能するようになりました。 以前は、このロジックに関する問題により、多くの管理者がデフォルトストアのホームページにリダイレクトすることがありました。 _プルリクエスト [29066](https://github.com/magento/magento2/pull/29066)_ ードで Vadim Malesh によって送信された修正。 [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* `styles-old.less` ファイルの問題が解消され、リンティングでエラーが識別されなくなりました。 _修正は Tu Nguyen によってプルリクエスト [28895](https://github.com/magento/magento2/pull/28895)_ に送信されました。 [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php` はリファクタリングされています。 _Vitaliy Ryaboy によってプルリクエスト [28975](https://github.com/magento/magento2/pull/28975)_ ードで送信された修正。 [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* クラス `ResourceConnection.php` 読みやすさを向上させるために、クラスをリファクタリングしました。 _Lukasz Bajsarowicz がプルリクエスト [29341](https://github.com/magento/magento2/pull/29341)_ ードで修正を送信しました。 [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* ビルトイン Web サーバーの README ファイルが更新されて、Elasticsearchのすべてのパラメーターが含まれるようになりました。 _Yevhenii Dumskyi によってプルリクエスト [29300](https://github.com/magento/magento2/pull/29300)_ ードで送信された修正。 [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave` プラグインが、期待どおりに値を返すようになりました。 以前は、このプラグインは値を返さず、その結果、ストア表示を保存するとエラーが発生していました。 _Pieter Hoste がプルリクエスト [29035](https://github.com/magento/magento2/pull/29035)_ ードで修正を送信しました。 [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* `DataObject` 用のマジックメソッドに次のサポートを追加しました。

   * `get/set/has/uns` マジックメソッドをサポートする新しい拡張機能（`__call` を使用）
   * すべての呼び出しを DataObject コンテナに転送する、SessionManager のサポート
   * 拡張機能のカバレッジのテスト
   * フィルターされたエラーチェックの更新されたテスト
   * phptan チェックレベルを 0 から 1 に増加しました。 _Oleksandr Kravchuk がプルリクエスト [27905](https://github.com/magento/magento2/pull/27905)_ ードで修正を送信しました。 [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface` が文字列以上になりました。 `magentoConfigFixture` を string のみに制限したのは、以前のプルリクエストの不注意による結果であり、元に戻されました。 _プルリクエスト [29305](https://github.com/magento/magento2/pull/29305)_ ードの Fooman である Kristof によって修正が送信されました。 [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* `convertConfigTimeToUtc` メソッドは、`Phrase` コンストラクターに誤ったパラメーターを送信したために、致命的なエラーをスローしなくなりました。 _Pull request [29483](https://github.com/magento/magento2/pull/29483)_ で Kos Rafa によって送信された修正。 [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition` および `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()` が `from` または `to` の文字列データを含むインデックスを持つ配列を返す場合、価格フィルターがグリッドデータで期待どおりに機能するようになりました。 以前は、アプリケーションは次のエラーをスローしていました：`Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`。 _Nikita Sarychev によってプルリクエスト [29214](https://github.com/magento/magento2/pull/29214)_ ードで送信された修正。 [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* カテゴリページへのHTMLの追加をサポートするための拡張ポイントが追加されました。 これにより、以前のプルリクエストで発生したバグが修正されます。 _Fix submitted by iGerchak in pull request [29291](https://github.com/magento/magento2/pull/29291)_. [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### 階層型ナビゲーション

<!-- MC-25043-->

* レイヤー化されたナビゲーションサイドバーに、オプション（**はい**/**いいえ**）と一致する製品数の両方を含むブール属性が表示されるようになりました。 以前は、レイヤーナビゲーションは、Elasticsearchを使用したデプロイメントで、ブール属性に対して **no** オプションを返しませんでした。

<!-- ENGCOM-7493-->

* スウォッチのレイヤー化されたナビゲーションフィルターは、Magento Open Source全体で使用される標準フィルターと一致するようになりました。 _修正は Bartwomiej Szubert によってプルリクエスト [28015](https://github.com/magento/magento2/pull/28015)_ に送信されました。 [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### ログ

<!-- ENGCOM-7692-->

* デプロイメントが開発者モードのみの場合、壊れた参照エラーがすべてログに記録されるようになりました。 以前は、実稼動モードでのデプロイメントについてもエラーが 1 つ記録されていましたが、エラーログが肥大化していました。 _修正は Bartwomiej Szubert によってプルリクエスト [28735](https://github.com/magento/magento2/pull/28735)_ に送信されました。 [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### メディアギャラリー

<!-- ENGCOM-8014-->

* メディアギャラリー設定 UI （管理 **ストア**/**設定**   **詳細** > **システム**）が再編成されました。 _Shankar Konar がプルリクエスト [29433](https://github.com/magento/magento2/pull/29433)_ で修正を送信しました。 [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* メディアギャラリー内の画像の **使用している場所** リンクに対応するテストを追加しました。 _Nazar Klovanych がプルリクエスト [29392](https://github.com/magento/magento2/pull/29392)_ ードで修正を送信しました。 [GitHub-1969](https://github.com/magento/adobe-stock-integration/issues/1693)

### MFTF

<!-- ENGCOM-7963 -->

* `AdminSubmitAdvancedInventoryFormActionGroup`、`AdminClickOnAdvancedInventoryLinkActionGroup` および  `AdminSetStockStatusConfigActionGroup` のアクショングループは、ベストプラクティスに従ってテスト内で使用されるようになりました。 _Oleh USIA によってプルリクエスト [29386](https://github.com/magento/magento2/pull/29386)_ で送信された修正。 [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup` が製品グリッドの検索に使用されるようになりました。 _Oleh Usik によってプルリクエスト [29385](https://github.com/magento/magento2/pull/29385)_ で送信された修正。 [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup` を使用して、カテゴリを検索ポップアップの **完了** をクリックできるようになりました。 _Oleh Usik によってプルリクエスト [28989](https://github.com/magento/magento2/pull/28989)_ で送信された修正。 [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` は、ストアフロントの顧客ログインに使用される一連のアクションを置き換えるために使用されるようになりました。 _Satish Subramanian がプルリクエスト [28113](https://github.com/magento/magento2/pull/28113)_ で修正を送信しました。 [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* MFTF のベスト プラクティスを満たすために、`AdminUpdateCustomURLRewritesPermanentTest` がリファクタリングされました。 _Kate Kyzyma がプルリクエスト [28361](https://github.com/magento/magento2/pull/28361)_ に修正を送信しました。 [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* MFTF 規則を満たすようにテスト名が変更されました。 _Evgeny Levinsky によってプルリクエスト [27839](https://github.com/magento/magento2/pull/27839)_ ードで送信された修正。 [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### 新規アクショングループ

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _Oleh Usik によってプルリクエスト [29472](https://github.com/magento/magento2/pull/29472)_ で送信された修正。 [GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup`_Oleh Usik によってプルリクエスト [29142](https://github.com/magento/magento2/pull/29142)_ で送信された修正。 [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _Oleh Usik によってプルリクエスト [28993](https://github.com/magento/magento2/pull/28993)_ で送信された修正。 [GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _Oleh Usik によってプルリクエスト [29000](https://github.com/magento/magento2/pull/29000)_ で送信された修正。 [GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup` と `AdminProductFormCategoryNotExistInCategoryListActionGroup`_Alexander Stesuk がプルリクエスト [28287](https://github.com/magento/magento2/pull/28287)_ で送信した修正。 [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _Oleh Usik によってプルリクエスト [29133](https://github.com/magento/magento2/pull/29133)_ で送信された修正。 [GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _Oleh Usik によってプルリクエスト [29007](https://github.com/magento/magento2/pull/29007)_ で送信された修正。 [GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _Oleh Usik によってプルリクエスト [29134](https://github.com/magento/magento2/pull/29134)_ で送信された修正。 [GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### 新しいテスト

<!-- ENGCOM-7600 -->

* 管理者ユーザーとしてCMSページを削除するテストを追加しました。 _Dmitry Tsymbal によってプルリクエスト [28112](https://github.com/magento/magento2/pull/28112)_ ードで送信された修正。 [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* 無効なメールアドレスを使用した、お客様のウィッシュリストの共有に関する `StorefrontShareCustomerWishlistActionGroup` テストを追加しました。 既存のウィッシュリスト共有のテスト（`StorefrontShareWishlistEntityTest`）をリファクタリングしました。 `StorefrontCustomerShareWishlistActionGroup` は非推奨（廃止予定）になりました。

<!-- ENGCOM-7682 -->

* **X 左しきい値のみ** 構成設定の実装を確認するテストを追加しました。 _Oleh Usik によってプルリクエスト [27549](https://github.com/magento/magento2/pull/27549)_ で送信された修正。 [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### ニュースレター

<!-- MC-34714-->

* 「`EXCEL XML`」オプションを使用してニュースレターの購読者リストを書き出すと、すべての行が期待どおりに書き出されるようになりました。 以前は、書き出されたデータには、すべての行ではなく、ページのページネーションの値のみが含まれていました。

<!-- ENGCOM-7522-->

* ニュースレターのサブスクリプションメールで、他のニュースレター関連メールと同じHTML タグが使用されるようになりました。 _プルリクエスト [27357](https://github.com/magento/magento2/pull/27357)_ ードで Pawe Tylek が送信した修正。 [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7788-->

* 管理者ユーザーとしてニュースレターの購読者を削除するためのテストを追加しました。 _Dmitry Tsymbal によってプルリクエスト [28972](https://github.com/magento/magento2/pull/28972)_ ードで送信された修正。 [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* config ステートメントに disallowed オプションを含むゲストのニュースレター購読のテストを追加しました。 このテストは、非推奨（廃止予定）の `VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest` と `StorefrontCreateNewSubscriberActionGroup` に代わるものです。 _Dmitry Tsymbal によってプルリクエスト [28872](https://github.com/magento/magento2/pull/28872)_ ードで送信された修正。 [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### 注文件数

<!-- ENGCOM-7858-->

* `GetAssetIdByContentFieldInterface` モジュールの `MediaContent` とその実装で、Adobe Stock Integration のフィルター機能を拡張でき `MediaGallery` ようになりました。 _Gabriel da Gama がプルリクエスト [29058](https://github.com/magento/magento2/pull/29058)_ で送信した修正。 [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* 新しく作成された顧客の `CustomerAddressId` 値が引用符で検証されるようになりました。 _プルリクエスト [29139](https://github.com/magento/magento2/pull/29139)_ ードで Andrii Kalinich によって送信された修正。 [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* 合計が 0 のクレジット メモの注文ステータスは `Closed` になりました。 以前は、アプリケーションはオーダーステータスを `Complete` としてレポートしていました。 _プルリクエスト [29023](https://github.com/magento/magento2/pull/29023)_ ードで Andrii Kalinich によって送信された修正。 [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### 支払い方法

<!-- MC-34363-->

* 有効な支払情報を入力せずに管理注文の **送信** をクリックすると、必須のクレジットカード データの入力を求めるメッセージが表示されるようになりました。 以前は、支払い入力フィールドが無効で、ページが非アクティブになっても、Braintree カードバリデーターでエラーはスローされませんでした。

<!-- MC-33494-->

* アカウントにクレジットカード（Braintree）が保存されている顧客について、管理者から作成した注文の発送方法を変更できるようになりました。 以前は、別の配送方法を選択した場合、保存されたカードが選択されず、アプリケーションによって注文されませんでした。

#### PayPal

<!-- MC-33879-->

* チェックアウトワークフローの注文レビューページに、チェックアウト時に配送方法が変更されたBraintree注文を通じて、PayPal の正しい配送額が表示されるようになりました。 以前は、お客様がチェックアウトワークフローの PayPal 注文の確認ページで配送方法を変更した場合、アプリケーションは注文合計を正しい方法で更新しませんでした。

<!-- MC-34152-->

* マーチャントは、PayPal を使用して承認された注文を正常にキャンセルできるようになりました。 以前は、アプリケーションは注文をキャンセルせず、次のエラーを表示していました：`Declined: 10601-Authorization has expired`。

<!-- MC-33330-->

* 最初に別の注文を完了した後に PayPal 支払いポップアップウィンドウを閉じることで、注文をキャンセルしてもカートが空にならなくなりました。

### パフォーマンス

* 3 つの新しい設定が、コンシューマーキューのCPUの使用量の減少をサポートします。 これらのオプションパラメーターを使用すると、コンシューマーに対する制御を強化し、サーバーリソースを節約できます。 [、](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/)、`maxIdleTime` の各パラメーターの説明については、`sleep` メッセージキューの設定 `onlySpawnWhenMessageAvailable` を参照してください。

<!-- MC-31617-->

* `di:compile` コマンドの実行中にプラグインリスト設定が生成されるようになりました。 この設定情報は、範囲に基づいて、生成されたメタデータフォルダーに書き込まれます。 以前は、この情報はキャッシュに保存されていました。 その結果、次のようなパフォーマンスの向上が実現します。

   * ネットワークキャッシュサイズが減少しました
   * 多くのシナリオの実行時間が改善されました。

<!-- ENGCOM-7290-->

* アプリケーションは、適切なスライダーウィジェットをオンデマンドで読み込むようになり、ページの読み込みが改善されました。 タッチスライダーウィジェットのカスタマイズは別のファイルに移動され、互換性のあるデバイスにのみ読み込めるようになりました。 適切なスライダーウィジェットタイプが、範囲バインディングが実際にページで使用される場合にのみ読み込まれるようになりました。 _Mateusz Krzeszowiak によってプルリクエスト [27616](https://github.com/magento/magento2/pull/27616)_ ードで送信された修正。 [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* 複数の同時注文でのチェックアウトのパフォーマンスが向上しました。

<!-- MC-25062-->

* インポートプロセスで一括挿入を実行し、再インデックスプロセスで select からの大きな挿入を同時に実行すると、デッドロックが発生しなくなりました。 以前は、アプリケーションに「`PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`」というエラーが表示されていました。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### レビュー

<!-- MC-33405-->

* `entity_pk_value-entity_type-store_id` の一意のキーが `review_entity_summary` テーブルに追加され、同じ製品 ID （`entity_pk_value`）に対して重複する行が作成されなくなりました。 以前は、この一意のキーがないと、同じ製品 ID と SQL エラーで行が重複することがありました。

### 売上

<!-- MC-35675-->

* ゼロ支払を必要とする受注を請求した後は、`Complete` のステータスは割り当てられなくなります。

<!-- MC-35888-->

* REST API で生成される新規出荷メールに、管理者が手動で作成した出荷と同じ出荷情報と顧客情報が含まれるようになりました。 以前は、このメールには、顧客名、トラッキング情報、注文された製品、その他の注文情報は含まれていませんでした。

<!-- MC-35837-->

* 管理者からメールを読み込んだりカスタマイズしたりすると、ゲストのユーザー名が請求書や出荷関連のメールで期待どおりに表示されるようになりました。

<!-- MC-35707-->

* PDFの請求書が、注文が行われた店舗ビューの言語に翻訳されるようになりました。 以前は、PDFの請求書は管理者の言語で翻訳されていました。

<!-- MC-35858-->

* クレジットメモページから期待どおりに払い戻しを発行できるようになりました。 [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* ストアフロントの「注文」ページに表示されるローカライズされた地域名が、正しく翻訳されるようになりました。 以前は、管理者で編集しない限り、地域名は指定されたロケールに基づいていませんでした。

<!-- MC-35633-->

* POST `/rest/V1/shipment` エンドポイントを通じて作成された出荷で、注文が正しく更新されるようになりました。 以前は、アプリケーションによって出荷が作成されましたが、出荷ステータスは処理状態のままでした。

<!-- ENGCOM-7639 -->

* クレジットカードには、注文を行った店舗の範囲から派生した支払い方法が表示されるようになりました。 以前は、クレジットメモには、デフォルトのストア範囲を定義した名前が表示されていました。 _Ledian Hymetllari によってプルリクエスト [27582](https://github.com/magento/magento2/pull/27582)_ で送信された修正。 [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### 検索 {#search-heading}

<!-- MC-31304-->

* QuickSearch を使用して、管理者顧客ビューから属性別に製品を検索できるようになりました。 以前は、カタログ検索結果ページで例外が発生していました。

<!-- MC-32518-->

* 製品属性を追加した後、アプリケーションでは、カテゴリページに設定可能な製品が期待どおりに表示されるようになりました。

<!-- MC-33952-->

* Elasticsearchの結果に、各ストア表示の属性オプションの正しい値が含まれるようになりました。 デフォルト以外のストアビューで、`Dropdown` 属性または `Multiple Select` 属性のオプション値がデフォルトのストアビューと異なる場合、Elasticsearchでは、その値にインデックスを作成するか、その値を持つ商品を結果に返すようになりました。 以前は、Elasticsearchはその値をインデックス化しないか、結果でその値を持つ商品を返していました。

<!-- MC-35013-->

* Elasticsearchの詳細検索で、SKU による検索が期待どおりに機能するようになりました。 以前は、SKU で検索しようとすると、アプリケーションに「`We can't find any items matching these search criteria. Modify your search`」というエラーメッセージが表示されていました。

<!-- ENGCOM-7222-->

* 詳細検索では、買い物客がマイナス価格でフィルタリングできなくなりました。 _修正は Rohan Hapani がプルリクエスト [27359](https://github.com/magento/magento2/pull/27359)_ に提出したもの。 [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* 新しいシノニムグループ フォームで、スコープ値が期待どおりにリセットされるようになりました。 _Satish Subramanian がプルリクエスト [29206](https://github.com/magento/magento2/pull/29206)_ で修正を送信しました。 [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### 送料

<!-- MC-34734-->

* アップグレード後のアプリケーションで、配送用テーブルの料金が正しく計算されるようになりました。 以前は、配送用テーブルの料金は VAT を除いた正味価格に基づいて計算されていました。

<!-- MC-33737-->

* FedEx を配送方法として指定する注文のチェックアウトワークフローで、配送料が正しい通貨で表示されるようになりました。

<!-- MC-33267-->

* UPS から出荷された注文の出荷ラベルの複数ページ PDF に、正しい数が表示されるようになりました。

<!-- MC-35514-->

* パッケージを作成ページのJavaScript コンポーネントに関する問題が解決されました。 以前は、このページに「**出荷ラベルの作成**」チェックボックスが表示されず、既存の注文の出荷ラベルを作成できませんでした。

### サイトマップ

<!-- ENGCOM-7924-->

* `robots.txt` のサイトマップは、ストア固有になりました。 _プルリクエスト [29331](https://github.com/magento/magento2/pull/29331)_ ードで Vadim Malesh によって送信された修正。 [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* エンコードされた値は、`sitemap.xml` ファイルで正しくエスケープされるようになりました。 以前は、製品名や画像タイトルにエンコードされた文字を含めると、生成されたサイトマップが無効でした。

### ストア

<!-- MC-35853-->

* 以前に作成したストア表示を削除しても、分割データベース設定でのデプロイメントでエラーが発生しなくなりました。 以前は、アプリケーションが例外をスローしていました。

<!-- MC-32634-->

* 複数の Web サイトのデプロイメントで、ある Web サイトから `config.php` とデフォルトの Web サイトコードを書き出して、2 つ目の Web サイトにアプリケーションをインストールして設定できるようになりました。 以前は、書き出し後にデフォルトのストアと表示が表示されなくなり、ストアフロントでエラーが発生していました。

### Swagger

<!-- ENGCOM-7720-->

* Swagger で顧客トークンを生成できるようになりました。 以前は、有効な顧客アクセス情報が入力されたときに Swagger が応答コードを生成せず、アプリケーションに「`The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`」というエラーが表示されていました。 _プルリクエスト [28822](https://github.com/magento/magento2/pull/28822)_ ードで Vadim Malesh によって送信された修正。 [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### スウォッチ

<!-- ENGCOM-7845-->

* スウォッチを使用して設定可能な製品で、買い物客が買い物かごで **編集** をクリックすると、階層価格が表示されるようになりました。 以前は、チェックアウト前にアプリケーションの買い物かごに階層価格が表示されていませんでした。 _Satish Subramanian がプルリクエスト [29137](https://github.com/magento/magento2/pull/29137)_ で修正を送信しました。 [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* 設定可能な製品バリエーションについて、階層の価格が期待どおりに表示されるようになりました。

### 税

<!-- MC-36049-->

* マーチャントが製品の属性セットから固定製品税金属性の割り当てを解除した後、アプリケーションによって製品のストアフロントに固定製品税金属性が表示されなくなりました。

### テスト

<!-- ENGCOM-7874-->

* PHPUnit 9 エラーは、単体テストで修正されました。 _プルリクエスト [29244](https://github.com/magento/magento2/pull/29244)_ ードで Anton Evers によって送信された修正。 [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* 有効期限が切れた後に割引が適用された発注書を承認するための単体テストが追加されました。これにより、注文が全額注文され、発注書の合計は更新されません。 _Fix submitted by Joan He in pull request [18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_。 [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface` は統合テストでカバーされるようになりました。 _プルリクエスト [29493](https://github.com/magento/magento2/pull/29493)_ で jmonteros422 によって送信された修正。 [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* テストで期待される結果と実際の結果の大きなネストされた配列を比較でき、テスターが実際の結果で無関係なキーを無視できるようにする関数が `\Magento\TestFramework\TestCase\WebapiAbstract` に追加されました。 _プルリクエスト [29458](https://github.com/magento/magento2/pull/29458)_ ードで Jekabs から送信された修正。 [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* 実際の値での期待値の反転を `app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php` で修正しました。 _Lukasz Bajsarowicz がプルリクエスト [29271](https://github.com/magento/magento2/pull/29271)_ ードで修正を送信しました。 [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7142 -->

* 連続したテストを実行した際の静的プロパティのシリアル化とシリアル化の解除に関する問題が解決されました。 _Pavel Bystritsky によってプルリクエスト [26175](https://github.com/magento/magento2/pull/26175)_ で送信された修正。 [GitHub-28319](https://github.com/magento/magento2/issues/28319), [GitHub-29313](https://github.com/magento/magento2/issues/29313)

<!-- ENGCOM-7886 -->

* テスト中にクラスをインスタンス化するために `ObjectManager` を使用する方法は、単体テストでは新しいキーワードに置き換えられました。 _Lukasz Bajsarowicz がプルリクエスト [29272](https://github.com/magento/magento2/pull/29272)_ ードで修正を送信しました。 [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* `updateCustomer` のミューテーションのケース（無効な生年月日、無効なメールアドレス、空の顧客の姓）に対するテストカバレッジが追加されました。 _Alexander Taranovsky がプルリクエスト [28304](https://github.com/magento/magento2/pull/28304)_ で送信した修正。 [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* `ApiFunctional TestFramework` GraphQL クライアントがヘッダーを正しく解析するようになりました。 [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### テーマ

<!-- MC-34397-->

* ユーザーエージェントルールで追加されたテーマが、`bin/magento catalog:images:resize` を実行した際に期待どおりに影響を受けるようになりました。 以前は、ストアを実行すると、ストアに割り当てられたテーマのみが影響を受 `bin/magento catalog:images:resize` ていました。

### 翻訳とロケール

<!-- MC-20372-->

* 管理者が製品の作成時に **日付** フィールドを変更した場合や、管理者ロケールが中国語または日本語の場合に保存した場合、アプリケーションがエラーをスローしなくなりました。 [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* インライン翻訳マークアップがレンダリングされる前に、アプリケーションが領域（フロントエンドまたは `adminhtml`）をチェックするようになりました。 以前は、インライン翻訳が有効な場合に、無効な資格情報を含む `POST /V1/integration/admin/token` を API 呼び出すと、API 応答のエラーメッセージの周りにインライン翻訳マークアップが含まれていました。 _修正は、Zach Nanninga によってプルリクエスト [28856](https://github.com/magento/magento2/pull/28856)_ に送信されました。 [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* ブルガリア地域が `directory_country_region` テーブルに追加されました。 _Nikola Lardev によってプルリクエスト [27957](https://github.com/magento/magento2/pull/27957)_ ードで送信された修正。 [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* 管理者 **顧客**/**新しいアドレスを追加** および **製品を編集**/**高度な在庫** モデルのタイトルとボタンを翻訳できるようになりました。 _Satish Subramanian がプルリクエスト [28174](https://github.com/magento/magento2/pull/28174)_ で修正を送信しました。 [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* FPT という用語は、管理者 **ストア**/**設定**/**販売**/**税**/**固定製品税** で翻訳できるようになりました。 _プルリクエスト [28108](https://github.com/magento/magento2/pull/28108)_ ードで Vadim Malesh によって送信された修正。 [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* チェックアウトワークフローの配送先住所モーダルの **ここで発送** ボタンラベルが、他のボタンで使用されるキャメルケースと一致するように変更されました。 この大文字と小文字は、翻訳ファイルで使用されている大文字と小文字を一致させるようになりました。 以前は、ケースの不一致により、このラベルは翻訳されていませんでした。 _プルリクエスト [28547](https://github.com/magento/magento2/pull/28547)_ で WK によって送信された修正。 [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### UI

<!-- ENGCOM-7514-->

* プライバシーと cookie ポリシーページが表示される際に、ページフッター内のプライバシーと cookie ポリシーリンクがアクティブなリンクとして表示されるようになりました。 _Satish Subramanian がプルリクエスト [28004](https://github.com/magento/magento2/pull/28004)_ で修正を送信しました。 [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* 管理者 **Sales** > **Orders** から選択した注文に関連する請求書の「Invoice Comments」テキスト領域のカーソルの位置ずれを修正しました。

<!-- MC-36044-->

* 新しい注文を作成ページに、期待どおりに **SKU で製品を追加** および **製品を追加** ボタンが表示されるようになりました。

<!-- MC-35974-->

* 選択した製品の製品評価が利用可能な場合、アプリケーションにはレビューを編集ページが正しく表示されるようになりました。

<!-- MC-35475-->

* Safari が実行されているiPhoneで、管理者の顧客編集ページが正しく表示されるようになりました。

<!-- MC-35370-->

* 新しい注文を作成ページでの不要なスクロールを修正しました。

<!-- MC-35345-->

* 新規税務処理基準を追加ページ（**ストア**/**税務処理基準**）の「**税率のエクスポート**」ボタンを直接クリックすると、`tax_rates.csv` ファイルが期待どおりにダウンロードされるようになりました。 以前は、マーチャントは「税率のエクスポート **ボタンの端をクリックする必要があ** ました。 これは、2.4.0 の既知の問題でした。

<!-- MC-35313-->

* 買い物かごの下部にある **選択項目を買い物かごに追加** ボタンが期待どおりに動作するようになりました。 これは、2.4.0 の既知の問題でした。

<!-- MC-35296-->

* 顧客のアクティビティページの **最近表示された製品** セクションの「**更新**」ボタンが期待どおりに動作するようになりました。 以前は、「**更新**」をクリックしても、製品リストは更新されず、ページがスクロールされていました。

<!-- MC-35412-->

* **顧客**/**セグメント**/**セグメントを追加** の「条件」タブで、顧客の生年月日の選択に使用されるカレンダーアイコンが正しく表示されるようになりました。

<!-- MC-35658-->

* Internet Explorer 11.x で買い物客がこのページをスクロールしても、チェックアウトワークフローの「チェックアウトの概要」セクションがちらつきなくなりました。

<!-- MC-34602-->

* アプリケーションのストアフロントカテゴリページに SKU 別の注文ウィジェットが正しく表示されるようになりました。 以前は、このウィジェットのHTML コードはレンダリングされず、アプリケーションに「**SKU のリストを読み込む** リンクが表示されませんでした。

<!-- MC-37444-->

* `this.disabled(true)` を使用して無効にした UI コンポーネントは、ストアフロントに表示されなくなります。 [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* アプリケーションは、最近表示された製品ウィジェットをモバイル表示で適切に表示するようになりました。 _修正は Tu Nguyen によってプルリクエスト [27572](https://github.com/magento/magento2/pull/27572)_ に送信されました。 [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* 管理者から商品の位置を変更すると、ストアフロントの商品の位置に反映されるようになりました。 _Oleg Aleksin によってプルリクエスト [28150](https://github.com/magento/magento2/pull/28150)_ で送信された修正。 [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* ログインフォームのスタイルが、空白テーマの他のフォームのスタイルと一致するようになりました。 コンテナコントロールのラップ入力フィールドの幅を設定する不要なスタイルが削除されました。 _修正は Tu Nguyen によってプルリクエスト [28084](https://github.com/magento/magento2/pull/28084)_ に送信されました。 [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* ミニ買い物かごからの削除製品の確認ポップアップの **OK** ボタンが期待どおりに動作するようになりました。 _修正は Tu Nguyen によってプルリクエスト [28083](https://github.com/magento/magento2/pull/28083)_ に送信されました。 [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* ページの読み込み中に、製品ギャラリーの要素が点滅しなくなりました。 _Mateusz Krzeszowiak によってプルリクエスト [27871](https://github.com/magento/magento2/pull/27871)_ ードで送信された修正。 [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* フィールドの幅を制御する CSS クラスが、管理全体を通して開始時間要素に期待どおりに適用されるようになりました。 _Shankar Konar がプルリクエスト [29511](https://github.com/magento/magento2/pull/29511)_ で修正を送信しました。 [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* 利用条件のテキストラベルに、長いテキスト文字列を正しく表示できるようになりました。 _修正は Bartwomiej Szubert によってプルリクエスト [29413](https://github.com/magento/magento2/pull/29413)_ に送信されました。 [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* 注文失敗ページのタイトルが、正確さを期すために書き換えられました。 以前は、買い物客が注文をキャンセルすると、アプリケーションは「`We received your order!`」というタイトルのページを表示していました。 _Angelo Romano がプルリクエスト [29410](https://github.com/magento/magento2/pull/29410)_ に送信した修正。 [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* キャンセルされた注文ビューページのキャンセルされた項目の合計数が、キャンセルされた注文ビューページで正しく識別されるようになりました。 以前は、このフィールドには「**合計期限** というラベルが付いていました。 _修正は Madhu Rajawat によってプルリクエスト [27516](https://github.com/magento/magento2/pull/27516)_ に提出されました。 [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* 設定可能な製品を作成ページの切り替えボタンが期待どおりに動作するようになりました。 _修正は Tu Nguyen によってプルリクエスト [28032](https://github.com/magento/magento2/pull/28032)_ に送信されました。 [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* 詳細属性プロパティページの詳細属性プロパティブロックアイコンが期待どおりに動作するようになりました。 _修正は Tu Nguyen によってプルリクエスト [28032](https://github.com/magento/magento2/pull/28032)_ に送信されました。 [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* 新しいモジュールの設定を保存しようとすると、システム設定ページの「管理者」セクションが展開されて、必須フィールドが期待どおりに表示されるようになりました。 _修正は Bartwomiej Szubert によってプルリクエスト [28285](https://github.com/magento/magento2/pull/28285)_ に送信されました。 [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* モードが `inside` に設定されている場合の拡大鏡の動作を修正しました。 _Sean van Zuidam によってプルリクエスト [29077](https://github.com/magento/magento2/pull/29077)_ ードで送信された修正。 [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* 買い物客がページフッターの購読フィールドに無効なメールアドレスを入力した場合に発生する、気が散るような長い入力フィールド幅を修正しました。 _Dipesh Rangani がプルリクエスト [27106](https://github.com/magento/magento2/pull/27106)_ ードで送信した修正。 [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* 新しいタグを追加してマウスカーソルをその上に移動すると、開発コンソールに `Uncaught ReferenceError` エラーが表示されなくなりました。 _Nazar Klovanych がプルリクエスト [29392](https://github.com/magento/magento2/pull/29392)_ ードで修正を送信しました。 [GitHub-1700](https://github.com/magento/magento2/issues/1700)

### URL の書き換え

<!-- MC-34483-->

* ストアビューを別の web サイトに移動しても、URL がリセットされなくなりました。 以前は、アプリケーションでCMSと製品 URL の書き換えが誤って再生成されていました。

<!-- MC-33028-->

* ストア表示が別のストアに割り当てられても、既存のカタログ URL の書き換えがアプリケーションで期待どおりに保持されるようになりました。 以前は、アプリケーションはストア固有の URL の書き換えを削除しました。

### ワニス

<!-- ENGCOM-7761-->

* Varnish を再起動しても、503 エラーが発生しなくなりました。 _Ihor Sviziev がプルリクエスト [28137](https://github.com/magento/magento2/pull/28137)_ ードで修正を送信しました。 [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### Vault

<!-- MC-34674-->

* チェックアウトワークフローの支払いセクションの **後で使用するために保存** チェックボックスが選択されていない場合、クレジットカード番号は保存されません。

### Web API フレームワーク

<!-- MC-35838-->

* 複数の web サイトを持つマーチャントは、REST API を使用して、画像および画像の役割の継承を維持しながら、製品を作成および更新できるようになりました。 以前は、マーチャントが REST API を使用して商品を作成および更新し、ストア表示のために商品を更新した場合、デフォルトの画像の役割がそのストア表示のために読み込まれて保存されていました。 その結果、ストア表示の画像の役割は、更新後、デフォルトの範囲から継承されなくなります。

<!-- MC-36419-->

* リソース権限によってアクセスが許可されている場合、スコープ指定されていない統合ユーザーアカウントから REST API を介してリソースにアクセスできるようになりました。

<!-- MC-35975-->

* 検索条件フィルターが、設定可能な製品の作成時に使用される製品属性に対して、期待どおりに機能するようになりました。 [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* 顧客グループ ID の POST `/rest/V1/customers` リクエストが検証されるようになりました。 以前は、これらのリクエストで無効な `group_id` を使用しても、アプリケーションにエラーメッセージが表示されませんでした。 _プルリクエスト [28903](https://github.com/magento/magento2/pull/28903)_ ードで Vadim Malesh によって送信された修正。 [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* 匿名の REST 呼び出しに対しては、PHP セッションはデフォルトでは作成されません。 以前は、セッションが不要な場合でも開始されていました。 _プルリクエスト [26032](https://github.com/magento/magento2/pull/26032)_ ードで Maciej Pawwłowski によって送信された修正。 [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* 様々な REST エンドポイントを使用して、カスタムオプションを含む注文を更新しても、カスタムオプションの情報が削除されなくなりました。 以前は、`info_buyRequest` の値は削除されていました。 _プルリクエスト [28483](https://github.com/magento/magento2/pull/28483)_ ードで Vadim Malesh によって送信された修正。 [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* GET `V1/customers/me` の使用で、ユーザー情報を取得する際に、**カスタマーアカウントを共有** 設定（管理者 **ストア**/**設定**/**カスタマー**/**カスタマー設定**/**アカウント共有オプション**）に従うようになりました。 _Pavel Bystritsky によってプルリクエスト [28213](https://github.com/magento/magento2/pull/28213)_ で送信された修正。 [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* アドレス関連の拡張属性は、データ配列として設定できます。 以前は、を含む POST リクエストの発生時にアプリケーションがエラーをスローしていました  `extension_attributes` は `estimate-shipping-methods` に送信されました。 以前のコミットで導入されたこのバグは、オブジェクトではない `Magento\Quote\Api\Data\AddressInterface` に設定された拡張属性に影響を与えていました。 _修正は Alexander Menk によってプルリクエスト [27338](https://github.com/magento/magento2/pull/27338)_ に送信されました。 [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* PUT `V1/customers/:id` エンドポイントを使用してカスタマーを更新する際に、1 つのフィールドを指定できるようになりました。 以前は、エンドポイントで、顧客のメールおよび顧客の作成に必要なその他のフィールドを指定する必要がありました。 _プルリクエスト [28332](https://github.com/magento/magento2/pull/28332)_ ードで Vadim Malesh によって送信された修正。 [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### ウィッシュリスト

<!-- MC-35622-->

* お客様は、ウィッシュリスト自体からウィッシュリスト内の商品の数量を変更できるようになりました。 以前は、アプリケーションは製品数量を更新せず、メッセージも表示しませんでした。

<!-- MC-35618-->

* 顧客は、ウィッシュリスト自体から、ウィッシュリスト内のグループ化された製品の数量を変更できるようになりました。 以前は、アプリケーションは製品数量を更新しなかったか、メッセージを表示しませんでした。

<!-- ENGCOM-7580-->

* `Map`、`WeakMap`、`FormData`、`MutationObserver` のポリフィルは、必要な場合にのみロードされるようになりました。 _Dmitry Tsymbal によってプルリクエスト [28330](https://github.com/magento/magento2/pull/28330)_ ードで送信された修正。 [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7561-->

* ウィッシュリストの更新プロセスでは、ウィッシュリストの項目とその説明を同時に更新できるようになりました。 _Eduard Chitoraga によってプルリクエスト [28222](https://github.com/magento/magento2/pull/28222)_ ードで送信された修正。 [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7660-->

* 顧客のウィッシュリストを許可されているメール数を超えて共有するためのテストを追加しました。 _Dmitry Tsymbal によってプルリクエスト [28641](https://github.com/magento/magento2/pull/28641)_ ードで送信された修正。 [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- MC-36250-->

* 管理者は、デフォルト以外のストアからウィッシュリストに顧客によって追加された設定可能な商品を設定できるようになりました。 以前は、顧客がデフォルト以外のストアから設定可能な製品も追加した場合、アプリケーションがエラーをスローしていました。

<!-- ENGCOM-7660-->

* 顧客のウィッシュリストを許可されているメール数を超えて共有するためのテストを追加しました。 _Dmitry Tsymbal によってプルリクエスト [28641](https://github.com/magento/magento2/pull/28641)_ ードで送信された修正。 [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* 顧客のウィッシュリストから項目を削除するためのテストを管理者ユーザーとして追加しました。 _Dmitry Tsymbal によってプルリクエスト [28632](https://github.com/magento/magento2/pull/28632)_ ードで送信された修正。 [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* ウィッシュリスト機能を無効にするテストを追加しました。 _Dmitry Tsymbal によってプルリクエスト [28635](https://github.com/magento/magento2/pull/28635)_ ードで送信された修正。 [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* 顧客のウィッシュリストを共有する際に、無効なメールアドレスを使用するテストを追加しました。 `StorefrontShareWishlistEntityTest` はリファクタリングされています。 `StorefrontCustomerShareWishlistActionGroup` は非推奨（廃止予定）になりました。 _Dmitry Tsymbal によってプルリクエスト [28330](https://github.com/magento/magento2/pull/28330)_ ードで送信された修正。 [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* 許可されているテキストの長さの制限を超える顧客のウィッシュリストを共有するためのテストを追加しました。 _Dmitry Tsymbal によってプルリクエスト [28812](https://github.com/magento/magento2/pull/28812)_ ードで送信された修正。 [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## 既知の問題

**問題**：サードパーティの支払いプロバイダーを使用する場合、チェックアウトの新しい CAPTCHA 機能が Place Order ページで期待どおりに動作しません。 Place Order ストアフロント ページで CAPTCHA 保護を有効にしている 2.3.6 または 2.4.1 を実行しているマーチャントは、PayPal: `Please provide CAPTCHA code and try again` などのサードパーティの支払いプロバイダーを使用してチェックアウトする際に、このエラーが表示されます。 **回避策**：この問題を修正できるようになりました。 ナレッジベースの記事「[Magento Open Source v2.3.6/2.4.1 CAPTCHA in checkout not working](https://support.magento.com/hc/en-us/articles/360051235772)」を参照してください。 修正は、次の四半期パッチ（Q12021）にも含まれる予定です。

**問題**：管理者権限を持たないユーザーは、現在、個人用 2FA アクセスを設定できません。 2FA には 2 つの ACL ロールがあります。 1 つの役割は、グローバルシステム設定に影響を及ぼし、システムの設定時にのみ必要になります。 2 つ目の ACL の役割は、個々のユーザー 2FA アカウントに影響します。 管理者ユーザーは、この 2 番目のタイプの 2FA ACL を設定する必要があります。 **回避策**：ログインしてアクセス拒否画面が表示されたら、`https://<magento store>/<admin_path>/tfa/tfa/requestconfig/` にアクセスして設定を強制できます。 注意：セキュリティ設定を無効にすることは推奨しません。 ただし、この回避策は、管理者 URL の秘密鍵が無効になっている場合にのみ有効です。

**問題**：買い物客が無効なデータを入力した場合、新しいアカウントを作成ページの **アカウントの作成** ボタンは無効のままになります。 これにより、買い物客がエラーを起こした後にアカウントを再作成するのを防ぎます。 **回避策**：パッチ `MC-38509` を適用します。 また、修正は、2021 年第 1 四半期にリリースされる予定の次の四半期リリース（2.4.2、2.4.1-p1 および 2.3.6-p1）にも含まれる予定です。 [2.4.1 および 2.3.6 の「アカウントの作成」ボタンが無効になっているホットフィックスについては &#x200B;](https://support.magento.com/hc/en-us/articles/360051130212) ナレッジベースの記事を参照してください。  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**問題**:dotdigital が有効になっている場合、マーチャントは Safari の管理者から dotdigital にログインできません。 ナレッジベースの記事 [dotdigital アカウントが有効になっている場合、管理パネルから dotdigital にログインすることは不可能です &#x200B;](https://support.magento.com/hc/en-us/articles/360050092291) を参照してください。

**問題**：買い物客が請求先住所と異なる配送先住所を選択した場合、支払い中に頂点の住所の検証が機能しません。 この問題は、2.4.2 で修正される予定です。ナレッジベースの記事「[2.4.1 の既知の問題：アドレスを更新しても頂点アドレスの検証メッセージが表示されない &#x200B;](https://support.magento.com/hc/en-us/articles/360050139631)」を参照してください。

**問題**：マーチャントが Safari ブラウザーに dotdigital ページビルダーフォームを保存すると、アプリケーションに空のページが表示される。 **回避策**：ページをリロードして変更を適用します。 ナレッジベースの記事「[2.4.1 の既知の問題：dotdigital ページビルダーフォームを保存した後の空のページ」を参照し &#x200B;](https://support.magento.com/hc/en-us/articles/360049819092) ください。

**問題**：特定の条件下で、アプリケーションは以前に使用したAmazon アカウントに自動的にサインインし、Amazon Pay でのチェックアウト中にログインするように促します。 サポート技術情報の記事「Google ChromeでAmazon アカウントを変更できない」の [2.4.1 の既知の問題 &#x200B;](https://support.magento.com/hc/en-us/articles/360049814152) 参照してください。

**問題**:PayPal Braintreeの支払いと複数の住所への配送が選択されている場合、チェックアウトワークフローの請求ページにエラーメッセージが短時間表示されます。 [2.4.1 の既知の問題：PayPal Braintreeでのチェックアウト時のエラー &#x200B;](https://support.magento.com/hc/en-us/articles/360050253211) ナレッジベースの記事を参照してください。

**問題**：ゲストのチェックアウトが無効な場合、ゲストのお客様がBraintreeを通じて PayPal で注文しようとすると、アプリケーションに非情報エラーメッセージが表示されます。 ナレッジベースの記事「[2.4.1 の既知の問題：Braintreeから Paypal を使用してゲストのチェックアウト中にエラーメッセージが表示される &#x200B;](https://support.magento.com/hc/en-us/articles/360050368111) 非情報」を参照してください。

## コミュニティの投稿

Magento Open Sourceの皆さまには深く感謝申し上げるとともに、今回のリリースに対する皆さまのご尽力を心より感謝申し上げます。 現在のリリースに対するコミュニティの投稿について学べる、次の方法を確認してください。

* コミュニティメンバーがこのリリースの修正を提供している場合は、これらのメモの修正済みの問題の節の修正を、「*コミュニティメンバーによって提供された修正*」というフレーズで識別します。

* コミュニティエンジニアリングチーム [Magentoのコントリビューター &#x200B;](https://magento.biterg.io/app/kibana) は、月、四半期、年ごとに、貢献した上位の個人とパートナーのリストを管理します。 その投稿者ページから、GitHub の結合された PR へのリンクをフォローできます。

### パートナーの投稿

次の表に、パートナー様のコントリビューションを示します。 この表は、プルリクエストを行ったパートナー、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）の一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### 個々のコントリビューターの投稿

次の表に、コミュニティメンバーからの投稿を示します。 この表は、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）、プルリクエストを行ったコミュニティメンバーの一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### 必要システム構成

当社の技術スタックは、PHP と MySQL をベースに構築されています。 詳しくは、[&#x200B; システム要件 &#x200B;](../../../installation/system-requirements.md) を参照してください。

### インストールとアップグレードの手順

Composer を使用してMagento Open Source 2.4.1 をインストールできます。

## 移行ツールキット

データ移行ツールは、既存のMagento 1.x ストアデータをMagento 2.x に転送する際に役立ちます。このコマンドラインインターフェイスには、検証、進行状況のトラッキング、ログ記録、テストなどの機能が含まれています。 インストール手順については、[&#x200B; データ移行ツールのインストール &#x200B;](../../../tools/data-migration-tool/install.md) を参照してください。 [&#x200B; データ移行リポジトリ &#x200B;](https://github.com/magento/data-migration-tool) の調査または貢献を検討します。

[&#x200B; コード移行ツールキット &#x200B;](https://github.com/magento-commerce/code-migration) は、既存のMagento 1.x ストアの拡張機能とカスタマイズのMagento 2.x への転送に役立ちます。コマンドラインインターフェイスには、Magento 1.x のモジュールとレイアウトを変換するためのスクリプトが含まれています。

<!-- Last updated from includes: 2022-11-04 11:49:04 -->
