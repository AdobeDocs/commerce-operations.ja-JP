---
title: Magento Open Source 2.4.1 リリースノート
description: 2.4.1 Magento Open Sourceリリースの新機能、機能強化、バグ修正および既知の問題について説明します。
recommendations: noCatalog
exl-id: 63d04bfc-96c9-4fe3-b3c1-252f1243459a
source-git-commit: 4bcc68890e16e51f0a84ed3d0d47b1f3dbbd52f0
workflow-type: tm+mt
source-wordcount: '13110'
ht-degree: 0%

---

# Magento Open Source 2.4.1 リリースノート

Magento Open Source 2.4.1 では、パフォーマンスとセキュリティが強化されました。 セキュリティの強化には、のサポートが含まれます `SameSite` cookie の属性、支払いに関連する API エンドポイントと注文に関連する API エンドポイントの CAPTCHA 保護および注文ストアフロントページの追加。

このリリースには、2.4.0 に含まれていたコア品質のすべての改善、コアコードに対する 150 を超える新しい修正、15 を超えるセキュリティ強化が含まれています。 コミュニティメンバーによる約 300 件の GitHub 問題の解決が含まれています。 これらのコミュニティの貢献度は、コアコードの小規模なクリーンアップから、GraphQLでの大幅な機能強化まで多岐にわたります。

2.4.0 で特定された既知の問題はすべて、このリリースで修正されました。

{{bics}}

## セキュリティパッチを利用できます

マーチャントは、完全な四半期リリース（2.4.0-p1 など）が提供する何百もの機能修正や機能強化を適用しなくても、時間に依存するセキュリティ修正をインストールできるようになりました。 パッチ 2.4.0.1 （Composer パッケージ 2.4.0-p1）は、以前の四半期リリース 2.4.0 で特定された脆弱性の修正を提供するセキュリティ パッチです。2.4.0 リリースに適用されたすべてのホットフィックスが、このセキュリティパッチに含まれています。 イ *ホットフィックス* では、特定の問題やバグに対処するリリースバージョンの修正について説明しています。）

セキュリティパッチの一般的な情報については、を参照してください。 [新しいセキュリティパッチリリースの紹介](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). セキュリティパッチ （パッチ 2.3.5-p2 を含む）のダウンロードと適用については、を参照してください。 [オンプレミスでのクイックスタートのインストール](../../../installation/composer.md). セキュリティパッチには、セキュリティバグ修正のみが含まれ、完全なパッチに含まれる追加のセキュリティ機能強化は含まれません。

## 適用 `AC-3022.patch` 引き続き DHL を配送業者として提供するため

DHL ではスキーマバージョン 6.2 を導入しており、近い将来、スキーマバージョン 6.0 を廃止する予定です。 DHL 統合をサポートするAdobe Commerce 2.4.4 以前のバージョンは、バージョン 6.0 のみをサポートしています。これらのリリースをデプロイするマーチャントは、 `AC-3022.patch` 早期に DHL を配送業者として提供し続けることができます。 を参照してください。 [配送業者として DHL を引き続き提供するためのパッチを適用する](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) パッチのダウンロードとインストールについては、ナレッジベースの記事を参照してください。

## その他のリリース情報

これらの機能のコードは四半期ごとのリリースにバンドルされていますが、これらのプロジェクトの一部（例：Progressive Web Application（PWA） Studio）も個別にリリースされています。 これらのプロジェクトのバグ修正は、各プロジェクトのドキュメントで利用できる別のプロジェクト固有のリリース情報に記載されています。

## ハイライト

このリリースのハイライトは次のとおりです。

### セキュリティの大幅な強化

このリリースには、15 を超えるセキュリティ修正と platform セキュリティの改善が含まれています。 すべてのセキュリティ修正は 2.4.0-p1 および 2.3.6 に移植されています。

#### リモートコード実行（RCE）およびクロスサイトスクリプティング（XSS）の脆弱性を閉じるのに役立つ 15 を超えるセキュリティ強化

これらの問題に関連する確認された攻撃は、今日まで行われていません。 ただし、特定の脆弱性が悪用されて、顧客情報にアクセスしたり、管理者のセッションを引き継いだりする可能性があります。 これらの問題のほとんどは、攻撃者が最初に管理者へのアクセス権を取得する必要があります。 そのため、IP許可リストに加えるを含め、管理者を守るために必要なすべての手順を実行することをお勧めします。 [二要素認証](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)、VPN の使用、ではなく一意の場所の使用 `/admin`、および適切なパスワードハイジーン。 参照： [Magento可能なセキュリティ更新プログラム](https://helpx.adobe.com/security/products/magento/apsb20-59.html) を参照してください。

#### その他のセキュリティ機能強化

このリリースのセキュリティの改善点は次のとおりです。

* **CAPTCHA** 次の製品領域に保護が追加されました。

   * ストアフロントページと REST およびGraphQL エンドポイントの配置 <!-- MC-36067-->
   * 支払いに関連する REST およびGraphQL エンドポイント。<!-- MC-36064-->

  これらの追加のページに対する CAPTCHA 保護は、デフォルトで無効になっています。 CAPTCHA でカバーされる他のページと同様に、管理者で有効にすることができます。 この保護は、カード攻撃から店舗を保護するためのアンチブルートフォースメカニズムとして追加されています。 参照： [CAPTCHA](https://docs.magento.com/user-guide/stores/security-captcha.html).

* **Cookie の SameSite 属性のサポート**. 新しい cookie 分類システムのGoogle Chrome 適用をサポートするために、cookie を処理するアプリケーションクラスを `SameSite` cookie の属性。 この属性はに設定されています。 `Lax` デフォルトでは、明示的に上書きできます。 <!-- MC-35389-->

* **セキュリティ スキャン ツールの強化**. Adobeは以下と提携しています [楽観的なセキュリティ](https://sansec.io/)はデジタルスキミング防止のリーダーで、8,700 件を超える脅威署名のデータベースをセキュリティスキャンツールに統合しています。 このパートナーシップにより、マーチャントは、マルウェアのプロアクティブな検出と誤検出の削減を通じて、サイトのセキュリティステータスに関するリアルタイムのインサイトを取得できます。 マーチャントは、https://account.magento.com/scannerにアクセスしてツールに登録できます。 詳しくは、 [強化されたセキュリティスキャンツールでストアフロントを保護](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool) ブログ投稿。

{{cve-notice}}

### インフラストラクチャの改善

このリリースには、フレームワークと次の機能領域の品質を向上させるコア品質の機能強化が含まれています。顧客アカウント、カタログ、CMS、OMS、インポート/エクスポート、プロモーションとターゲティング、買い物かごとチェックアウト、ステージングとプレビュー。

### パフォーマンスの向上

* **Redis とMagento間のネットワーク転送サイズの削減**. プラグインのリスト設定が、 `bin/magento di:compile` コマンド。 この設定情報は、範囲に基づいて、生成されたメタデータフォルダーに書き込まれます。 以前は、この情報はキャッシュに保存されていました。 これにより、多くのシナリオでネットワークキャッシュサイズの減少と実行時間の短縮などのパフォーマンスの向上が実現します。<!-- MC-31617-->

* **メッセージキューコンシューマーのパフォーマンスの向上**. 3 つの新しい設定により、コンシューマーキューの CPU 消費の減少がサポートされます。 これらのオプションパラメーターを使用すると、コンシューマーに対する制御を強化し、サーバーリソースを節約できます。 参照： [メッセージキューの設定](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) の説明 `maxIdleTime`, `sleep`、および `onlySpawnWhenMessageAvailable` パラメーター。

* **実行時間の短縮** （用） `bin/magento` コマンド。

### Adobe Stockの統合

このリリースには、Adobe Stock Integration v2.1.0 が含まれています。

### 新しいメディアギャラリー

新しいメディアギャラリーは、管理者でデフォルトで有効になりました。 マーチャントは、メディアギャラリーの画像に対してこれらのアクションを実行できるようになりました。

* 画像を一括削除
* ストアフロントで使用されていない重複した画像と画像を識別して、メディアストレージを最適化します
* 製品およびカテゴリコンテンツや CMS ブロックなど、使用されているストアフロント領域で画像をフィルタリングします
* 画像メタデータの操作
   * Media Gallery にアップロードされた画像からのメタデータの表示
   * 画像メタデータ（タイトル、説明、キーワード）の編集
   * メタデータによる画像の検索

### GraphQL

このリリースでは、次の機能に対するGraphQLのサポートが追加されました。

* **製品レビュー**. 顧客とゲストは製品レビューを書くことができます。 お客様は、製品のレビュー履歴を取得できます。 参照： [製品レビューの作成](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) および [productReviewRatingsMetadata クエリ](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) レビューインフラストラクチャに関する情報の取得について説明します。<!-- MC-32349-->

* **ギフトオプション**. すべてのお客様とゲストは、ご注文にギフトメッセージを追加できます。 お客様は、ギフト包装、ギフト領収書、印刷カードを注文に追加することもできます。 参照： [`setGiftOptionsOnCart` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) および [`updateCartItems` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html)<!-- MC-32345-->

* **注文履歴**. すべての顧客は、請求書、出荷および払戻を含む、オーダー履歴に関する詳細を表示できます。<!-- MC-20635-->

* **カートに追加**. この [`addProductsToCart` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) を使用すると、任意のタイプの製品をアクティブな買い物かごに追加できます。 このような単一目的の突然変異の代わりに、この突然変異を使用することをお勧めします `addSimpleProductsToCart`. _プルリクエストで Yaroslav Rogoza によって送信された修正 [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)  <!-- MC-21513-->

* **保存されている支払い方法**. ログインされたお客様は、マイアカウントに支払いの詳細（Braintreeクレジットカードや PayPal とのBraintreeを含む）を保存できるようになりました。

* **Magento Open Sourceでのウィッシュリストのサポート**. 次のことができます [項目を追加](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) 宛先： [項目を更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) における、および [項目を削除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) ウィッシュリストから。

* **顧客アカウント管理の向上**. が追加されました [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) および [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) 顧客アカウントを管理するための突然変異。 これらの新しいミューテーションには、 `createCustomer` および `updateCustomer` 「突然変異」。 顧客のメールアドレスを変更するには、新しいを使用します [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) 変異。

* **Payflow Pro Vault のサポート**. のGraphQL Vault サポートを追加しました [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) 支払い方法。 _プル要求で Oleh Usik によって送信された修正 [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* GraphQLの更新 [`storeConfig` クエリ](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) 新しい顧客設定を含める。 _プル要求で Oleh Usik によって送信された修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* さんがを追加しました [`requestPasswordResetEmail` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html)：入力したメールアドレスのパスワードリセットメールをトリガーします。 _プル要求で Oleh Usik によって送信された修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **クラルナ GraphQL**. の Klarna GraphQLに関するトピックを追加または更新しました [クラーナの支払方法](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) および [`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

を参照してください。 [GraphQL開発者ガイド](https://devdocs.magento.com/guides/v2.4/graphql/) これらの機能強化の詳細について説明します。

### PWA Studio

PWA Studio v8.0.0 では、次の新機能と機能強化が導入されています。

* デザイントークン、タイポグラフィ、カラー、コアコンポーネントおよびページレイアウトに適用される Venia スタイルガイドを更新しました。 <!-- PWA-519 419-->

* Venia ミニカートエクスペリエンスの改善 <!-- PWA-236-->

* Venia ストアフロントでの複数ロケールおよびローカライズされたコンテンツの初期サポート <!-- PWA-295-->

* Venia ストアフロントのマイアカウントに関する多くの機能強化 <!-- PWA-247-->

参照： [互換性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) PWA Studioのバージョンとその互換性のあるバージョンのリストを確認できます。 機能強化とバグ修正について詳しくは、以下を参照してください [PWA Studioリリース](https://github.com/magento/pwa-studio/releases).

### 機能テストフレームワーク（MFTF）

MFTF 3.1.0 が利用可能になりました。 参照： [機能テストフレームワークの変更ログ](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### ベンダーが開発した拡張機能

このリリースの機能および変更点については、以下の記事を参照してください。

* [Amazon ペイ](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html)

* [dotdigital Engagement Cloud](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html)

* [クラルナ](https://marketplace.magento.com/klarna-m2-klarna.html)

* [頂点クラウド](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Yotpo 製品レビュー](https://marketplace.magento.com/yotpo-module-yotpo.html)

## 修正された問題

2.4.1 コアコードの何百もの問題を修正しました。

### インストール，アップグレード，デプロイメント

<!-- MC-36113-->

* CLI コマンドのストアモジュールの API に依存しているサードパーティ拡張機能を使用したインストールが失敗しなくなりました。 以前は、アプリケーションにこのエラーメッセージが表示されていました。 `The default website isn't defined. Set the website and try again`. これは、2.4.0 の既知の問題でした。

<!-- MC-33273-->

* `bin/magento setup:di:compile` は致命的なエラーをスローしなくなりました。 以前は、このコマンドを初めて実行したときにアプリケーションがエラーをスローしていましたが、2 回目の実行でコンパイルに成功しました。

<!-- MC-34429-->

* プラグインがで宣言されている場合にアップグレードが失敗しなくなりました `Magento\Framework\Encryption\Encryptor`.

<!-- MC-36231-->

* 実行後に一部のテーマがデプロイされない場合に、アプリケーションに情報エラーメッセージが表示されるようになりました `bin/magento setup:static-content:deploy`. 以前は、デプロイメントが正常に完了しても、すべてのパッケージがデプロイされたわけではない場合、アプリケーションにエラーが表示されませんでした。 コマンドを有効な並列処理で実行し、各テーマを展開する時間が長いと、指定された最大実行時間が経過すると、テーマが展開されなくても、このコマンドは正常に終了します。

<!-- MC-35001-->

* この **デフォルトを使用** クラーナ支払い用チェックボックス （**ストア** > **設定** > **売上** > **支払い方法** > **クラルナ**）は、web サイトの範囲が変更されても、期待どおりにチェックされるようになりました。

<!-- MC-33788-->

* アップグレードしても、Galera クラスタが突然失敗することがなくなりました。 以前は、アップグレード直後にインデックスを再作成すると、Galera クラスタが突然終了していました。 アップグレード中、インデックステーブルは変更され、エンジンは次のように変更されます。 `MEMORY` 対象： `InnoDB`. この時点で、これらのテーブルの内容は Galera クラスタのノード間で非同期になりました。 [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* PageBuilder モジュールを無効にしても、製品ページのレンダリングに影響しなくなりました。 以前は、モジュールを無効にすると製品ページのカスタムレイアウトが消え、アプリケーションに空白のページが表示されていました。

<!-- ENGCOM-7219-->

* を使用できるようになりました `bin/magento sampledata:deploy` Composer を使用してMagento Open Sourceをインストールした後、サンプル データを期待どおりにデプロイするには、次の手順を実行します。 以前は、アプリケーションは次のエラーをスローしていました。 `Git installations must deploy sample data from GitHub; see [Clone sample data Git repositories](../../../installation/sample-data/git-repositories.md) for more information`. _Andrii Beziazychnyi がプルリクエストで送信した修正 [27481](https://github.com/magento/magento2/pull/27481)_. [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* 不要なカードの読み込みを排除することで、ストアフロントのパフォーマンスを向上 `Datepicker` コンポーネント。 _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [27860](https://github.com/magento/magento2/pull/27860)_. [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* 実行中 `bin/magento setup:upgrade` キャッシュに関する不要な情報が表示されなくなりました。 _Pull 要求で Satish Subramanian が修正を送信しました [27567](https://github.com/magento/magento2/pull/27567)_. [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- MC-17959 ENGCOM-7629-->

* 実行中 `bin/magento config:show <vendor_module>/general/value` が返されるようになりました `0` または期待される空の文字列です。 以前は、が返されました `Configuration for path: "vendor_module/general/value" doesn't exist`. _プルリクエストで Vadim Malesh が修正を送信しました [28549](https://github.com/magento/magento2/pull/28549)_. [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all` では、言語パラメーターが設定されていない場合、ストアフロントで使用されるすべての言語と、管理者ユーザーが設定するすべての言語をデプロイするようになりました。 （`en_US` デフォルトでは常にがデプロイされます）。 _プルリクエストで Anton Evers によって送信された修正 [28922](https://github.com/magento/magento2/pull/28922)_. [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* バックアップ機能が無効になっている場合、アプリケーションに「バックアップ」メニューが表示されなくなります。 _プル要求で Eden Duong が修正を送信 [29222](https://github.com/magento/magento2/pull/29222)_. [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* カタログ画像ヘルパーの初期化で、の代わりに製品モデルを使用するようになりました。 `DataObject`. _プルリクエストで jmonteros422 によって送信された修正 [29435](https://github.com/magento/magento2/pull/29435)_. [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* 管理者ユーザーは空のを保存できるようになりました **顧客トークンの有効期間（時間）** フィールド （Admin **ストア**  >  **設定**  >  **サービス**  >  **OAuth**  >  **アクセストークンの有効期限**）に設定します。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* この **古い URL の永続的なリダイレクトの作成** カテゴリの設定は、デフォルトで無効になりました。 _プルリクエストで Vadim Malesh が修正を送信しました [28752](https://github.com/magento/magento2/pull/28752)_. [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### Adobe Stockの統合

<!-- ENGCOM-7776-->

* フィルターがクリアされた後、Adobe Stockの画像グリッド内の画像が適切に配置されるようになりました。 _プルリクエストで Nazar Klovanych が修正を送信しました [28366](https://github.com/magento/magento2/pull/28366)_. [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824), [GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* この **使用されている場所** Adobe Stock gallery の画像の詳細ページのフィールドで、画像が商品に関連付けられているかどうかを正確に識別できるようになりました。 _プルリクエストで Nazar Klovanych が修正を送信しました [28798](https://github.com/magento/magento2/pull/28798)_. [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute` 画像の詳細の編集中にキーワードタグを削除すると、パラメーターで指定されていないキーワードへのリンクが削除され、新しいキーワードが挿入されるようになりました。 _プルリクエストで jmonteros422 によって送信された修正 [29207](https://github.com/magento/magento2/pull/29207)_. [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* この `Login failed` マーチャントがクリックしたときにアプリケーションに表示されるメッセージ **ライセンス** 以前に保存したライセンスのないAdobe Stock画像には、HTMLタグは含まれなくなりました。 _プルリクエストで yolouiese によって修正が送信されました [29398](https://github.com/magento/magento2/pull/29398)_. [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* 内のリンクのクリック **使用されている場所** 画像の詳細ページのセクションに、画像でフィルタリングされるすべてのエンティティを表示するグリッドが表示されるようになりました。 アセットフィルターも正しく設定され、表示されます。 以前は、アプリケーションでのアセットタイトルの表示は **適用されたフィルター** セクション。 _プルリクエストで Nazar Klovanych が修正を送信しました [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* アプリケーションに **使用されている場所** 画像が使用中でない場合は、画像の詳細ページの「」セクションに移動します。 _プルリクエストで Nazar Klovanych が修正を送信しました [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* 最大文字数を超える新しい画像タグを追加した際の表示の問題を修正しました。 _プルリクエストで Nazar Klovanych が修正を送信しました [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* 画像の詳細でアセットフィルターを使用して、アセットを期待どおりに確認できるようになりました **使用されている場所** セクション。 _プルリクエストで Nazar Klovanych が修正を送信しました [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* 様々なエンティティで使用される画像に関する情報（例： `page` および `category`）のリストが、画像の詳細ページで修正されました。 _プルリクエストで Nazar Klovanych が修正を送信しました [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-8006-->

* Media Gallery が無効になっている場合に、マーチャントが関連する画像を使用して製品を保存しようとすると、アプリケーションが例外をスローしなくなりました。 _プルリクエストで Nazar Klovanych が修正を送信しました [29492](https://github.com/magento/magento2/pull/29492)_. [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

<!-- ENGCOM-8019-->

* メディアギャラリー内の画像の「使用されている場所」セクションでリンクをクリックすると、画像によってフィルタリングされたエンティティのグリッドが期待どおりに開くようになりました。 以前は、グリッドの「適用されたフィルター」セクションに画像タイトルが表示されていませんでした。 _プルリクエストで Nazar Klovanych が修正を送信しました [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* メディアギャラリーで複数の画像を順番に編集する場合、アプリケーションでタグを正しく追加できるようになりました。 _プルリクエストで Nazar Klovanych が修正を送信しました [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* マーチャントがタグを削除して画像の詳細を保存した後、アプリケーションがAdobe Stock画像のタグを削除するようになりました。 以前は、ページが更新されるまで、タグは削除されませんでした。 _Honeymay Louiese Ignacio がプルリクエストで送信した修正 [29400](https://github.com/magento/magento2/pull/29400)_. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon ペイ

* Amazon Pay は、支払いオプションをレンダリングする前に、ユーザーが既にログインしているかどうかを確認するようになりました。

* 多要素認証と放棄された買い物かごの問題が解決されました。

* Amazon Pay で「」に正しく入力されるようになりました `store name` メールおよびその他の表示されている場所。  次の場合 **ストア名** Amazon Pay 設定の「」フィールドが空の場合、ストアのデフォルトの名前（管理者でストアに指定した名前）が取得されます。

* 辞退シナリオに関するローカライゼーション/翻訳の問題が解決されました。 表示されるテキストが常に英語になるわけではありません。

### バンドル製品

<!-- MC-36281-->

* Inventory がインストールされている配置で製品を作成しようとすると、アプリケーションが例外をスローしなくなりました。 `Magento_InventoryBundleProduct` モジュールが無効です。

<!-- MC-34261-->

* バンドル製品を含む注文に対するオフライン払い戻しが正しく計算されるようになりました。

<!-- MC-24363-->

* シンプルな製品に階層価格も割り当てられている場合、ミニカートにバンドル製品の正しい価格が表示されるようになりました。 [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* マーチャントは、製品の返品を必要とせずに払い戻しを提供するバンドル製品のクレジットメモを作成できるようになりました。 以前は、アプリケーションがエラーをスローしました。 _プルリクエストで Dzung Nguyen が修正を送信 [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* 買い物客が必要なオプションを選択せずにバンドル製品を買い物かごに追加しても、アプリケーションに冗長な検証メッセージが表示されなくなりました。 _プルリクエストで Dzung Nguyen が修正を送信 [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 -->

_Micha ウ Derlatka がプルリクエストで修正を送信 [29256](https://github.com/magento/magento2/pull/29256)_. [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### キャッシュ

<!-- MC-36096-->

* ローカルキャッシュストレージは、で設定された期間保持されるようになりました。 **ストア** > **設定** > **一般** > **Web** > **デフォルトの Cookie 設定**. 以前は、cookie の有効期限は 1 日にハードコードされていたため、この設定と同期されていませんでした。 その結果、ウェルカムメッセージで、期待される期間に顧客の情報を返す保持ができませんでした。

<!-- ENGCOM-7780-->

* ページキャッシュの呼び出し数 `config` が削減されました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [28992](https://github.com/magento/magento2/pull/28992)_. [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* ワニスはもはや A をスローしません `Connection reset by peer` 大きなカタログのインデックスがスケジュールに従って再作成されるとエラーが発生する。 _プルリクエストで Matthew O&#39;Loughlin によって送信された修正 [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-8815](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* 管理で製品を編集した際に、関連のない製品のフルページキャッシュがクリアされなくなりました。 [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### 買い物かごとチェックアウト

<!-- ENGCOM-7950-->

* 直接 SQL クエリはデータプロバイダーに置き換えられ、チェックアウトパフォーマンスが向上しました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [29376](https://github.com/magento/magento2/pull/29376)_. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* 比較リストと最近比較した製品リストの製品が、期待どおりに動作するようになりました。 以前は、比較リストが展開された際に、リストに製品が含まれていることを示すセクションが表示されていても、アプリケーションに製品が表示されていませんでした。

<!-- MC-35329-->

* この **削除** のボタン **SKU 別に買い物かごに追加** 顧客のセクション **買い物かごの管理** 複数の行が選択されている場合、ページが期待どおりに機能するようになりました。

<!-- MC-34999-->

* 入力した数字が有効な SKU と一致するが、これらの数字の大文字と小文字が異なる場合に、SKU で製品を注文しようとすると、アプリケーションがエラーをスローしなくなりました。 以前は、で SKU を入力したとき **マイアカウント** > **SKU で並べ替え** 有効な SKU と完全には一致しない場合、アプリケーションがエラーをスローしました。

<!-- MC-25042-->

* 顧客の配送先住所が国を許可リストで特定された国にあり、そのリストにその国のみが含まれている場合、チェックアウト時にデフォルトで顧客の配送先住所が選択されるようになりました。 以前は、アプリケーションはアドレスをデフォルトとして選択せず、次のエラーメッセージを表示していました。 `Please specify a regionId in shipping address`.

<!-- MC-24043-->

* マーチャントは、を有効にできるようになりました **出荷金額に適用** の「アクション」タブで、次のように設定します **Marketing** > **買い物かご価格ルール** > **新規ルールの追加** 条件 **買い物かご全体に対する固定金額割引** が適用されます。 [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* 買い物客がチェックアウトを開始してからストアフロントのホームページに移動した後、永続性 cookie を設定解除しようとすると、アプリケーションが例外をスローしなくなりました。 以前は、買い物客が「 **君は？** ホームページ上のリンクで、アプリケーションが次の例外をスローしました： `The shipping address is missing. Set the address and try again`. [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* 顧客が在庫切れの製品を買い物かごに追加すると、アプリケーションに「買い物かごに追加」成功メッセージが表示されるようになりました。 以前は、製品は追加されましたが、アプリケーションに成功メッセージが表示されませんでした。

<!-- MC-35989-->

* カスタムアドレス属性が、チェックアウトワークフローの支払いステップに表示されるフォームに期待どおりに含まれるようになりました。

<!-- MC-36060-->

* この **都道府県/地域** 入力ボックスが期待どおりに有効になりました **マイアカウント** > **アドレス帳** > **新しいアドレスを追加**.

<!-- ENGCOM-7746-->

* 以下の場合、配送料に対して期待どおりに割引が適用されるようになりました **出荷金額に適用** が有効になっています。 _プルリクエストで Andrii Kalinich によって送信された修正 [28839](https://github.com/magento/magento2/pull/28839)_. [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* ミニ カートの終了をサポートするコードをリファクタリングし、次の内容を削除しました `closeSidebar` 関数。 適切なクリックバインディングがに追加されました `[data-action="close"]` 要素。 _プルリクエストでユーザーによって送信された修正 [28906](https://github.com/magento/magento2/pull/28906)_. [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* 新しい **買い物かごページに「買い物かごをクリア」ボタンを表示する** 構成設定は、の表示を制御します **カートをクリア** 買い物かごの表示ページの「」ボタン。 デフォルトでは、この設定は無効になっています。 _Pavlo Sydorenko によってプルリクエストで送信された修正 [27917](https://github.com/magento/magento2/pull/27917)_. [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* チェックアウトワークフローの「電話」フィールドに検証が追加されました。 _プル要求で Oleh Usik によって送信された修正 [27537](https://github.com/magento/magento2/pull/27537)_. [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* 買い物かごにダウンロード可能な製品が含まれている場合、 **共有可能** および **買い物かごにダウンロード可能なアイテムが含まれている場合、ゲストのチェックアウトを無効にする** 設定は無効です。 _プルリクエストで Rani Priya が修正を送信しました [23972](https://github.com/magento/magento2/pull/23972)_. [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* 買い物客が顧客アカウントのサイドバーから買い物かごに製品を追加すると、アプリケーションに表示される成功メッセージには、買い物客の買い物かごへのリンクが含まれるようになりました。 _プルリクエストで Ajith によって修正が送信されました [27977](https://github.com/magento/magento2/pull/27977)_. [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* アプリケーションは、チェックアウトワークフローの接頭辞ドロップダウンオプションメニューに対して、デフォルトで空の値を選択するようになりました。 _プルリクエストで Vadim Malesh が修正を送信しました [28238](https://github.com/magento/magento2/pull/28238)_. [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* 買い物かごから複数の項目を削除するとアプリケーションに表示されるポップアップメッセージに、削除対象として選択したエンティティの数とタイプが正確に記述されるようになりました。 _プルリクエストで Nazar Klovanych が修正を送信しました [29490](https://github.com/magento/magento2/pull/29490)_. [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* ゲストユーザーがチェックアウトを完了すると、アプリケーションに顧客登録フォームが表示されるようになりました。

<!-- MC-35607-->

* カスタムの顧客アドレス属性フィールドが、ストアフロントのチェックアウトワークフローで期待どおりに表示されるようになりました。

<!-- ENGCOM-7793-->

* チェックアウト時に、アクティブな見積の現在の顧客グループが取得されるようになりました。 以前は、アプリケーションは、製品が最初に買い物かごに追加されたときにアクティブだった顧客グループを使用していました。その顧客グループがチェックアウト前に削除された場合、アプリケーションはエラーをスローしました。 _プルリクエストで Konstantin が修正を送信しました [28902](https://github.com/magento/magento2/pull/28902)_. [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### カタログ

<!-- MC-31068-->

* このアプリケーションは、チェックアウト前に、買い物客の買い物かごから無効な製品を削除するようになりました。 以前は、チェックアウトが完了する前に無効になった商品を買い物客が買い物かごに追加すると、アプリケーションによって無効になった商品は買い物かごから削除されましたが、その商品は見積もりに残り、買い物客はチェックアウトできませんでした。 [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* アプリケーションは、ベストセラーの製品を期待どおりに並べ替えるようになりました。 以前は、製品数と並べ替え結果のページネーションの両方が間違っていました。 [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* 買い物客は、製品の比較サイドバーの製品名をクリックして、製品の詳細ページを開くことができるようになりました。 _プルリクエストで Eduard Chitoraga が修正を送信 [27451](https://github.com/magento/magento2/pull/27451)_. [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* `children_count` 管理者がカテゴリを削除した際に、値が正の値のままになりました。 以前は、管理者がカテゴリを削除すると、 `children_count` 残りのカテゴリのは負の値でした。 _プル要求で Vitaliy Prokopov によって送信された修正 [28044](https://github.com/magento/magento2/pull/28044)_. [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* アプリケーションでデフォルトオプション （**設定** > **Web** > **デフォルトのレイアウト** > **デフォルトの製品レイアウト**）を選択しました `page_layout` 新製品を作成する際の属性。 以前は、選択したデフォルト値は適用されていませんでした。

<!-- MC-34258-->

* これで、在庫製品の在庫に対して一括処理を正常に実行できます。 以前は、在庫製品の在庫に対して一括アクションを実行しようとすると、空白のページが表示されていました。 開発者モードでアプリケーションに対してこのアクションを実行すると、アプリケーションが次のエラーをスローしました： `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`.

<!-- MC-32552-->

* クリックすると表示される合計レコード数 **製品を追加** カタログカテゴリに製品を追加する際の「製品」タブで、製品の並べ替え順に基づいて変更されなくなりました。

<!-- ENGCOM-7854 -->

* この `{products(filter: {sku: {eq: "some sku"}}) {…}` クエリで、想定される通貨に変換された値が返されるようになりました。 以前は、 `price_tiers.final_price.value` 基本通貨で表示された特別価格。 _プルリクエストで Petkovski Marjan によって送信された修正 [28890](https://github.com/magento/magento2/pull/28890)_. [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### Cleanup

<!-- ENGCOM-7281-->

* 管理販売注文グリッド チェックボックスのミスアライメントを修正しました。 _プルリクエストで Tu Nguyen が修正を送信しました [27642](https://github.com/magento/magento2/pull/27642)_. [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* 販売注文住所保存ハンドラーの配送先住所 ID ゲッターのスペルミスを修正しました。 _プルリクエストで Konstantin が修正を送信しました [28810](https://github.com/magento/magento2/pull/28810)_. [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* を修正しました `getRegionNameExpresion` メソッド名：至 `getRegionNameExpression`. _Pierre Grimaud がプルリクエストで修正を送信しました [28832](https://github.com/magento/magento2/pull/28832)_. [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* 冗長 `init` メソッドがから削除されました `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php` および `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`. _プル要求で Oleh Usik によって送信された修正 [28650](https://github.com/magento/magento2/pull/28650)_. [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` polyfill はから移動されました。 `base` 対象： `frontend`. _プルリクエストで Ihor Sviziev が修正を送信しました [28749](https://github.com/magento/magento2/pull/28749)_. [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* Adobe Commerceのロゴを更新し、のメイン README ファイルから不要なスペースを削除しました。 `magento/magento2` リポジトリ。 _プルリクエストで Rafael Cora r̻ Gomes によって送信された修正 [28891](https://github.com/magento/magento2/pull/28891)_. [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* 不要な `overflowed` クラスがミニ買い物かごサイドバーウィジェットから削除されました。 _プルリクエストでユーザーによって送信された修正 [28963](https://github.com/magento/magento2/pull/28963)_. [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* 出荷ページの誤った CSS セレクターが修正されました。 _プルリクエストで Tu Nguyen が修正を送信しました [28639](https://github.com/magento/magento2/pull/28639)_. [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* この `lib/internal/Magento/Framework/App/Request/Http.php` ファイルは、ロジックを最適化し、冗長な変数割り当てを削除し、関数内での戻り値の過剰な使用を排除することで簡略化されました。 _プル要求で Chris Snedaker によって送信された修正 [28608](https://github.com/magento/magento2/pull/28608)_. [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* この `bin/magento module:status` コマンドは、複数のモジュール名を引数として受け入れるようになりました。 _プルリクエストで Chandru Rajendran によって送信された修正 [28250](https://github.com/magento/magento2/pull/28250)_. [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* のクラス説明に誤字が修正されました。 `\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`. _プルリクエストで Benjamin Rosenberger が修正を送信しました [29451](https://github.com/magento/magento2/pull/29451)_. [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* この `TierPriceManagement` 冗長なコードを削除するために、クラスがリファクタリングされました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [29202](https://github.com/magento/magento2/pull/29202)_. [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* `autoload.php` は、読みやすさとリターン速度を向上させるためにリファクタリングされました。 _Vitaliy Ryaboy がプルリクエストで送信した修正 [28923](https://github.com/magento/magento2/pull/28923)_. [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### CMS コンテンツ

<!-- MC-35971-->

* 選択したデフォルトのストア表示の「階層」タブに、選択した親ページが期待どおりに表示されるようになりました。

<!-- ENGCOM-7602-->

* 新しいストア表示に、異なるストア表示のページと同じ URL キーを持つ CMS ページが含まれる場合、ストア表示の作成時にアプリケーションがエラーをスローしなくなりました。 _プルリクエストで Vadim Malesh が修正を送信しました [28421](https://github.com/magento/magento2/pull/28421)_. [GitHub-28357](https://github.com/magento/magento2/issues/28357)

### 設定可能な製品

<!-- MC-33523-->

* 設定可能な製品編集の現在のバリエーション リストのページネーションの問題が修正されました。

<!-- MC-33406-->

* 買い物客が設定可能な製品のオプションを選択するたびに、アプリケーションは関連製品価格ボックスを更新しなくなりました。 以前は、買い物客が設定可能な製品のオプションを選択するたびに、アプリケーションによって価格ボックスが更新されていました。

<!-- MC-29882-->

* 管理者による注文の作成ページに、設定可能な製品の正しい価格と、カスタマイズ可能なオプションが表示されるようになりました。 予想通り、表示される価格は、子製品の価格とカスタムオプションの価格の合計です。 以前は、アプリケーションにはカスタムオプション価格のみが表示されていました。 [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* 買い物かごの価格ルールが適用された場合、注文概要に正しい割引額が表示されるようになりました。 以前は、出荷割引を計算する際に、ルールで金額が正しく丸められていませんでした。

<!-- MC-33765-->

* 制限付き範囲の管理者アカウントから作成された管理者ユーザーアカウントで、期待どおりに属性を持つ設定可能な製品を作成できるようになりました。 以前は、アプリケーションは次のエラーをスローしていました。 `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`.

<!-- ENGCOM-7787-->

* POSTを使用した場合に、検証エラーがスローされなくなりました `/V1/products` を使用して設定可能な商品に `int` 値は 0 です。 以前は、アプリケーションは次のエラーをスローしていました。 `Product with id "%1" does not contain required attribute "%2"."` _プルリクエストで Vadim Malesh が修正を送信しました [29001](https://github.com/magento/magento2/pull/29001)_. [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* 親製品の設定オプション属性が、新しい設定可能な製品に割り当てられなくなりました `size` 属性。 _プル要求で Abel Truong によって修正が送信されました [27339](https://github.com/magento/magento2/pull/27339)_. [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### の Cookie

<!-- ENGCOM-7156-->

* アプリケーションは最大 1 つを作成するようになりました `mage-translation-file-version` および `mage-translation-storage` セッションごとの cookie。 _プルリクエストで Ihor Sviziev が修正を送信しました [27364](https://github.com/magento/magento2/pull/27364)_. [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* メッセージキューコンシューマー設定が拡張されて、コンシューマーの制御とサーバーリソースの節約に役立つ新しいパラメーターが追加されました。これにより、コンシューマーキューの CPU 消費が削減される可能性があります。

   * `maxIdleTime` キューからの新しいメッセージの最大待機時間を秒単位で定義します。
   * `sleep` 新しいメッセージがキューに入っているかどうかを確認するまでのスリープ時間を秒単位で指定します。
   * `onlySpawnWhenMessageAvailable` 関連するキューに使用可能なメッセージが存在する場合にのみコンシューマーを起動するかどうかを指定します。 この設定は、すべてのコンシューマーに対してデフォルトでグローバルに有効になっていますが、コンシューマーごとに設定できます。

<!-- ENGCOM-7863-->

* `cron` 次のような式  `3/10 * * * *` は現在、期待どおりにスケジュールされています。 _プルリクエストで Anton Evers によって送信された修正 [28930](https://github.com/magento/magento2/pull/28930)_. [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes` は、期限切れの引用符をすべて一度に読み込まなくなりました。 以前は、期限切れの引用符がすべて同時に読み込まれたため、アプリケーションは次の致命的なエラーで失敗していました。 `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`,

### CSS

<!-- ENGCOM-7678-->

* 次の場合、アプリケーションで CSS が重複しなくなりました **重大な CSS** が有効になっています。 _プルリクエストで Tu Nguyen が修正を送信しました [28480](https://github.com/magento/magento2/pull/28480)_. [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* サーバー側の LESS コンパイラーで、実行時に期待どおりにリモート CSS ファイルをすべてインポートできるようになりました `bin/magento setup:static-content:deploy -f`. 以前は、アプリケーションはリモートファイルをインポートせず、エラーをスローしていました。 [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### 顧客

<!-- MC-33679-->

* 管理者の顧客アドレスの地域名が期待どおりに翻訳されるようになりました。

<!-- MC-36226-->

* この **都道府県** フィールドが、アドレスを編集ページ（**マイアカウント** > **アドレス帳**）に設定します。

<!-- MC-34655-->

* 顧客がをクリックしても、アプリケーションがエラーをスローしなくなりました。 **Submit** 非表示の reCAPTCHA が有効になっているストアフロント全体のフォームで複数回ボタンが表示されます。 以前は、このボタンを複数回クリックすると、次のような内部エラーが発生していました。 `Internal error: Make sure you are using reCaptcha V3 api keys`.

<!-- MC-33522-->

* 管理者から削除された顧客を保存すると、エラーメッセージのみが生成されるようになりました。 以前は、アプリケーションで空白のページが表示され、次の文字列を含むレポートが生成されていました。 `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`.

<!-- MC-33357-->

* アカウントが削除されたばかりの顧客のアドレスを管理者が保存しようとすると、アプリケーションにエラーメッセージが期待どおりに表示されるようになりました。 以前は、アプリケーションに空白のメッセージボックスが表示されていました。

<!-- MC-33150-->

* チェックアウトワークフローとアドレス帳の住所フィールドのラベルが、一貫性を保つために編集されました。

<!-- ENGCOM-7244 -->

* フロントエンドのラベルは、値が null でない場合、ラベルを格納するようにフォールバックするようになりました。 以前は、顧客属性はデフォルトのフロントエンドラベルを使用していました。 _プルリクエストで Toan Nguyen によって修正が送信されました [27064](https://github.com/magento/magento2/pull/27064)_. [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* この `sortOrder`レイアウト XML のリンク数が修正されました。 以前は、この順序は逆になり、降順で使用されていました。 _プルリクエストで Tu Nguyen が修正を送信しました [27340](https://github.com/magento/magento2/pull/27340)_. [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### ディレクトリ

<!-- MC-32271-->

* 都道府県ドロップダウンメニューの形式が、管理全体で統一されました。

### dotdigital

* カタログに存在しない製品 SKU が注文に含まれている場合でも、注文の同期が失敗しなくなりました。

* 空の製品カテゴリは、web インサイトデータに含まれなくなりました。

* Web 動作トラッキングが、特定のテーマ設定を持つマーチャントで機能するようになりました。 新しいフォールバックセレクターでこれを解決します。

* cron を使用して顧客同期が実行された際に、購読者ステータスデータフィールドに空の値が含まれなくなりました。 （アプリのエミュレーションにより、この問題が解決されます）。

* デフォルトレベルで dotdigital アカウントが有効になっていても、メインの web サイトで無効になっている場合、アドレス帳のマッピングが期待どおりに機能するようになりました。

* プラス （「+」）記号を含んだメールアドレスに対して、クーポンが（クーポン生成に外部の動的コンテンツ URL を使用して）生成されるようになりました。

* 連絡先が次の場合に再登録されなくなりました `last_subscribed_at` 値が null です。

* 以前のバージョンに影響を与えたアップグレードエラー（4.5.2 以降）は解決されました。

* 4.5.3 で導入されたリグレッションの問題が修正されました。この問題は、購読者のエクスポートを準備する際に、購読者のステータスを取得する方法を使用する場合に影響を与えました。

* 同期された購読者の合計数（ログおよび画面に表示）が正しく計算されるようになりました。

### ダウンロード可能

<!-- MC-35026-->

* マイダウンロード製品エリアに、グループ化された製品の一部である購入したダウンロード可能な製品へのリンクが期待どおりに表示されるようになりました。

<!-- MC-34262-->

* ダウンロード可能な製品のクリック **サンプル** 管理製品ページのボタンで、サンプルが期待どおりにダウンロードされるようになりました。 以前は、をクリックした場合 **サンプル**。アプリケーションに次のエラーが表示されました： `The product that was requested doesn't exist. Verify the product and try again`.

<!-- ENGCOM-7757-->

* 買い物客は、在庫切れのダウンロード可能な製品のサンプルをダウンロードできるようになりました。 以前は、買い物客がサンプルをダウンロードしようとすると、アプリケーションで新しいタブが開きましたが、情報メッセージが表示されなかったか、ダウンロードプロセスが開始されませんでした。 _プルリクエストで Vadim Malesh が修正を送信しました [28898](https://github.com/magento/magento2/pull/28898)_. [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* 買い物客がダウンロード可能な製品の配送先住所を設定しようとするとアプリケーションに表示される例外メッセージが改善されました。 _Micha ウ Derlatka がプルリクエストで修正を送信 [28904](https://github.com/magento/magento2/pull/28904)_. [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* 製品の `stock_item` rest PUT呼び出しを使用して更新する場合、データは更新され、ダウンロード可能な商品のリンクとサンプルは期待どおりに保持されます `stock_item` 値。 以前は、製品のアップデート後に、製品にコンテンツをダウンロードするためのリンクが含まれなくなりました。 _プルリクエストで Vadim Malesh が修正を送信しました [28799](https://github.com/magento/magento2/pull/28799)_. [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* ダウンロード可能な製品のみを含む注文の配送先住所を顧客が設定した場合に、より詳しい情報を示すメッセージが表示されるようになりました。

### 電子メール

<!-- MC-32789-->

* 注文の作成後に顧客メールが変更された場合、アプリケーションは、注文の変更に関するメール通知を正しい顧客メールに送信するようになりました。

<!-- MC-36015-->

* 顧客に送信される注文更新メールに、正しい注文ステータスが含まれるようになりました。 以前は、注文ステータスがから変更された場合 `processing` 別の状態では、注文メールにステータスの変更が反映されていませんでした。

<!-- MC-34107-->

* ゲストのチェックアウト時に、既存のアカウントに関する誤解を招くメッセージがアプリケーションに表示されなくなりました。 以前は、ゲストがチェックアウトページに移動してから出荷ページに戻ると、アプリケーションに次のエラーが表示されていました。 `You already have an account with us. Sign in or continue as guest`.

<!-- MC-33905-->

* カスタムメールテンプレートで、ネイティブのデフォルトのメールテンプレートと同じ要素が読み込まれるようになりました。 以前は、変数値を含む一部の要素が欠落していました。

<!-- ENGCOM-7576-->

* メールのプレビューテンプレートから不要な CSS が削除されました。 _プルリクエストで Tu Nguyen が修正を送信しました [27828](https://github.com/magento/magento2/pull/27828)_. [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* フッターによって既に表示されているテキストを複製する、メールテンプレートのテキストが削除されました。 _プルリクエストで Pawe ウ Tylek が修正を送信しました [27356](https://github.com/magento/magento2/pull/27356)_. [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* 製品アラートのメールが、アラートを登録したストアから送信されるようになりました。 以前は、このメールは常にデフォルトストアから送信されていました。 _プルリクエストで Maciej Pawwwowski によって修正が送信されました [26534](https://github.com/magento/magento2/pull/26534)_. [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* 複製 `customer.name` 変数がメールテンプレートから削除されました。 _プルリクエストで Pawe ウ Tylek が修正を送信しました [29054](https://github.com/magento/magento2/pull/29054)_. [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33700-->

* でメールを送信するメールテンプレートを作成できるようになりました  `Content-Type: "text/plain"`. 以前は、アプリケーションは、テンプレートで指定されたコンテンツタイプを無視していました。 _プルリクエストで twoonesixdigital によって送信された修正 [26474](https://github.com/magento/magento2/pull/26474)_. [GitHub-26471](https://github.com/magento/magento2/issues/26471)

### フレームワーク

<!-- MC-35893-->

* この **データを送信する時刻** 管理者のフィールド **ストア** > **設定** > 一般 > **高度なレポート** ページが正しくレンダリングされるようになりました。

<!-- MC-34153-->

* 買い物客は、注文リストが複数のページにまたがる場合に、ページごとに表示される注文数を変更できるようになりました。 以前は、買い物客が最後の注文ページに移動して、ページごとに表示される注文数を変更しようとすると、アプリケーションに次のメッセージが表示されていました。 `You have placed no orders`. これは 2.4.0 の既知の問題でした。

<!-- MC-35020-->

* レベル 2 のキャッシュを実装する際に、カテゴリに製品を追加できるようになりました。

<!-- MC-29755-->

* `X-Magento-Tags` ヘッダーが、HTTP 仕様で許可されているサイズを超えなくなりました。 以前は、多くの製品を含むカテゴリページで、 `X-Magento-Tag` 503 エラーを引き起こしたヘッダー。

<!-- MC-34257-->

* `sales_order_shipment_track_save_commit_after` rest API を使用して出荷を作成した場合、が期待どおりにトリガーされるようになりました。

<!-- MC-33898-->

* 以下の条件を満たす場合、アプリケーションに情報エラーメッセージが表示されるようになりました `di compile` 存在しない依存関係が原因で失敗します。 以前は、表示されるメッセージには、例外が発生したクラスが識別されていませんでした。

<!-- MC-32929-->

* Redis が許可されたすべてのメモリを使用する際に、アプリケーションが次の致命的なエラーをスローしなくなりました。 `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'.`

<!-- MC-18021-->

* 買い物客は、次の場合に買い物かごに複数の製品を追加できるようになりました `Persistent` モジュールが無効です。 [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### 一般的な修正点

<!-- MC-36048-->

* 管理者（**ストア** > **属性** > **製品**）に、検索条件を満たすすべての製品が表示されるようになりました。 以前は、アプリケーションにレコードが表示されず、レコードを並べ替えるには、検索結果の最初のページに移動する必要がありました。

<!-- MC-36343-->

* で URL を囲む不要な引用符とエスケープ `tracking.phtml` が削除されました。

<!-- MC-35998-->

* この `var/log/system.log` は、ユーザーが静的ディレクトリの下にある既存のリソースファイルにアクセスしようとしたときに、SCD OnDemand および実稼動モードが有効になっている場合に、より正確なメッセージを表示するようになりました。 アプリケーションで 404 エラーがログに記録されるようになりました。 以前は、開発者モードでエラーが発生した場合に記録されるのと同じメッセージがアプリケーションによって記録されていました。

<!-- ENGCOM-7286-->

* JavaScript の縮小が正しく機能するようになりました。 縮小ファイルリゾルバーで、変数がグローバルスコープにリークされなくなりました。 以前は、 `ctx`, `origNameToUrl`、および `baseUrl` ウィンドウの下の変数が漏洩しました。 _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [27622](https://github.com/magento/magento2/pull/27622)_. [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* オブジェクトの作成を妨げるエラーをデバッグする際に、元の例外メッセージを出力およびログに記録するようになりました。 以前は、メッセージはログにのみ記録されていました。 _プルリクエストで Marvin Hinz によって修正が送信されました [26572](https://github.com/magento/magento2/pull/26572)_. [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* データベースの変更がコミットされた後のコールバックの実行が改善されました。 以前は、1 つのコールバックが例外で失敗した場合、すべてのコールバックが失敗していました。 _プルリクエストで Alok Patel が修正を送信しました [27134](https://github.com/magento/magento2/pull/27134)_. [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* 依存関係が定義されていないモジュールの Mixin では、次のエラーがスローされなくなりました。 `TypeError: Cannot read property 'map' of null`. _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [27690](https://github.com/magento/magento2/pull/27690)_. [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* ストレージのポリフィルは、次の場合にのみロードおよび適用されるようになりました `localStorage` または `sessionStorage` は使用できません。 _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [27619](https://github.com/magento/magento2/pull/27619)_. [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* 複数ページのストアフロントの注文リストが、買い物客が 2 番目または後続の結果ページから 1 ページに表示される結果の数を変更した場合に、期待どおりに動作するようになりました。 以前は、買い物客がに表示される検索結果の数を変更すると、アプリケーションにこのエラーが表示されていました **マイアカウント** > **マイ注文** リスト : `You have placed no orders`. _プルリクエストで Vadim Malesh が修正を送信しました [28417](https://github.com/magento/magento2/pull/28417)_. [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* 非推奨 `addWarning` メソッドはに置き換えられました `addWarningMessage` セキュリティモジュール内のメソッド。 _プル要求で kishorekumarkesavan によって送信された修正 [28264](https://github.com/magento/magento2/pull/28264)_. [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* を使用して生成されたコード `bin/magento` コマンドラインコマンドが、要件とコーディング標準に一致するようになりました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [28351](https://github.com/magento/magento2/pull/28351)_. [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- ENGCOM-7511-->

* 属性の保存 `backend_type = static` は、のコンテンツを削除しなくなりました `frontend_class` フィールド。 _プルリクエストで jiten-patel によって送信された修正 [27369](https://github.com/magento/magento2/pull/27369)_. [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* 不要なコードと `responsive.js` は、テーマによって読み込まれたファイルから削除されました。 _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [27617](https://github.com/magento/magento2/pull/27617)_. [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* 検証がに追加されました **シンボルの数** 管理者 CAPTCHA 設定ページのフィールド。 _プル要求で Eden Duong が修正を送信 [29199](https://github.com/magento/magento2/pull/29199)_. [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* RSS フィードが正しく読み込まれるようになりました。 以前は、ページが更新されたときにフィードは期待どおりに読み込まれましたが、初回は読み込まれませんでした。 _プルリクエストで Vadim Malesh が修正を送信しました [29455](https://github.com/magento/magento2/pull/29455)_. [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* 買い物客が再度ログインした際に、期限切れの永続セッションが期待どおりに更新されるようになりました。

<!-- MC-35230-->

* で設定されたパスワードの有効期間 **ストア** > **設定** > **詳細** > **Admin** は光栄です。 以前は、をクリックした場合 **パスワードをお忘れですか？** パスワードのリセットを求めるメッセージが表示されたら、パスワードのリセットを省略できます。

<!-- MC-34369-->

* クーポンコードは、指定した製品にのみ適用されるようになりました。 以前は、アプリケーションはカート内のすべての製品にクーポンコードを適用しました。 [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* 在庫または価格の更新が発生した場合に、買い物かごの有効期限設定が再設定されなくなりました。 以前は、買い物かごが 24 時間以内に有効期限が切れるように設定され、在庫の更新または価格の更新が発生すると、インデクサーによってが入力されていました `updated_at table`：有効期限を再設定します。

<!-- MC-33313-->

* 管理者がアクティブな買い物かごを持つ顧客を顧客グループに割り当てると、アプリケーションが致命的なエラーをスローしなくなりました。

<!-- ENGCOM-7834 -->

* ツールバーオプションの選択 **デベロッパーツール**  >  **ネットワーク**  製品ページで Chrome ブラウザーを実行しても初期化されない `toolbar.js` 2 回。 _プルリクエストで Pawe ウ Tylek が修正を送信しました [28838](https://github.com/magento/magento2/pull/28838)_. [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* アプリケーションは、管理者ユーザーの ACL 役割 ID を製品カテゴリツリーキャッシュ ID に追加するようになりました。 これにより、範囲が制限された管理者が期待どおりに表示できるカテゴリツリーが制限されます。 _プルリクエストで quangdo-aligent によって送信された修正 [27429](https://github.com/magento/magento2/pull/27429)_. [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* 買い物客は、チェックアウト時にギフトメッセージオプションを選択できます。 GraphQLでは、様々なタイプの買い物かご商品に対するギフトメッセージオプションについて説明するようになりました。 参照： [`setGiftOptionsOnCart` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) および [`updateCartItems` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html). Oleh Usik によってプル要求で送信された修正（_F） [28519](https://github.com/magento/magento2/pull/28105), [27956](https://github.com/magento/magento2/pull/27956), [28072](https://github.com/magento/magento2/pull/28072), [28072](https://github.com/magento/magento2/pull/28072). [GitHub-28519](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* 顧客とゲストは製品レビューを書くことができます。 また、お客様は製品のレビュー履歴を取得することもできます。 参照： [製品レビューの作成](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) および [productReviewRatingsMetadata クエリ](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) レビューインフラストラクチャに関する情報の取得について説明します。 _プルリクエストで Eduard Chitoraga が修正を送信 [27882](https://github.com/magento/magento2/pull/27882)_. [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7968 -->

* この [`addProductsToCart` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) を使用すると、任意のタイプの製品をアクティブな買い物かごに追加できます。 このような単一目的の突然変異の代わりに、この突然変異を使用することをお勧めします `addSimpleProductsToCart`. _プルリクエストで Yaroslav Rogoza によって送信された修正 [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- MC-34187-->

* 新しい `availableStores` クエリを実行すると、（現在のストアに基づいて）同じ web サイト内で使用可能な複数のストアの設定属性のリストが返されます。 Web サイトのリストは公開されません。 参照： [`availableStores` クエリ](https://devdocs.magento.com/guides/v2.4/graphql/queries/available-stores.html). _プルリクエストで Dmitriy Gallyamov が修正を送信しました [28794](https://github.com/magento/magento2/pull/28794)_. [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* GraphQLでは、認証トークンのみを使用して、ユーザーの種類と ID を取得するようになりました。 以前GraphQLは、認証トークンが空の場合に、アクティブな顧客の cookie を使用してこの情報を取得していました。 _プルリクエストで Alexander Taranovsky によって修正が送信されました [27373](https://github.com/magento/magento2/pull/27373)_. [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* が追加されました [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) および [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) 顧客アカウントを管理するための突然変異。 これらの新しいミューテーションには、 `createCustomer` および `updateCustomer` 「突然変異」。 顧客のメールアドレスを変更するには、新しいを使用します [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) 変異。 _Micha ウ Derlatka がプルリクエストで修正を送信 [28888](https://github.com/magento/magento2/pull/28888)_. [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* この `updateCustomer` ミューテーションでは、無効なを設定できなくなりました `INT` の値 `gender` 引数。 _プルリクエストで Alexander Taranovsky によって修正が送信されました [28487](https://github.com/magento/magento2/pull/28487)_. [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* を使用できます `subscribeEmailToNewsletter` 顧客にニュースレターを購読するためのバリエーション。 参照： [`subscribeEmailToNewsletter` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/subscribe-email-to-newsletter.html). _プルリクエストで Alexander Taranovsky によって修正が送信されました [27586](https://github.com/magento/magento2/pull/27586)_. [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* の冗長ロジックを削除 `setShippingMethodsOnCart` ミューテーションリゾルバー。 _プルリクエストで Alexander Taranovsky によって修正が送信されました [27349](https://github.com/magento/magento2/pull/27349)_. [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* のテストカバレッジを追加しました `Please provide Email of sender` に関連するエラー `sendEmailToFriend` 変異。 _プルリクエストで Alexander Taranovsky によって修正が送信されました [28034](https://github.com/magento/magento2/pull/28034)_. [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* この `products` クエリで、デフォルトのストア表示に対して期待どおりに製品属性オプションラベルを返すようになりました。 以前は、このクエリは、管理者用に設定された製品属性オプションラベルを返していました。 _プルリクエストで Dmitriy Gallyamov が修正を送信しました [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* カスタム属性の集計で、ストア固有のオプション値が返されるようになりました。 _プルリクエストで Dmitriy Gallyamov が修正を送信しました [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* 製品の集計で返される価格間隔を、数値にのみできるようになりました（ワイルドカードは使用できません）。 _プルリクエストで Dmitriy Gallyamov が修正を送信しました [28745](https://github.com/magento/magento2/pull/28745)_. [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* この `categoryList` フラグメントを使用する際に、クエリが正しい応答を返すようになりました。 _プルリクエストで Ulzii によって送信された修正 [28710](https://github.com/magento/magento2/pull/28710)_. [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* GraphQL製品検索で、設定済みのカテゴリ権限が考慮されるようになりました。 以前は、製品検索でが無視されていました **Enable （有効）** 設定（**ストア**  >  **設定**  >  **カタログ**  >  **カタログ** > **カテゴリ権限**）に設定します。 _プルリクエストで Petkovski Marjan によって送信された修正 [28757](https://github.com/magento/magento2/pull/28757) プライベートリポジトリのプル要求 271`partners-magento2ee`_. [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* を使用して、買い物かごに製品を追加できるようになりました `addSimpleProductToCart` カート内の他のアイテムが在庫切れになった場合。 以前は、アプリケーションは次のエラーを返していました。 `Some of the products are out of stock`. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* デフォルトのGraphQL `Category` メソッドは、カテゴリの位置で期待どおりに並べ替えるようになりました。 _Derrik Nyomo がプルリクエストで修正を送信しました [29301](https://github.com/magento/magento2/pull/29301)_. [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* Magento Open Sourceにウィッシュリストのサポートを追加しました。 次のことができます [項目を追加](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) 宛先： [項目を更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) における、および [項目を削除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) ウィッシュリストから。 _プルリクエストで Eduard Chitoraga が修正を送信 [28205](https://github.com/magento/magento2/pull/28205)_. [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* が追加されました [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) および [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) 顧客アカウントを管理するための突然変異。 これらの新しいミューテーションには、 `createCustomer` および `updateCustomer` 「突然変異」。 顧客のメールアドレスを変更するには、新しいを使用します [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) 変異。

* のGraphQL Vault サポートを追加しました [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) 支払い方法。 _プル要求で Oleh Usik によって送信された修正 [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* GraphQLの更新 [`storeConfig` クエリ](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) 新しい顧客設定を含める。 _プル要求で Oleh Usik によって送信された修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* さんがを追加しました [`resetPassword` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _プル要求で Oleh Usik によって送信された修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* さんがを追加しました [`resetPassword` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _プル要求で Oleh Usik によって送信された修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* さんがを追加しました [`requestPasswordResetEmail` 突然変異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html)：入力したメールアドレスのパスワードリセットメールをトリガーします。 _プル要求で Oleh Usik によって送信された修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* の Klarna GraphQLに関するトピックを追加または更新しました [クラーナの支払方法](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) および[`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

### 画像

<!-- ENGCOM-7691-->

* サムネール画像のHTMLマークアップが改善されました。 _プルリクエストで Tu Nguyen が修正を送信しました [28642](https://github.com/magento/magento2/pull/28642)_. [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### インポート/エクスポート

<!-- MC-35479-->

* この `error_report.csv` ファイルがコンテンツと共にダウンロードされ、内で使用できるようになりました。 `var/import_history/` ディレクトリを正しく設定します。 以前は、このファイルは読み込み後に生成されませんでした。

<!-- ENGCOM-7616-->

* CSV ファイルを使用して製品を読み込むと、が生成されるようになりました。 `error_report.csv` ファイルを正しく入力します。 以前は、アプリケーションによってファイルが生成されましたが、読み込みの完了後に削除されました。 _プルリクエストで Vadim Malesh が修正を送信しました [28460](https://github.com/magento/magento2/pull/28460)_. [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* コードベース全体で冗長なクラスインポートを削除しました。 _プル要求で Oleh Usik によって送信された修正 [28696](https://github.com/magento/magento2/pull/28696)_. [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* 地域が定義されていない国の地域を含む顧客アドレスがアプリケーションで正常に読み込まれるようになりました。 以前は、アプリケーションは次のエラーをスローしていました。 `Please enter a valid region`.

<!-- MC-33277-->

* 新しい書き出しをスケジュールするときに、マーチャントがエンティティタイプを選択すると、アプリケーションは正しいエンティティ属性セットを読み込むようになりました。

<!-- MC-32956-->

* における商品の位置 `catalog_category_product` 管理者が管理者で製品を作成してカテゴリに割り当てる際に、テーブルが期待どおりに更新されるようになりました。 以前は、新製品の位置には常に 0 の値が割り当てられていました。

<!-- MC-34939-->

* 顧客データが管理者から正常に書き出され、書き出しデータグリッドに顧客データが期待どおりに表示されるようになりました。 以前は、書き出し中にメモリ割り当てに関連するエラーが発生していました。

<!-- MC-34657-->

* 読み込んだ CSV ファイルで、関連する製品情報が期待どおりに取り込まれるようになりました。 以前は、CSV ファイルを初めて読み込む際に、関連する製品情報が一貫してアップロードされませんでした。

<!-- MC-37424-->

* で未使用の構成パラメーターを削除しました `AdvancedPricing.php`. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### 索引

<!-- ENGCOM-7073-->

* `Magento_CacheInvalidate` は、実行時に大きなタグパターンを正しく処理するようになりました `PURGE`. `sendPurgeRequest` は、呼び出し元がを使用する代わりに、タグの配列を処理するようにリファクタリングされました `implode()`. _プルリクエストで Matthew O&#39;Loughlin によって送信された修正 [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* 共有インデクサーのステータスが「」になりました **有効** 実行後 `bin/magento indexer:status` 再インデックス後。 以前は、共有インデクサーには、 **無効** 完全な再インデックス後のステータス。

### インフラストラクチャ

<!-- MC-37243-->

* PHP 7.4.9 を実行するデプロイメントでカタログおよび製品ページを読み込む際に問題が発生しなくなりました。 以前は、カタログおよび製品ページを読み込もうとすると、アプリケーションによってこのエラーがスローされていました。 `There has been an error processing your request. Exception printing is disabled by default for security reasons`. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* 実稼動モードでレイアウトをレンダリングした際に発生したすべての例外が、例外ログファイル（`var/report`）に設定します。 以前は、アプリケーションは、これらのメッセージを重大な問題としてシステムログに記録していました。

<!-- ENGCOM-7154-->

* の増加により、大きなページで正規表現が正しく機能するようになりました `ipcre.backtrack_limi`t および `pcre.recursion_limit` 約 1000000 まで。 _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [27270](https://github.com/magento/magento2/pull/27270)_. [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* インターセプターの生成が改善されました。 `} else {` 文がインターセプターから削除されました。 `array_map` はに置き換えられました `foreach`. _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [27902](https://github.com/magento/magento2/pull/27902)_. [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* クラス全体で配列の作成に一貫性が生まれました（`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`）に設定します。 _Nathan de Graaf がプルリクエストで修正を送信 [28515](https://github.com/magento/magento2/pull/28515)_. [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* フレームワーク名前空間でプラグインを禁止するベストプラクティスに従うために、プラグインはフレームワークから移行されました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [27965](https://github.com/magento/magento2/pull/27965)_. [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7778-->

* これで、新しいを使用できます `UrlFilterApplier` 製品にフィルターを適用するコンポーネント`cms_page`、および `cms_block` GET URL パラメーターを使用するグリッド。 _Gabriel da Gama がプルリクエストで送信した修正 [28932](https://github.com/magento/magento2/pull/28932)_. [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-7713-->

* アプリケーションは、 `Undefined class constant` インターセプターの生成時にエラーが発生しました。 _プルリクエストで Vova Yatsyuk が修正を送信しました [28797](https://github.com/magento/magento2/pull/28797)_. [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* 既に使用されている名前を使用して統合を保存すると、アプリケーションが統合例外をスローしても、フォームデータが保持されるようになりました。 _Aditya Yadav によってプルリクエストで送信された修正 [26660](https://github.com/magento/magento2/pull/26660)_. [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* アプリケーションは切り捨てなくなりました `X-Forwarded-For` ヘッダーを 32 文字に。 _プルリクエストで Ihor Sviziev が修正を送信しました [27221](https://github.com/magento/magento2/pull/27221)_. [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* カスタム管理ドメインを使用する場合、リダイレクトが内部かどうかを確認するロジックが管理者で正しく機能するようになりました。 以前は、このロジックに関する問題により、多くの管理者がデフォルトストアのホームページにリダイレクトすることがありました。 _プルリクエストで Vadim Malesh が修正を送信しました [29066](https://github.com/magento/magento2/pull/29066)_. [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* に関する問題 `styles-old.less` ファイルが削除され、リンティングでエラーが識別されなくなりました。 _プルリクエストで Tu Nguyen が修正を送信しました [28895](https://github.com/magento/magento2/pull/28895)_. [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php` はリファクタリングされました。 _Vitaliy Ryaboy がプルリクエストで送信した修正 [28975](https://github.com/magento/magento2/pull/28975)_. [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php` は、クラスを読みやすくするためにリファクタリングされました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [29341](https://github.com/magento/magento2/pull/29341)_. [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* 組み込み web サーバーの README ファイルが更新されて、すべてのElasticsearchパラメーターが含まれるようになりました。 _プルリクエストで Yevhenii Dumskyi によって送信された修正 [29300](https://github.com/magento/magento2/pull/29300)_. [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* この `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave` プラグインが、期待どおりに値を返すようになりました。 以前は、このプラグインは値を返さず、その結果、ストア表示を保存するとエラーが発生していました。 _プルリクエストで Pieter Hoste によって修正が送信されました [29035](https://github.com/magento/magento2/pull/29035)_. [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* のマジックメソッドに次のサポートを追加しました。 `DataObject`:

   * をサポートする新しい拡張機能 `get/set/has/uns` マジックメソッド（を使用） `__call`）
   * すべての呼び出しを DataObject コンテナに転送する、SessionManager のサポート
   * 拡張機能のカバレッジのテスト
   * フィルターされたエラーチェックの更新されたテスト
   * phptan チェックレベルを 0 から 1 に増加しました。 _プルリクエストで Oleksandr Kravchuk が修正を送信しました [27905](https://github.com/magento/magento2/pull/27905)_. [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface` は、文字列以上になります。 の制限 `magentoConfigFixture` 文字列のみは、以前のプルリクエストの誤った結果であり、元に戻されました。 _プルリクエストでフーマンの Kristof が修正を送信しました [29305](https://github.com/magento/magento2/pull/29305)_. [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* この `convertConfigTimeToUtc` 間違ったパラメーターをに送信したために、メソッドが致命的なエラーをスローしなくなりました `Phrase` コンストラクタ。 _Pull 要求で Kos Rafa によって送信された修正 [29483](https://github.com/magento/magento2/pull/29483)_. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* 価格フィルターが、グリッドデータで次の場合に期待どおりに機能するようになりました `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition` および `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()` を含むインデックスを持つ配列を返します `from` または `to` 文字列データ。 以前は、アプリケーションは次のエラーをスローしていました。 `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`. _Nikita Sarychev がプルリクエストで修正を送信しました [29214](https://github.com/magento/magento2/pull/29214)_. [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* カテゴリページへのHTMLの追加をサポートするための拡張ポイントが追加されました。 これにより、以前のプルリクエストで発生したバグが修正されます。 _プルリクエストで iGerchak によって送信された修正 [29291](https://github.com/magento/magento2/pull/29291)_. [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### 階層型ナビゲーション

<!-- MC-25043-->

* レイヤー化されたナビゲーションサイドバーに、両方のオプションを持つブール値属性が表示されるようになりました（**はい**/**なし**）に設定し、一致する製品数を返します。 以前は、レイヤーナビゲーションはを返しませんでした **なし** Elasticsearchを使用したデプロイメントでのブール値属性のオプション。

<!-- ENGCOM-7493-->

* スウォッチのレイヤー化されたナビゲーションフィルターが、Magento Open Source全体で使用される標準フィルターと一致するようになりました。 _プルリクエストで Bartwomiej Szubert が修正を送信しました [28015](https://github.com/magento/magento2/pull/28015)_. [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### ログ

<!-- ENGCOM-7692-->

* デプロイメントが開発者モードのみの場合、壊れた参照エラーがすべてログに記録されるようになりました。 以前は、実稼動モードでのデプロイメントについてもエラーが 1 つ記録されていましたが、エラーログが肥大化していました。 _プルリクエストで Bartwomiej Szubert が修正を送信しました [28735](https://github.com/magento/magento2/pull/28735)_. [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### メディアギャラリー

<!-- ENGCOM-8014-->

* メディアギャラリー設定 UI （管理 **ストア**  >  **設定**  >   **詳細**  >  **システム** ）を再編成しました。 _プルリクエストで Shankar Konar が修正を送信しました [29433](https://github.com/magento/magento2/pull/29433)_. [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* カバーするテストを追加しました **使用されている場所** メディアギャラリー内の画像のリンク。 _プルリクエストで Nazar Klovanych が修正を送信しました [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1969](https://github.com/magento/adobe-stock-integration/issues/1693)

### MFTF

<!-- ENGCOM-7963 -->

* この `AdminSubmitAdvancedInventoryFormActionGroup` , `AdminClickOnAdvancedInventoryLinkActionGroup`、および  `AdminSetStockStatusConfigActionGroup` アクショングループは、ベストプラクティスに従ってテスト内で使用されるようになりました。 _Oleh USIA によってプルリクエストで送信された修正 [29386](https://github.com/magento/magento2/pull/29386)_. [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup` が製品グリッドの検索に使用されるようになりました。 _プル要求で Oleh Usik によって送信された修正 [29385](https://github.com/magento/magento2/pull/29385)_. [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup` は、クリックするために使用されるようになりました **完了** 「カテゴリを検索」ポップアップで、以下の操作を行います。 _プル要求で Oleh Usik によって送信された修正 [28989](https://github.com/magento/magento2/pull/28989)_. [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` は、ストアフロントの顧客ログインに使用される一連のアクションを置き換えるために使用されるようになりました。 _Pull 要求で Satish Subramanian が修正を送信しました [28113](https://github.com/magento/magento2/pull/28113)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest` は、MFTF のベストプラクティスを満たすようにリファクタリングされています。 _Kate Kyzyma がプルリクエストで修正を送信 [28361](https://github.com/magento/magento2/pull/28361)_. [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* MFTF 規則を満たすようにテスト名が変更されました。 _プルリクエストで Evgeny Levinsky によって送信された修正 [27839](https://github.com/magento/magento2/pull/27839)_. [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### 新規アクショングループ

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _プル要求で Oleh Usik によって送信された修正 [29472](https://github.com/magento/magento2/pull/29472)_. [GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup`_プル要求で Oleh Usik によって送信された修正 [29142](https://github.com/magento/magento2/pull/29142)_. [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _プル要求で Oleh Usik によって送信された修正 [28993](https://github.com/magento/magento2/pull/28993)_. [GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _プル要求で Oleh Usik によって送信された修正 [29000](https://github.com/magento/magento2/pull/29000)_. [GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup` および `AdminProductFormCategoryNotExistInCategoryListActionGroup` _プルリクエストで Alexander Steshuk が修正を送信 [28287](https://github.com/magento/magento2/pull/28287)_. [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _プル要求で Oleh Usik によって送信された修正 [29133](https://github.com/magento/magento2/pull/29133)_. [GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _プル要求で Oleh Usik によって送信された修正 [29007](https://github.com/magento/magento2/pull/29007)_. [GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _プル要求で Oleh Usik によって送信された修正 [29134](https://github.com/magento/magento2/pull/29134)_. [GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### 新しいテスト

<!-- ENGCOM-7600 -->

* 管理者ユーザーとして CMS ページを削除するテストを追加しました。 _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28112](https://github.com/magento/magento2/pull/28112)_. [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* さんがを追加しました `StorefrontShareCustomerWishlistActionGroup` 無効なメールアドレスで顧客のウィッシュリストの共有をテストします。 ウィッシュリスト共有の既存のテスト（`StorefrontShareWishlistEntityTest`）がリファクタリングされています。 `StorefrontCustomerShareWishlistActionGroup` は非推奨（廃止予定）になりました。

<!-- ENGCOM-7682 -->

* の実装を確認するテストを追加しました **X 左しきい値のみ** 設定。 _プル要求で Oleh Usik によって送信された修正 [27549](https://github.com/magento/magento2/pull/27549)_. [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### ニュースレター

<!-- MC-34714-->

* を使用したニュースレター購読者リストの書き出し `EXCEL XML` オプションを指定すると、すべての行が期待どおりに書き出されるようになりました。 以前は、書き出されたデータには、すべての行ではなく、ページのページネーションの値のみが含まれていました。

<!-- ENGCOM-7522-->

* ニュースレターのサブスクリプションメールで、他のニュースレター関連メールと同じHTMLタグが使用されるようになりました。 _プルリクエストで Pawe ウ Tylek が修正を送信しました [27357](https://github.com/magento/magento2/pull/27357)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7788-->

* 管理者ユーザーとしてニュースレターの購読者を削除するためのテストを追加しました。 _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28972](https://github.com/magento/magento2/pull/28972)_. [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* config ステートメントに disallowed オプションを含むゲストのニュースレター購読のテストを追加しました。 このテストは非推奨（廃止予定）に置き換わるものです `VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest` および `StorefrontCreateNewSubscriberActionGroup`. _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28872](https://github.com/magento/magento2/pull/28872)_. [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### 注文件数

<!-- ENGCOM-7858-->

* この `GetAssetIdByContentFieldInterface` とその実装： `MediaContent` モジュールでは、Adobe Stock統合の拡張が許可されるようになりました。 `MediaGallery` フィルター機能。 _Gabriel da Gama がプルリクエストで送信した修正 [29058](https://github.com/magento/magento2/pull/29058)_. [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* この `CustomerAddressId` 新しく作成された顧客の値は、引用符で検証されるようになりました。 _プルリクエストで Andrii Kalinich によって送信された修正 [29139](https://github.com/magento/magento2/pull/29139)_. [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* 合計が 0 のクレジット メモの注文ステータスは現在です `Closed`. 以前は、アプリケーションは次の順序ステータスをレポートしていました `Complete`. _プルリクエストで Andrii Kalinich によって送信された修正 [29023](https://github.com/magento/magento2/pull/29023)_. [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### 支払い方法

<!-- MC-34363-->

* クリックすると必須のクレジットカードのデータを入力するよう求めるメッセージが表示されるようになりました **Submit** 有効な支払い情報を入力しない管理注文の場合。 以前は、支払い入力フィールドが無効で、ページが非アクティブになっても、Braintreeカードバリデーターでエラーはスローされませんでした。

<!-- MC-33494-->

* アカウントにクレジットカード（Braintree）が保存されている顧客について、管理者から作成した注文の発送方法を変更できるようになりました。 以前は、別の配送方法を選択した場合、保存されたカードが選択されず、アプリケーションによって注文されませんでした。

#### PayPal

<!-- MC-33879-->

* チェックアウトワークフローの注文レビューページに、チェックアウト時に配送方法が変更されたBraintree注文を通じて、PayPal の正しい配送額が表示されるようになりました。 以前は、お客様がチェックアウトワークフローの PayPal 注文の確認ページで配送方法を変更した場合、アプリケーションは注文合計を正しい方法で更新しませんでした。

<!-- MC-34152-->

* マーチャントは、PayPal を使用して承認された注文を正常にキャンセルできるようになりました。 以前は、アプリケーションは注文をキャンセルせず、次のエラーを表示していました。 `Declined: 10601-Authorization has expired`.

<!-- MC-33330-->

* 最初に別の注文を完了した後に PayPal 支払いポップアップウィンドウを閉じることで、注文をキャンセルしてもカートが空にならなくなりました。

### パフォーマンス

* 3 つの新しい設定により、コンシューマーキューの CPU 消費の減少がサポートされます。 これらのオプションパラメーターを使用すると、コンシューマーに対する制御を強化し、サーバーリソースを節約できます。 参照： [メッセージキューの設定](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) の説明 `maxIdleTime`, `sleep`、および `onlySpawnWhenMessageAvailable` パラメーター。

<!-- MC-31617-->

* プラグインのリスト設定が、 `di:compile` コマンド。 この設定情報は、範囲に基づいて、生成されたメタデータフォルダーに書き込まれます。 以前は、この情報はキャッシュに保存されていました。 その結果、次のようなパフォーマンスの向上が実現します。

   * ネットワークキャッシュサイズが減少しました
   * 多くのシナリオの実行時間が改善されました。

<!-- ENGCOM-7290-->

* アプリケーションは、適切なスライダーウィジェットをオンデマンドで読み込むようになり、ページの読み込みが改善されました。 タッチスライダーウィジェットのカスタマイズは別のファイルに移動され、互換性のあるデバイスにのみ読み込めるようになりました。 適切なスライダーウィジェットタイプが、範囲バインディングが実際にページで使用される場合にのみ読み込まれるようになりました。 _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [27616](https://github.com/magento/magento2/pull/27616)_. [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* 複数の同時注文でのチェックアウトのパフォーマンスが向上しました。

<!-- MC-25062-->

* インポートプロセスで一括挿入を実行し、再インデックスプロセスで select からの大きな挿入を同時に実行すると、デッドロックが発生しなくなりました。 以前は、アプリケーションにこのエラーが表示されていました。 `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### レビュー

<!-- MC-33405-->

* 固有キー `entity_pk_value-entity_type-store_id` がに追加されました `review_entity_summary` 同じ製品 ID で行が重複して作成されるのを防ぐテーブル （`entity_pk_value`）に設定します。 以前は、この一意のキーがないと、同じ製品 ID と SQL エラーで行が重複することがありました。

### 売上

<!-- MC-35675-->

* アプリケーションは、次のステータスを割り当てなくなります `Complete` ゼロ支払が必要な注文を請求した後。

<!-- MC-35888-->

* REST API で生成される新規出荷メールに、管理者が手動で作成した出荷と同じ出荷情報と顧客情報が含まれるようになりました。 以前は、このメールには、顧客名、トラッキング情報、注文された製品、その他の注文情報は含まれていませんでした。

<!-- MC-35837-->

* 管理者からメールを読み込んだりカスタマイズしたりすると、ゲストのユーザー名が請求書や出荷関連のメールで期待どおりに表示されるようになりました。

<!-- MC-35707-->

* PDFの請求書が、注文が行われた店舗ビューの言語に翻訳されるようになりました。 以前は、PDFの請求書は管理者の言語で翻訳されていました。

<!-- MC-35858-->

* クレジットメモページから期待どおりに払い戻しを発行できるようになりました。 [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* ストアフロントの「注文」ページに表示されるローカライズされた地域名が、正しく翻訳されるようになりました。 以前は、管理者で編集しない限り、地域名は指定されたロケールに基づいていませんでした。

<!-- MC-35633-->

* POSTを通じて作成された出荷 `/rest/V1/shipment` エンドポイントで注文を正しく更新するようになりました。 以前は、アプリケーションによって出荷が作成されましたが、出荷ステータスは処理状態のままでした。

<!-- ENGCOM-7639 -->

* クレジットカードには、注文を行った店舗の範囲から派生した支払い方法が表示されるようになりました。 以前は、クレジットメモには、デフォルトのストア範囲を定義した名前が表示されていました。 _プルリクエストで Ledian Hymetllari によって送信された修正 [27582](https://github.com/magento/magento2/pull/27582)_. [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### 検索 {#search-heading}

<!-- MC-31304-->

* QuickSearch を使用して、管理者顧客ビューから属性別に製品を検索できるようになりました。 以前は、カタログ検索結果ページで例外が発生していました。

<!-- MC-32518-->

* 製品属性を追加した後、アプリケーションでは、カテゴリページに設定可能な製品が期待どおりに表示されるようになりました。

<!-- MC-33952-->

* Elasticsearch結果に、各ストアビューの属性オプションの正しい値が含まれるようになりました。 If a `Dropdown` または `Multiple Select` デフォルト以外のストアビューの属性に、デフォルトのストアビューとは異なるオプション値が表示されるようになりました。Elasticsearchは、その値にインデックスを作成したり、結果にその値を含む商品を返すようになりました。 以前は、Elasticsearchはその値をインデックス化しないか、結果でその値を持つ商品を返していました。

<!-- MC-35013-->

* SKU での検索が、Elasticsearchを使用した詳細検索で期待どおりに機能するようになりました。 以前は、SKU で検索しようとすると、アプリケーションに次のエラーメッセージが表示されていました。 `We can't find any items matching these search criteria. Modify your search`.

<!-- ENGCOM-7222-->

* 詳細検索では、買い物客がマイナス価格でフィルタリングできなくなりました。 _Rohan Hapani がプルリクエストで送信した修正 [27359](https://github.com/magento/magento2/pull/27359)_. [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* 新しいシノニムグループ フォームで、スコープ値が期待どおりにリセットされるようになりました。 _Pull 要求で Satish Subramanian が修正を送信しました [29206](https://github.com/magento/magento2/pull/29206)_. [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### 送料

<!-- MC-34734-->

* アップグレード後のアプリケーションで、配送用テーブルの料金が正しく計算されるようになりました。 以前は、配送用テーブルの料金は VAT を除いた正味価格に基づいて計算されていました。

<!-- MC-33737-->

* FedEx を配送方法として指定する注文のチェックアウトワークフローで、配送料が正しい通貨で表示されるようになりました。

<!-- MC-33267-->

* UPS から出荷された注文の出荷ラベルの複数ページPDFに、正しい数が表示されるようになりました。

<!-- MC-35514-->

* パッケージを作成ページの JavaScript コンポーネントに関する問題が解決されました。 以前は、アプリケーションには次の項目は表示されませんでした： **配送ラベルを作成** このページのチェックボックスで、既存の注文の配送ラベルを作成できなかった。

### サイトマップ

<!-- ENGCOM-7924-->

* のサイトマップ `robots.txt` はストア固有になりました。 _プルリクエストで Vadim Malesh が修正を送信しました [29331](https://github.com/magento/magento2/pull/29331)_. [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* エンコードされた値は、で正しくエスケープされるようになりました `sitemap.xml` ファイル。 以前は、製品名や画像タイトルにエンコードされた文字を含めると、生成されたサイトマップが無効でした。

### ストア

<!-- MC-35853-->

* 以前に作成したストア表示を削除しても、分割データベース設定でのデプロイメントでエラーが発生しなくなりました。 以前は、アプリケーションが例外をスローしていました。

<!-- MC-32634-->

* エクスポートできるようになりました `config.php` と 1 つの web サイトのデフォルトの web サイトコードを使用して、複数の web サイトのデプロイメントの別の web サイトにアプリケーションをインストールして設定します。 以前は、書き出し後にデフォルトのストアと表示が表示されなくなり、ストアフロントでエラーが発生していました。

### Swagger

<!-- ENGCOM-7720-->

* Swagger で顧客トークンを生成できるようになりました。 以前は、有効な顧客アクセス情報が入力されたときに Swagger が応答コードを生成せず、アプリケーションに次のエラーが表示されていました。 `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`. _プルリクエストで Vadim Malesh が修正を送信しました [28822](https://github.com/magento/magento2/pull/28822)_. [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### スウォッチ

<!-- ENGCOM-7845-->

* スウォッチを使用した設定可能な製品で、買い物客がクリックすると階層価格が表示されるようになりました **編集** カートに入っています。 以前は、チェックアウト前にアプリケーションの買い物かごに階層価格が表示されていませんでした。 _Pull 要求で Satish Subramanian が修正を送信しました [29137](https://github.com/magento/magento2/pull/29137)_. [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* 設定可能な製品バリエーションについて、階層の価格が期待どおりに表示されるようになりました。

### 税

<!-- MC-36049-->

* マーチャントが製品の属性セットから固定製品税金属性の割り当てを解除した後、アプリケーションによって製品のストアフロントに固定製品税金属性が表示されなくなりました。

### テスト

<!-- ENGCOM-7874-->

* PHPUnit 9 エラーは、単体テストで修正されました。 _プルリクエストで Anton Evers によって送信された修正 [29244](https://github.com/magento/magento2/pull/29244)_. [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* 有効期限が切れた後に割引が適用された発注書を承認するための単体テストが追加されました。これにより、注文が全額注文され、発注書の合計は更新されません。 _Fix submitted by Joan He in pull request [18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_. [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface` は、統合テストの対象になりました。 _プルリクエストで jmonteros422 によって送信された修正 [29493](https://github.com/magento/magento2/pull/29493)_. [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* 関数がに追加されました `\Magento\TestFramework\TestCase\WebapiAbstract` これにより、テストで期待される結果と実際の結果の大きなネストされた配列を比較でき、テスターが実際の結果で無関係なキーを無視できるようになります。 _プルリクエストで Jekabs から送信された修正 [29458](https://github.com/magento/magento2/pull/29458)_. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* 実際の値での期待値の逆転を修正しました。 `app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`. _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [29271](https://github.com/magento/magento2/pull/29271)_. [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7142 -->

* 連続したテストを実行した際の静的プロパティのシリアル化とシリアル化の解除に関する問題が解決されました。 _Pavel Bystritsky によってプルリクエストで送信された修正 [26175](https://github.com/magento/magento2/pull/26175)_. [GitHub-28319](https://github.com/magento/magento2/issues/28319), [GitHub-29313](https://github.com/magento/magento2/issues/29313)

<!-- ENGCOM-7886 -->

* 使用 `ObjectManager` テスト中にクラスをインスタンス化するは、単体テストで new キーワードに置き換えられました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [29272](https://github.com/magento/magento2/pull/29272)_. [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* これらのケースのテストカバレッジが追加されました `updateCustomer` ミューテーション：無効な生年月日、無効なメールアドレス、空の顧客の姓。 _プルリクエストで Alexander Taranovsky によって修正が送信されました [28304](https://github.com/magento/magento2/pull/28304)_. [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* この `ApiFunctional TestFramework` GraphQL クライアントはヘッダーを正しく解析するようになりました。 [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### テーマ

<!-- MC-34397-->

* ユーザーエージェントルールで追加されたテーマが、実行時に期待どおりに影響を受けるようになりました `bin/magento catalog:images:resize`. 以前は、次の場合に、ストアに割り当てられたテーマのみが影響を受けていました `bin/magento catalog:images:resize` が実行されました。

### 翻訳とロケール

<!-- MC-20372-->

* 管理者がを変更すると、アプリケーションがエラーをスローしなくなりました **日付** 管理者製品の作成時のフィールド、または管理者ロケールが中国語または日本語の場合の保存時。 [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* アプリケーションがエリア（フロントエンドまたは `adminhtml`）を選択してから、インライン翻訳マークアップをレンダリングします。 以前は、に対する API 呼び出しを行っていました。 `POST /V1/integration/admin/token` インライン翻訳が有効な場合、資格情報が正しくないと、API 応答のエラーメッセージの周りにインライン翻訳マークアップが含まれてしまいます。 _Zach Nanninga がプルリクエストで送信した修正 [28856](https://github.com/magento/magento2/pull/28856)_. [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* ブルガリアの地域が `directory_country_region` テーブル。 _Nikola Lardev がプルリクエストで修正を送信しました [27957](https://github.com/magento/magento2/pull/27957)_. [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* 管理者のタイトルとボタン **顧客**  >  **新しいアドレスを追加** および **製品を編集**  >  **詳細在庫** モデルを翻訳できるようになりました。 _Pull 要求で Satish Subramanian が修正を送信しました [28174](https://github.com/magento/magento2/pull/28174)_. [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* FPT という用語を、管理者が翻訳できるようになりました  **ストア**  > **設定**  > **売上**  > **税**  > **固定製品税**. _プルリクエストで Vadim Malesh が修正を送信しました [28108](https://github.com/magento/magento2/pull/28108)_. [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* この **発送する** チェックアウトワークフローの配送先住所モーダルのボタンラベルが、他のボタンに使用されるキャメルケースに一致するように変更されました。 この大文字と小文字は、翻訳ファイルで使用されている大文字と小文字を一致させるようになりました。 以前は、ケースの不一致により、このラベルは翻訳されていませんでした。 _WK によってプル要求で送信された修正 [28547](https://github.com/magento/magento2/pull/28547)_. [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### UI

<!-- ENGCOM-7514-->

* プライバシーと cookie ポリシーページが表示される際に、ページフッター内のプライバシーと cookie ポリシーリンクがアクティブなリンクとして表示されるようになりました。 _Pull 要求で Satish Subramanian が修正を送信しました [28004](https://github.com/magento/magento2/pull/28004)_. [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* 管理者から選択した注文に関連する請求書の「請求書のコメント」テキスト領域にあるカーソルの位置のずれを修正しました **売上** > **注文件数**.

<!-- MC-36044-->

* 新しい注文を作成ページが表示されます **SKU 別に製品を追加** および **製品を追加** ボタンは期待どおりに動作します。

<!-- MC-35974-->

* 選択した製品の製品評価が利用可能な場合、アプリケーションにはレビューを編集ページが正しく表示されるようになりました。

<!-- MC-35475-->

* Safari が実行されているiPhoneで、管理者の顧客編集ページが正しく表示されるようになりました。

<!-- MC-35370-->

* 新しい注文を作成ページでの不要なスクロールを修正しました。

<!-- MC-35345-->

* を直接クリック **輸出税率** 「新規税務処理基準の追加」ページ（**ストア**  >  **税務処理基準**）に保存されています。 `tax_rates.csv` ファイルを正しく入力します。 以前は、商人は、の端をクリックする必要がありました **輸出税率** ボタン。 これは、2.4.0 の既知の問題でした。

<!-- MC-35313-->

* この **カートに選択項目を追加** 買い物かごの下部にあるボタンが期待どおりに動作するようになりました。 これは、2.4.0 の既知の問題でした。

<!-- MC-35296-->

* この **更新** のボタン **最近表示した製品** 顧客のアクティビティページの「」セクションが期待どおりに動作するようになりました。 以前は、をクリックした場合 **更新**、製品リストは更新されず、ページがスクロールされました。

<!-- MC-35412-->

* アプリケーションの「条件」タブに、顧客の生年月日の選択に使用されるカレンダーアイコンが正しく表示されるようになりました **顧客** > **セグメント** > **セグメントを追加**.

<!-- MC-35658-->

* Internet Explorer 11.x で買い物客がこのページをスクロールしても、チェックアウトワークフローの「チェックアウトの概要」セクションがちらつきなくなりました。

<!-- MC-34602-->

* アプリケーションのストアフロントカテゴリページに SKU 別の注文ウィジェットが正しく表示されるようになりました。 以前は、このウィジェットのHTMLコードはレンダリングされておらず、 **SKU のリストを読み込む** リンク。

<!-- MC-37444-->

* を使用して無効にされた UI コンポーネント `this.disabled(true)` ストアフロントに表示されなくなります。 [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* アプリケーションは、最近表示された製品ウィジェットをモバイル表示で適切に表示するようになりました。 _プルリクエストで Tu Nguyen が修正を送信しました [27572](https://github.com/magento/magento2/pull/27572)_. [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* 管理者から商品の位置を変更すると、ストアフロントの商品の位置に反映されるようになりました。 _プルリクエストで Oleg Aleksin によって修正が送信されました [28150](https://github.com/magento/magento2/pull/28150)_. [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* ログインフォームのスタイルが、空白テーマの他のフォームのスタイルと一致するようになりました。 コンテナコントロールのラップ入力フィールドの幅を設定する不要なスタイルが削除されました。 _プルリクエストで Tu Nguyen が修正を送信しました [28084](https://github.com/magento/magento2/pull/28084)_. [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* この **OK** ミニ買い物かごからの削除製品の確認ポップアップのボタンが期待どおりに動作するようになりました。 _プルリクエストで Tu Nguyen が修正を送信しました [28083](https://github.com/magento/magento2/pull/28083)_. [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* ページの読み込み中に、製品ギャラリーの要素が点滅しなくなりました。 _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [27871](https://github.com/magento/magento2/pull/27871)_. [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* フィールドの幅を制御する CSS クラスが、管理全体を通して開始時間要素に期待どおりに適用されるようになりました。 _プルリクエストで Shankar Konar が修正を送信しました [29511](https://github.com/magento/magento2/pull/29511)_. [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* 利用条件のテキストラベルに、長いテキスト文字列を正しく表示できるようになりました。 _プルリクエストで Bartwomiej Szubert が修正を送信しました [29413](https://github.com/magento/magento2/pull/29413)_. [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* 注文失敗ページのタイトルが、正確さを期すために書き換えられました。 以前は、買い物客が注文をキャンセルすると、アプリケーションにこのタイトルのページが表示されていました。 `We received your order!`. _Angelo Romano がプルリクエストで送信した修正 [29410](https://github.com/magento/magento2/pull/29410)_. [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* キャンセルされた注文ビューページのキャンセルされた項目の合計数が、キャンセルされた注文ビューページで正しく識別されるようになりました。 以前は、このフィールドにはラベルが付いていました **合計期限**. _Madhu Rajawat がプルリクエストで送信した修正 [27516](https://github.com/magento/magento2/pull/27516)_. [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* 設定可能な製品を作成ページの切り替えボタンが期待どおりに動作するようになりました。 _プルリクエストで Tu Nguyen が修正を送信しました [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* 詳細属性プロパティページの詳細属性プロパティブロックアイコンが期待どおりに動作するようになりました。 _プルリクエストで Tu Nguyen が修正を送信しました [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* 新しいモジュールの設定を保存しようとすると、システム設定ページの「管理者」セクションが展開されて、必須フィールドが期待どおりに表示されるようになりました。 _プルリクエストで Bartwomiej Szubert が修正を送信しました [28285](https://github.com/magento/magento2/pull/28285)_. [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* モードがに設定されている場合の拡大鏡の動作を修正しました `inside`. _Sean van Zuidam がプルリクエストで修正を送信 [29077](https://github.com/magento/magento2/pull/29077)_. [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* 買い物客がページフッターの購読フィールドに無効なメールアドレスを入力した場合に発生する、気が散るような長い入力フィールド幅を修正しました。 _Dipesh Rangani がプルリクエストで送信した修正 [27106](https://github.com/magento/magento2/pull/27106)_. [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* An `Uncaught ReferenceError` 新しいタグを追加してマウスポインターをその上に移動すると、開発コンソールにエラーが表示されなくなりました。 _プルリクエストで Nazar Klovanych が修正を送信しました [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1700](https://github.com/magento/magento2/issues/1700)

### URL の書き換え

<!-- MC-34483-->

* ストアビューを別の web サイトに移動しても、URL がリセットされなくなりました。 以前は、アプリケーションで CMS と製品 URL の書き換えが誤って再生成されていました。

<!-- MC-33028-->

* ストア表示が別のストアに割り当てられても、既存のカタログ URL の書き換えがアプリケーションで期待どおりに保持されるようになりました。 以前は、アプリケーションはストア固有の URL の書き換えを削除しました。

### ワニス

<!-- ENGCOM-7761-->

* Varnish を再起動しても、503 エラーが発生しなくなりました。 _プルリクエストで Ihor Sviziev が修正を送信しました [28137](https://github.com/magento/magento2/pull/28137)_. [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### Vault

<!-- MC-34674-->

* 次の場合、クレジット・カード番号は保存されません **後で使用するために保存** チェックアウトワークフローの「支払い」セクションのチェックボックスが選択されていません。

### Web API フレームワーク

<!-- MC-35838-->

* 複数の web サイトを持つマーチャントは、REST API を使用して、画像および画像の役割の継承を維持しながら、製品を作成および更新できるようになりました。 以前は、マーチャントが REST API を使用して商品を作成および更新し、ストア表示のために商品を更新した場合、デフォルトの画像の役割がそのストア表示のために読み込まれて保存されていました。 その結果、ストア表示の画像の役割は、更新後、デフォルトの範囲から継承されなくなります。

<!-- MC-36419-->

* リソース権限によってアクセスが許可されている場合、スコープ指定されていない統合ユーザーアカウントから REST API を介してリソースにアクセスできるようになりました。

<!-- MC-35975-->

* 検索条件フィルターが、設定可能な製品の作成時に使用される製品属性に対して、期待どおりに機能するようになりました。 [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* 顧客グループ ID のPOSTが検証されるようになりました `/rest/V1/customers` リクエスト。 以前は、無効なを使用しても、アプリケーションにエラーメッセージが表示されませんでした `group_id` これらのリクエストで。 _プルリクエストで Vadim Malesh が修正を送信しました [28903](https://github.com/magento/magento2/pull/28903)_. [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* 匿名の REST 呼び出しに対しては、PHP セッションはデフォルトでは作成されません。 以前は、セッションが不要な場合でも開始されていました。 _プルリクエストで Maciej Pawwwowski によって修正が送信されました [26032](https://github.com/magento/magento2/pull/26032)_. [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* 様々な REST エンドポイントを使用して、カスタムオプションを含む注文を更新しても、カスタムオプションの情報が削除されなくなりました。 以前は、の値 `info_buyRequest` が削除されました。 _プルリクエストで Vadim Malesh が修正を送信しました [28483](https://github.com/magento/magento2/pull/28483)_. [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* GETの使用 `V1/customers/me` 今すぐ栄誉 **顧客アカウントの共有** 設定（管理者 **ストア** >  **設定**  >  **顧客**  >  **顧客設定**  > **アカウント共有オプション**）に設定する必要があります。 _Pavel Bystritsky によってプルリクエストで送信された修正 [28213](https://github.com/magento/magento2/pull/28213)_. [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* アドレス関連の拡張属性は、データ配列として設定できます。 以前は、を含むPOSTリクエストが  `extension_attributes` はに送信されました `estimate-shipping-methods`. 以前のコミットで導入されたこのバグは、に設定された拡張属性に影響を与えていました `Magento\Quote\Api\Data\AddressInterface` それは物体ではなかった。 _Alexander Menk がプルリクエストで送信した修正 [27338](https://github.com/magento/magento2/pull/27338)_. [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* PUTを使用して顧客を更新する際に、1 つのフィールドを指定できるようになりました `V1/customers/:id` エンドポイント。 以前は、エンドポイントで、顧客のメールおよび顧客の作成に必要なその他のフィールドを指定する必要がありました。 _プルリクエストで Vadim Malesh が修正を送信しました [28332](https://github.com/magento/magento2/pull/28332)_. [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### ウィッシュリスト

<!-- MC-35622-->

* お客様は、ウィッシュリスト自体からウィッシュリスト内の商品の数量を変更できるようになりました。 以前は、アプリケーションは製品数量を更新せず、メッセージも表示しませんでした。

<!-- MC-35618-->

* 顧客は、ウィッシュリスト自体から、ウィッシュリスト内のグループ化された製品の数量を変更できるようになりました。 以前は、アプリケーションは製品数量を更新しなかったか、メッセージを表示しませんでした。

<!-- ENGCOM-7580-->

* ポリフィル： `Map`, `WeakMap`, `FormData`、および `MutationObserver` は必要なときにのみ読み込まれるようになりました。 _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7561-->

* ウィッシュリストの更新プロセスでは、ウィッシュリストの項目とその説明を同時に更新できるようになりました。 _プルリクエストで Eduard Chitoraga が修正を送信 [28222](https://github.com/magento/magento2/pull/28222)_. [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7660-->

* 顧客のウィッシュリストを許可されているメール数を超えて共有するためのテストを追加しました。 _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- MC-36250-->

* 管理者は、デフォルト以外のストアからウィッシュリストに顧客によって追加された設定可能な商品を設定できるようになりました。 以前は、顧客がデフォルト以外のストアから設定可能な製品も追加した場合、アプリケーションがエラーをスローしていました。

<!-- ENGCOM-7660-->

* 顧客のウィッシュリストを許可されているメール数を超えて共有するためのテストを追加しました。 _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* 顧客のウィッシュリストから項目を削除するためのテストを管理者ユーザーとして追加しました。 _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28632](https://github.com/magento/magento2/pull/28632)_. [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* ウィッシュリスト機能を無効にするテストを追加しました。 _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28635](https://github.com/magento/magento2/pull/28635)_. [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* 顧客のウィッシュリストを共有する際に、無効なメールアドレスを使用するテストを追加しました。 `StorefrontShareWishlistEntityTest` はリファクタリングされました。 `StorefrontCustomerShareWishlistActionGroup` は非推奨（廃止予定）になりました。 _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* 許可されているテキストの長さの制限を超える顧客のウィッシュリストを共有するためのテストを追加しました。 _プルリクエストで Dmitry Tsymbal によって修正が送信されました [28812](https://github.com/magento/magento2/pull/28812)_. [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## 既知の問題

**問題**：サードパーティの支払いプロバイダーを使用する場合、チェックアウトの新しい CAPTCHA 機能が注文ページで期待どおりに動作しません。 注文ストアフロントページで CAPTCHA 保護を有効にしている 2.3.6 または 2.4.1 を実行しているマーチャントは、PayPal などのサードパーティの支払いプロバイダーを使用してチェックアウトする際に、このエラーが表示されます。 `Please provide CAPTCHA code and try again`. **回避策**：この問題の修正が利用できるようになりました。 を参照してください。 [チェックアウト時のMagento Open Source v2.3.6/2.4.1 CAPTCHA が機能しない](https://support.magento.com/hc/en-us/articles/360051235772) ナレッジベースの記事 修正は、次の四半期パッチ（Q12021）にも含まれる予定です。

**問題**：管理者権限を持たないユーザーは、現在、個人用 2FA アクセスを設定できません。 2FA には 2 つの ACL ロールがあります。 1 つの役割は、グローバルシステム設定に影響を及ぼし、システムの設定時にのみ必要になります。 2 つ目の ACL の役割は、個々のユーザー 2FA アカウントに影響します。 管理者ユーザーは、この 2 番目のタイプの 2FA ACL を設定する必要があります。 **回避策**：ユーザーは、ログインしてアクセス拒否画面を表示した後、以下にアクセスできます `https://<magento store>/<admin_path>/tfa/tfa/requestconfig/` を強制的に設定します。 注意：セキュリティ設定を無効にすることは推奨しません。 ただし、この回避策は、管理者 URL の秘密鍵が無効になっている場合にのみ有効です。

**問題**：です **アカウントの作成** 買い物客が無効なデータを入力した場合、新しいアカウントを作成ページのボタンは無効のままです。 これにより、買い物客がエラーを起こした後にアカウントを再作成するのを防ぎます。 **回避策**：パッチを適用 `MC-38509`. また、修正は、2021 年第 1 四半期にリリースされる予定の次の四半期リリース（2.4.2、2.4.1-p1 および 2.3.6-p1）にも含まれる予定です。 を参照してください。 [2.4.1 および 2.3.6 アカウントを作成ボタンで無効にしたホットフィックス](https://support.magento.com/hc/en-us/articles/360051130212) ナレッジベースの記事  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**問題**:dotdigital が有効になっている場合、マーチャントは Safari の管理者から dotdigital にログインできません。 を参照してください。 [dotdigital アカウントが有効になっている場合、管理パネルから dotdigital にログインすることはできません](https://support.magento.com/hc/en-us/articles/360050092291) ナレッジベースの記事

**問題**：買い物客が請求先住所と異なる配送先住所を選択した場合、支払い中に頂点の住所の検証が機能しません。 この問題は、2.4.2 で修正される予定です。を参照してください。 [2.4.1 既知の問題：アドレスを更新した後、頂点アドレス検証メッセージが消えない](https://support.magento.com/hc/en-us/articles/360050139631) ナレッジベースの記事

**問題**：マーチャントが Safari ブラウザーに Dotdigital ページビルダーフォームを保存すると、アプリケーションに空のページが表示されます。 **回避策**：ページをリロードして、変更を適用します。 を参照してください。 [2.4.1 既知の問題：dotdigital ページビルダーフォームを保存すると、ページが空になる](https://support.magento.com/hc/en-us/articles/360049819092) ナレッジベースの記事

**問題**：特定の条件下で、アプリケーションは以前に使用したAmazon アカウントに自動的にログインし、Amazon Pay でのチェックアウト中にはログインを促します。 を参照してください。 [2.4.1 既知の問題：Google Chrome でAmazon アカウントを変更できない](https://support.magento.com/hc/en-us/articles/360049814152) ナレッジベースの記事

**問題**:PayPal Braintreeでのお支払いと複数の住所への配送が選択されると、チェックアウトワークフローの請求ページにエラーメッセージが短時間表示されます。 を参照してください。 [2.4.1 既知の問題：PayPalBraintreeでチェックアウト時にエラーが発生する](https://support.magento.com/hc/en-us/articles/360050253211) ナレッジベースの記事

**問題**：ゲストのチェックアウトが無効な場合、ゲストのお客様がBraintreeを通じて PayPal で注文しようとすると、アプリケーションに非情報エラーメッセージが表示されます。 を参照してください。 [2.4.1 既知の問題：Braintreeを通じて Paypal を使用してゲストのチェックアウト中に非情報エラーメッセージが表示される](https://support.magento.com/hc/en-us/articles/360050368111) ナレッジベースの記事

## コミュニティの投稿

より広いMagento Open Sourceコミュニティに感謝し、今回のリリースへの貢献を認めたいと思います。 現在のリリースに対するコミュニティの投稿について学べる、次の方法を確認してください。

* コミュニティメンバーがこのリリースの修正を提供している場合は、これらのメモの修正済みの問題の節の修正を、「」というフレーズで識別します&#x200B;*コミュニティメンバーによって提供された修正*」と入力します。

* コミュニティ エンジニアリング チーム [Magento投稿者](https://magento.biterg.io/app/kibana) は、貢献した上位の個人とパートナーのリストを月別、四半期別、年別に保持します。 その投稿者ページから、GitHub の結合された PR へのリンクをフォローできます。

### パートナーの投稿

次の表に、パートナー様のコントリビューションを示します。 この表は、プルリクエストを行ったパートナー、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）の一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### 個々のコントリビューターの投稿

次の表に、コミュニティメンバーからの投稿を示します。 この表は、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）、プルリクエストを行ったコミュニティメンバーの一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### 必要システム構成

当社の技術スタックは、PHP と MySQL をベースに構築されています。 詳しくは、を参照してください [必要システム構成](../../../installation/system-requirements.md).

### インストールとアップグレードの手順

Composer を使用してMagento Open Source 2.4.1 をインストールできます。

## 移行ツールキット

データ移行ツールは、既存のMagento 1.x ストアデータをMagento 2.x に転送するのに役立ちます。このコマンドラインインターフェイスには、検証、進行状況のトラッキング、ログ記録、テストなどの機能が含まれています。 インストール手順については、を参照してください [データ移行ツールのインストール](../../../tools/data-migration-tool/install.md). を探索するか、に貢献することを検討します [データ移行リポジトリ](https://github.com/magento/data-migration-tool).

この [コード移行ツールキット](https://github.com/magento-commerce/code-migration) は、既存のMagento 1.x ストアの拡張機能とカスタマイズのMagento 2.x への転送に役立ちます。コマンドラインインターフェイスには、Magento 1.x のモジュールとレイアウトを変換するためのスクリプトが含まれています。
