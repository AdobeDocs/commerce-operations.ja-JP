---
title: Magento Open Source2.4.6 リリースノート
description: 2.4.6Magento Open Sourceリリースの新機能、機能強化、バグ修正および既知の問題について説明します。
hide: true
hidefromtoc: true
source-git-commit: 2b4cd408fbd33d33c9760c3baec0dc2501a45d61
workflow-type: tm+mt
source-wordcount: '8456'
ht-degree: 0%

---


# Magento Open Source2.4.6 リリースノート

Magento Open Source2.4.6 では PHP 8.2 のサポートが導入されています。PHP 8.1 は完全にサポートされていますが、PHP 7.4 のサポートは削除されました。 パフォーマンスと拡張性に関する大幅な強化が含まれます。 GraphQLの一括買い物かご操作とカテゴリツリーレンダリングの応答の操作が最適化されました。

このリリースには、多くの品質修正および機能強化が含まれています。 Core Composer の依存関係とサードパーティライブラリは、PHP 8.2 と互換性のある最新バージョンにアップグレードされました。

{{bics}}

## その他のリリース情報

これらの機能のコードはMagento Open Sourceコアコードのリリースにバンドルされていますが、これらのプロジェクトのいくつかは個別にリリースされています。 これらのプロジェクトのバグ修正は、個別のプロジェクト固有のリリース情報に記載されています。この情報は、各プロジェクトのドキュメントに記載されています。

## Magento Open Source2.4.6 のハイライト

このリリースでは、次の点に注意してください。

### セキュリティの強化

このリリースには、8 つのセキュリティ修正とプラットフォームのセキュリティ強化が含まれています。 このセキュリティ修正は、Magento Open Source2.4.4-p1 およびMagento Open Source2.3.7-p4 にバックポートされました。

これらの問題に関する確認済みの攻撃は、現在までには発生していません。 ただし、一部の脆弱性は、顧客情報にアクセスするために悪用されたり、管理者セッションを引き継ぐ可能性があります。 これらの問題のほとんどは、攻撃者が最初に管理者へのアクセス権を取得する必要があります。 その結果、以下の取り組みに限定されない限り、管理者を保護するために必要なすべての手順を実行するように促されます。

* IP許可リストに加える
* [二段階認証](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* VPN の使用
* ではなく一意の場所の使用 `/admin`
* パスワードの衛生状態

詳しくは、 [Adobeセキュリティ情報](https://helpx.adobe.com/security/products/magento/apsb22-38.html) を参照してください。

#### その他のセキュリティ強化

このリリースのセキュリティ強化により、次のような最新のセキュリティのベストプラクティスへの準拠が改善されました。

* 管理アクションログのギャップに対処し、グリッドビュー、マスアクション、および書き出し内のアクションの詳細な監査を行いました。 <!-- AC-1553 -->

* 支払い処理中に予期しないエラーが発生した場合、reCAPTCHA 検証がチェックアウト時に失敗しなくなりました。 [GitHub-35093](https://github.com/magento/magento2/issues/35093) <!-- AC-2642 -->

* **管理者ユーザーが電子メールを変更した際に電子メールの確認を求める新しいシステム設定**. サイトの脆弱性を減らすために、管理者ユーザーが電子メールを変更した際に電子メールで確認が必要となる新しいシステム設定（デフォルトで無効）が追加されました。 **[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Customer Configuration]** > **[!UICONTROL Account Information Options]** > **[!UICONTROL Require email confirmation if an email has been changed]**. このオプションを有効にすると、管理者ユーザーが電子メールアドレスを変更するたびに、アプリケーションが電子メールの確認をリクエストします。 この変更の影響を受けるのは、次のモジュールです。 `Magento_Customer`. <!-- AC-3064 -->

### Platform の機能強化

Magento Open Source2.4.6 では、PHP 8.2 のサポートが導入されています。PHP 8.1 は完全にサポートされています。 <!-- AC-6598 -->

PHP 7.4 のサポートは、このリリースから削除されました。 PHP 7.4 ではMagento Open Sourceを実行できません。

Magento Open Sourceでは、次の機能がサポートされるようになりました。

* Composer 2.2.x。Composer 1.x が削除されました。 <!-- AC-2839 -->

* Redis 7.0.x.Redis 6.2 との互換性は残っていますが、Redis 6.2 は 2024 年に提供終了となる予定なので、このリリースを Redis 7.0.x にデプロイすることをお勧めします。 <!-- AC-6606 -->

* OpenSearch が、オンプレミスおよびクラウドでのMagento Open Source展開のデフォルトの検索エンジンとしてサポートされるようになりました。 独立した検索エンジンとしてMagento Open Source。 このリリースは OpenSearch v2.x をサポートし、OpenSearch 2.5 でテストされています。OpenSearch 1.x との互換性は残りますが、このリリースを OpenSearch 2.x で使用することをお勧めします。Magento Open SourceとMagento Open Source2.4.6 と OpenSearch 2.x は、クラウドとオンプレミスの両方にインストールして実行できます [検索エンジンの前提条件](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/prerequisites/search-engine/overview.html). <!-- AC-449 3555 -->

* Elasticsearch8.x <!-- AC-6597 -->

* MariaDB 10.6 （LTS バージョン）。 このリリースは MariaDB 10.4 と互換性がありますが、MariaDB 10.6 にアップグレードすることをお勧めします。 <!-- AC-6921 -->

#### その他のアップグレードと交換

* DHL スキーマは v6.2 から v10.0 に移行されました。 <!-- AC-3023-->

* 古い JavaScript ライブラリは最新バージョンに更新され、古い依存関係は削除されました。 これらの変更は後方互換性があります。 <!-- AC-2036-->

* PHP 7.4 の互換性は、コマースおよびMagento Open Sourceのコードベースから削除されました。 <!-- AC-2841-->

* Symfony の依存関係が新しい LTS バージョンにアップグレードされました。 依存関係には次が含まれます。<!-- AC-2656-->

   * `friendsofphp/php-cs-fixer`
   * `symfony/console`
   * `symfony/event-dispatcher`
   * `symfony/finder`
   * `symfony/process`
   * `web-token/jwt-framework`

* `jquery-migrate` は、コマースおよびMagento Open Sourceコードベースから削除されました。 [GitHub-21406](https://github.com/magento/magento2/issues/21406) <!-- AC-1199 -->

* アップグレード済み `jQuery/fileUpload` ライブラリを v10.32 にアップロードする必要があります。 <!-- AC-2658-->

* 提供が終了した Zend フレームワーク (ZF1) コンポーネントは、コードベースから削除されました。 詳しくは、 [後方互換性のない変更のハイライト](https://developer-stage.adobe.com/commerce/php/development/backward-incompatible-changes/highlights/).<!-- AC-1512 -->

* Laminas の依存関係が PHP 8.2 をサポートするように更新されました。 <!-- AC-7019-->

* この `laminas/laminas-dependency-plugin` Composer プラグインが削除されました。 [GitHub-36515](https://github.com/magento/magento2/issues/36515) <!-- AC-7100-->

* 置換済み `Zend_Filter` と `laminas/laminas-filter`. <!-- AC-5922-->

* アップグレード済み `web-token/jwt-framework` を v3.0.5 にアップロードします。 （最新バージョン） <!-- AC-3772-->

* アップグレード済み `allure-framework/allure-phpunit` を v2.x にアップロードします。 <!-- AC-2660-->

* をアップグレードしました。 `Chart-js` v3.9.1 へのライブラリ <!-- AC-2661-->

### アクセシビリティの更新

このリリースでは、より知覚可能、操作可能、理解可能、堅牢な、Venia(PWA) のストアフロントエクスペリエンスの作成に焦点を当てました。 次の機能強化が含まれます。

<!-- AC-2479-->

* のビジュアルテキストラベル **[!UICONTROL Sign in]** ボタンがアクセス可能な名前と一致するようになりました。 （UI 要素のアクセシブルな名前は、表示可能なラベルテキストで始めることをお勧めします）。

<!-- AC-2481 2492-->

* ストアフロント全体のボタンに、わかりやすい名前が追加されました。

<!-- AC-2488-->

* に言葉による記述的なラベルが追加されました **[!UICONTROL Has Video]** 検索フィルターのチェックボックス。

<!-- AC-2787-->

* キーボードのみのユーザーがストアフロントのすべてのページ機能にアクセスできるようになりました。 以前は、キー操作だけでサブナビゲーションリンクにアクセスできませんでした。


### Adobe CommerceとAdobe IMSの統合

次のAdobe IMSモジュールは、Adobe CommerceおよびMagento Open Sourceコアコードから切り離され、個別のメタパッケージとしてパッケージ化されました。

* `adobe-ims`
* `adobe-ims-api`
* `admin-adobe-ims`

新しい `adobe-ims-metapackage` v2.2.0 はAdobe Commerce 2.4.6 およびMagento Open Source2.4.6 にバンドルされています。このリリースでは機能は変更されていません。<!-- CABPI-505-->

### Braintree

<!-- BUNDLE-3107-->

* この **[!UICONTROL Pay Later]** イタリアとスペインのボタンとバナー（メッセージ）のBraintreeが有効になっています。

<!-- BUNDLE-3109-->

* PayPal Vault での PayLater メッセージが有効になりました。

<!-- BUNDLE-3140-->

* 不正保護と ACH Web フックを追加しました。 不正保護 Web フックは、リスクの決定がBraintreeされた場合にトリガーされます。 ACH 支払のステータスが次の条件に更新されると、ACH ウェブフックがトリガーされます。 `settled` または `settlement decline`.

<!-- BUNDLE-3141-->

* LPM（ローカル支払い方法）Web フックを追加しました。

### GraphQL

GraphQLのパフォーマンスが強化された機能を次に示します。

**カテゴリ権限が有効なカテゴリに対するクエリを実行する際の応答時間を改善しました**. カテゴリ権限が有効になっていて、多数の顧客グループまたは共有カタログを含むカテゴリ内の製品に対するクエリを実行する際の応答時間が改善されました。 このパフォーマンスの向上をサポートするコードの変更点を次に示します。 <!-- B2B-2179 2404 2329-->

* GraphQL resolver の操作が最適化されました。
* データプロバイダーは、処理される新しい製品ごとに実行時にキャッシュされたデータを再設定しなくなり、パフォーマンスが向上しました。 <!-- B2B-2452-->
* GraphQLのリゾルバーで、製品の権限処理が最適化されました。 製品の権限が、製品コレクションに対して製品単位で適用されるようになりました。  <!-- B2B-2404-->
* の共有カタログで読み取られる最適化された権限 `addProductsToCart` 突然変異。 <!-- B2B-2424-->
* 製品のインラインフラグメントで製品の権限が最適化されました。 <!-- B2B-2459-->

**カテゴリツリーレンダリングのパフォーマンスの最適化**. この `categoryList` クエリは、多数のカテゴリを持つ顧客をサポートするように最適化されています。 このクエリを使用して 1500 を超えるカテゴリを検索し、最大 5 レベルのネストされたサブカテゴリを含めると、パフォーマンスが向上します。 不要なメソッド呼び出しを削除し、カテゴリツリーのキャッシュを改善し、カテゴリデータを再帰的に読み込むことで、リファクタリングコードによるカテゴリの子の読み込みを改善しました。  このパフォーマンスの向上をサポートするコードの変更点を次に示します。 <!-- B2B-2484 2469 2472-->

* カテゴリモデルのカスタム属性メタデータ取得が改善されました。 <!-- B2B-2463-->
* カテゴリ ID の取得が改善され、 `getChildren` の呼び出しが減少しました。 <!-- B2B-2464-->
* カテゴリの子の読み込みが改善されました。<!-- B2B-2469-->

**一括買い物かご操作のクエリの応答時間を短縮**. 最大 500 個のシンプルで構成可能な製品を追加する場合、クエリのパフォーマンスを向上させるために、製品の追加の変更を最適化しました。 バンドル製品は影響を受けません。 最適化された突然変異は次のとおりです。 `addProductsToCart`, `addConfigurableProductsToCart`, `addDownloadableProductsToCart`, `addSimpleProductsToCart`, `addVirtualProductsToCart`,`addWishlistItemsToCart`、および `updateCartItems`. <!-- B2B-2331 2423-->

**顧客クエリで順序の並べ替えがサポートされるようになりました**. この `orders` 出力オブジェクト `customer` クエリに並べ替えフィールドが含まれるようになりました。 順序番号または作成日で、昇順または降順で並べ替えることができるようになりました。 <!-- AC-6903-->

新しい変異：

`deleteCustomer` <!-- AC-2879-->

詳しくは、 [GraphQL Developer Guide](https://developer.adobe.com/commerce/webapi/graphql/) を参照してください。

### Page Builder

Page Builder v.1.7.3 はMagento Open Source2.4.6 と互換性があります。

### PWA Studio

PWA Studiov.13.0.x は、Magento Open Source2.4.6 と互換性があります。アクセシビリティを向上させるための複数の機能強化が含まれています。 バグ修正について詳しくは、 [PWA Studioリリース](https://github.com/magento/pwa-studio/releases). 詳しくは、 [バージョンの互換性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) を参照してください。


## 修正された問題

Magento Open Source2.4.6 のコアコードで、数百の問題を修正しました。

### インストール、アップグレード、導入

<!-- ACP2E-1168-->

* 複数のロケールと Web サイトを使用した標準デプロイメントまたはコンパクトデプロイメントで、静的コンテンツデプロイメントがタイムアウトしたり失敗したりすることはなくなりました。

<!-- ACP2E-923-->

* コンパクトな方法で、静的コンテンツのデプロイメント (`bin/magento set:static-content:deploy -f --strategy compact`) をクリックします。

<!-- AC-5994-->

* 実行中 `bin/magento setup:di:compile -vvv` ( または `-v` または `-vv` オプション ) が失敗した場合に関する情報メッセージを返すようになりました。 [GitHub-35391](https://github.com/magento/magento2/issues/35391)

<!-- AC-5973-->

* Magento Open Sourceで `bin/magento setup:upgrade` コマンドを使用して、既にデータ移行ツールが実行されているデプロイメントで次の操作を実行します。 `PHP Fatal error:  Declaration of Migration\Logger\Logger::addRecord(int $level, string $message, array $context = []): bool must be compatible with Monolog\Logger::addRecord(int $level, string $message, array $context = [], ?Monolog\DateTimeImmutable $datetime = null): bool in /var/www/html/vendor/magento/data-migration-tool/src/Migration/Logger/Logger.php on line 34`. [GitHub-35604](https://github.com/magento/magento2/issues/35604)

<!-- AC-5970-->

* この `setup:db:status` コマンドが MySQL 8.0.29 を実行する環境で失敗しなくなりました。以前は、コマンド出力で宣言スキーマが古くなったと誤って示されていました。 [GitHub-35671](https://github.com/magento/magento2/issues/35671)

<!-- AC-1377-->

* この `composer install` コマンドが上書きされなくなりました `.gitignore` ファイル。 [GitHub-32888](https://github.com/magento/magento2/issues/32888)

<!-- AC-6671-->

* 実行中 `bin/magento sampledata:remove` Alpine Linux でアップグレード後にサンプルデータを削除すると、次のエラーで失敗しなくなりました。 `Undefined constant "MagentoHackathon\Composer\Magento\Deploystrategy\GLOB_BRACE`. [GitHub-36062](https://github.com/magento/magento2/issues/36062)


<!-- AC-6933-->

* `bin/magento setup:upgrade` 最初の実行後に正常に実行されるようになりました `composer install --no-dev`. [GitHub-36351](https://github.com/magento/magento2/issues/36351)

<!-- AC-6796-->

* 例外と例外スタックトレースエントリが `var/log/exception.log`. [GitHub-36054](https://github.com/magento/magento2/issues/36054)

<!-- AC-2681-->
Magento Open Sourceで、コマンドラインを使用してパスワードなしで Redis 接続を設定すると、パラメータの検証エラーがスローされるようになりました。


### アクセシビリティ

<!-- AC-6678 6679 6677-->

* この **[!UICONTROL Proceed to Checkout]**, **[!UICONTROL Review Order]**、および **[!UICONTROL Place Order]** チェックアウトワークフローのボタンが、キーボード入力で期待どおりに動作するようになりました。

<!-- AC-2485-->

* 使用時のボタンのフォーカスの視覚的表示 **[!UICONTROL TAB]** または **[!UICONTROL SHIFT + TAB]** ページコントロール間を移動する機能が期待どおりに動作するようになりました。


#### スクリーンリーダー

<!-- AC-2498-->

* 注文履歴ページのスクリーンリーダーが、正しい画像の説明を読み上げるようになりました。

スクリーンリーダーが読み上げるようになりました。

* 検索結果で見つかった項目の総数が期待どおりです <!--- AC-3522-->
* ユーザーがキーボードコントロールを使用して正常にサインインしたときのログインユーザーの名前 <!--- AC-6477-->
* 製品検索結果ページのヘッダーで、 `<title>` 要素 <!--- AC-2489-->
* 入力フィールドが必須かどうか <!--- AC-2494-->
* アコーディオン要素の現在の状態を修正する（折りたたまれて展開された状態） <!--- AC-2487-->
* ユーザーが **[!UICONTROL Create an account]** ボタン <!---AC-6676-->


### 製品のバンドル

<!-- ACP2E-906-->

* 特定のストア表示の API を介してバンドル製品を更新しても、同じバンドル製品の他のストア表示データが上書きされなくなりました。 以前は、バンドル製品オプションのタイトルは、他のストア表示の最初のオプションのタイトルで上書きされていました。

<!-- AC-3769-->

* バンドルされた製品を管理者から正常にフィルタリングできるようになりました。 **[!UICONTROL Catalog]** > **[!UICONTROL Products]** オランダ語ロケールを使用する場合。 以前は、Magento Open Sourceでフィルターを試みると、このエラーが表示されていました `Type: Bundle Product`: `Something went wrong with processing the default view and we have restored the filter to its original state`. [GitHub-35704](https://github.com/magento/magento2/issues/35704)

<!-- ACP2E-1038-->

* バンドル製品の価格が 1000 を超える場合、製品グリッドで例外がスローされなくなりました。 以前は、SKU で製品を検索したり、 **[!UICONTROL Catalog]** > **[!UICONTROL Products]**、Magento Open Sourceが次のエラーをスローしました： `Non Numeric value encountered`. [GitHub-36284](https://github.com/magento/magento2/issues/36284))

<!-- ACP2E-1220-->

* バンドルと単純な製品の組み合わせを含む注文のクレジットメモと請求書PDFの列が正しくレンダリングされるようになりました。 以前は、列がゆがんだり、位置がずれていました。

<!-- ACP2E-1315-->

* 内 `BundleProduct` フラグメント、 `items.options.product` オブジェクトには、期待どおりのデータが含まれています。 以前は、状況によってはオブジェクトが null になることがありました。

<!-- AC-6548-->

* バンドルオプションの小数が、 **[!UICONTROL Quantity uses decimals]** が有効になっている。 以前は、分数の分数ではなく、整数部分のみがレンダリングされていました。 例えば、1.5 の量は 1.0 とレンダリングされました。 [GitHub-35964](https://github.com/magento/magento2/issues/35964)

<!-- B2B-2453-->

* GraphQL応答は、問い合わせ対象のストアの範囲内で、バンドル製品オプションのみを返すようになりました。

<!-- B2B-2455-->

* カテゴリに割り当てられていないが、バンドルまたはグループ化された製品の製品オプションである製品は、 **[!UICONTROL Allow Category Browsing]** 設定は、顧客がクエリを送信する際に有効になります。

### キャッシュ

<!-- ACP2E-134-->

* 注文した製品が在庫切れにならない限り、注文の達成後、フルページのキャッシュはフラッシュされなくなります。 以前は、出荷が作成されるたびに、カテゴリのキャッシュがパージされていました。

<!-- ACP2E-1321-->

* L2 キャッシュが設定され、リモートデータが部分的に削除された場合、データが正常にキャッシュされるようになりました。 以前は、これらのデータのハッシュを含まないデータキャッシュのみをフラッシュした後、データハッシュが存在する間、新しいキャッシュは保存されませんでした。

<!-- B2B-2471-->

* 修正済みの `CatalogUrlResolverIdentity` および `CmsUrlResolverIdentity` キャッシュを妨げていた問題を修正しました。 この問題は、複数のリクエストに対するルートクエリのキャッシュに影響を与えました。

### 買い物かごとチェックアウト


<!-- ACP2E-965-->

* 買い物客は、単純な製品の最小数量が買い物かごに含まれている場合に、買い物かごに品目を追加できるようになりました。

<!-- ACP2E-964-->

* 買い物かごデータを取得する REST API 呼び出しで、同じ値が返されるようになりました。 `grand_total` および `base_grand_total` 値は、店舗通貨と基本通貨が同じ場合に使用します。 [GitHub-34649](https://github.com/magento/magento2/issues/34649)

<!-- ACP2E-962-->

* の書き出された値 **[!UICONTROL Maximum Qty Allowed in Shopping Cart]** は、管理者設定で設定されたデフォルト値と一致するようになりました。

<!-- ACP2E-889-->

* Magento Open Sourceは、注文の返金の総計を正しく計算し、配送料の割引を含むようになりました。

<!-- ACP2E-876-->

* ストアフロントの注文で、Google ReCAPTCHA が期待どおりに動作するようになりました。 以前は、Magento Open Sourceが、買い物客が最初に注文を試みる前にGoogle ReCAPTCHA が最初に選択されていない場合に、次のエラーが表示されていました。 `ReCaptcha validation failed, please try again` および `No such cart with id = ID`.

<!-- AC-2338-->

* CAPTCHA 画像の更新で、管理者設定が有効になり、設定が無効な場合はトリガーされなくなりました。 以前は、設定が有効か無効かに関係なく支払い方法が変更されるたびに更新がトリガーされていました。 [GitHub-34855](https://github.com/magento/magento2/issues/34855)

<!-- ACP2E-479-->

* Magento Open Sourceで、買い物客が買い物かごを更新せずに買い物かごページの製品数を変更した後、次のページに移動しようとすると、買い物客を次のページにリダイレクトする前に、期待どおりに確認ポップアップが表示されるようになりました。

<!-- AC-5987-->

* 買い物客は、管理で製品を減らした後で、買い物かごからの製品の量を減らすことができるようになりました。 以前は、Magento Open Sourceが買い物客が製品数を減らそうとすると、次のエラーがスローされていました。 `The requested qty is not available`. [GitHub-35780](https://github.com/magento/magento2/issues/35780)

<!-- AC-6744-->

* Magento Open Sourceで、複数出荷チェックアウト時に製品の数量が設定済みの最大値を超えた場合に、JavaScript コンソールでエラーがスローされなくなりました。 代わりに、Magento Open Sourceに情報エラーメッセージが表示されるようになりました。 [GitHub-36184](https://github.com/magento/magento2/issues/36184)

<!-- ACP2E-1276-->

* 買い物かごページの品目数が、買い物客がキーボードの下向き矢印キーを使用して製品数を変更した場合、負の数として表示されなくなりました。 [GitHub-36299](https://github.com/magento/magento2/issues/36299)

<!-- ACP2E-1232-->

* 買い物客は、買い物客が属する顧客グループを変更した後に禁止されるカテゴリの製品を買い物かごに追加できなくなりました。 Magento Open Sourceは、権限設定が変更された場合に、特定のカテゴリに対する顧客グループ権限のアクセス権をチェックするようになりました。

<!-- ACP2E-926-->

* 顧客の買い物かごは、管理注文が作成される前に空にならなくなり、注文がキャンセルまたは破棄された場合に買い物かごの内容が復元されるようになりました。 注文の作成後にのみ、品目が買い物かごから削除されるようになりました。 以前は、管理者ユーザーが買い物かごの管理ページで注文を作成しようとすると、買い物かごは空になっていました。

<!-- AC-6939-->

* 実行後、ミニカートに正しい製品画像が表示されるようになりました。 `bin/magento catalog:image:resize`. 以前は、すべての画像がデフォルトの製品プレースホルダー画像に置き換えられていました。 [GitHub-35535](https://github.com/magento/magento2/issues/35535)

<!-- AC-2376-->

* 配送先住所に拡張属性が含まれている場合、チェックアウトを正常に完了できるようになりました。 以前は、Magento Open Sourceが次のエラーをスローしていました： `Object of class Magento\Quote\Api\Data\AddressExtension could not be converted to string`. [GitHub-34202](https://github.com/magento/magento2/issues/34202)

<!-- AC-2793-->

* この `addBundleProductsToCart` 必要な製品オプションに値がない場合、クエリは製品を見積もりに追加しなくなりました。 [GitHub-25676](https://github.com/magento/magento2/issues/25676)

<!-- B2B-2458-->

* Magento Open Sourceが、 `addProductsToCart` 十分な権限を持たない製品を買い物かごに追加すると、クエリが失敗する。

<!-- ACP2E-1242-->

* Magento Open Sourceが、クイックオーダーを使用して使用可能な在庫を超える数量の製品を追加した場合に、買い物かごページでエラーがスローされなくなりました。


### 買い物かごの価格ルール

<!-- AC-2242-->

* 買い物かご価格ルールの作成中に設定された無料配送オプションが、期待どおりに注文に適用されるようになりました。 以前は、ルールの作成時に適用された無料配送オプションはチェックアウト時に無視され、ルールの適用時には送料は許可されませんでした。 [GitHub-35013](https://github.com/magento/magento2/issues/35013)

<!-- ACP2E-1074-->

* この `discount_percent` 列 `sales_order_item` 品目の割引数量が設定されていない、または品目の数量以上の場合、製品のテーブルが予想どおりに割引率と共に移入されるようになりました。 以前は、買い物かごの価格ルールがこの製品に適用されると、この列は入力されませんでした。

### カタログ

<!-- ACP2E-1181-->

* 製品リストウィジェットで、ログインした買い物客の価格が正しく表示されなくなりました。 ホームページウィジェットに表示される価格が買い物客の住所と一致するようになり、買い物客が住所を更新すると更新されます。 以前は、ブラウザーキャッシュで、顧客グループの税ルールに基づいてホームページの製品価格が更新されていませんでした。

<!-- ACP2E-1007-->

* 複数 Web サイトのデプロイメントで、製品リストの比較機能が正しく動作するようになり、Web サイトに依存します。

<!-- ACP2E-900-->

* Magento Open Sourceの詳細ページを再読み込みする際に、前のページのデータが表示されなくなりました。 以前は、製品の詳細ページが再読み込みされると、最初のタブのデータが、分割秒間、新しく読み込まれたデータと結合されていました。

<!-- ACP2E-816-->

* モバイルデバイスのメインメニューで、サブカテゴリのあるカテゴリを期待どおりに展開できるようになりました。 以前は、モバイルデプロイメントでは、カテゴリをサブカテゴリで開いたり展開したりできませんでした。 [GitHub-35329](https://github.com/magento/magento2/issues/35329)

<!-- ACP2E-789-->

* 製品が新しい Web サイトやストアに割り当てられると、カテゴリリストが期待どおりに更新されるようになりました。 以前は、製品価格インデクサーは無効とマークされず、その後、 `cron` が期待どおりに実行される。 その結果、商品の価格エントリが価格指数表から欠落し、新しい店舗や Web サイトには表示されませんでした。

<!-- AC-6395-->

* ストアフロント在庫数が、 **[!UICONTROL Display Out of Stock Products]** 設定が有効になっています。 [GitHub-35899](https://github.com/magento/magento2/issues/35899)

<!-- AC-6384-->

* カテゴリページは、 **[!UICONTROL Allow All Products Per Page]** の設定が有効になっています。 [GitHub-35900](https://github.com/magento/magento2/issues/35900)

<!-- AC-6330-->

* この **[!UICONTROL Display Out of Stock Products]** 有効にした場合、設定オプションが期待どおりに動作するようになりました。 以前は、このオプションが管理で有効になっている場合、すべての製品がストアフロントに在庫切れとして表示されていました。 [GitHub-35898](https://github.com/magento/magento2/issues/35898)

<!-- ACP2E-1306-->

* ブール属性による製品の並べ替えが期待どおりに動作するようになりました。 [GitHub-36390](https://github.com/magento/magento2/issues/36390)

<!-- ACP2E-1206-->

* カタログ価格ルールの割引は、固定価格のカスタム製品オプションには適用されなくなりましたが、製品の元の価格にのみ適用されます。

<!-- AC-6810-->

* カタログ価格ルールで、選択した範囲が考慮され、属性にルールと一致するオプション値が含まれる Web サイトの製品にのみ適用されます。 以前は、マルチサイト展開で、選択した範囲がルールで考慮されていませんでした。 [GitHub-36049](https://github.com/magento/magento2/issues/36049)

<!-- ACP2E-891-->

* 買い物客がマイカートページから設定可能な製品を変更した場合、製品の詳細ページで、スウォッチオプションの色とサイズの属性が事前に選択されるようになりました。 (jQuery 3.x バージョンで、 `swatchRenderer` ウィジェット名（現在はキャメルケース）。 以前は、スウォッチオプションは事前に選択されていませんでした。

<!-- ACP2E-1361-->

* 顧客が価格ドロップアラートを購読すると、製品価格が下がったことを知らせる通知が表示されるようになりました。 以前は、アプリケーションレベルのキャッシュが原因で、価格下落通知が常に送信されるとは限りませんでした。

<!-- ACP2E-1348-->

* の SKU に基づくカタログルール **[!UICONTROL is not one of]** 条件が期待どおりに動作するようになりました。

<!-- AC-729-->

* Magento Open Sourceは、あるカテゴリが、カテゴリパスに基づく別のカテゴリの親であると誤って想定しなくなりました。 [GitHub-32464](https://github.com/magento/magento2/issues/32464)

### 設定可能な製品


<!-- ACP2E-1083-->

* Magento Open Sourceが、多数のシンプルな製品が割り当てられている設定可能な製品に、管理者ユーザーが手動で製品を追加した場合に、エラーがスローされなくなりました。 以前は、Magento Open Sourceに次のエラーが表示されていました： `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- AC-2877-->

* 買い物客は、バックオーダーが無効になっているデプロイメントで、販売可能数量が 0 の構成可能な製品を買い物かごに追加できなくなりました。 Magento Open Sourceは、製品が在庫切れであることを示すようになりました。 [GitHub-35319](https://github.com/magento/magento2/issues/35319)

<!-- AC-2678-->

* 様々なストア表示の多くのオプションを含む設定可能な製品を読み込んで新しい製品を作成すると、最初の製品の正確なコピーが期待どおりに作成されるようになりました。 以前は、新しい製品の設定可能なオプションの並べ替え順が正しくなく、複数のストアビューとロケールを含むデプロイメントでは、タイトルが新しいストアビューのロケールに変換されませんでした。 [GitHub-35200](https://github.com/magento/magento2/issues/35200)

<!-- AC-535-->

* 在庫切れの子製品を含む設定可能な製品が、在庫切れとしてストアフロントに表示されるようになりました。

<!-- AC-6852-->

* 設定可能な製品 SKU と製品名が正確に表示されるようになりました。 以前は、 **[!UICONTROL Stores]** > **[!UICONTROL Attribute set]**. [GitHub-36309](https://github.com/magento/magento2/issues/36309)


### クーポン

<!-- ACP2E-1053-->

* クーポンの生成時にクーポンコード設定を実施するための検証ロジックがクーポンコードの管理ワークフローに追加されました。 以前は、クーポンコードの生成では **[!UICONTROL Code Length]** 設定 **クーポン数** の値が 2500 を超えています。

<!-- ACP2E-1029-->

* PayPal Express の支払い方法でチェックアウト中に報酬クーポンが適用された場合、顧客のアカウントに期待どおりに報酬ポイントが追加されるようになりました。

<!-- ACP2E-1225-->

* 買い物かごの価格ルールの条件が重み付けである場合、管理注文作成時にクーポンコードを適用できるようになりました。 以前は、商品に対して他のフィールドが選択されていない場合、クーポンコードは設定されませんでした。 [GitHub-36271](https://github.com/magento/magento2/issues/36271)

<!-- ACP2E-1223-->

* 複数の買い物かごの価格ルールでクーポンレポートをフィルタリングできるようになりました。 [GitHub-36272](https://github.com/magento/magento2/issues/36272)

<!-- AC-2812-->

* 管理者ユーザーが **[!UICONTROL Enter]** を設定します。 以前は、オプションを選択して製品を注文に追加できましたが、オプションは保存されず、管理者ユーザーに対して製品オプションを再選択するよう求められていました。 [GitHub-35284](https://github.com/magento/magento2/issues/35284)

<!-- AC-6688-->

* クーポンコードを Excel XML に正常に書き出せるようになりました。 以前は、生成されたファイルには、選択したクーポンコードの一部が含まれていませんでしたが、ページセレクターごとの項目数で選択した項目数に制限されていました。[GitHub-36073](https://github.com/magento/magento2/issues/36073)


### cron

<!-- ACP2E-1243-->

* この `catalog_index_refresh_price` cron ジョブが正常に実行されました。 以前は、Magento Open Sourceは cron の実行中に次のエラーを記録していました。 `report.ERROR: Cron Job catalog_index_refresh_price has an error: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens`.

### 通貨

<!-- ACP2E-1012-->

* カスタム通貨記号と価格の間に不足していたスペースが、ストアフロントと管理製品価格の両方に追加されました。 通貨記号のカスタム NBSP を許可するための適切な条件と正規表現が追加されました。 例えば、以前は IDRx 105.00 が IDRx105.00 と表示されていました。


### 電子メール


<!-- ACP2E-1063-->

* Magento Open Sourceが管理者から注文を作成した後も、顧客に重複した E メールが送信されなくなりました。

<!-- ACP2E-1200-->

* 管理者の注文の E メールが **[!UICONTROL Email order confirmation]** の設定は無効です。 [GitHub-36256](https://github.com/magento/magento2/issues/36256)

<!-- ACP2E-1151-->

* カスタムオプションを使用する製品のクレジットメモ、注文確認、請求書顧客電子メール（デフォルトテンプレート）に、HTMLのマークアップとして画像オプションが表示されなくなりました。

### フレームワーク


<!-- AC-6385-->

* 管理者ユーザーが管理者を正常に開くことができるようになりました **[!UICONTROL Store]** > **[!UICONTROL Configuration]** 国がない場合のページ **欧州連合 (EU) 諸国** 設定 (**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL General]** > **[!UICONTROL Country options]** > **[!UICONTROL European Union Countries]**) をクリックします。 以前は、管理者ユーザーがこのページを開こうとすると、Magento Open Sourceが次のエラーをスローしていました。 `TypeError: explode(): Argument #2 ($string) must be of type string, null given in /var/www/php/folder/vendor/magento/module-config/ViewModel/CountryFilter.php:46`. [GitHub-35901](https://github.com/magento/magento2/issues/35901)

<!-- AC-6361-->

* `jquery.cookie` 依存関係は、JavaScript の依存関係で期待どおりに動作するようになりました。 以前は、 `jquery/jquery.cookie`. [GitHub-35913](https://github.com/magento/magento2/issues/35913)

<!-- AC-3226-->

* この `bin/magento i18n:collect-phrases` コマンドが次を含む `<title>` 書き出された CSV ファイル内のテキスト。 [GitHub-35462](https://github.com/magento/magento2/issues/35462)

<!-- AC-6841-->

* `Magento\Framework\Code\Reader\ArgumentsReader::getParentCall()` では、名前付きのコンストラクタ引数をサポートするようになりました。 これで、名前でパラメーターを設定して、関数を呼び出せるようになりました。

<!-- magento/magento2/pull/35567-->

* Magento Open Sourceは、あるカテゴリが、カテゴリパスに基づく別のカテゴリの親カテゴリであると誤って想定しなくなりました。 以前は、2 つのカテゴリが隣接し、1 つのカテゴリ ID が別のカテゴリのカテゴリ ID で始まる場合、Magento Open Sourceは、そのカテゴリの親カテゴリが同じであると想定していました。 [GitHub-32464](https://github.com/magento/magento2/issues/32464)

<!-- ACP2E-1287-->

* エラーは、 `exception.log` ファイル。 以前は、 `system.log` ファイル、エラーはログインされませんでした `var/log/exception.log`.

<!-- AC-3758-->

* マーチャントは、カスタムの外部 SMTP プロバイダーを指定できるようになりました。 [GitHub-26104](https://github.com/magento/magento2/issues/26104)

<!-- AC-3752-->

* Magento Open Source2.4.3-p2 を実行しているデプロイメントで、OAuth 統合を期待どおりに再認証できるようになりました。 以前は、次のエラーで再認証に失敗していました： `The attempt to post data to consumer failed due to an unexpected error. Please try again later`. Magento Open Sourceは、暗号化されていない値を復号化しようとしました。 [GitHub-35313](https://github.com/magento/magento2/issues/35313)

<!-- ACP2E-1201-->

* 正しい `rowId` カテゴリの `urlKey` は、子カテゴリを持つカテゴリ用に保存されます。 以前は、 `categoryId` は、カテゴリの保存時に渡されました `URLKey`.

<!-- ACP2E-981-->

* 製品属性コード `event` は、予約済みの製品属性コードのリストに追加され、ストアフロントでこの名前の属性を使用した場合に発生するエラーを排除します。 以前は、このエラーは、製品の詳細ページと検索/製品リストページで `event` は使用されています。  `report.CRITICAL: Error: Call to a member function getStatus() on string in /home/mer33515/public_html/ee24develop/magento2ee/app/code/Magento/CatalogEvent/Observer/ApplyIsSalableToProduct.php:23`.

<!-- AC-5985-->

* オーダーの配置中に発生するストアフロント検証エラーメッセージが、一貫して表示されるようになりました。 以前は、メッセージが表示され、折りたたまれ、再び表示されていました。 [GitHub-35651](https://github.com/magento/magento2/issues/35651)

<!-- AC-2943-->

* AMQP 消費者は、非推奨のため失敗しなくなりました `trim()` 関数は、PHP 8.1 を実行するデプロイメントで実行されました。以前は、AMQP コンシューマがインストール後に起動した場合、Magento Open Sourceは次のエラーをスローしました。 `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in .../vendor/magento/framework-amqp/Config.php on line 143`. [GitHub-35380](https://github.com/magento/magento2/issues/35380)

<!-- AC-2882-->

* この `getFilteredTimerIds` メソッドが期待どおりに動作するようになりました。  クラス `Magento\Framework\Profiler\Driver\Standard\Stat` は PHP 8.1 と互換性がありました。以前は、Magento Open Sourceはこのメソッドが呼び出されたときに例外をスローしました。 [GitHub-35307](https://github.com/magento/magento2/issues/35307)

<!-- AC-2784-->

* 依存関係を削除しました： `imagemin-svgo` ライブラリ。

<!-- AC-2058-->

* 最初のコメントがで始まる場合、縮小化テンプレートプロセスで連続したコメントが正常に処理されるようになりました。 `//`. [GitHub-34880](https://github.com/magento/magento2/issues/34880)

<!-- AC-2241-->

* が発行したデータベースクエリを修正しました。 `BundleGraphQl` このエラーを返したモジュール： `"debugMessage": "Notice: Undefined offset: 16 in vendor/magento/module-bundle-graph-ql/Model/Resolver/Options/Collection.php on line 130"`.[GitHub-34991](https://github.com/magento/magento2/issues/34991)


### 一般的な修正点


<!-- ACP2E-1068-->

* Magento Open Sourceで、管理者ユーザーが **[!UICONTROL Last 24 Hours]** 」オプションが表示されます。 以前は、Magento Open Sourceの表示時間範囲が正しくありませんでした。 これは、データベースのタイムゾーンが変更されていなかったために発生していました。

<!-- ACP2E-1066-->

* 整数量と小数量の両方に対してクレジットメモを生成できるようになりました。 以前は、整数のみがサポートされていました。

<!-- ACP2E-1001-->

* タイプの顧客郵便番号入力検証ルール **数値のみ** 現在は、 **[!UICONTROL Edit Customer Address]** フィールド (**[!UICONTROL Store]** > **[!UICONTROL Attribute]** > **[!UICONTROL Customer Address]**) をクリックします。 以前は、顧客の住所情報は、郵便番号の検証なしで保存されていました。

<!-- ACP2E-873-->

* グローバルに共有された顧客アカウントに、現在の Web サイトで許可された国のリストに対して検証され、正常に保存されたアドレスが追加されました。 以前は、顧客が登録された Web サイトの許可された国に対して、これらのアカウントが正しく検証されていませんでした。

<!-- AC-3167-->

* CMS ページ階層のパンくずリストが **[!UICONTROL Enable Hierarchy Functionality]** は無効です。 以前はパンくずリストが表示されていて、買い物客がクリックすると 404 ページが表示されていました。 [GitHub-35513](https://github.com/magento/magento2/issues/35513)

<!-- AC-2567-->

* 管理者を使用してすべての Web サイトから製品を削除しても、次のエラーが発生しなくなりました。 `SQLSTATE[42000]: Syntax error or access violation`. [GitHub-35133](https://github.com/magento/magento2/issues/35133)

<!-- AC-2235-->

* ログイン失敗の最大回数を超えたお客様は、パスワードのリセット後にログインできるようになりました。 [GitHub-34981](https://github.com/magento/magento2/issues/34981)

<!-- AC-2020-->

* 動的な行コンポーネントは、管理者ユーザーが新しい要素を追加したときに、期待どおりに動作するようになりました。 以前は、新しい単純製品をグループ化された製品に追加した場合、行コンポーネントが正しく動作しなかった問題を修正しました。 [GitHub-34850](https://github.com/magento/magento2/issues/34850)

<!-- magento/magento2/pull/35598-->

* 誤字および誤った文法を `app/code/Magento/Backend/etc/menu.xsd` ファイル。

<!-- magento/magento2/pull/35818-->

* この `app/code/Magento/Authorization/README.md` ファイルが更新され、テーブルの作成を正確に記述できるようになりました。

<!-- magento/magento2/pull/35940-->

* この `recordLogin` メソッドが更新され、ユーザーモデルにログイン値を設定し、 `logdate` および `lognum` フィールド `admin_user` 表。 以前は、更新された管理者ユーザーに対するログイン試行は記録されていませんでした。

<!-- magento/magento2/pull/35990-->

* GitHub の問題テンプレートは、開発者向けのエクスペリエンスの問題や機能のリクエストを考慮して、問題のフォームに変換されました。

<!-- ACP2E-961-->

* この `Is required` 顧客属性が、管理者顧客編集フォームの Web サイト範囲ごとに適切に実装されるようになりました。

<!-- ACP2E-895-->

* この **[!UICONTROL Grid Filter Condition Type]** 顧客と顧客の住所の属性のフィールドが、属性の編集ページで **[!UICONTROL Use in Filter Option]s** の設定は無効です。

<!-- AC-6020-->

* Magento Open Sourceで、商人が製品の作成時にオプションの SKU 属性値の入力に失敗した場合に、情報エラーメッセージが表示されるようになりました。 以前は、属性がオプションの場合、アプリケーションは次の例外をスローしていました。 `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/html/mg244/project-community-edition/vendor/magento/module-eav/Model/Entity/AbstractEntity.php on line 932`. [GitHub-35810](https://github.com/magento/magento2/issues/35810)

<!-- ACP2E-716-->

* この **[!UICONTROL Show my quotes]** フィルターを **[!UICONTROL My Quotes]** ページが期待どおりに動作するようになりました。 以前は、フィルター結果には他の管理者ユーザーの引用符が含まれていました。


### GraphQL


<!-- AC-1730-->

* `Types` GraphQLコードに複数のインターフェイスを実装する場合、 `&` 同様に署名する `,` GraphQLに従って `@doc`仕様。

<!-- ACP2E-885-->

* この `setShippingAddressesOnCart` 突然変異では、地域コードを `region`. 以前は、このミューテーションは、地域コードの数値で正しく機能しませんでした。

<!-- ACP2E-1237-->

* この `products` クエリは、指定したスコープに関連付けられたレビューのみを返すようになりました。 以前は、クエリはすべてのストアからレビューを返していました。

<!-- ACP2E-882-->

* カテゴリ権限がGraphQL要求時に考慮されるようになりました。

<!-- AC-1805-->

* この `customer` クエリで、指定したを含む注文に対してフィルターを適用するようになりました `from` および `to` の範囲が正しく設定されています。 [GitHub-31537](https://github.com/magento/magento2/issues/31537)

<!-- AC-5984-->

* この `product` クエリが、集計で正しいカテゴリデータを返すようになりました。 以前は、 `attribute_code.category_uid` 次の値を返しました： `category_id` の代わりに `category_uid`.

<!-- AC-6084-->

* この `customerOrders` クエリがスローされなくなりました `\"model\" value should be specified`エラー。 [GitHub-35852](https://github.com/magento/magento2/issues/35852)

<!-- ACP2E-894-->

* この `customer` クエリで、範囲に基づいて順序をフィルタリングできるようになりました。 クエリで、店舗、Web サイト、またはグローバルに注文をフィルタリングするかどうかを指定できるようになりました。

<!-- ACP2E-1172-->

* `categoryList` 現在は、アンカー付き親カテゴリとアンカー解除された親カテゴリの両方に対して正確な製品数を返します。 新しい `is_anchor` 属性がカテゴリコレクションの選択した列のリストに追加されました。 以前は、リクエストで返された製品数は 0 でした。 [GitHub-36300](https://github.com/magento/magento2/issues/36300)

<!-- AC-2500-->

* この `generateCustomerTokenAsAdmin` マルチストアデプロイメントのデフォルト以外のストアにログインするトークンを作成する際、ミューテーションが期待どおりに機能するようになりました。 [GitHub-35084](https://github.com/magento/magento2/issues/35084)

<!-- AC-1731-->

* この `createEmptyCart` ミューテーションで、期限切れのトークンを使用した場合に、期限切れの例外が想定どおりにスローされるようになりました。 [GitHub-26112](https://github.com/magento/magento2/issues/26112)

<!-- AC-1965-->

* 買い物かごのクエリエラーメッセージが、より有益になりました。 [GitHub-34546](https://github.com/magento/magento2/issues/34546)

<!-- AC-2798-->

* `products` クエリ応答集計データに、価格タイプ属性の正しい値が含まれるようになりました。 `attribute_code` および `label`. [GitHub-28878](https://github.com/magento/magento2/issues/28878)

<!-- AC-6685-->

* この `products` データベースのプレフィックスに null 以外の値が含まれる場合、クエリは期待どおりにカテゴリ情報を返します。 以前は、 `Internal server error`. [GitHub-36117](https://github.com/magento/magento2/issues/36117)

<!-- AC-1003-->

* 次の戻り値の型を修正しました： `getCustomerIsGuest` メソッド。 [GitHub-29529](https://github.com/magento/magento2/issues/29529)

<!-- B2B-2221-->

* この `Magento\CatalogGraphQl\Plugin\DesignLoader` プラグインのリファクタリングが行われました。

<!-- B2B-2379-->

* GraphQLの変異によって買い物かごが初期化された場合、買い物かごの再読み込みが期待どおりに 1 回だけトリガーされるようになりました。 以前は、買い物かごの読み込みで、在庫に対して不要な買い物かごの再検証がトリガーされ、買い物かごが読み込まれるたびに大量のリソースを消費していました。

<!-- AC-1726-->

* 追加された `gift_message` に入力します。 `OrderItemInterface`. [GitHub-29418](https://github.com/magento/magento2/issues/29418)

<!-- AC-2454-->

* GraphQL応答で返される製品オプションに、ユーザーが属するカタログ内の製品のみが含まれるようになりました。 ユーザーが共有カタログに属している場合は、共有カタログ内の製品のみが返されます。 ユーザーがゲストの場合、またはカスタム共有カタログの一部でない場合、公開カタログの製品のみが返されます。


### Google ReCAPTCHA

<!-- AC-3179-->

* reCAPTCHA エラーが `var/log/exception.log` Google V3 reCAPTCHA 管理者ログイン用のファイルが解決され、エラーメッセージは記録されません。 以前は、管理者ユーザーが設定したエラーが数秒ごとに次のエラーがスローされていました **[!UICONTROL Configuration]** > **[!UICONTROL Security]** > **[!UICONTROL Google reCAPTCHA Admin Panel]** 設定： `main.ERROR: Can not resolve reCAPTCHA parameter. {"exception":"[object] (Magento\Framework\Exception\InputException(code: 0): Can not resolve reCAPTCHA parameter. at /home/xxxxxxx/public_html/vendor/magento/module-re-captcha-ui/Model/CaptchaResponseResolver.php:25)"} []`. [GitHub-34975](https://github.com/magento/magento2/issues/34975)


### 画像

<!-- ACP2E-905-->

* PDF請求書伝票のロゴサイズに関する推奨事項を更新しました。


### インポート/エクスポート


<!-- ACP2E-957-->

* 既存の製品と同じ数値 URL キーを持つ製品を読み込む際に、端末のアルファベット文字が使用されていない場合、 **製品 URL サフィックス** が管理者で空に設定されている。

<!-- AC-6588-->

* この `bin/magento app:config:import`コマンドで、 `config.php` ファイルに `cron` 式。 以前は、次のエラーでインポートに失敗していました： `Import failed: Notice: Trying to access array offset on value of type null in [..]/vendor/magento/module-config/Model/Config/Backend/Currency/Cron.php on line 66`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-1289-->

* AWS S3 をリモートストレージとして使用した場合、完全なエクスポートが正しく機能するようになりました。 以前は、アップロードされたファイルサイズが原因で、書き出しに失敗していました。

<!-- ACP2E-982-->

* CSV ファイルの在庫データ列が見つからない場合、製品ステータスが正しくインポートされるようになりました。 以前は、製品のインポート後、デフォルトのソースが自動的に製品に割り当てられ、数量がゼロに設定され、CSV ファイルの在庫データ列が見つからない場合にステータスが在庫切れと表示されていました。

<!-- ACP2E-841-->

* インポートに 100 を超えるレコードが含まれる場合に、事前価格値をインポートすると、新規レコードと更新されたレコードに対して正しいカウントが提供されるようになりました。 以前は、インポート成功メッセージで誤ったカウントが提供されていました。

<!-- ACP2E-984-->

* 書き出された CSV ファイルに、複数の言語で保存されるカテゴリ名への正しいパスが含まれるようになりました。 カテゴリコレクション用のストア ID が追加されました。 以前は、書き出されたファイルには、デフォルトのストア表示から派生したカテゴリパスではなく、異なる言語の混合パスが含まれていました。

<!-- ACP2E-1319-->

* 特定のストア表示での製品のカスタムオプションをインポートで更新すると、正常に完了するようになりました。 以前は、製品関連の行が複数のバッチに分割されると、内部サーバーエラーが発生していました。

<!-- AC-6926-->

* この `Fixer.io` インポートサービスが期待どおりに動作するようになりました。 通貨レートが正常にインポートされるようになりました。 [GitHub-36010](https://github.com/magento/partners-magento2ee/issues/36010)

### 索引

<!-- ACP2E-1296-->

* カタログにバンドル製品が含まれている場合、価格の再インデックスがどの Web サイトにも割り当てられていない場合に、価格の再インデックスが正常に実行されるようになりました。 以前は、製品価格指数の実行時に次のエラーが発生していました。 `Warning: Undefined array key <bundel product id > in vendor/magento/module-bundle/Model/ResourceModel/Indexer/Price/DisabledProductOptionPriceModifier.php on line 117`. [GitHub-35796](https://github.com/magento/magento2/issues/35796)

### インフラ

<!-- AC-5972-->

* サードパーティに関する問題 `colinmollenhour/php-redis-session-abstract` モジュールと PHP 8.1 が解決されました。 [GitHub-35634](https://github.com/magento/magento2/issues/35634)


### 注文

<!-- ACP2E-998-->

* インストールスクリプトで渡された注文のプレフィックスが、注文 ID に正しく追加されるようになりました。

<!-- ACP2E-790-->

* 注文に長いカスタムテキスト値を持つ製品が含まれている場合、注文の詳細ページが正常に読み込まれるようになりました。 以前は、注文の詳細ページが読み込まれず、 `sales_order_item.product_options` 製品にテキストカスタムオプションの長い値が含まれている場合、列は正しく保存されませんでした。

<!-- AC-3178-->

* ストアフロントの注文ステータスが、一部払い戻しされた注文に対して正確になりました。 以前は、一部払い戻しが適用された場合、注文は出荷後も処理状態のままでした。 [GitHub-35528](https://github.com/magento/magento2/issues/35528)

<!-- AC-3031-->

* 顧客グループが **ログインしていません** ゲストユーザーが作成した注文の場合。 以前は、ゲストの注文概要では顧客グループが NULL で、確認 E メールと注文の書き出しに影響を与えていました。 [GitHub-35440](https://github.com/magento/magento2/issues/35440)

<!-- AC-2811-->

* ステータス： **[!UICONTROL Closed]** は、クレジットメモが発行され、顧客が払い戻された後、想定どおりに仮想注文に割り当てられるようになりました。 以前は、仮想製品は **[!UICONTROL Complete]** を選択します。 **[!UICONTROL Closed]** （注文のフッター）をクリックします。 [GitHub-35283](https://github.com/magento/magento2/issues/35283)

<!-- AC-6641-->

* ゲストは、数量が 1 未満の製品を注文できるようになり、製品数は次のように厳密に入力されるようになりました。 `float`. 以前は、製品数量は厳密に次のように入力されていました。 `int`、1 つ未満の製品数量に対する注文が失敗し、次のメッセージが表示されます。 `Some of the products are disabled`. [GitHub-36060](https://github.com/magento/magento2/issues/36060)

<!-- ACP2E-1313-->

* 送料の払い戻しが、 **[!UICONTROL Apply discount on prices]** 設定オプションが **[!UICONTROL including taxes]**.

<!-- ACP2E-1199-->

* 請求書、出荷、クレジット・メモ・グリッドは、注文がアーカイブされた後、非同期で更新されるようになりました。

<!-- ACP2E-1194-->

* 重複注文は、同じGraphQLリクエストを同時に実行した結果、発生しなくなりました。 見積もりは、注文の重複作成を防ぐために、最大 10 秒間ロックされるようになりました。2 番目のリクエストは次のエラーで失敗します。 `The cart isn't active` または `The order has already been placed and is currently processing`. このロック値は、 `Magento\Quote\Model\PlaceOrderMutex` クラス `lockWaitTimeout` パラメーター。 [GitHub-36274](https://github.com/magento/magento2/issues/36274)

<!-- ACP2E-860-->

* 会社属性の値が、チェックアウトワークフローの「請求」および「配送先住所」セクションに期待どおりに表示されるようになりました。 以前は、注文の作成時に店舗が適切に設定されなかったので、会社属性が注文の詳細ページに正しく表示されませんでした。 属性値は、 **会社を表示** プロパティが **[!UICONTROL optional]** 対象 **メイン Web サイト** マルチストアデプロイメント内。

<!-- ACP2E-1117-->

* この `customer_address_id` の値は、新しい請求先住所に対して期待どおりに設定されます ( **[!UICONTROL My billing and shipping address are the same]** チェックボックスがオンになっている。 請求先住所が配送先住所と同じかどうかを識別する追加条件が導入され、配送先住所の顧客住所 ID を設定する前に、その条件が導入されました。

<!-- AC-6057-->

* 注文の配置に関する同時実行の問題が解決されました。 以前は、異なるブラウザーから 2 つの注文が同時に（またはほぼ同じ時間に）おこなわれた場合、両方の注文に同じ注文 ID が割り当てられていました。 [GitHub-35833](https://github.com/magento/magento2/issues/35833)

<!-- AC-6908-->

* 非同期インデックス作成が有効な場合に、無料製品の自動請求注文を配置すると、期待どおりに動作するようになりました。 エントリは `sales_order_grid or sales_invoice_grid` これらの注文のテーブル。 以前は、Magento Open Sourceは例外をスローしていました。これは、アプリケーションが、注文の配置時に、に依存する代わりにグリッドのインデックスを作成しようとしたためです `cron`. [GitHub-36334](https://github.com/magento/magento2/issues/36334)


### 支払い方法


<!-- ACP2E-862-->

* 配送先住所と請求先住所で指定された国に対して COD が免除された場合、店頭のチェックアウトワークフローで COD 支払い方法が表示されなくなりました。 以前は、この機能の管理者設定は実装されていませんでした。

<!-- AC-1119-->

* 買い物客がトークンを保存していない場合、管理注文作成ワークフローの「支払い」セクションに Vault の支払い情報が表示されなくなりました。 [GitHub-33954](https://github.com/magento/magento2/issues/33954)

<!-- AC-2688-->

* 買い物かごの価格ルールによって割引が適用された後、カスタム価格が倍にならなくなりました。 [GitHub-35154](https://github.com/magento/magento2/issues/35154)

<!-- ACP2E-1120-->

* 「ゼロ小計チェックアウト」支払い方法を使用して注文が行われた場合、新しい注文保留ステータスが期待どおりに受け入れられるようになりました。

<!-- ACP2E-1121-->

* GraphQL経由の PayPal Express を使用するゲスト買い物客の注文作成時に、ゲストの E メール設定が考慮されるようになりました。 以前は、PayPal アカウントで設定された電子メールアドレスによって、設定された電子メールアドレスが上書きされていました。


#### Braintree


<!-- BUNDLE-3186-->

* 注文 ID が支払トランザクションの決済リクエストに追加されるようになりました。

<!-- AC-3030-->

* Magento Open Sourceが **[!UICONTROL Reports]** > **[!UICONTROL Braintree Settlement]**: `Error: Undefined constant Braintree\PaymentInstrumentType::ANDROID_PAY_CARD in /var/www/html/vendor/paypal/module-braintree-core/Ui/Component/Report/Listing/Column/PaymentType.php:49`. [GitHub-35434](https://github.com/magento/magento2/issues/35434)

<!-- BUNDLE-3043-->

* この `customerPaymentTokens` Vault が管理でオフになっている場合に、クエリがBraintreeトークンを返さなくなりました。

<!-- BUNDLE-3107-->

* この **[!UICONTROL Pay Later]** ボタンとバナーはイタリアとスペインで有効になっています。

<!-- BUNDLE-3137-->

* 管理者ユーザーは、Braintree支払い方法が有効な場合に、注文を作成したり並べ替えたりできるようになりました。 以前は、Magento Open Sourceが次のエラーをスローしていました： `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`.

<!-- BUNDLE-3139-->

* Braintreeの支払い方法を使用したBraintreeは、PayPal が有効で、 **[!UICONTROL Enable Card Payments]** は無効です。 以前は、プログレスバーが解決されず、Magento Open Sourceがこのコンソールエラーを表示していました。 `adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66)`. [GitHub-35961](https://github.com/magento/magento2/issues/35961)

<!-- BUNDLE-3140 3141-->

* 不正保護、ACH 支払い、およびローカル支払い方法の Web フックが実装されました。 不正保護ウェブフック (Fraud protection web hook) は、リスクの決定がBraintreeした場合にのみトリガーされます。 ACH ウェブフックは、ACH 支払が `settled` または `settlement decline`.

<!-- BUNDLE-3143-->

* この **[!UICONTROL Tagline]** および **[!UICONTROL Layout]** すべてのから設定フィールドが削除されました **[!UICONTROL PayPal]** ボタンを使用して、「管理スタイル設定」セクションで設定できます。

<!-- ACP2E-1229-->

* 買い物客が請求先住所を更新したときに、Braintreeの Vault での支払い方法オプションがチェックアウトワークフローで選択されたままになります。 以前は、買い物客が「 」を選択解除したときの支払い方法が選択解除されていました **[!UICONTROL My billing and shipping address are the same]** 」ボタンをクリックします。

<!-- BUNDLE-3184-->

* PayPal トランザクションで、 **[!UICONTROL Send Line Items]** 設定は管理者から有効になっています。

<!-- BUNDLE-3187-->

* ACH 支払い方法の検証ロジック **[!UICONTROL Account Number]** フィールドが 4 ～ 17 桁のテキストをサポートするようになりました。

<!-- BUNDLE-3043-->

* この `customerPaymentTokens` vault が管理者からオフになっている場合に、クエリがBraintreeトークンを返さなくなりました。

<!-- BUNDLE-3137-->

* 管理者ユーザーは、Braintree支払い方法が有効な場合に、顧客に対して注文を作成したり並べ替えたりできるようになりました。 以前は、Magento Open Sourceが次のエラーをスローしていました： `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`

<!-- BUNDLE-3139-->

* 店舗で買い物客がBraintreeの支払い方法を使用できるようになりました。 **[!UICONTROL Enable Card Payments]** は無効になっています。 以前は、Magento Open Sourceは次の JavaScript エラーをスローしていました。 `_adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66).`


#### パフォーマンス

<!-- ACP2E-1028-->

* 価格インデクサーで、大きなカタログの部分的なインデックス再作成中にレコードを置き換えた後、期待どおりに古いデータを削除するようになりました。 以前は、インデックスの再作成プロセスで古いレコードが置き換えられる前に削除されていたので、製品がストアフロントから一時的に消えることがありました。 [GitHub-35616](https://github.com/magento/magento2/issues/35616)

<!-- ACP2E-963-->

* のパフォーマンス `bin/magento/setup:upgrade` コマンドが改善されました。 以前は、このコマンドはデータベーストリガーを再作成し、コマンドの実行中に大きなダウンタイムを引き起こしていました。 また、インデクサーはスケジュール済みモードに戻らず、保存モードのままになりました。 [GitHub-33386](https://github.com/magento/magento2/issues/33386)

<!-- ACP2E-1016-->

* API による段階価格の更新が、より高速に実行されるようになりました。 以前は、段階価格を更新すると不要になりました `SELECT` クエリ。多数の顧客グループが製品に割り当てられた際に実行が遅延します。

<!-- ACP2E-1307-->

* カタログウィジェットの製品リストを含むページの読み込みが最適化されました。 以前は、非グローバル属性はデータベースから直接読み込まれていました。

### レポート

<!-- ACP2E-1104-->

* 注文合計レポート **から** および **から** 日付選択から選択した後、日付が正しく表示されるようになりました。

<!-- BUNDLE-3147-->

* この `ANDROID_PAY_CARD` ～に定着する `Braintree/Ui/Component/Report/Listing/Column/PaymentType.php` は置き換えられました `GOOGLE_PAY_CARD`. これにより、Braintreeレポートの問題が解決します。

### レビュー

<!-- ACP2E-1214-->

* 特定の範囲へのアクセスが制限された管理者ユーザーが、期待どおりに製品レビューを削除できるようになりました。

### 役割

<!-- ACP2E-1277-->

* に対する不足している ACL を追加しました。 **[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Services]** > **[!UICONTROL OAuth]**. 以前は、役割の権限を設定する際に、この OAuth 設定へのアクセスを定義できませんでした。


### 検索

<!-- ACP2E-989-->

* 引用符で囲まれた文字列の検索が、 **[!UICONTROL Minimum Terms to Match]** 設定が有効になっています。 以前は、Magento Open Sourceが次のエラーをスローしていました： `{"error":{"root_cause":[{"type":"parsing_exception","reason":"[match_phrase] query does not support [minimum_should_match]' ...`.

<!-- ACP2E-877-->

* この **サインアップポイント** 受注顧客グリッドの顧客レコードの検索フィルターが、注文の作成中に期待どおりに機能するようになりました。

<!-- ACP2E-783-->

* 複数語のクエリに対する検索候補の質が向上しました。

<!-- AC-6768-->

* 次の場合に使用可能なすべての製品の検索結果に、在庫切れのオプション出力が含まれるようになりました。 **[!UICONTROL Display Out Of Stock Products]** 有効 [GitHub-36055](https://github.com/magento/magento2/issues/36055)


### 送料

<!-- ACP2E-670-->

* FedEx、USPS、UPS の送料は、「無料送料買い物かご」ルールが買い物かご内の品目のサブセットのみと一致するように設定されている場合、正しく計算されます。

<!-- AC-937-->

* 注文の合計が、送料無料に適した指定の最小注文額を下回る場合、送料の管理ページには、送料無料オプションが表示されなくなりました。 [GitHub-33697](https://github.com/magento/magento2/issues/33697)

<!-- AC-838-->

* Magento Open Sourceが管理者ユーザーに従うようになりました。 **[!UICONTROL Show Company]** 配送先または顧客の住所を表示する際の設定 この設定を無効にした場合、配送会社は配送先、顧客の住所、またはデータベースの注文レコードに含まれなくなります。 以前は、設定が無効になっているにもかかわらず、情報が表示されていました。 [GitHub-33729](https://github.com/magento/magento2/issues/33729)

<!-- magento/magento2/pull/35631-->

* 発送の見積もり時に見積もりの余分な保存操作を削除しました。

<!-- magento/magento2/pull/35817-->

* `storeId` 範囲は、 `$request->getStoreId()` を使用して、見積もりを管理者ユーザーが作成した際に、範囲が失われないようにします。 以前は、サードパーティ製モジュールを使用して管理者から見積書を作成した場合、発送方法に問題が発生することがありました。

<!-- ACP2E-1304-->

* SEO に適した URL が、 `url_key` の設定は、store-view レベルで上書きされます。 以前は、カテゴリの製品 URL が SEO 対応の URL にリダイレクトされませんでした。

<!-- ACP2E-1196-->

* Magento Open Sourceが配送コストに割引を適用した場合に、最小注文額エラーがスローされなくなりました。

<!-- ACP2E-1190-->

* 配送料に割引が適用された後に税が適用された場合、配送料の払い戻しが正しく計算されるようになりました。

<!-- ACP2E-910 AC-3182-->

* GraphQLを介したリクエストされた買い物かごに適用されるすべてのプロモーション `cart` クエリは一緒に返されます。 プロモーションには、品目の割引、買い物かごのルール/割引、クーポン、ギフトカード、店舗クレジットが含まれます。 [GitHub-35545](https://github.com/magento/magento2/issues/35545)

<!-- AC-2363-->

* この `setShippingMethodsOnCart` ミューテーションは、選択した発送方法（税を含む）の値を返すようになりました。 [GitHub-31206](https://github.com/magento/magento2/issues/31206)

<!-- AC-1096-->

* GraphQLクエリの複数のアドレスに配送する注文の配送詳細を含め、GraphQLの応答で一意の配送 ID が期待どおりに渡されるようになりました。

### 税


<!-- AC-3201-->

* この **[!UICONTROL Display Zero Tax Subtotal]** 複数の発送方法を提供する展開の注文に対して、設定が期待どおりに適用されるようになりました。 以前は、この設定が無効になっている場合でも、配送方法が選択される前に、チェックアウト時にカートページにゼロ税フィールドが表示されていました。 [GitHub-35561](https://github.com/magento/magento2/issues/35561)

<!-- AC-3157-->

* Magento Open Sourceは、PHP 8.1 を実行するデプロイメントで、storefront カテゴリページに税付きのグループ化された製品を表示できるようになりました。以前は、Magento Open Sourceは製品のリストを表示せず、次の例外をスローしました。 `main.CRITICAL: Exception: Deprecated Functionality: ucfirst(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/m24/vendor/magento/module-tax/Pricing/Render/Adjustment.php on line 188 in /var/www/m24/vendor/magento/framework/App/ErrorHandler.php:61`. [GitHub-35500](https://github.com/magento/magento2/issues/35500)

<!-- ACP2E-1258-->

* マーチャントは、同じルール ID を含む別の更新に予定されている更新を移動できなくなりました。 以前は、同じルール ID を含む別の更新に更新が移動された場合に、買い物かご価格ルールのスケジュール更新で重複スケジュールが作成されていました。

<!-- ACP2E-1295-->

* 顧客の住所に関連付けられた VAT ID がない場合に、顧客グループの自動割り当てが機能するようになりました。 住所に VAT ID が含まれていない場合は、VAT 登録のない顧客に属すると見なされ、Magento Open Sourceは顧客グループを非 VAT グループに変更します。 以前は、 **[!UICONTROL Enable Automatic Assignment to Customer Group]** が有効になっている場合、顧客アカウントは `customerGroup` 顧客アカウントから VAT ID が削除された時点。

<!-- ACP2E-493-->

* ステージングプレビューモードでのステージング済みカタログルールに対して、正しい動的ブロックが表示されるようになりました。 以前は、関連のない動的ブロックが表示されていました。

<!-- ACP2E-1080-->

* チェックアウト時に複数配送が適用される場合、請求書とクレジット・メモの「税金要約」セクションで複数の税金が正しくレンダリングされるようになりました。

<!-- ACP2E-1076-->

* 固定製品税額と共に税金を含む注文小計が買い物かごページの買い物かごルール条件を超えた場合、割引は適用されなくなりました。 以前は、合計が買い物かごのルール条件を超えた場合でも、割引が適用されていました。

<!-- ACP2E-913-->

* `VAT_ID` ゲスト買い物客のチェックアウト中にGraphQLリクエストを介して追加できるようになりました。


### テスト

<!-- ACP2E-1171-->

* 異なるバージョンの `ICU` および `libxml` ライブラリ。

<!-- ACP2E-1134-->

* 開発者は、特定のストアビューでデータ器具を実行するようにシステムに指示できるようになりました。 新しいオプションパラメーター `scope` を受け入れる `string` は、店舗器具エイリアスに対応します。

<!-- ACP2E-1133-->

* オプションの `count` パラメーター。

<!-- AC-6860-->

* 非ネイティブが削除されました `array_first` 関数を MFTF フレームワークの dev 依存関係から取得します。

### 翻訳とロケール

<!-- ACP2E-912-->

* SCRIPT タグ内のフレーズに拡張 Unicode 文字を含む特殊文字で、インライン翻訳が正しく機能するようになりました。 以前は、編集済みのスクリプトで、インライン翻訳を使用すると、日本語の文字が正しくレンダリングされませんでした。

<!-- ACP2E-844-->

* この `ñ` 製品名の文字が `n` URL キーの生成時に実行されます。

<!-- AC-3499-->

* 実行の出力 `bin/magento i18n:collect-phrases` にメールテンプレートの翻訳を含めるようになりました。 `depend` は、期待どおりにを作成します。 [GitHub-35449](https://github.com/magento/magento2/issues/35449)

<!-- ACP2E-1135-->

* 製品ページの属性セット（コンボボックス）に日本語の文字を直接入力できるようになりました。 以前は、このコンボボックスに日本語の文字を直接入力すると、MacOSで Firefox ブラウザーを実行する際に、文字が変更または削除されていました。 この `textInput` HTML属性は、 `Value` および `valueUpdate` 属性。

<!-- ACP2E-1238-->

* この `getOptions` メソッドが正しく取得されるようになりました `price` 属性ラベルの値は、ストアビューに基づきます。 以前は、 `price` 属性が誤ったストア表示のためにGraphQLの操作中に変換されました。


### UI


<!-- ACP2E-1018-->

* 管理製品グリッドの特別価格、コスト、MSRP 列で、Web サイト固有の通貨が期待どおりに使用されるようになりました。 以前は、特別価格のストア表示でフィルタリングすると、管理カタログの製品グリッドに正しい通貨記号が表示されませんでした。

<!-- ACP2E-980-->

* 製品カスタムオプションのドラッグ&amp;ドロップ機能が期待どおりに動作するようになりました。 カスタマイズ可能なオプショングリッドで複数のページを使用できる場合に、カスタマイズ可能なオプションをページ間で移動できるようになりました。

<!-- ACP2E-866-->

* 管理ダッシュボードのグラフに、現在の暦年の初めから現在の日付までの YTD 期間が期待どおりに表示されるようになりました。 以前は、日付範囲は 12 ヶ月を超える期間が含まれていました。

<!-- AC-3088-->

* storefront ホームページに見つからないデフォルトの favicon が追加されました。 [GitHub-35493](https://github.com/magento/magento2/issues/35493)

<!-- ACP2E-1025-->

* 管理者に各管理者ユーザーの最新のログイン日が正常に表示されるようになりました。 以前は、管理者ユーザーが初めて管理者にログインしたときに、ログイン日が空の値が管理者ユーザーグリッドに表示されていました。


<!-- AC-3762-->

* E メールテンプレートのプレビュー機能 (**[!UICONTROL Marketing]** > **[!UICONTROL Communications]** > **[!UICONTROL Email Templates]**) では、テンプレートが正しく表示されるようになりました。 以前は、プレビュー画像は切り捨てられていました。 [GitHub-35697](https://github.com/magento/magento2/issues/35697)

<!-- magento/magento2/pull/35656-->

* 追加された `new-shipping-address-modal` 新しい配送先住所モーダルのスタイル設定をサポートするクラス。

<!-- magento/magento2/pull/35738-->

* の下に情報テキストを追加しました。 `Search Weight` 属性の `Storefront Properties` 管理者の入力フィールド **[!UICONTROL Stores]**  > [!UICONTROL Attributes] > **[!UICONTROL Product]**.

<!-- ACP2E-1323-->

* E メールのプレビューが、ポップアップウィンドウではなく別のタブで開くようになり、E メールの内容がより広く表示されます。 以前は、E メールコンテンツは切り捨てられていました。

<!-- ACP2E-1299-->

* ユーザーロールグリッドのフィルター機能 ( 管理者 **[!UICONTROL System]** > **[!UICONTROL Permissions]** > **[!UICONTROL User roles]** > **[!UICONTROL Administrators]**) が期待どおりに動作するようになりました。 配列の値は、別々に処理されるようになりました。 以前は、このグリッドにクエリを入力しようとすると、Magento Open Sourceがこのコンソールエラーをスローし、ページが読み込まれませんでした。 `Uncaught TypeError: Cannot read properties of null`. [GitHub-35993](https://github.com/magento/magento2/issues/35993)

<!-- ACP2E-328-->

* REST API を使用して顧客を作成する際の属性値の検証が追加されました。 無効な属性値が指定された場合、作成プロセスが失敗するようになりました。 以前は、必須フィールドではない性別の検証は行われていませんでした。 顧客の作成時に、性別に渡された値は `customer_entity` 表。

<!-- ACP2E-1105-->

* チェックアウト時に追加されるアドレスの形式が、期待どおりに保たれるようになりました。 以前は、空白行は無視されていました。

<!-- ACP2E-897-->

* 製品グリッドの列のグリッド表示を変更し、カスタム表示の新しい列を選択しても、「すべてのグリッド列をトリガー」アクションが実行されなくなりました。 以前は、列ボックスが表示されなくなり、グリッド内の製品が選択または選択解除されていました。 [GitHub-36302](https://github.com/magento/magento2/issues/36302)

<!-- ACP2E-1245 1405-->

* 管理者ユーザーは、管理者が完了したタスクログを正常に消去できるようになりました。 以前は、管理者が次のエラーを表示していました。 `Something went wrong`. [GitHub-36255](https://github.com/magento/magento2/issues/36255)

<!-- AC-7525-->

* テーマのヘッダー設定 `Welcome Text` に一重引用符文字を含めることができるようになりました。 以前は、Magento Open Sourceは次の JavaScript エラーをスローしていました。 `Uncaught SyntaxError: Unable to process binding "ifnot: function(){return customer().fullname }"`.

### URL の書き換え

<!-- ACP2E-808-->

* 製品の表示/非表示の変更 **[!UICONTROL Not Visible Individually]** グローバルな「すべてのストアビュー」の範囲で、visibility 属性を上書きしなかったストアビューの URL 書き換えのみが削除されるようになりました。 この方法で製品の表示を変更すると、URL キー属性を上書きした（ただし表示設定は上書きしなかった）ストアビューを含むすべてのストアビューに対して URL の書き換えが生成されます。 以前は、表示設定が変更されると、URL 書き換えルールが適用されていませんでした。

### Web API フレームワーク

<!-- ACP2E-1207-->

* REST API `DELETE /rest/V1/products/:sku/media/:entryId` 画像が他のストア表示の役割に割り当てられているので、製品から削除されていない場合、エラーメッセージを返すようになりました。 以前は、画像が正常に削除されなかった場合でも、API が成功応答を返していました。

<!-- ACP2E-1155-->

* 商人は REST API を使用して、総計ゼロの注文のクレジットメモを作成できるようになりました。 以前は、Magento Open Sourceに次のエラーが表示されていました： `The order does not allow a credit memo to be created. The credit memo's total must be positive. We can't create a credit memo for the invoice/order`.

<!-- ACP2E-1136-->

* REST API を使用して製品の Web サイトの割り当てを変更した後、製品の割り当てを管理製品編集ページに正確に反映するようになりました。 [GitHub-36281](https://github.com/magento/magento2/issues/36281)

<!-- ACP2E-863-->

* 製品を更新するための一括 REST API リクエスト中に、複数選択属性に重複オプション ID を含めることができなくなりました。 以前は、一括 API リクエストを送信して製品を更新する際に、複数選択属性に対して重複するオプション ID を設定できました。 この複数選択属性がレイヤーナビゲーションに含めるように設定されている場合、EAV インデックス作成は `Duplicate entry` エラー。

<!-- ACP2E-778-->

* 買い物かごの製品名で、指定したストア表示の値が期待どおりに使用されるようになりました。 以前は、買い物かご内の製品名は、常に REST API 買い物かご応答のデフォルトのストア表示値を返していました。

<!-- AC-5986-->

* 買い物かご項目のカスタムオプション値は、REST API を使用して更新できるようになりました。 [GitHub-35768](https://github.com/magento/magento2/issues/35768)

<!-- AC-1330-->

* 20 を超えるの一括 API リクエスト `sourceItems` これで、在庫が有効なデプロイメントが正常に完了しました。

<!-- ACP2E-1044-->

* Fixer currency サービスが ApiLayer で生成されたキーで期待どおりに動作し、通貨レートが正しく書き出されるようになりました。 以前は、Magento Open Sourceは、商人が管理者から通貨レートをインポートしようとするとエラーをスローしていました。

<!-- ACP2E-726-->

* これで、REST API を使用できます `/rest/V1/bulk?searchCriteria[filter_groups]` 検索条件による一括操作のクエリリクエスト。 以前は、次のエラーが返されていました。 `report.CRITICAL: Report ID: webapi-624bbb1db96c4; Message: Item (Magento\AsynchronousOperations\Model\Operation) with the same ID "0" already exists.`

<!-- magento/magento2/pull/36147-->

* 基本価格管理 API を使用して、管理ページとストアフロントカタログ検索ページの両方で製品価格が正しく更新されるようになりました。 [GitHub-33767](https://github.com/magento/magento2/issues/33767)


### ウィッシュリスト


<!-- ACP2E-1013-->

* 買い物客は、ログイン後にウィッシュリストに製品を追加できるようになりました。 以前は、ログイン後のフォームキーの検証に問題があったので、add-to-wishlist リクエストで送信されたフォームキーが無効になっていました。

<!-- ACP2E-341-->

* ゲスト顧客が確認 E メールでアカウントを確認した後、製品リストや表示ページのウィッシュリストに、期待どおりに製品が追加されるようになりました。 以前は、アカウントの確認後、製品はウィッシュリストに追加されませんでした。

<!-- ACP2E-1175-->

* この `addProductsToWishlist` クエリが、買い物客が製品の無効な値を持つ品目をウィッシュリストに追加しようとした場合に、情報エラーメッセージを返すようになりました `select` カスタムオプション。 以前は、ドロップダウンカスタムオプションの値に対するサーバー検証が見つからず、データベースの値が無効になっていました。 その結果、エンドポイントが次の内部サーバーエラーを返しました。 `GraphQL endpoint returns Internal server error with "Call`.


## コミュニティへの貢献

私たちは、より広いMagento Open Sourceコミュニティに感謝し、このリリースに対する彼らの貢献を認めたいと思います。

コミュニティエンジニアリングチーム [Magento寄稿者](https://magento.com/magento-contributors) は、貢献度の高い個人およびパートナーのリストを月、四半期、年別に管理しています。 寄稿者ページから、GitHub 上の結合された PR へのリンクをたどることができます。

### パートナーへの貢献

次の表に、パートナーによる貢献の概要を示します。 この表は、プル要求に貢献したパートナー、外部のプル要求番号、および関連付けられている GitHub 問題番号（使用可能な場合）を示しています。

{{$include /help/_includes/release-notes/engcomm-2-4-6-partner.md}}

### 個々の投稿者への投稿

次の表に、コミュニティメンバーからの投稿を示します。 この表は、プル要求に貢献したコミュニティメンバー、外部のプル要求番号、および関連付けられている GitHub 問題番号（使用可能な場合）を示しています。

{{$include /help/_includes/release-notes/engcomm-2-4-6-issues.md}}

## 必要システム構成

当社の技術スタックは、PHP および MySQL 上で構築されています。 詳しくは、 [必要システム構成](../../../installation/system-requirements.md).

## インストールおよびアップグレードの手順

Magento Open Source2.4.6 は、 [コンポーザー](../../../installation/composer.md).
