---
title: Adobe Commerce 2.4.0 リリースノート
description: 2.4.0 Adobe Commerce リリースの新機能、機能強化、バグ修正および既知の問題について説明します。
exl-id: 8dc18855-b040-4bc3-8c99-dd7e1407b1fa
source-git-commit: 55e0e688999c47f72593df46648609d9f9f98398
workflow-type: tm+mt
source-wordcount: '18873'
ht-degree: 0%

---

# Adobe Commerce 2.4.0 リリースノート

Adobe Commerce 2.4.0 では、PHP 7.4、Elasticsearch 7.6.x および MySQL 8.0 がサポートされています。セキュリティが大幅に変更され、デフォルトで管理者で 2 要素認証が有効になりました。 B2B の機能強化には、新しい注文承認ワークフローが含まれます。

**このリリースでは、Authorize.Net、eWay、CyberSource、および Worldpay の支払い方法の統合がコアコードから削除されました。 マーチャントは、Commerce Marketplaceで利用可能な公式の拡張機能に移行する必要があります**.

>[!NOTE]
>
>**Braintree支払いの統合**:2.4.0 以前は、マーチャントはコア統合の代わりに、Commerce Marketplaceから公式のBraintree支払い統合拡張機能をインストールして設定することをお勧めしていました。 このリリース（2.4.0）では、拡張機能がリリースに含まれるようになりました。 マーチャントは、2.4.0 のデプロイメントでBraintreeが正しく動作するように、追加の手順に従う必要があります。 参照： [Braintree](https://docs.magento.com/user-guide/payment/braintree.html) 2.4.0 への移行方法について詳しくは、こちらを参照してください。

このリリースには、2.3.5-p1 に含まれていたコア品質のすべての改善、コアコードに対する 100 を超える新しい修正、30 のセキュリティ強化が含まれています。 コミュニティメンバーによる 226 件の GitHub 問題の解決が含まれています。 これらのコミュニティの貢献度は、コアコードの小規模なクリーンアップから、Inventory managementやGraphQLの大幅な機能強化まで多岐にわたります。

>[!NOTE]
>
>マイナーリリースでは、コードが大幅に強化されています。 2.4.0 にアップグレードする前に、お使いの環境が最小要件を満たしていることを確認してください [技術スタック要件](../../../installation/system-requirements.md).

{{bics}}

>[!NOTE]
>
>セキュリティリリースのパッケージ名には、通常、-p1 が付加されます。 ただし、2.3.5 では、これらの命名規則から逸脱することは避けられず、後続のセキュリティパッケージ名に一時的な波及効果がありました。 特に、フル機能の 2.3.5 リリースは 2.3.5-p1 です。 2.4.0 GA の際にリリースするセキュリティリリースは、2.3.5-p2 です。 今後のリリースで、通常の命名規則に戻りたいと考えています。

## 適用 `AC-3022.patch` 引き続き DHL を配送業者として提供するため

DHL はスキーマバージョン 6.2 を導入し、2022 年 9 月にスキーマバージョン 6.0 を廃止する予定です。 DHL 統合をサポートするAdobe Commerce 2.4.4 以前のバージョンは、バージョン 6.0 のみをサポートしています。これらのリリースをデプロイするマーチャントは、 `AC-3022.patch` 早期に DHL を配送業者として提供し続けることができます。 を参照してください。 [配送業者として DHL を引き続き提供するためのパッチを適用する](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) パッチのダウンロードとインストールについては、ナレッジベースの記事を参照してください。

## セキュリティパッチを利用できます

マーチャントは、完全な四半期リリース（2.3.5-p2 など）が提供する何百もの機能修正や機能強化を適用しなくても、時間に依存するセキュリティ修正をインストールできるようになりました。 パッチ 2.3.5.2 （Composer パッケージ 2.3.5-p2）は、以前の四半期リリース 2.3.5-p1 で特定された脆弱性の修正を提供するセキュリティパッチです。 2.3.5 リリースに適用されたすべてのホットフィックスが、このセキュリティパッチに含まれています。 イ *ホットフィックス* では、特定の問題やバグに対処するリリースバージョンの修正について説明しています。）

セキュリティパッチの一般的な情報については、を参照してください。 [新しいセキュリティパッチリリースの紹介](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287)セキュリティパッチ （パッチ 2.3.5-p2 を含む）のダウンロードと適用については、を参照してください。 [オンプレミスでのクイックスタートのインストール](../../../installation/composer.md). セキュリティパッチには、セキュリティバグ修正のみが含まれ、完全なパッチに含まれる追加のセキュリティ機能強化は含まれません。

## その他のリリース情報

これらの機能のコードは四半期ごとのリリースにバンドルされていますが、これらのプロジェクトのいくつか（B2B、ページビルダー、Inventory management、Progressive Web Application （PWA） Studio など）も個別にリリースされています。 これらのプロジェクトのバグ修正は、各プロジェクトのドキュメントで利用できる別のプロジェクト固有のリリース情報に記載されています。

## ハイライト

このリリースのハイライトは次のとおりです。

### セキュリティの大幅な強化

このリリースには、30 を超えるセキュリティ修正と platform セキュリティの改善が含まれています。

#### リモートコード実行（RCE）およびクロスサイトスクリプティング（XSS）の脆弱性を閉じるのに役立つ 30 を超えるセキュリティ強化

これらの問題に関連する確認された攻撃は、今日まで行われていません。 ただし、特定の脆弱性が悪用されて、顧客情報にアクセスしたり、管理者のセッションを引き継いだりする可能性があります。 これらの問題のほとんどは、攻撃者が最初に管理者へのアクセス権を取得する必要があります。 そのため、IP許可リストに加えるを含め、管理者を守るために必要なすべての手順を実行することをお勧めします。 [二要素認証](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)、VPN の使用、ではなく一意の場所の使用 `/admin`、および適切なパスワードハイジーン。 参照： [Magento可能なセキュリティ更新プログラム](https://helpx.adobe.com/security/products/magento/apsb20-47.html) を参照してください。

#### その他のセキュリティ機能強化

* **管理者アカウント、magento.com ユーザーアカウント、Cloud SSH アクセス用の 2FA の実装**

   * **管理者アカウントを保護する**. 管理者には、2 要素認証（2FA）が必要になりました。 管理者ユーザーは、UI または web API から管理者にログインする前に、まず 2FA を設定する必要があります。 2FA はデフォルトで有効になっています。 2FA モジュールを無効にすることを強くお勧めします。  この追加の認証手順により、悪意のあるユーザーが承認なしに管理者にログインするのが難しくなります。 参照： [2 要素認証（2FA）](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html). <!-- MC-22631-->

   * **アカウントの保護**. 2 要素認証（2FA）は、追加されたオプションのセキュリティレイヤーを提供し、望ましくない方法でアカウントを使用しようとする不正ユーザーからmagento.com アカウントをより適切に保護します。 参照： [アカウントの保護](https://docs.magento.com/user-guide/magento/magento-account-secure.html).

   * **Cloud SSH アクセスの保護**. クラウドインフラストラクチャへのAdobeは、クラウド環境への SSH アクセスの認証要件を管理するための多要素認証（MFA）適用を提供します。 2FA の多要素認証は、プロジェクトではデフォルトで有効になっていません。  Adobeでは、この機能を有効にすることを強くお勧めします。 サポートが必要な場合は、サポートに問い合わせてください。 参照： [SSH アクセスの多要素認証を有効にする](https://devdocs.magento.com/cloud/project/project-enable-mfa-enforcement.html).

* **テンプレートフィルターの厳密モードがデフォルトで有効になりました**. 従来のモードでテンプレートフィルターを使用するコンポーネント（CMS ページやブロックを含む）は、リモートコード実行（RCE）に対して脆弱な可能性があります。 デフォルトで厳格モードを有効にすると、RCE 攻撃を意図的に有効にできなくなります。 <!-- MC-22982-->

* **UI データプロバイダーのデータレンダリングがデフォルトで無効になりました**. これにより、悪意のあるユーザーが任意の JavaScript を実行する機会がなくなります。 <!-- MC-17356-->

* **新規 `\Magento\Framework\Escaper` クラス**. このクラスは、 `.phtml` HTMLを生成するテンプレートと PHP クラス。 このクラスには、複数のコンテキストに関連するHTMLサニタイズメソッドが含まれています。 この `$escaper` ローカル変数は内で使用できます `.phtml` 非推奨（廃止予定）の代わりにとを使用する必要があります `$block->escape{method}`. 使用方法 `$escaper` むしろ `$block` 使用として `$block->escape{method}` は非推奨（廃止予定）になりました。

* **security.txt ファイルのサポート**. このファイルは、セキュリティの研究者がサイト管理者に潜在的なセキュリティの問題を報告するのに役立つ、サーバー上の業界標準ファイルです。

* **コンテンツセキュリティポリシー（CSP）のサポートの強化**. `SecureHtmlRenderer` がフレームワークに追加され、次の場所で利用できるようになりました `.phtml` インラインで許可リストに登録するテンプレート `style` および `script` タグ。 デフォルトの CSP 設定では、インラインスクリプトとスタイルは使用できません。この設定は、XML ファイルで上書きできます。 <!-- MC-34433-->

{{cve-notice}}

### Platform のアップグレード

次のプラットフォームのアップグレードは、web サイトのセキュリティとパフォーマンスの向上に役立ちます。 サポートされている PHP および PHPUnit、Elasticsearch、MySQL およびその他の依存性の一覧については、を参照してください。 [テクノロジースタックの要件](../../../installation/system-requirements.md).

* **PHP 7.4 のサポートが導入され、PHP 7.1 および 7.2 は非推奨となりました**. 2.4.0 では、PHP 7.4 のサポートが導入されました。

* **PHPUnit 9.x のサポートと PHPUnit 6.5 の廃止**. PHP 7.4 では、最新の PHPUnit テストフレームワークである PHPUnit 9.x を使用する必要があります。Commerce Marketplace拡張モジュールのベンダは、すべての新しい拡張モジュールが PHP 7.4 と互換性があり、すべての単体テストと統合テストが PHPUnit 9 で実行されるように設定されていることを確認しなければなりません。

* **Elasticsearch 7.6.x のサポート**. Elasticsearch 7.6.x は、Adobe CommerceとAdobe Commerceのデフォルトのカタログ検索エンジンになりました。 Elasticsearch 7.6.x をインストールしないと、バージョン 2.4.0 をインストールまたはアップグレードできません。Elasticsearchバージョン 2.x のコードは削除されました。 Elasticsearchバージョン 5.x および 6.x は非推奨となり、サポートされなくなりました。 参照： [検索エンジンの前提条件](../../../installation/prerequisites/search-engine/overview.md).

* **MySQL 8.0 のサポート**. バージョン 2.4.x は MySQL 8.x をサポートしています。（2.4.0 は MySQL 8.0.20 でテストされました）。 マーチャントは、改善されたパフォーマンス、セキュリティ、信頼性を活用するために、デプロイメントを MySQL 8.x に移行することをお勧めします。 MySQL 5.7 はMagento 2.4.x で引き続きサポートされますが、MySQL 5.6 はサポートされなくなりました。 2.4.x を MySQL 5.6 データベースでホストすることはできません。 参照： [MySQL](../../../installation/prerequisites/database/mysql.md).

* **MariaDB 10.4 のサポート**. MySQL 8.0 のサポートにより、マーチャントは MariaDB 10.4 をAdobe Commerceと共にデプロイできるようになります。 マーチャントは 2.4.0 で MariaDB 10.2 を引き続き使用できますが、パフォーマンスと信頼性を向上させるには、MariaDB 10.4 にアップグレードすることをお勧めします。 MariaDB 10.0 と 10.1 はサポートされなくなりました（このリリースで MySQL 5.6 のサポートが削除された結果）。
* **MySQL カタログ検索エンジンの削除**. MySQL 検索エンジンは 2.4.0 から削除され、デフォルトの検索エンジンとしてElasticsearchに置き換えられました。 Elasticsearchは、優れた検索機能とカタログパフォーマンスの最適化を提供します。  すべてのマーチャントは、2.4.0 をインストールしてデプロイするElasticsearchが必要です。参照： [Elasticsearchがインストールされていることを確認](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/prepare/prerequisites.html).

* **Zend フレームワークへの依存関係の移行 [ラミナス プロジェクト](https://getlaminas.org/about/foundation)** Zend フレームワークの Linux Foundation の Laminas プロジェクトへの移行を反映します。 Zend フレームワークは廃止されました。 を参照してください。 [Zend フレームワークの Laminas プロジェクトへの移行](https://community.magento.com/t5/Magento-DevBlog/Migration-of-Zend-Framework-to-the-Laminas-Project/ba-p/443251) DevBlog の投稿。

* **コントローラの分解** を使用すると、拡張機能開発者は「レイヤースーパータイプ」クラスを使用せずに ActionInterface を直接実装できます。 を参照してください。 [コントローラの分解](https://community.magento.com/t5/Magento-DevBlog/Decomposition-of-Magento-Controllers/ba-p/430883) DevBlog の投稿。 _プルリクエストで Vinai Kopp が開始した機能強化 [16268](https://github.com/magento/magento2/pull/16268) Lukasz Bajsarowicz がプルリクエストで最終決定 [26778](https://github.com/magento/magento2/pull/26778)_. [GitHub-9582](https://github.com/magento/magento2/issues/9582)

* **Signifyd 不正防止コードのコア統合の削除**. このコア機能はサポートされなくなりました。 マーチャントは、に移行する必要があります [Signifyd Fraud &amp; Chargeback Protection 拡張機能](https://marketplace.magento.com/signifyd-module-connect.html) これはCommerce Marketplaceで利用できます。

* この **コアBraintreeモジュールがコードベースから削除されました**. Braintree支払いモジュールに、同じ機能セットが提供されるようになりました。 参照： [Braintree支払い](https://marketplace.magento.com/paypal-module-braintree.html).

* Internet Explorer 11.x ブラウザーはサポートされなくなりました。

### インフラストラクチャの改善

このリリースには、フレームワークとモジュール（顧客アカウント、カタログ、CMS、読み込み、買い物かごおよびチェックアウト、B2B）の品質を向上させるコア品質の機能強化が含まれています。

* **サードパーティの支払い方法のコア統合の削除**. このリリースでは、Authorize.Net 支払い方法の統合がコアコードから削除されました。 マーチャントは、Commerce Marketplaceで利用可能な公式の拡張機能に移行する必要があります。 を参照してください。 [支払統合の廃止](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Magento-core-payment-integrations/ba-p/426445) devblog の投稿。 <!-- MC-29029-->

* **Elasticsearchの部分単語検索のサポート（新しいデフォルトの検索エンジン）**. Elasticsearchでは、クイック検索を使用する際に、商品名と SKU の検索用語で部分単語を使用できるようになりました。 この機能は、MySQL 検索エンジンでサポートされていましたが、このリリースでは非推奨（廃止予定）となり、Elasticsearchに置き換えられました。

* **PayPal JavaScript SDK のアップグレード**. PayPal Express Checkout の統合を最新の PayPal JavaScript SDK に移行しました。これは、必要なリスクパラメーターを自動的に収集して PayPal に渡す SDK です。 PayPal Express のチェックアウト支払い方法の動作は変更されません。 ただし、この SDK を最新バージョンにアップグレードすると、マーチャントは最新の機能とセキュリティ強化にアクセスできます。 <!-- MC-30962-->

* **Web セットアップウィザードの廃止と削除**. 2.4.0 をインストールまたはアップグレードするには、コマンドラインを使用する必要があります。参照： [Magentoのインストール](../../../installation/advanced.md).

* **Composer update plugin**. Composer プラグインは、ルート プロジェクトに対して行う必要のある変更を解決することにより、アップグレード プロセスを合理化します `composer.json` 新しいバージョンに更新する前にファイルを開きます。 このプラグインは、カスタマイズの上書きを防ぎます。 参照： [Composer ルート プラグインを使用したアップグレード](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/implementation/perform-upgrade.html).

* **販売者支援型ショッピング**. この機能を使用すると、マーチャントは、顧客に代わってストアフロントを表示できます。 顧客は、自分のアカウントへのストアフロントのアクセスを許可することを選択します。 このコミュニティ開発機能には、が開発した独自の拡張機能が含まれています [MAGEFAN](https://magefan.com/). 参照： [販売者支援ショッピング](https://docs.magento.com/user-guide/configuration/customers/login-as-customer.html). 次のような機能があります。

   * 顧客アカウントにログインできる管理者を制御する ACL を web サイトごとに設定できます
   * 複数の web サイトおよび顧客アカウント範囲との互換性
   * 顧客の代理で行われた注文は、ストアフロントおよび管理者に記録されます
   * すべてのセッションは管理者ログアウト後に破棄され、管理者は顧客パスワードにアクセスできません。

### パフォーマンスの向上

* **顧客データセクション無効化ロジックの改善**. このリリースでは、カスタム時のローカルストレージの既知の問題を回避する、すべての顧客セクションのデータを無効にする新しい方法が導入されています `sections.xml` 無効化がアクティブです。  （以前は、カスタムの場合にプライベートコンテンツ（ローカルストレージ）が正しく入力されていませんでした *etc/frontend/sections.xml* （アクションの無効化を使用） 参照： [非公開コンテンツ](https://developer.adobe.com/commerce/php/development/cache/page/private-content/).

* **Redis パフォーマンスの複数の最適化**. 機能強化により、各リクエストで実行される Redis に対するクエリの数が最小限に抑えられます。 これらの最適化には、次のものが含まれます。

   * Redis とMagento間のネットワークデータ転送のサイズの縮小

   * ロードする必要があるものをアダプタが自動的に判断する機能を改善することにより、Redis の CPU サイクル消費を削減します。

   * Redis 書き込みオペレーションの競合状態の削減

  参照： [ページとデフォルトキャッシュには Redis を使用します](../../../configuration/cache/redis-pg-cache.md) および [キャッシュの設定](../../../configuration/cache/caching-overview.md).

* **SQL クエリの結果のインベントリテーブルへのキャッシュを改善しました**. 以下のような機能強化が含まれています。

   * への SQL クエリのキャッシュ `inventory_stock_sales_channel` 表（16 ではなく 1 つのクエリ）

   * クエリの結果のへのキャッシュ `inventory_stock` 表（16 ではなく 1 つのクエリ）

* **クイックオーダーの買い物かごへの追加パフォーマンスが最大 25～30% 向上**.

* マーチャントはを使用できるようになりました [遅延読み込み](https://en.wikipedia.org/wiki/Lazy_loading) 画像を読み込みます。

### Adobe Stock統合 v2.0

**メディアギャラリーからストック画像プレビューのライセンスを取得する機能**. マーチャントは、Media Gallery でAdobe Stock プレビュー画像を検索できるようになりました。これにより、Stock プレビュー画像のライセンスを取得するために必要な手順の数が減ります。

### 新しいメディアギャラリー

以前のメディアギャラリーに代わるこの新しい置き換えは、メディアアセット用の新しい検索可能なインターフェイスを提供します。 管理者は、この機能の以前のバージョンよりも最大 30 倍高速に、画像を検索、フィルタリング、並べ替えることができるようになりました。 マーチャントはこのツールを使用して、ストアフロント画像の使用状況を評価できます。 拡張機能開発者は、Media Gallery 用に開発された拡張機能は、新しい Media Gallery では期待どおりに動作しないことに注意する必要があります。

### ページビルダー

ページビルダーで PHP 7.4 がサポートされるようになりました。

### Inventory management

このリリースのInventory managementの機能強化には、店舗でのピックアップとバンドル製品のサポートが含まれています。 参照： [Inventory management リリースノート](https://experienceleague.adobe.com/docs/commerce-admin/inventory/release-notes.html) 最近のInventory managementのバグ修正についての詳細な説明。

### GraphQL

GraphQLの機能強化は次のとおりです。

* `pickupLocations` クエリでは、在庫店舗内ピックアップ機能をサポートしています
* `categories` クエリを実行すると、指定したフィルターに一致するカテゴリのリストが返されます。 このクエリは次のクエリとは異なります `categoryList` ページネーションをサポートするという点でクエリです。
* `reorderItems` ミューテーションを使用すると、ログインユーザーは、以前の注文のすべての製品を買い物かごに追加できます。

を参照してください。 [GraphQL開発者ガイド](https://devdocs.magento.com/guides/v2.4/graphql/) この機能強化およびその他の機能強化について詳しくは、こちらを参照してください。 参照： [リリースノート](https://devdocs.magento.com/guides/v2.4/graphql/release-notes.html) 最近のGraphQLのバグ修正についての詳細な説明

### PWA Studio

参照： [互換性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) PWA Studioのバージョンとその互換性のあるバージョンのリストを確認できます。 機能強化とバグ修正について詳しくは、以下を参照してください [PWA Studioリリース](https://github.com/magento/pwa-studio/releases).

### B2B

**B2B の注文承認ワークフロー機能**. 注文の承認では、購買組織のマネージャーが購入者の承認ルールを設定できます。 参照： [承認ルール](https://docs.magento.com/user-guide/customers/account-dashboard-approval-rules.html). 次のような機能があります。

* 各会社アカウントに対する一意の承認ルールのセルフサービス設定
* 設定可能なしきい値を使用して、注文金額、品目数または出荷原価に基づくことができるルール基準
* 機能のあらゆる側面に対応するカスタマイズ可能な権限
* 承認が必要な発注書のクイック ストアフロント表示
* 各発注書で実行されたアクションの完全な履歴ログ
* 承認プロセスのすべてのステップで関係者にメール通知を送信します。

このリリースには、複数のバグ修正も含まれています。 参照： [B2B リリースノート](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### 機能テストフレームワーク（MFTF）

MFTF v3.0.0 には以下の新機能が含まれており、PHP 7.4 および PHPUnit 9 のサポートが含まれています。

* MFTF ヘルパー（テストフレームワーク外でカスタムアクションを作成できます）
* テストエンティティのスキーマ更新
* テストモジュールのサブフォルダー
* ネストされたアサーション構文
* 非推奨のテストエンティティへの参照を確認して報告する静的チェック

また、このリリースでは、MFTF のメジャーバージョン要件に対するアップグレードテストに追加された、非推奨のアクションおよびアップグレードスクリプトも削除されています。

### ベンダーが開発した拡張機能の強化

このリリースには、サードパーティベンダーが開発した拡張機能が含まれています。 これらの拡張に対して品質と UX の両方の改善を導入し、MFTF カバレッジを拡張しました。

Commerce Marketplace拡張モジュールのベンダは、2.4.0 用の新しいバージョンの拡張モジュールを公開する際に、PHP 7.4 との互換性を確認する必要があります。

#### dotdigital

このリリースには、次の機能強化が含まれています。

* 任意の入力タイプ（ドロップダウン、複数選択など）で取り込まれる顧客属性値が、データフィールドとして正しく同期されるようになりました。
* カートのインサイトデータが、項目が含まれていない場合でも、すべてのアクティブな見積もりに対して送信されるようになりました。 これにより、マーチャントは、買い物かごを空にした場合にプログラムから連絡先を終了できます。
* マーチャントは、web サイト名、ストア名、ストアビュー名を個々のデータフィールドで同期できるようになりました。
* ウィッシュリスト、レビューおよび注文の同期で、トランザクションデータの同期制限が 1 回だけ検索されるようになりました。
* クライアントクラスからのログ出力が改善され、API ラッパーのすべてのメソッドで一貫性が保たれるようになりました。
* 設定可能な製品には、子製品の合計である在庫数が表示されるようになりました。
* 新しいプラグインは、（管理者以外の）サードパーティコードによって実行されるストックアップデートを検出します。
* データマッピングおよびトランザクションメールの設定情報が更新されました。

#### Amazon ペイ

このリリースの内容は次のとおりです。

* CSP のアップデート^許可リスト
* 複数アイテムの注文に対して複数の承認を実行する機能
* 日本語アドレスのサポート

#### Braintree支払い

このバンドルされた拡張機能は、このリリースで削除されたコアBraintree統合に代わるものです。 参照： [Braintree支払い](https://marketplace.magento.com/paypal-module-braintree.html).

#### クラルナ

このリリースには、買い物客が利用可能なクレジットと資金調達オプションを理解するのに役立つ、新しいオンサイトメッセージオプションが含まれています。 また、次の点も改善されています。

* 払戻
* API の効率性
* cookie と単体テスト
* 割引
* 設定には、Klarna のプロモーションメッセージのストアフロント表示を制御するためのオンサイトメッセージセクションが含まれるようになりました

#### 頂点

Vertex のこのリリースには、次の新機能と機能強化が含まれています。

* 管理設定のユーザーエクスペリエンスの向上
* インストールスクリプトやアップグレードスクリプトを XML スキーマファイルやパッチに置き換える
* 非推奨コードの削除（`ApiClient` および `ClientInterface`）

#### ヨッポ

Yotpo の評価とレビューは、ページビルダーと統合されています。

## 修正された問題

2.4.0 コアコードの何百もの問題を修正しました。

### インストール，アップグレード，デプロイメント

<!-- MC-23940-->

* で web サイトの範囲固有の設定と共に、web サイトを正常に削除できるようになりました `app/etc/config.php` 期待どおりだ。 以前は、web サイトを削除しようとすると、操作に失敗し、アプリケーションに次のエラーが表示されていました。 `The website with code xxx that was requested wasn't found. Verify the website and try again`. さらに、アプリケーションによってストアフロントに次のエラーが表示されました。 `Config files have changed. Run app:config:import or setup:upgrade command to synchronize configuration`. [GitHub-24061](https://github.com/magento/magento2/issues/24061)

<!-- MC-30140-->

* で無効になっている設定 `index.php` は、管理者からは編集できなくなりました。

<!-- MC-32405-->

* でストア設定が事前定義されている場合、Adobe Commerceのインストールが正常に完了し、ストアが期待どおりに作成されるようになりました。 `config.php`.

<!-- MC-33151-->

* `\Magento\Store\App\Config\Source\RuntimeConfigSource::getEntities` は、の数を減らすためにリファクタリングされました。 `SHOW TABLE STATUS` クエリを作成します。 （この変更は、この関数が 2.3.3 で表示された動作に戻ります）。

<!-- MC-23890-->

* を実行してデータベースをアップグレードしようとするたびに、データスクリプトが再実行されなくなりました。 `bin/magento setup:upgrade`. 以前は、アップグレードスクリプトが不必要に再実行されたため、パフォーマンスに影響がありました。 [GitHub-19469](https://github.com/magento/magento2/issues/19469)

<!-- MC-30397-->

* Redis への接続が中断されると、アプリケーションに次の動作が表示されます。 以前は、アプリケーションは現在のページを再読み込みせず、次のエラーが表示されていました。 `An error has happened during application run. See exception log for details`.

   * 管理およびストアフロントのセッションの有効期限
   * 管理者およびストアフロントのユーザーは、もう一度ログインする必要があります
   * セッションデータの保存先 `var/session/`
   * エラーや例外はログに記録されません。

<!-- ENGCOM-6686-->

* この `bin/magento setup:di:compile` 匿名クラスでコマンドが失敗しなくなりました。 _プルリクエストで Yevhen Sentiabov によって送信された修正 [26533](https://github.com/magento/magento2/pull/26533)_. [GitHub-26532](https://github.com/magento/magento2/issues/26532), [GitHub-21555](https://github.com/magento/magento2/issues/21555)

<!-- ENGCOM-5546-->

* デフォルトでMagentoに付属している LESS コンパイラーとは異なる LESS コンパイラーを使用した場合に、アプリケーションの Luma テーマで LESS コンパイラーに関する問題が解決されました。 _プルリクエストで Pieter Hoste によって修正が送信されました [24003](https://github.com/magento/magento2/pull/24003)_. [GitHub-23619](https://github.com/magento/magento2/issues/23619)

<!-- ENGCOM-6367-->

* 書き込み可能なは不要になりました `env.php` ファイルは、メンテナンスモードに切り替えるときに使用されます。 代わりに、アプリケーションはを設定します `no-cache` メンテナンスモードでのすべてのフロントエンドリクエストのヘッダー（`Cache-Control`）に設定します。 以前は、次の場合にメンテナンスモードを有効にすることができませんでした `env.php` は読み取り専用であり、アプリケーションはメンテナンスモードに切り替えるときに FPC を無効にしようとしました。 _プルリクエストで Marco k̦Pcke によって送信された修正 [25790](https://github.com/magento/magento2/pull/25790)_. [GitHub-24229](https://github.com/magento/magento2/issues/24229)

<!-- ENGCOM-7236-->

* `db-ssl-verify`  の間に未定義のインデックスエラーが発生しなくなりました `ddev` 設定。 _Daniel Ruf によってプルリクエストで送信された修正 [26763](https://github.com/magento/magento2/pull/26763)_. [GitHub-26762](https://github.com/magento/magento2/issues/26762)

<!-- ENGCOM-6247-->

* Composer の依存関係が更新され、Redis キーの有効期限が実装されました。これにより、Redis のパフォーマンスが向上しました。 _Toxix がプルリクエストで送信した修正 [25488](https://github.com/magento/magento2/pull/25488)_. [GitHub-25487](https://github.com/magento/magento2/issues/25487)

### AdminGWS

<!-- MC-33031-->

* ロール範囲が制限された管理者が代替テキストを変更できるようになり、アプリケーションでこれらの値が保存されます。 管理者が代替テキストの変更を許可されていない場合、代替テキストボックスは灰色表示になります。

### Adobe Stockの統合

<!-- ENGCOM-6507-->

* 選択した画像のハイライト表示をサポートするために、CSS スタイルがAdobe Stockの画像表示装置に追加されました。  _プルリクエストで Serhiy Zhovnir が修正を送信しました [25864](https://github.com/magento/magento2/pull/25864)_. [GitHub-761](https://github.com/magento/adobe-stock-integration/issues/761)

<!-- ENGCOM-7021-->

* 矢印キーを使用して入力フィールドカーソルを動かしても、Adobe Stock プレビュー画像のナビゲーションがトリガーされなくなりました。  _プルリクエストで Adarsh Manickam によって修正が送信されました [27138](https://github.com/magento/magento2/pull/27138)_. [GitHub-973](https://github.com/magento/adobe-stock-integration/issues/973)

<!-- ENGCOM-6840-->

* ユーザーがAdobe Stock画像にフィルターを適用しようとすると発生するエラーに対して、アプリケーションがメッセージをキャッシュするようになりました。 _プルリクエストで Shankar Konar が修正を送信しました [26502](https://github.com/magento/magento2/pull/26502)_. [GitHub-863](https://github.com/magento/adobe-stock-integration/issues/863)

<!-- ENGCOM-7195-->

* クリックした後にカーソルをウィンドウの左縦スクロールバーに移動しても、Adobe Stock画像のプレビューが保存されなくなりました **プレビューを保存** ただし、保存操作を確認していません。 _プルリクエストで Serhiy Zhovnir が修正を送信しました [27399](https://github.com/magento/magento2/pull/27399)_. [GitHub-1002](https://github.com/magento/adobe-stock-integration/issues/1002)

### Analytics

<!-- MC-32086-->

* ストアの URL を変更した後、ストアの分析レポートが期待どおりに使用できるようになりました。 以前は、URL が変更された後にレポートにアクセスしようとすると、アプリケーションに 404 エラーが表示されていました。

<!-- MC-32085-->

* AR サブスクリプションが有効な場合、分析レポートのデータ同期が期待どおりに有効になりました。

### バックエンド

<!-- MC-25036-->

* メールテンプレート （**Admin** > **Marketing** > **通信** > **メールテンプレート**）は、JavaScript の縮小が有効な場合、管理者からプレビューできるようになりました。 以前は、メールテンプレートをプレビューしようとすると、メールのプレビューポップアップウィンドウが空でした。 [GitHub-25068](https://github.com/magento/magento2/issues/25068)

<!-- ENGCOM-6433-->

* 管理者は、制限付き権限を持つ管理者アカウントの作成後、期待どおりに管理者にログインできるようになりました。 以前は、管理者にアクセスできませんでした。 代わりに、これらの権限を持つユーザーは 404 エラーでストアフロントにリダイレクトされました。 _プル要求で Eden Duong が修正を送信 [25909](https://github.com/magento/magento2/pull/25909)_. [GitHub-25881](https://github.com/magento/magento2/issues/25881)

<!-- ENGCOM-6785-->

* 製品を複製する際に、URL キー、メタタイトル、メタキーワード、メタ説明などの SEO データがアプリケーションで複製されなくなりました。  _Dasharth patel がプルリクエストで修正を送信しました [26659](https://github.com/magento/magento2/pull/26659)_. [GitHub-26054](https://github.com/magento/magento2/issues/26054)

<!-- ENGCOM-6442-->

* ページから画像を作成しているときに、その画像をページから削除するとアプリケーションがエラーをスローしなくなりました。 **Admin**  > **コンテンツ** > **ページ**  >  **新しいページを追加**. 以前は、アプリケーションは開発者コンソールにこのエラーをスローしていました。 `500 (Internal Server Error)`. _プル要求で Eden Duong が修正を送信 [25924](https://github.com/magento/magento2/pull/25924)_. [GitHub-25893](https://github.com/magento/magento2/issues/25893)

### バンドル製品

<!-- MC-25251-->

* のパフォーマンス `catalog_product_price` バンドル製品の再インデックス操作が改善されました。

<!-- MC-29633-->

* 管理者は、バンドル製品のが次の場合、バンドル製品の管理者に税クラスを手動で入力できなくなりました **税クラス** および **ダイナミック価格** デフォルトのストア表示では設定が無効になっています。 以前は、管理者がをオフにしたとき **デフォルト値を使用** 次のオプション **税クラス**&#x200B;を選択すると、アプリケーションによってオプションが有効になり、管理者が別の値を入力して製品を保存できるようになりました。

<!-- MC-30257-->

* 製品ページでバンドルの製品価格が正しく計算されるようになりました。

<!-- MC-29745-->

* エラーなく、任意の数のバンドル製品を買い物かごに追加できるようになりました。 以前は、バンドル製品を買い物かごに追加してから買い物かごに移動すると、アプリケーションに次のエラーが表示されていました。 `Please correct the quantity for some products`.

### キャッシュ

<!-- ENGCOM-7114-->

* この `cache.xsd` スキーマの送信元 `Magento\Framework\Cache` を持たないキャッシュタイプとなるようにリファクタリングされています。 `instance` 管理キャッシュ管理を使用してモジュールを無効にする際に、属性で例外が発生しなくなりました。 以前は、を使用してキャッシュタイプを作成した場合 `cache.xml` なし `instance` 引数を無効にしようとすると、アプリケーションが例外をスローしました。  _Andrii Beziazychnyi がプルリクエストで送信した修正 [27307](https://github.com/magento/magento2/pull/27307)_. [GitHub-26224](https://github.com/magento/magento2/issues/26224)

<!-- ENGCOM-6834-->

* `health_check.php` デプロイメントにデータベースキャッシュエンジンが設定されている場合でも、は失敗しなくなりました。 _Andrii Beziazychnyi がプルリクエストで送信した修正 [25722](https://github.com/magento/magento2/pull/25722)_. [GitHub-25669](https://github.com/magento/magento2/issues/25669)

### 買い物かごとチェックアウト

<!-- MC-23870-->

* 以下の場合、チェックアウト中にアプリケーションがエラーをスローしなくなりました。 **バックエンドとの同期** 構成設定が有効になっています。 [GitHub-23833](https://github.com/magento/magento2/issues/23833)

<!-- MC-29786-->

* 配送方法のラジオボタンが、チェックアウトワークフローで期待どおりに有効になりました。

<!-- MC-30258-->

* で利用条件を指定した場合、チェックアウトワークフローの注文レビューページが、複数の住所に出荷される注文に対して正常に読み込まれるようになりました **手動で適用** 設定は有効になっています。 以前は、レビューページが検証に合格せず、アプリケーションに 404 エラーが表示されていました。

<!-- MC-32330-->

* 価格が買い物かごで更新されている間、アプリケーションに回転アイコンが表示されるようになりました。

<!-- MC-33230-->

* ミニ買い物かごの商品がチェックアウト前に在庫切れになった場合、アプリケーションに情報メッセージが表示されるようになりました。 在庫切れの項目を削除すると、次の項目が表示されます **チェックアウトに進む** ボタン。 以前は、アプリケーションにこのボタンは表示されていませんでした。

<!-- MC-31391-->

* をクリックして製品を追加しようとすると、アプリケーションに情報エラーメッセージが表示されるようになりました。 **SKU で並べ替え** アップロードするファイルが破損している場合。 以前は、アプリケーションで空白のページが表示されていました。

<!-- MC-32962-->

* アプリケーションは、ルール条件に一致するバンドル製品の子製品にのみ買い物かご価格ルールを適用するようになりました。 以前は、アプリケーションはバンドル製品に属するすべての子製品に買い物かご価格ルールを適用していました。

<!-- ENGCOM-7485-->

* `StorefrontMiniCartSection`  はに置き換えられました`StorefrontMinicartSection` （MFTF テスト）。   _プルリクエストで Andrii Kalinich によって送信された修正 [27955](https://github.com/magento/magento2/pull/27955)_. [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-6389-->

* 配送先住所フォームの国セレクターコンポーネントへのハードコーディングされた参照が削除されました。  _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [25541](https://github.com/magento/magento2/pull/25541)_. [GitHub-22416](https://github.com/magento/magento2/issues/22416)

<!-- ENGCOM-6522-->

* Internet Explorer でストアフロントを表示する際にカーソルをアイコンの上に置くと、買い物かごの削除アイコンに下線が表示されなくなりました。  _プル要求で divyajyothi5321 によって送信された修正 [26173](https://github.com/magento/magento2/pull/26173)_. [GitHub-26164](https://github.com/magento/magento2/issues/26164)

<!-- ENGCOM-6615-->

* 請求先と配送先住所の両方に 1 つの住所が選択されている場合に、請求先の住所を変更しても、顧客の配送先住所は変更されなくなりました。 _プルリクエストで Yurii Tvardyi によって送信された修正 [26279](https://github.com/magento/magento2/pull/26279)_. [GitHub-26276](https://github.com/magento/magento2/issues/26276)

<!-- ENGCOM-6251-->

* ミニ カートのプロモーション領域が、期待どおりにレンダリングされるようになりました。 _プルリクエストで Matti Vapa によって送信された修正 [25375](https://github.com/magento/magento2/pull/25375)_. [GitHub-25373](https://github.com/magento/magento2/issues/25373)

### 買い物かご価格ルール

<!-- MC-23986-->

* 支払方法に基づく買い物かご価格ルールが、チェックアウトワークフロー中に適用されるようになりました。 [GitHub-24206](https://github.com/magento/magento2/issues/24206)

<!-- ENGCOM-6550-->

* の日付選択ページ要素の動作を修正しました **Admin** > **Marketing** > **プロモーション** > **カタログ価格ルール**. _Hitesh によってプルリクエストで修正が送信されました [26290](https://github.com/magento/magento2/pull/26290)_. [GitHub-26289](https://github.com/magento/magento2/issues/26289)

<!-- ENGCOM-7485-->

* `StorefrontMiniCartSection`  はに置き換えられました `StorefrontMinicartSection` （MFTF テスト）。   _プルリクエストで Andrii Kalinich によって送信された修正 [27955](https://github.com/magento/magento2/pull/27955)_. [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-5822-->

* 新しい買い物かご価格ルールを作成ワークフローの未使用のクーポングリッドが無効になっています。 _プル要求で Eden Duong が修正を送信 [24471](https://github.com/magento/magento2/pull/24471)_. [GitHub-24468](https://github.com/magento/magento2/issues/24468)

<!-- ENGCOM-6615-->

* 請求先住所を変更しても、請求先住所と出荷先住所の両方に 1 つの住所が選択されている場合に、顧客の出荷先住所が変更されなくなりました。 _プルリクエストで Yurii Tvardyi によって送信された修正 [26279](https://github.com/magento/magento2/pull/26279)_. [GitHub-26276](https://github.com/magento/magento2/issues/26276)

### カタログ

<!-- MC-23633-->

* 製品の数量属性を変更する制限付き管理者の機能が無効になり、高度な在庫が期待どおりに無効になります。 以前は、数量属性の視覚的表示のみが影響を受けていました。製品を保存した後に、アプリケーションによってデータベース内の数量値が変更されました。

<!-- MC-25235-->

* スケジュールされた更新に含まれる階層化された製品の名前を変更しても、アプリケーションでエラーがスローされなくなりました。 以前は、新しい名前で製品を保存しようとすると、アプリケーションに次のエラーが表示されていました。 `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '3-0-0-2.0000-0' for key 'UNQ_EBC6A54F44DFA66FA9024CAD97FED6C7', query was: INSERT INTO catalog_product_entity_tier_price (all_groups, customer_group_id, qty, value, website_id, percentage_value, row_id) VALUES (?, ?, ?, ?, ?, ?, ?)`

<!-- MC-29023-->

* カスタム属性値を、管理者から期待どおりに保存できるようになりました。

<!-- MC-29775-->

* 最近表示された製品機能で、マルチストア展開で現在のストア表示にのみ関連付けられている製品が表示されるようになりました。 **ストア** > **設定** > **カタログ** > **最近表示/比較した製品** > **現在のを表示** はに設定されています。 **ストア表示**. 以前は、アプリケーションは、製品が割り当てられた web サイトに関係なく、最近すべての web サイトから閲覧された製品を表示していました。

<!-- MC-29896-->

* このアプリケーションは、ミニカートに商品画像を歪みなく表示するようになりました。 以前は、アプリケーションは、画像コンテナの幅と高さ全体を埋めるために、ミニカートに画像を引き伸ばしました。

<!-- MC-29866-->

* この `getBasePrice` 関数は、文字列ではなく、期待どおりに float 値を返すようになりました。

<!-- MC-30229-->

* 製品比較機能が期待どおりに動作するようになりました。 現在のユーザーの比較リストにある製品のみが表示されるようになりました。

<!-- MC-30234-->

* テーマにデフォルトの透かしを割り当てることができるようになりました。 以前は、透かしを割り当てた後、アプリケーションが致命的なエラーをスローしていました。

<!-- MC-30540-->

* 多数のバリアント（約 5,000）を持つ設定可能な製品を管理者から正常に編集できるようになりました。 以前は、多数のサブ製品を含む設定可能な製品を編集しようとすると、アプリケーションに次のエラーが表示されていました。 `Warning: DOMDocumentFragment::appendXML(): Entity: line 1: parser error : CData section too big found in /vendor/magento/framework/View/TemplateEngine/Xhtml/Template.php on line 60`

<!-- MC-30734-->

* 属性セットでの並べ替え **Admin** > **カタログ** > **製品** は、期待どおりのアルファベット順に基づいています。

<!-- MC-30794-->

* 最近表示された製品機能が、マルチストア展開で期待どおりに動作するようになりました。

<!-- MC-31837-->

* カタログへの権限が制限されている管理者は、ダウンロード可能な製品を作成できるようになりました。 以前は、管理者はダウンロード可能な製品を作成できず、アプリケーションがエラーをスローしていました。

<!-- MC-31838-->

* この **Web サイト内の製品** マルチサイトデプロイメントでの制限付き管理者に対して、新しい製品ページのチェックボックスがデフォルトで有効になりました。 以前は、デフォルト以外の web サイトのチェックボックスは事前に選択されておらず、管理者がそのチェックボックスを選択しないままにした場合、アプリケーションにエラーメッセージが表示されていました。

<!-- MC-32772-->

* `addToCart` イベントは、データレイヤーで期待どおりに追跡されるようになりました。 以前は、製品の設定可能なオプションを変更した後、 **カートに追加**、新規 `addToCart` イベントはデータレイヤーに追加されませんでした。

<!-- MC-29449-->

* ミニカートと管理者の買い物かご（**Admin** > **顧客** > **買い物かごの管理**） カタログ価格ルールが適用された場合に、正しい製品価格が表示されるようになりました。 以前は、ストアフロントの買い物かごには正しい製品価格が表示されていましたが、ミニカートと管理者の買い物かごには元の製品価格が表示されていました。

<!-- MC-30777-->

* 管理製品グリッドの web サイト列のフィルタリングが期待どおりに動作するようになりました。 以前は、フィルター結果に正しい製品数が表示されていませんでしたが、一貫して製品総数が 1 と表示されていました。

<!-- MC-31432-->

* 価格条件での使用 `catalog_product_entity_decimal` 価格でフィルタリングします。 ただし、このテーブルには、設定可能な製品、バンドルの動的な製品、グループ化された製品のレコードはありません。これらの製品には固定価格がないためです。 価格によるフィルタリングに使用する正しいテーブルは、次のとおりです `catalog_product_index_price`.

<!-- ENGCOM-7104-->

* 管理カタログおよび製品リストの MSRP、コスト、特別価格列に通貨記号が表示されるようになりました。 _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [27261](https://github.com/magento/magento2/pull/27261)_. [GitHub-21910](https://github.com/magento/magento2/issues/21910), [GitHub-20906](https://github.com/magento/magento2/issues/20906), [GitHub-20472](https://github.com/magento/magento2/issues/20472)

<!-- ENGCOM-6375-->

* 顧客グループ価格用に追加ポップアップウィンドウ （**Admin** > **カタログ**  > **製品** > **新製品** > **高度な価格設定**）「閉じる」アイコンをクリックすると、が期待どおりに閉じられるようになりました。 _プルリクエストで Ashna-Jahan によって送信された修正 [25759](https://github.com/magento/magento2/pull/25759)_. [GitHub-25433](https://github.com/magento/magento2/issues/25433)

<!-- ENGCOM-6300-->

* 新しい製品の説明とタイトル用に提供されたサンプル説明で、二重引用符を含まなくなりました。  _Nathan Morgan がプルリクエストで修正を送信 [25655](https://github.com/magento/magento2/pull/25655)_. [GitHub-25654](https://github.com/magento/magento2/issues/25654)

<!-- ENGCOM-6424-->

* 無効な価格を使用してカテゴリページで製品をフィルタリングしようとすると、アプリケーションがエラーをスローしなくなりました。 以前は、アプリケーションはシステムログにこのエラーを記録していました。 _プルリクエストで Ihor Sviziev が修正を送信しました [25912](https://github.com/magento/magento2/pull/25912)_. [GitHub-25911](https://github.com/magento/magento2/issues/25911)

<!-- ENGCOM-6455-->

* 複数ページカテゴリの検索結果間を移動できるようになりました。 以前は、「戻る」ボタンを使用して結果の最初のページに戻ろうとすると、検索結果の重複したページが作成されていました。 _Douglas Radburn がプルリクエストで修正を送信しました [25337](https://github.com/magento/magento2/pull/25337)_. [GitHub-14971](https://github.com/magento/magento2/issues/14971)

<!-- ENGCOM-6194-->

* 戻り値のタイプをに修正しました。 `string|null` の場合 `getSourceModel` のメソッド `Eav\Attribute.php` クラス。 _プルリクエストで Mychailo から送信された修正 [25333](https://github.com/magento/magento2/pull/25333)_. [GitHub-25278](https://github.com/magento/magento2/issues/25278)

<!-- ENGCOM-6625-->

* 新しい（重複した）製品を保存しても、製品の画像が数百回重複しなくなりました。 _プル要求で Jeroen によって送信された修正 [25875](https://github.com/magento/magento2/pull/25875)_. [GitHub-9466](https://github.com/magento/magento2/issues/9466)

<!-- ENGCOM-6818-->

* タイプのカスタムオプションを使用して製品を削除すると、アプリケーションで JavaScript エラーがスローされなくなりました `file` 管理者からのオーダーの作成中。  _プルリクエストで adrian-martinez-interactiv4 によって送信された修正 [24843](https://github.com/magento/magento2/pull/24843)_. [GitHub-24842](https://github.com/magento/magento2/issues/24842)

<!-- ENGCOM-6959-->

* を使用した、画像のない製品の作成 `product_page_image_large` レイアウトでは、プレースホルダー画像が期待どおりに表示されます。 以前は、アプリケーションは次のエラーをスローしていました。 `Fatal error: PHP Fatal error: Uncaught TypeError: Argument 1 passed to Magento\Catalog\Block\Product\ImageFactory::getRatio() must be of the type integer, null given`. _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [26974](https://github.com/magento/magento2/pull/26974)_. [GitHub-26973](https://github.com/magento/magento2/issues/26973)

<!-- ENGCOM-6983-->

* を使用できます `POST /V1/:sku/links` 製品に既存のリンクがある場合に、製品リンクに空の製品の配列を設定するエンドポイント。 以前は、アプリケーションがエラーをスローしました。 _Pull 要求で Satish Subramanian が修正を送信しました [26979](https://github.com/magento/magento2/pull/26979)_. [GitHub-26800](https://github.com/magento/magento2/issues/26800)

<!-- ENGCOM-7151-->

* 製品グリッドの「アクション」ドロップダウンメニューを使用して、管理者から複数の製品の属性を更新した際に、製品に重み付けがあるかどうかを指定できるようになりました。  _プルリクエストで Bartomiej Szubert が修正を送信しました [26075](https://github.com/magento/magento2/pull/26075)_. [GitHub-6310](https://github.com/magento/magento2/issues/6310)

<!-- ENGCOM-7453-->

* 検証ロジックがに追加されました **グリッド許容値の 1 ページあたりの製品数** および **グリッドのデフォルト値の 1 ページあたりの製品数** ストア設定ページのフィールド。 以前は、ストア管理者がこれらのフィールドに使用できない値を入力できていました。  _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [27093](https://github.com/magento/magento2/pull/27093)_. [GitHub-27089](https://github.com/magento/magento2/issues/27089)_

### カタログルール

<!-- ENGCOM-6550-->

* の日付選択ページ要素の動作を修正しました **Admin** > **Marketing** > **プロモーション** > **カタログ価格ルール**. _Hitesh によってプルリクエストで修正が送信されました [26290](https://github.com/magento/magento2/pull/26290)_. [GitHub-26289](https://github.com/magento/magento2/issues/26289)

<!-- ENGCOM-5122-->

* カタログ価格ルールが、製品の詳細ページで期待どおりにカスタムオプションで機能するようになりました。 _Pavel Bystritsky によってプルリクエストで送信された修正 [22917](https://github.com/magento/magento2/pull/22917)_. [GitHub-22856](https://github.com/magento/magento2/issues/22856)

### カタログウィジェット

<!-- MC-29167-->

* この `CatalogWidget` 製品リストがアンカーカテゴリで期待どおりに機能し、アンカーカテゴリの製品が一致して表示されるようになりました。 以前は、アンカーであったものの、割り当てられた製品が含まれていない親カテゴリを選択すると、ウィジェットに製品が表示されませんでした。

<!-- MC-30260-->

* 選択した親カテゴリのすべての子がアプリケーションに期待どおりに表示されるようになりました。 以前は、アンカーであったのに、割り当てられた製品が含まれていない親カテゴリを選択した場合、アプリケーションにはネストされたすべての製品が表示されませんでした。

<!-- MC-31171-->

* 最近表示された製品ウィジェットは、次の場合に正しく機能するようになりました **ストア** > **設定** > **カタログ** > **カタログ** > **最近表示/比較** > **ウィジェット製品とバックエンドストレージの同期** はに設定されています。 **はい**.

### CMS コンテンツ

<!-- MC-29619-->

* すべての CMS ページを保存および複製できるようになりました。 以前は、特定のページを複製しようとすると、アプリケーションによってこの例外がスローされていました。 `Unique constraint violation found`.

<!-- MC-30963-->

* アプリケーションでは、ブロックが異なるストア ビューに割り当てられている場合に、同じ名前の CMS ブロックを作成できるようになりました。

<!-- MC-30103-->

* ギャラリーから選択の画像サムネールが期待どおりにキャッシュされるようになりました。 以前は、これらの画像はその場でサイズ変更されていました。

<!-- MC-32275-->

* 複数のストアに割り当てられている CMS ページを保存しても、アプリケーションでエラーがスローされなくなりました。 以前は、CMS ページを作成または編集すると、アプリケーションはページを保存しましたが、次のエラーもスローしていました。 `Item (Magento\VersionsCms\Model\Hierarchy\Node) with the same ID "PAGE_ID" already exists`.

<!-- MC-32452-->

* 新しい CMS ページが、web サイトのストアページ階層に期待どおりに追加されるようになりました。

<!-- ENGCOM-7033-->

* CMS ページのカスタムレイアウト更新ロジックが改善されました。 アプリケーションは、からの特定のレイアウトの変更を適用するようになりました。 `cms_page_view_selectable_home_somechanges.xml`. _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [27131](https://github.com/magento/magento2/pull/27131)_. [GitHub-26758](https://github.com/magento/magento2/issues/26758)

### Cleanup

<!-- ENGCOM-6573-->

* モジュール XML からさらに終了タグを削除しました。 _Tejash Kumbhare によってプルリクエストで送信された修正 [26339](https://github.com/magento/magento2/pull/26339)_. [GitHub-26338](https://github.com/magento/magento2/issues/26338)

<!-- ENGCOM-6521-->

* のミスアライメントを修正しました **請求先と配送先住所が同じです** チェックアウトワークフローの「レビューと支払い」ページ セクションのチェックボックス。  _プル要求で divyajyothi5321 によって送信された修正 [26169](https://github.com/magento/magento2/pull/26169)_. [GitHub-26168](https://github.com/magento/magento2/issues/26168)

<!-- ENGCOM-6581-->

* チェックアウトワークフローの「発送先住所」セクションのフィールドラベルとアスタリスクの間の不要な空白を削除しました。  _Daniel Ruf によってプルリクエストで送信された修正 [26285](https://github.com/magento/magento2/pull/26285)_. [GitHub-26275](https://github.com/magento/magento2/issues/26275)

<!-- ENGCOM-6480-->

* チェックアウトワークフローの「発送方法」セクションのラジオボタンの位置のずれを修正しました。  _Hitesh によってプルリクエストで修正が送信されました [25966](https://github.com/magento/magento2/pull/25966)_. [GitHub-25962](https://github.com/magento/magento2/issues/25962)

<!-- ENGCOM-6579-->

* モバイルビューのメニュー間隔の不一致を修正しました。 _Hitesh によってプルリクエストで修正が送信されました [26238](https://github.com/magento/magento2/pull/26238)_. [GitHub-26235](https://github.com/magento/magento2/issues/26235)

<!-- ENGCOM-7225-->

* モバイル表示でのミニ買い物かごの編集アイコンと削除アイコンの位置ずれを修正しました。  _プルリクエストで Vasilii Burlacu が修正を送信しました [27493](https://github.com/magento/magento2/pull/27493)_. [GitHub-26652](https://github.com/magento/magento2/issues/26652)

<!-- ENGCOM-6967-->

* 「新規税率/郵便番号の追加」ページ（**Admin**  >  **ストア**  >  **税金** >  **税ゾーンと税率**）に設定します。 _Pull 要求で Satish Subramanian が修正を送信しました [26932](https://github.com/magento/magento2/pull/26932)_. [GitHub-26917](https://github.com/magento/magento2/issues/26917)

<!-- ENGCOM-7237-->

* セットアップウィザードから管理者へのリンクが期待どおりに動作するようになりました。 _プル要求で Oleh Usik によって送信された修正 [26100](https://github.com/magento/magento2/pull/26100)_. [GitHub-24990](https://github.com/magento/magento2/issues/24990)

<!-- ENGCOM-6531-->

* 管理のキャッシュ管理グリッドのステータス列で、並べ替えが無効になっています。 _Pull 要求で Satish Subramanian が修正を送信しました [26215](https://github.com/magento/magento2/pull/26215)_. [GitHub-26208](https://github.com/magento/magento2/issues/26208)

<!-- ENGCOM-7015-->

* ページ要素の位置のずれを修正しました **Admin** >  **ストア**  >  **属性**  > **評価** >  **新しい評価を追加** ダイアログ。 _Pull 要求で Satish Subramanian が修正を送信しました [27014](https://github.com/magento/magento2/pull/27014)_. [GitHub-26992](https://github.com/magento/magento2/issues/26992)

<!-- ENGCOM-6485-->

* デザインの変更を追加ページのカレンダーアイコンの位置のずれを修正しました。 _プルリクエストで Eduard Chitoraga が修正を送信 [26063](https://github.com/magento/magento2/pull/26063)_. [GitHub-20379](https://github.com/magento/magento2/issues/20379)

<!-- ENGCOM-6447-->

* ホームページのホバーメニューのサブメニュー表示の不要なスペースを削除しました。 _Hitesh によってプルリクエストで修正が送信されました [25973](https://github.com/magento/magento2/pull/25973)_. [GitHub-25972](https://github.com/magento/magento2/issues/25972)

<!-- ENGCOM-6534-->

* ストアフロントの製品詳細ページの価格ラベルの位置ずれを修正しました。 _プル要求で divyajyothi5321 によって送信された修正 [26237](https://github.com/magento/magento2/pull/26237)_. [GitHub-25936](https://github.com/magento/magento2/issues/25936)

<!-- ENGCOM-6536-->

* に関する在庫切れのテキストの位置ずれを修正しました  **カートに追加** モバイル表示の製品リストページの「」ボタン。  _プル要求で divyajyothi5321 によって送信された修正 [26183](https://github.com/magento/magento2/pull/26183)_. [GitHub-26181](https://github.com/magento/magento2/issues/26181)

<!-- ENGCOM-6458-->

* に表示される統合成功メッセージ  **Admin**  > **システム** > **拡張機能** > **統合** が正しく表示されるようになりました。 _プル要求で divyajyothi5321 によって送信された修正 [26011](https://github.com/magento/magento2/pull/26011)_. [GitHub-25930](https://github.com/magento/magento2/issues/25930)

### 設定可能な製品

<!-- MC-23546-->

* 設定可能な製品の子製品が、API を使用して正常に無効にできるようになりました。

<!-- MC-30391-->

* を使用した買い物かご価格ルール **条件がカテゴリとして設定されました（親のみ）** これで一貫して期待どおりに動作するようになりました。

<!-- MC-30989-->

* 「クロスセル」タブから設定可能な製品を買い物かごに追加できます。 製品を選択し、 **カートに追加** このタブから製品の詳細ページが表示され、特定の製品オプションを選択できます。 以前は、アプリケーションは 404 エラーページにリダイレクトしていました。

<!-- MC-32411-->

* これらの製品をリンクする API 呼び出しが失敗した場合、アプリケーションはシンプルな製品を設定可能な製品にリンクしなくなりました。

<!-- ENGCOM-6483-->

* 設定可能な製品の現在のバリエーション リストの SKU のレンダリングを修正しました。 _プルリクエストで KaushikChavda によって送信された修正 [26007](https://github.com/magento/magento2/pull/26007)_. [GitHub-25591](https://github.com/magento/magento2/issues/25591)

<!-- ENGCOM-6460-->

* 保存できるようになりました `system.xml` 値を入力することによる設定情報  **Admin** > **システム** > **設定** にラベルが関連付けられていないフィールド。 _プルリクエストで Andrii Chorniy によって送信された修正 [25985](https://github.com/magento/magento2/pull/25985)_. [GitHub-23899](https://github.com/magento/magento2/issues/23899)

<!-- ENGCOM-6689-->

* パフォーマンス `\Magento\ConfigurableProduct\Model\Product\Type\Configurable::isSalable` が最適化されました。  _Stanislav Ilnytskyi によるプルリクエストの修正 [26071](https://github.com/magento/magento2/pull/26071)_. [GitHub-26065](https://github.com/magento/magento2/issues/26065)

<!-- ENGCOM-6992-->

* 設定可能な商品画像の更新を行うロジックが改善されました。 以前は、設定可能な製品に関連付けられた単純な製品には、設定可能な製品に関連付けられたデフォルトの画像のみが表示されていました。また、アプリケーションでは、製品に間違ったメインの画像が表示されることがありました。 _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [26560](https://github.com/magento/magento2/pull/26560)_. [GitHub-26473](https://github.com/magento/magento2/issues/26473), [GitHub-26856](https://github.com/magento/magento2/issues/26856), [GitHub-26858](https://github.com/magento/magento2/issues/26858)

<!-- ENGCOM-6520-->

* 設定可能な製品の割引オプションを選択すると、アプリケーションに製品の特別価格が期待どおりに表示されるようになりました。 以前は、 `class="normal-price"` はに変更されませんでした `class="special-price"` 割引オプションが選択された場合。 _プルリクエストで Ravi Chandra によって送信された修正 [26170](https://github.com/magento/magento2/pull/26170)_. [GitHub-24972](https://github.com/magento/magento2/issues/24972)

### の Cookie

<!-- MC-24182-->

* この `setRedirectCookie` および `clearRedirectCookie` 関数が期待どおりに動作するようになりました。 以前は、これらの関数は Cookie をブラウザーに送信していましたが、すべての Cookie パラメーターが欠落していました。 [GitHub-24547](https://github.com/magento/magento2/issues/24547)

<!-- MC-30789-->

* Google Tag Manager Cookie を受け入れずに新しいストアに移動しても、Google Tag Manager タグがトリガーされなくなりました。

<!-- ENGCOM-6891-->

* メタデータは `setRedirectCookie` および `clearRedirectCookie` 関数。  _Fix submitted by Alexander Lukyanov in pull request [24612](https://github.com/magento/magento2/pull/24612)_. [GitHub-24547](https://github.com/magento/magento2/issues/24547)

### カスタム顧客属性

<!-- MC-30739-->

* チェックアウトワークフローのアドレスセクションに、カスタムの顧客アドレス属性値が期待どおりに表示されるようになりました。 以前は、アプリケーションで値の代わりにカスタム顧客アドレス属性コードが表示され、JavaScript エラーがトリガーされていました。

<!-- MC-32301-->

* に空の顧客属性フィールドを含めると、アプリケーションがエラーをスローしなくなりました **で使用するForms** ストアフロントで会社アカウントを作成する際にフィールドします。 以前は、アプリケーションは次のエラーをスローしていました。 `PHP Fatal error: Uncaught TypeError: Argument 2 passed to Magento\Eav\Model\Attribute\Data\Text::validateLength() must be of the type string, null given`.

<!-- MC-33361-->

* アプリケーションは、カスタムの顧客アドレス属性を保存し、期待どおりに登録フォームに実装できるようになりました。 以前は、買い物かごからアカウントを作成する際に新しいカスタム顧客アドレス属性を作成した場合、アプリケーションで属性情報が保存されませんでした。

### 顧客

<!-- MC-29102-->

* ゲストとしてニュースレターを購読している顧客は、新しいアカウントの登録後に購読を解除されなくなりました。

<!-- MC-29841-->

* アプリケーションで新しいが使用されるようになりました `PHPSession` パスワードを変更するたびに上書きできます。

<!-- MC-30650-->

* の Web サイトに関連付けドロップダウンメニューを使用して、顧客を正常に作成し、特定の Web サイトに関連付けることができるようになりました **顧客** > **すべての顧客** > **新規顧客を追加**. 以前は、マルチサイトデプロイメントでデフォルト以外の web サイトに新しい顧客を関連付けようとすると、アプリケーションにこのエラーが表示されていました。 `The store view is not in the associated website`.

<!-- MC-29946-->

* 無効なクレジットカードが原因で最初に取引が却下され、その後正常に完了した場合、アプリケーションでは、チェックアウト時に顧客がデフォルトの請求フィールドと出荷フィールドに入力した情報を保存するようになりました。 以前は、顧客が有効な支払い情報を入力すると注文が作成されましたが、チェックアウトワークフローの「自分のアカウント」セクションのデフォルトの請求先住所または出荷先住所は更新されませんでした。

<!-- MC-32325-->

* マルチサイトデプロイメントで管理者から新しい顧客を作成する際に、アプリケーションは顧客グループ設定に従うようになりました。

<!-- MC-31481-->

* アプリケーションは、 **顧客および住所（単一ファイル）** オプション条件 `cron` が有効で、カスタマーグリッドインデクサーがに設定されている **スケジュールで更新**. 後 `cron` を実行する場合は、読み込んだ顧客情報が期待どおりに管理者で使用できます。 以前は、アプリケーションによって顧客データがインポートされましたが、新しくインポートされた顧客レコードで顧客グリッドが更新されませんでした。

<!-- MC-31117-->

* 生年月日が必要な場合、ストアフロントから新しい顧客を作成できるようになりました。 以前は、有効な DOB 値を入力した場合でも、このフィールドが必要な場合に新しい顧客を作成できませんでした。 [GitHub-26700](https://github.com/magento/magento2/issues/26700)

<!-- MC-31945-->

* 管理者からの顧客の作成で、デフォルトの顧客グループ設定が期待どおりに使用できるようになりました。

<!-- MC-31435-->

* この `PHPSessionId` は、ユーザーがログアウトしてからログインし直した後、期待どおりに変更されるようになりました。

<!-- MC-32152-->

* 顧客の買い物かごの管理者表示に、複数の Web サイトのデプロイメントで複数の Web サイトから買い物かごに追加されたすべての製品が表示されるようになりました。 以前は、デフォルト以外の web サイトから買い物かごに製品を追加した場合、その製品は次の場合でも管理者に表示されませんでした。 **顧客アカウントの共有** はに設定されています。 **グローバル**.

<!-- ENGCOM-7036-->

* 検証が、 **生年月日** 管理者から顧客を編集する際のフィールド。 以前は、アプリケーションはユーザーのロケールを考慮しておらず、一部の誕生日では次のエラーが表示されていました。 `The Date of Birth should not be greater than today`.   _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [27149](https://github.com/magento/magento2/pull/27149)_. [GitHub-27027](https://github.com/magento/magento2/issues/27027)

<!-- ENGCOM-6208-->

* 管理者から注文する際に、「電子メール」フィールドは不要になりました。  _プルリクエストで solwininfotech によって送信された修正 [24479](https://github.com/magento/magento2/pull/24479)_. [GitHub-22251](https://github.com/magento/magento2/issues/22251)

<!-- ENGCOM-6667-->

* 管理者が買い物かごを表示すると、顧客が買い物かごに入れた製品のみがアプリケーションに表示されるようになりました。 以前は、管理者から表示すると、顧客の買い物かごにカタログ内のすべての製品が表示されていました。 _Ravinder によってプルリクエストで送信された修正 [26489](https://github.com/magento/magento2/pull/26489)_. [GitHub-26437](https://github.com/magento/magento2/issues/26437)

<!-- ENGCOM-6423-->

* マイアカウント ダッシュボードに、メールアドレスの値がモバイルビューで正しく表示されるようになりました。 _プル要求で Eden Duong が修正を送信 [25942](https://github.com/magento/magento2/pull/25942)_. [GitHub-25935](https://github.com/magento/magento2/issues/25935)

<!-- ENGCOM-7034-->

* 「」をクリック **アカウントの作成** 顧客登録フォームのボタンが、登録要求を複数回送信しなくなりました。 _プル要求で princeCB によって送信された修正 [26642](https://github.com/magento/magento2/pull/26642)_. [GitHub-26590](https://github.com/magento/magento2/issues/26590)

### 顧客セグメント

<!-- MC-29471-->

* セグメントに過去の注文に対する条件が含まれている場合に、顧客セグメントに割り当てられたユーザーとしてログインしても、アプリケーションは顧客セグメントから顧客アカウントを削除しなくなりました。 以前は、をクリックする必要がありました **セグメントデータを更新** ログイン後、アプリケーションが「一致した顧客」リストにアカウントを表示する前に。

<!-- MC-30466-->

* セグメント条件に注文の合計数が含まれる場合、顧客セグメントが期待どおりに機能するようになりました。

<!-- MC-32409-->

* 顧客アカウントがグローバルに共有されるように設定されている場合、顧客セグメントルールが期待どおりに適用されるようになりました。

<!-- MC-33081-->

* 多数（300 万件を超える）の顧客が含まれる顧客セグメントの編集および保存のパフォーマンスを向上しました。 以前は、多数の顧客を含む顧客セグメントを作成または編集すると、アプリケーションで 500 エラーがスローされていました。

### ディレクトリ

<!-- MC-33168-->

* の値を設定する際に、選択した web サイトに割り当てられた許可された国に基づくデータがデフォルト状態ドロップダウンメニューに入力されるようになりました **デフォルト税金宛先計算** フィールド。 以前は、このドロップダウンには、デフォルトの web サイトに割り当てられた国が一覧表示されていました。

### ダウンロード可能

<!-- MC-32306-->

* 読み込みファイルを使用して、SKU と説明でダウンロード可能な製品を一括で更新できるようになりました。 以前は、検証エラーが発生し、読み込みに失敗していました。

### 動的ブロック （以前のバナー）

<!-- MC-23852 31632-->

* 動的ブロックが、期待どおりに顧客セグメントで機能するようになりました。 トリガーにする条件が満たされない場合に、動的ブロックが表示されなくなりました。 以前は、買い物かごが空の場合に、ゲストとしてログインしたユーザーに対して、アプリケーションに動的ブロックが表示されていました。

<!-- MC-32652-->

* 動的ブロックは、顧客のセグメントおよびストア表示に基づいて、ストアフロントにレンダリングされるようになりました。

### EAV

<!-- MC-29999-->

* アプリケーションは、マルチサイトデプロイメントでチェックアウトワークフローの電話番号フィールドが必須かどうかを決定するストア固有の設定に従うようになりました。 以前は、あるストアはチェックアウトワークフローでこのフィールドを必要とし、別のストアは必要としなかったデプロイメントで、このフィールドを必要としなかったストアでチェックアウト中にフィールドを完了しなかったお客様に、このエラーが発生していました。 `Please check the shipping address information. "telephone" is required. Enter and try again`.

<!-- ENGCOM-6489-->

* EAV 並べ替え順 `attribute option_id` これで期待どおりに動作するようになりました。 _プルリクエストで Tan Sezer によって修正が送信されました [24360](https://github.com/magento/magento2/pull/24360)_. [GitHub-24357](https://github.com/magento/magento2/issues/24357)

<!-- ENGCOM-7082-->

* REST を使用して新しい属性を追加し、管理者から属性セットに割り当てた後、新しい製品を作成できるようになりました。 以前は、アプリケーションは 500 エラーをスローしました。  _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [27191](https://github.com/magento/magento2/pull/27191)_. [GitHub-26827](https://github.com/magento/magento2/issues/26827)

### 電子メール

<!-- MC-32842-->

* 顧客が返品をリクエストする際に送信される認証メールには、期待どおりに RMA ステータスが含まれるようになりました。 以前は、このメールには、期待される戻り値のステータスではなく、空の文字列が表示されていました。

<!-- MC-32864-->

* 顧客アカウントがグローバルに共有されるマルチサイト展開でパスワードを忘れた場合に、現在の web サイトからリダイレクトされなくなりました。 以前は、顧客はアカウントが作成された web サイトにリダイレクトされていました。

<!-- MC-31544-->

* 顧客に送信される注文確認メールに、注文された項目のリストが期待どおりに含まれるようになりました。 以前は、デフォルトのテンプレートを読み込んで保存することで管理者でメールテンプレートを作成した場合、このテンプレートから生成されるメールには、並べ替えられた項目のリストが含まれていませんでした。 [GitHub-26882](https://github.com/magento/magento2/issues/26882)

### フレームワーク

* Zend フレームワークの依存関係はに移行されました [ラミナス プロジェクト](https://getlaminas.org/about/foundation) Zend フレームワークの Linux Foundation の Laminas プロジェクトへの移行を反映します。 Zend フレームワークは廃止されました。 _プルリクエストで Ihor Sviziev が修正を送信しました [26436](https://github.com/magento/magento2/pull/26436)_. [GitHub-26335](https://github.com/magento/magento2/issues/26335)

<!-- MC-25257-->

* 特殊な価格範囲設定（開始日/終了日）が、オランダ語ロケールを使用した管理者アカウントで正しく機能するようになりました。

<!-- MC-29388-->

* `php bin/magento cron:run` は、変更ログテーブルからの項目を複数回処理しなくなりました。 以前は、変更ログテーブルに 100000 つ以上の新しいバージョンがある場合、同じアクションを何度も呼び出すことがありました `entity id`.

* この `php bin/magento setup:cron:run` コマンドは削除されました。 また、アップグレード時には crontab でこのファイルへの参照を削除してください。

* この `update/cron.php` ファイルは 2.4.0 で削除されました。このファイルがインストール上に存在する場合は、安全に削除できます。 また、アップグレード時には crontab でこのファイルへの参照を削除してください。

<!-- MC-30544-->

* 属性を更新アクションで、製品のタイムスタンプを正しく更新するようになりました `updated_at column` から `catalog_product_entity` 管理者の製品を編集ページで製品を更新した場合。

<!-- MC-30834-->

* 設定 `'persistent' => '1'` 。対象： `env.php` を実行したときにエラーがスローされなくなりました `setup:upgrade`.

<!-- MC-32243-->

* この **無効なフォームキー。 ページを更新してください** ログインページのテキスト文字列が期待どおりに翻訳されるようになりました。

<!-- MC-33278-->

* のパフォーマンスを向上しました `Magento\Framework\App\DeploymentConfig\Reader::load` 関数。 以前は、Magentoに対してリクエストが行われた際に、この関数が繰り返し呼び出されたため、 `config.php` および `env.php config` メソッドが呼び出されるたびに読み込まれるファイル。

<!-- MC-31728-->

* アプリケーションは、 `blank.html` 管理者が管理者からの注文を作成中に製品をクリックしたページ。

<!-- MC-31729-->

* ページ上の存在しない（宣言されていない）コンポーネントの参照手順のデフォルトレイアウトに追加されたキャッシュ不可ブロックが、ページのキャッシュに影響を与えなくなりました。 キャッシュ不可ブロックをデフォルトのレイアウトハンドラーに追加すると、すべてのページがキャッシュ不可になります。 これは、レイアウト生成プロセスが原因です。レイアウトの生成中、アプリケーションは特定のページで使用可能なすべてのレイアウトハンドルを収集し、それらからの指示をページの最終的なレイアウト構造に結合します。 デフォルトのレイアウトハンドルは、すべてのページの基本ハンドルとして使用されます。 その結果、デフォルトハンドラー用に宣言されたレイアウトの更新がすべてのページに表示されます。 [GitHub-9041](https://github.com/magento/magento2/issues/9041)

<!-- MC-31920-->

* MySQL ロックマネージャーがプライマリロックマネージャーになりました。 その結果、MySQL に必要な最小バージョンは 5.7.9 です。

<!-- ENGCOM-6431-->

* `queue_consumer.xml` で数字を使用できるようになりました `handler` クラス。 以前は、ハンドラーのパスに数値が含まれていると、XSD の検証が失敗していました。 _プル要求で Eden Duong が修正を送信 [25952](https://github.com/magento/magento2/pull/25952)_. [GitHub-25731](https://github.com/magento/magento2/issues/25731)

<!-- ENGCOM-6902-->

* 間違った `@var` 内の参照 `doc` クラスメンバー変数のブロック `$queueIterator` 授業中 `\Magento\Framework\MessageQueue\Topology\Config` が修正されました。 _プルリクエストで Artem Voloznov によって送信された修正 [24976](https://github.com/magento/magento2/pull/24976)_. [GitHub-24971](https://github.com/magento/magento2/issues/24971)

<!-- ENGCOM-5305 6684-->

* ドキュメントが終了した場合に JavaScript ページ読み込みリスナーをトリガーして起動するようになりました `loading` とマークされるまで待たずに `complete` ドキュメントがとしてマークされるまで待機中 `complete` javascript コンテンツのレンダリングに重大な遅延が生じる可能性があります。 _プルリクエストで John Hughes によって修正が送信されました [23313](https://github.com/magento/magento2/pull/23313) およびプルリクエスト [50](https://github.com/magento/partners-magento2ee/pull/50)_. [GitHub-22909](https://github.com/magento/magento2/issues/22909)

<!-- ENGCOM-6305-->

* 数量が 0 または負の数の製品をウィッシュリストに追加しようとすると、アプリケーションに次の情報メッセージが表示されるようになりました。 `Please enter a valid number in this field`. 以前は、アプリケーションにこのエラーが表示されていました。 `We can't update your Wish List right now`. _プルリクエストで Pawe Tylek によって修正が送信されました [25641](https://github.com/magento/magento2/pull/25641)_. [GitHub-25032](https://github.com/magento/magento2/issues/25032)

<!-- ENGCOM-7071-->

* アプリケーションは、からの DTO クラスの継承をサポートしなくなりました `Magento\Framework\Api\AbstractExtensibleObject` クラス。 PHP 注釈がありません `@api`  はに追加されました `AbstractExtensibleModel`、およびがありません `@deprecated`  に注釈が追加されました `AbstractExtensibleObject`.  _プルリクエストで Alexander Taranovsky によって修正が送信されました [22011](https://github.com/magento/magento2/pull/22011)_. [GitHub-22010](https://github.com/magento/magento2/issues/22010)

<!-- ENGCOM-6552-->

* 製品関連の日付（など）を変更した後、製品を期待どおりに保存できるようになりました `news_from_date`, `news_to_date`, `special_price_from_date`, `special_price_to_date`）に設定する必要があります。 以前は、アプリケーションが次のようなエラーをスローしていました。  `Invalid input datetime format of value '22/5/2019`.

### 一般的な修正点

<!-- MC-21347-->

* 顧客モジュールは、レビューモジュールに依存しなくなりました。 以前は、この依存関係が原因でレビューモジュールを無効にすることができませんでした。

<!-- MC-25250-->

* ページのデフォルトの属性セットに、選択ラベルを持つ dropdown 属性が含まれる場合、製品の編集ページが正常に読み込まれるようになりました。

<!-- MC-25260-->

* 管理者の「注文」タブからアクセスできるグラフィカルな注文グラフに、注文数量が正確に反映されるようになりました。

<!-- MC-29273-->

* これらの 2 つの URL が異なる場合、ストアの管理 URL がストアフロント URL にリダイレクトされなくなりました。

<!-- MC-29658-->

* 複数の web サイトで Performance Toolkit プロファイルを使用する場合、サブカテゴリの URL 書き換え生成が正しく機能するようになりました。

<!-- MC-30224-->

* 割り当て先の管理者ロールを削除しなくても、空のユーザーモデルを削除できるようになりました。

<!-- MC-30636-->

* TinyMCE4 エディタは、すべてのHTMLタグをサポートするようになりました。

<!-- MC-31128-->

* 「」をクリック **オフラインでの払い戻し** 「クレジットメモの作成」ワークフローのボタンで、クレジットメモが期待どおりに生成されるようになりました。 以前は、JavaScript エラーによってこのボタンが無効になり、アプリケーションでクレジット・メモが作成されていませんでした。

<!-- MC-31832-->

* マーチャントは、タイプの製品属性を作成できるようになりました `Decimal`. 以前は、以前のバグ修正により、アプリケーションに製品属性タイプが表示されていませんでした `Price`. [GitHub-26949](https://github.com/magento/magento2/issues/26949)

<!-- MC-32175-->

* ストアフロントでカテゴリページを開こうとすると、500 エラーが返されなくなりました **レイアウト =製品 – 全幅** は、カテゴリ ページの「デザイン」タブから設定されています。

<!-- MC-32697-->

* バグを修正しました。 `AbstractSimpleObjectBuilder.php`.

<!-- MC-33427-->

* MAP （最低広告価格）がグループ製品で期待どおりに動作するようになりました。

<!-- MC-29998-->

* マルチストアデプロイメントで CMS ページの言語を変更すると、アプリケーションによって、適切なストア表示のホームページにリダイレクトされるようになりました。 以前は、特定の CMS ページで言語を変更すると、アプリケーションに 404 ページが表示されていました。

<!-- MC-30162-->

* クエリの順序付け（`SalesOrderIndexGridAsyncInsertCron`）がリファクタリングされ、返されるデータセットのサイズとクエリの頻度が減りました。

<!-- MC-32371-->

* これで、CMS ページを正常に作成して、CMS 階層の web サイトのルートカテゴリに割り当てることができます。

<!-- MC-32783-->

* カテゴリ権限が有効な場合（例えば、 **ログインしていません** 顧客グループにこれらの権限が付与されています）。

<!-- MC-32815-->

* 商品ルールが、在庫切れの製品に期待どおりに適用されるようになりました。 以前は、ルールが在庫切れ製品を表示するように設定されている場合でも、アプリケーションは関連製品リストに在庫切れ製品を表示しませんでした。

<!-- MC-33222-->

* 「」をクリック **配送の追跡** 管理者からの注文のボタンを使用すると、トラッキング情報が期待どおりにポップアップウィンドウに表示されるようになりました。 以前は、このリンクをクリックすると、管理者はログインページに移動していました。

<!-- MC-31305-->

* 複数選択の顧客属性を含む登録フォームを顧客が完了しようとするとエラーが発生した場合、アプリケーションに情報エラーメッセージが表示され、登録フォームが引き続き期待どおりに表示されるようになりました。 以前は、アプリケーションで 500 エラーが表示されていました。

<!-- MC-32224-->

* アプリケーションに次が表示されるようになりました **クレジットメモ** 注文の一部払い戻し後のボタン。 以前は、一部払戻を作成した後は、このボタンが表示されず、残りの受注にはクレジット・メモを作成できませんでした。

<!-- MC-31878-->

* REST を通じた一括注文の更新で、注文ステータスが期待どおりに変更されるようになりました。 以前は、アプリケーションは次のエラーをスローしていました。 `report.ERROR: Property "AdditionalInformation" does not have accessor method "setAdditionalInformation" in class "Magento\Sales\Api\Data\OrderPaymentInterface".`

<!-- MC-30398-->

* 属性フィルターが、カテゴリページのショッピングオプションブロックに期待どおりに表示されるようになりました。

<!-- MC-25138-->

* B2B がインストールされているデプロイメントで、カテゴリ ページの製品制限を 24 から 36 に変更できるようになりました。 以前は、この製品制限が 36 に増えた場合、アプリケーションが致命的なエラーをスローしていました。

<!-- ENGCOM-7175-->

* Internet Explorer で表示される際、管理者の顧客編集ページの「アドレス」タブで、顧客の請求アドレスと配送先住所が期待どおりに表示されるようになりました。 _プルリクエストで Vasilii Burlacu が修正を送信しました [27383](https://github.com/magento/magento2/pull/27383)_. [GitHub-27370](https://github.com/magento/magento2/issues/27370)

<!-- ENGCOM-6546-->

* ブックマーク ビューを削除しても、すべてのブックマーク ビューが編集可能なままになりました。 以前は、複数のブックマークビューを持つアカウントの最初のビューを削除した後、すべてのブックマークビューが編集できなくなりました。 _プルリクエストで Bartomiej Szubert が修正を送信しました [26263](https://github.com/magento/magento2/pull/26263)_. [GitHub-14913](https://github.com/magento/magento2/issues/14913)

<!-- ENGCOM-7042-->

* レイヤー化されたナビゲーションで、スウォッチモジュールのHTML5 検証が機能しなくなりました。 以前は、で定義されていない属性に対してHTML検証エラーが発生していました [W3C マークアップ検証サービス](https://validator.w3.org/)ただし、これらの属性はデータ属性に変更されています。 _Nirav Patel がプルリクエストで修正を送信 [26055](https://github.com/magento/magento2/pull/26055)_. [GitHub-22363](https://github.com/magento/magento2/issues/22363)

<!-- ENGCOM-7065-->

* 未使用 `require.JS` エイリアス （`critical-css-loader``) has been removed from app/code/Magento/Theme/view/frontend/requirejs-config.js`. _プルリクエストで Tu Nguyen が修正を送信しました [26987](https://github.com/magento/magento2/pull/26987)_. [GitHub-26963](https://github.com/magento/magento2/issues/26963)

<!-- ENGCOM-6242-->

* アプリケーションは、PHP7.x のを実装するようになりました [使い捨てインターフェイス](https://www.php.net/manual/en/class.throwable.php) パスワードなどの機密情報を公開する可能性のあるすべてのエラーを取得できるようにします。 _プル要求で miszyman によって送信された修正 [25250](https://github.com/magento/magento2/pull/25250)_. [GitHub-23350](https://github.com/magento/magento2/issues/23350)

<!-- ENGCOM-6284-->

* 新しいフォルダーを作成ポップアップウィンドウで新しいフォルダーの名前を入力する際に Esc キーを押すと、フォルダーを作成せずに期待どおりにポップアップが閉じるようになりました。  _プルリクエストで Shankar Konar が修正を送信しました [25349](https://github.com/magento/magento2/pull/25349)_. [GitHub-572](https://github.com/magento/magento2/issues/572)

<!-- ENGCOM-7464-->

* 誤ってネストされたHTMLー構造が修正されました。 以前は、この構造により、関連製品、アップセル製品またはクロスセル製品のリストのレイアウトが崩れていました。 _プルリクエストで Pieter Hoste によって修正が送信されました [27926](https://github.com/magento/magento2/pull/27926)_. [GitHub-27920](https://github.com/magento/magento2/issues/27920)

<!-- ENGCOM-7144-->

* への重複呼び出しを削除しました `addToolbarBlock`は、に類似した条件が 2 つ発生していました。 `ORDER BY`.  _プルリクエストで Vasilii Burlacu が修正を送信しました [27263](https://github.com/magento/magento2/pull/27263)_. [GitHub-26708](https://github.com/magento/magento2/issues/26708)

<!-- ENGCOM-6014-->

* マーチャントは、管理者ユーザーアカウントに有効期限を設定できるようになりました。 _プル要求で Laura Folco によって送信された修正 [22837](https://github.com/magento/magento2/pull/22837)_. [GitHub-22833](https://github.com/magento/magento2/issues/22833)

<!-- ENGCOM-7071-->

* が追加されました `@api`  への PHP 注釈 `AbstractExtensibleModel`, `@deprecated` への PHP 注釈 `AbstractExtensibleObject`、および `@see` 対象： `AbstractExtensibleModel`.  _プルリクエストで Alexander Taranovsky によって修正が送信されました [22011](https://github.com/magento/magento2/pull/22011)_. [GitHub-22010](https://github.com/magento/magento2/issues/22010)

### ギフトカード

<!-- MC-31041-->

* GET `V1/orders/:orderId` を呼び出すと、ギフトカードコードが期待どおりに返されます。

### ギフト包装

<!-- MC-29893-->

* ギフトラッピングが製品レベルで有効になっている場合に、買い物かごに追加できるようになりました。 以前は、ストアフロントで商品にギフトラッピングを追加できましたが、注文概要にギフトラッピングが含まれませんでした。

<!-- MC-30543-->

* 有効期限切れのギフト カードは、有効期限を将来の日付に変更すると、期待どおりにアクティブになります。 以前は、ギフトカードは期限切れのままでした。

<!-- MC-32551-->

* 次の場合に、管理者の注文を作成ページが正しく読み込まれるようになりました **注文レベルでのギフト メッセージを許可** 設定とテンプレートの縮小が有効になっています。 以前は、これらの設定が有効な場合にこのページを開こうとすると、アプリケーションによって次のエラーがスローされていました。 `Warning: require(content.phtml): failed to open stream: No such file or directory`.

<!-- MC-31427-->

* ギフト包装を注文した商品の数に基づいて、ギフト包装のコストが正しく計算されるようになりました。 以前は、アプリケーションには、1 つの製品のギフトラップのコストが含まれていました。

### Google Tag Manager

<!-- MC-29878-->

* マーチャントは、指定された条件が満たされるまでGoogle Analyticsへのデータの送信を延期できるようになりました。

<!-- MC-30673-->

* 行方不明 `Magento_GoogleTagManager::checkout/set_checkout_option.phtml` テンプレートが復元されました。

### GraphQL

<!-- ENGCOM-7074-->

* GraphQL メッセージが返されるようになりました。 `The cart isn't active` の代わりに `Current user does not have an active cart` 特定の状況下で、買い物かごが非アクティブになり、新しい買い物かご ID が作成されます。 _プルリクエストで Vadim Malesh が修正を送信しました [27187](https://github.com/magento/magento2/pull/27187)_. [GitHub-26117](https://github.com/magento/magento2/issues/26117)

<!-- ENGCOM-7105-->

* 以前に追加された商品が在庫切れになったときに、GraphQLを使用して買い物かごに商品を追加するとエラーが発生するコードを削除しました。 _プル要求で AleksLi によって送信された修正 [27015](https://github.com/magento/magento2/pull/27015)_. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

<!-- ENGCOM-6535-->

* GraphQLで、products クエリでフラグメントを使用する際に、必要な情報の一部が返されなかった問題を修正しました。 _Riccardo Tempesta によってプル要求で送信された修正 [26218](https://github.com/magento/magento2/pull/26218)_. [GitHub-26217](https://github.com/magento/magento2/issues/26217)

* GraphQL変異 `setShippingMethodsOnCart` では、間違ったデータを  `available_shipping_methods` 属性。 _プルリクエストで Vadim Malesh が修正を送信しました [27004](https://github.com/magento/magento2/pull/27004)_. [GitHub-26742](https://github.com/magento/magento2/issues/26742)

### グループ化された製品

<!-- ENGCOM-6115-->

* 同じグループに属する別のシンプルな製品が在庫切れの場合、そのグループ製品に属するシンプルな製品を買い物かごに追加できるようになりました。  _Gihovani Filipp Pereira Detrio がプルリクエストm̩で送信した修正 [24955](https://github.com/magento/magento2/pull/24955)_. [GitHub-22304](https://github.com/magento/magento2/issues/22304)

<!-- ENGCOM-6768-->

* アプリケーションは、払い戻されたグループ製品に関するメールを期待どおりに顧客に送信するようになりました。  _プルリクエストで Alexander Taranovsky によって修正が送信されました [26246](https://github.com/magento/magento2/pull/26246)_. [GitHub-26245](https://github.com/magento/magento2/issues/26245)

<!-- MC-30313-->

* グループ化された製品の他の子製品の 1 つが在庫切れの場合、グループ化された製品の子製品を買い物かごに追加できるようになりました。 以前は、1 つの子製品が在庫切れだった場合、他の子製品を買い物かごに追加することはできませんでした。

### 画像

<!-- MC-29523-->

* 画像はに保存されました。 `pub/media/catalog/category` カテゴリ画像を保存する際の期待どおりです。 以前は、アプリケーションによってこれらの画像に保存されていました `pub/media/catalog/tmp/category`.

<!-- MC-30320-->

* 透かし画像でオーバーレイする製品画像が不明瞭にななくなりました。 以前は、透かし画像が適用先の商品画像よりも大きい場合、商品画像が表示されませんでした。

<!-- MC-32273-->

* これで、管理者からカテゴリに画像を正常に保存できるようになりました。 以前は、画像を保存した後に URL の一部が見つからず、画像を再度開くことができませんでした。

<!-- MC-31727-->

* アプリケーションが表示されます。 `.png` アップロード後の画像（期待どおりに）。

<!-- MC-29483-->

* ページビルダーを使用して CMS ブロックにアップロードされた画像が、ストアフロント URL とは異なるベース URL を持つ管理者からアップロードされた場合、期待どおりにプレビューで表示されるようになりました。

<!-- ENGCOM-7063-->

* REST を使用して画像を追加または更新すると、画像のサムネールが期待どおりに作成されるようになりました。 _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [27170](https://github.com/magento/magento2/pull/27170)_. [GitHub-26825](https://github.com/magento/magento2/issues/26825)

<!-- ENGCOM-6962-->

* によって生成された画像のカスタム属性 `Block\Product\ImageFactory` 正しくレンダリングされるようになりました。 以前は、HTML出力のエスケープが誤っているので、独自のカスタム属性を属性マークアップに追加することができませんでした。 _Fix submitted by alexander-aleman in pull request [26959](https://github.com/magento/magento2/pull/26959)_. [GitHub-25219](https://github.com/magento/magento2/issues/25219)

<!-- ENGCOM-5980-->

* iPhoneからストアフロントを表示した際に画像がぼかされなくなりました。  _プルリクエストで Dmitriy によって送信された修正 [24743](https://github.com/magento/magento2/pull/24743)_. [GitHub-24735](https://github.com/magento/magento2/issues/24735)

<!-- ENGCOM-6999-->

* ストアフロントの画像がレスポンシブになりました。 以前は、画像の高さが歪んでいました。  _Sean van Zuidam がプルリクエストで修正を送信 [27041](https://github.com/magento/magento2/pull/27041)_. [GitHub-27040](https://github.com/magento/magento2/issues/27040)

<!-- ENGCOM-7253-->

* の場合、デフォルトのストアロゴがストアフロントに表示されるようになりました `Magento_blank` テーマが使用されます。 _プルリクエストで Vasilii Burlacu が修正を送信しました [27497](https://github.com/magento/magento2/pull/27497)_. [GitHub-27496](https://github.com/magento/magento2/issues/27496)

### インポート/エクスポート

<!-- MC-25206-->

* インポートしたデータにが含まれている場合、インポート中にアプリケーションがエラーをスローしなくなりました。 `swatch_image` ストア表示キーの値はです `no_selection`. 以前は、アプリケーションは次のエラーをスローしていました。 `Imported resource (image) could not be downloaded from external resource due to timeout or access permissions in row(s): 1`. [GitHub-25026](https://github.com/magento/magento2/issues/25026)

<!-- MC-29417-->

* アプリケーションは、を使用する際に、期待どおりに画像を更新するようになりました `hide_from_product_page` 複数のストアビューを持つデプロイメントで製品をインポートする際の設定。

<!-- MC-29677-->

* 以下の場合、カスタマイズ可能なオプションが期待どおりに読み込まれるようになりました `row_id` が製品と等しくない `entity_id`. 以前は、アプリケーションは、次の場合にカスタマイズ可能なオプションをインポートしませんでした `row_id` が製品に等しくない `entity_id`（その結果、特定の製品が読み込まれない）。

<!-- MC-29916-->

* 設定可能な製品に関連付けられた画像が読み込み時に適切にアップロードされ、製品の編集ページから期待どおりに表示できるようになりました。

<!-- MC-30304-->

* エクスポート済み `.csv` ファイルには、在庫中または在庫切れの製品を含めるためのフィルター設定が反映されるようになりました。 以前は、アプリケーションは、選択した在庫設定に関係なく、すべての製品を書き出していました。

<!-- MC-30323-->

* 読み込みワークフローの「顧客およびアドレス」単一ファイルオプションを使用して、顧客を正常に読み込みまたは更新できるようになりました。 以前は、このオプションを選択すると、アプリケーションは顧客データをインポートせず、次のエラーを表示していました： `Invalid data for insert`.

<!-- MC-30357-->

* Stock インデクサーが読み込み後、期待どおりにトリガーされ、製品ステータスが更新されるようになりました。 以前は、Stock インデクサーは、変更された製品在庫データのインデックスを作成しませんでした。

<!-- MC-30528-->

* 次の場合、アプリケーションは、設定可能な製品の子製品のすべてのカスタムオプションを正常に読み込むようになりました。 `store_view_code` が指定されている。 これは、設定可能な製品を個別に読み込むか、まとめて読み込むかを選択して機能します。 以前は、読み込みファイルに複数の項目が含まれている場合、アプリケーションはすべてのカスタムオプションを正常に読み込むことができませんでした。 `store_view_code` が指定されました。

<!-- MC-30672-->

* インポートされた製品を識別するメッセージが、製品のインポート時にアプリケーションに表示されるようになりました `.csv` ファイルのキーが重複しています。 マーチャントはこの情報を使用して競合を解決できます。 以前は、アプリケーションにこのエラーが表示されていました。 `Notice: Undefined index: name in /var/www/html/ee233dev/app/code/Magento/CatalogImportExport/Model/Import/Product.php on line 2524`

<!-- MC-29960-->

* からディレクトリを削除しようとすると、アプリケーションにより詳細なエラーメッセージが表示されるようになり、ダウンロードリンクは表示されません。 **システム** > **Export** リスト。 以前は、このリストからディレクトリを削除しようとすると、ダウンロードできなかったファイルのダウンロードリンクが引き続き表示され、情報を示さないエラーメッセージが表示されていました。

<!-- MC-29959-->

* この `.csv` 読み込み時に使用されるファイルに、ダウンロード可能な製品の正しいリンクが含まれるようになり、ダウンロード可能な製品の読み込みと更新をサポートするように正しくフォーマットされました。

<!-- MC-30189-->

* アプリケーションは、を正常に書き出しました `.csv` ファイル置き換えの読み込み動作を設定する場合は、以前に書き出したファイルを選択します `.csv` ファイルを開き、 **データを確認**. 以前は、アプリケーションにこのエラーが表示されていました。 `Data validation failed. Please fix the following errors and upload the file again` および `Following Error(s) has been occurred during importing process`.

<!-- MC-30141-->

* Stock インデクサーが読み込み後、期待どおりにトリガーされ、製品ステータスが更新されるようになりました。 以前は、Stock インデクサーは、変更された製品在庫データのインデックスを作成しませんでした。

<!-- MC-31198-->

* `.csv` 製品の読み込み時に生成されるファイルに、期待どおりにダウンロード可能な製品のグループタイトルが含まれるようになりました。 以前は、不要な検証 `group_title` 読み込み中に、ダウンロード可能な製品のグループタイトルが表示されませんでした。

<!-- MC-32153-->

* 条件 `cron` が有効になっていて、を使用して顧客のインポートを実行する。 **（顧客およびアドレス （単一ファイル））** オプションを選択すると、アプリケーションによって管理者の顧客グリッドにデータが期待どおりに入力されます。 カスタマーグリッドには、手動でのインデックス再作成が完了するとのお客様が表示されます。 `customer_grid indexer`. 以前は、アプリケーションは、新しくインポートされた顧客アドレスで顧客グリッドを更新していませんでした。

<!-- MC-32154-->

* 自動でのインデックス再作成後、アプリケーションで顧客リストが期待どおりに表示されるようになりました。 以前は、手動で実行していたが `bin/magento index:reindex` 正常に動作し、自動インデックス再作成後にカスタマーグリッドに顧客情報が表示されなかった。

<!-- MC-30148-->

* アプリケーションはから一時ファイルを削除するようになりました。 `<Magento_home>/var` 製品の読み込みが完了した後、期待どおりに動作します。

<!-- MC-31879-->

* によって製品が読み込まれる際に、アプリケーションで管理者に重複した SKU が作成されなくなりました `.csv` ファイル。

<!-- ENGCOM-6141-->

* 読み込んだ設定可能な属性の値に等号（=）が含まれている場合でも、読み込みが失敗しなくなりました。 _プルリクエストで dhoang89 によって送信された修正 [25194](https://github.com/magento/magento2/pull/25194)_. [GitHub-25188](https://github.com/magento/magento2/issues/25188)

<!-- ENGCOM-6901-->

* 書き出されたすべてのグリッドデータ（Adobe Commerceとカスタムデータの両方）に、タイプのすべての列のオプション値ではなくオプションラベルが付くようになりました `Select` または `Multiselect`. 以前は、このデータを書き出した場合、書き出されたスプレッドシートには、グリッドに表示された値ではなく、ID を持つ列が含まれていました。 _プルリクエストで Maksym Novik が修正を送信しました [26523](https://github.com/magento/magento2/pull/26523)_. [GitHub-25963](https://github.com/magento/magento2/issues/25963)

<!-- ENGCOM-7145-->

* アプリケーションでは、を読み込んで製品を更新した後、期待どおりにストアフロントにバンドル製品が表示されるようになりました。 `.csv` ファイル。 _Pavel Bystritsky によってプルリクエストで送信された修正 [25664](https://github.com/magento/magento2/pull/25664)_. [GitHub-25540](https://github.com/magento/magento2/issues/25540)

### 索引

<!-- MC-25236 30779-->

* パフォーマンスを向上しました `indexer_update_all_views`. インデックス作成が高速になり、非アクティブなルールは処理されなくなり、変更された製品のみのエントリがキャッシュに消去されるようになりました。

<!-- MC-29917-->

* ストアフロントの製品価格に、予定されているカタログ価格ルールの更新の適用が正確に反映されるようになりました。 以前は、インデックスを手動で再作成するまで、価格はスケジュールされた買い物かご価格ルールを反映しませんでした（`php bin/magento indexer:reindex catalogrule_rule`）に設定します。

<!-- MC-30588-->

* 検索不能な属性（ `is_searchable`, `is_filterable`, `is_visible_in_advanced_search` 属性は無効になっています）。

<!-- ENGCOM-6533-->

* インデックス再作成操作が失敗したときに、インデクサーとインデックス作成操作にかかった時間を識別するメッセージがアプリケーションに表示されるようになりました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [26207](https://github.com/magento/magento2/pull/26207)_. [GitHub-26206](https://github.com/magento/magento2/issues/26206)

<!-- ENGCOM-7179-->

* 次の条件を満たすストアに保存される製品  `onthefly` インデクサーとフラットなテーブルを、web サイトの割り当てに従って有効にしました。 以前は、製品からすべての web サイト割り当てを削除して保存すると、指定した web サイト割り当てにもかかわらず、すべてのフラットテーブルに製品が含まれていました。  _プル要求で Abel Truong によって修正が送信されました [27365](https://github.com/magento/magento2/pull/27365)_. [GitHub-16315](https://github.com/magento/magento2/issues/16315)

### インフラストラクチャ

* Internet Explorer 11.x ブラウザーはサポートされなくなりました。

<!-- MC-32223-->

* に関連付けられている検証ロジック **生年月日** customer Registration フォームのフィールドで JavaScript エラーがトリガーされなくなりました。

<!-- ENGCOM-7000-->

* カバーする統合テストを追加しました。 `$storeId` カテゴリリポジトリの場合 `get()` メソッド。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [27048](https://github.com/magento/magento2/pull/27048)_. [GitHub-27044](https://github.com/magento/magento2/issues/27044)

<!-- ENGCOM-6378-->

* の有効化 **すべての Cookie をブロック** safari でを設定しても、JavaScript エラーが発生しなくなり、アプリケーションに次の項目が表示されます `cookies disabled` 期待どおりのメッセージ。 以前は、アプリケーションは複数のを表示していました `SecurityError (DOM Exception 18): The operation is insecure` コンソールのエラー。 _プルリクエストで Rl a̼ Verdugo Lorenzo によって送信された修正 [25324](https://github.com/magento/magento2/pull/25324)_. [GitHub-13865](https://github.com/magento/magento2/issues/13865)

<!-- ENGCOM-6674-->

* 統合テストを実行した際に、アプリケーションが次のエラーをスローしなくなりました。 `Error: Call to a member function findFile() on array (/var/www/html/lib/internal/Magento/Framework/Code/Generator/DefinedClasses.php:59)`. 以前は、に関する問題 `AutoloaderRegistry::getAutoloader` 統合テストがランダムに失敗する原因。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [26480](https://github.com/magento/magento2/pull/26480)_. [GitHub-26479](https://github.com/magento/magento2/issues/26479)

<!-- ENGCOM-6958-->

* この `date` tag in `/module-sales/view/frontend/templates/order/order_date.phtml`  はに修正されました `span`. 以前は、アプリケーションはでエラーをログに記録していました `exception.log` クリックしたときのファイル **注文を表示** 店頭で **マイアカウント** > **マイ注文** ページ。 _プルリクエストで Andrii Chorniy によって送信された修正 [25895](https://github.com/magento/magento2/pull/25895)_. [GitHub-13269](https://github.com/magento/magento2/issues/13269), [GitHub-25738](https://github.com/magento/magento2/issues/25738)

<!-- ENGCOM-6316-->

* 高度なバンドルモジュールの Mixin の読み込みと適用を改善するために、JavaScript Mixin モジュールがリファクタリングされました。 以前は、アプリケーションは、高度なバンドルモジュールの Mixin を読み込んだり適用したりしませんでした。  _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [25587](https://github.com/magento/magento2/pull/25587)_. [GitHub-25586](https://github.com/magento/magento2/issues/25586)

<!-- ENGCOM-6344-->

* この `grunt clean` コマンドは、生成されたコードおよびメタデータフォルダーを期待どおりにクリーンアップするようになりました。 _Andrii Beziazychnyi がプルリクエストで送信した修正 [25765](https://github.com/magento/magento2/pull/25765)_. [GitHub-25739](https://github.com/magento/magento2/issues/25739)

<!-- ENGCOM-6463-->

* `getVersion` 結果（`ProductMetadata::getVersion`）がキャッシュされるようになりました。これにより、 `ProductMetadata::getVersion` メソッド。  _プルリクエストで Lukasz Lewandowski によって送信された修正 [26001](https://github.com/magento/magento2/pull/26001)_. [GitHub-24025](https://github.com/magento/magento2/issues/24025)

<!-- ENGCOM-7037-->

* ～のセッターが見つからない `additional_information` はに追加されました `OrderPaymentInterface`スキーマ宣言と受け入れられるプロパティの間の不整合を解決します。 _プルリクエストでアントニノ・ボヌモアが修正を送信 [26748](https://github.com/magento/magento2/pull/26748)_. [GitHub-26745](https://github.com/magento/magento2/issues/26745), [GitHub-13222](https://github.com/magento/magento2/issues/13222)

### 階層型ナビゲーション

<!-- MC-31763-->

* アプリケーションが以下をレンダリングするようになりました **はい/いいえ** 次の場合にカテゴリページの属性 **レイヤナビゲーションでの使用：フィルタリング可能（結果を含む）** ストアフロントプロパティの場合は有効になっています。

<!-- ENGCOM-6807-->

* 冗長 `\Magento\Sales\Model\Order\Email\Sender\ShipmentSender` は廃止され、次で置き換えられました  `\Magento\Sales\Model\Order\Shipment\Sender\EmailSender`. _プルリクエストで Adarsh Manickam によって修正が送信されました [26714](https://github.com/magento/magento2/pull/26714)_. [GitHub-14885](https://github.com/magento/magento2/issues/14885)

### ログ

<!-- MC-29636-->

* 注文ステータスの変更が、期待どおりに以下に記録されるようになりました **システム** > **アクションログ** > **報告書**.

<!-- MC-29637-->

* このアプリケーションでは、セールス出荷アクションが Admin Action ログに期待どおりに記録されるようになりました。

<!-- MC-29892-->

* CMS ページの保存アクションが管理アクションログに記録されるようになりました。 以前は、表示アクションのみがログに記録されていました。

<!-- MC-30618-->

* CMS ページの保存アクションが、次の場合に管理アクションログに期待どおりに記録されるようになりました。 **ログに記録するすべてのアクションを選択** は、「管理アクションのログ」タブ（**Admin** > **ストア** > **設定** > **詳細**）に設定します。

<!-- ENGCOM-7274-->

* CMS ページの変更が、期待どおりにアクションログに記録されるようになりました。 MFTF では、この機能をカバーするようになりました。  _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [27597](https://github.com/magento/magento2/pull/27597)_. [GitHub-171](https://github.com/magento/magento2/issues/171)

### メディアギャラリー

<!-- ENGCOM-6993-->

* クリック **Enter** メディアギャラリーで新しいフォルダーに名前を付けた後、加えたすべての変更が保存されるようになりました。 以前は、をクリック **Enter** マウスを使用して選択する代わりに、 **OK** すべての変更が失われることになりました。  _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [27029](https://github.com/magento/magento2/pull/27029)_. [GitHub-26847](https://github.com/magento/magento2/issues/26847)

<!-- ENGCOM-7490-->

* これで、メディアギャラリーの下に、プライマリフォルダーと同じ名前のサブフォルダーを作成できます。 以前は、同じ名前でサブフォルダーを保存することができませんでした。 _プルリクエストで Vadim Malesh が修正を送信しました [27976](https://github.com/magento/magento2/pull/27976)_. [GitHub-1270](https://github.com/magento/adobe-stock-integration/issues/1270)

### メディアストレージ

<!-- MC-32593-->

* `var/resource_config.json` は、画像がリクエストされるたびに再生成されなくなりました。 `get.php`. 以前は、このファイルは、への呼び出しのたびに書き換えられていました。 `get.php`.

### New Relic

<!-- ENGCOM-6461-->

* Adobe Commerce `cron`ジョブ名は、NewRelic APM 監視 – トランザクションのトランザクショントレース内に期待どおりに含まれるようになりました。 これには以下が含まれます `cron` コマンドラインから実行されるジョブと、標準スケジューラーで実行されるジョブ。  _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [25957](https://github.com/magento/magento2/pull/25957)_. [GitHub-22047](https://github.com/magento/magento2/issues/22047)

### ニュースレター

<!-- MC-31768-->

* 顧客は、ニュースレターを期待どおりに購読できるようになりました。 以前は、顧客が購読を確認しようとすると、アプリケーションに次のエラーが表示されていました。 `This is an invalid subscription confirmation code`.

<!-- ENGCOM-6525-->

* ストアフロントのフッターにあるニュースレター入力フィールドが、サポートされているブラウザーで同じようにレンダリングされるようになりました。  _プル要求で divyajyothi5321 によって送信された修正 [26182](https://github.com/magento/magento2/pull/26182)_. [GitHub-26176](https://github.com/magento/magento2/issues/26176)

<!-- ENGCOM-6691-->

* ニュースレターの購読に関するストアフロントメッセージが、HTMLで期待どおりにレンダリングされるようになりました。 _プル要求で Oleh Usik によって送信された修正 [26455](https://github.com/magento/magento2/pull/26455)_. [GitHub-25162](https://github.com/magento/magento2/issues/25162)

### 注文件数

<!-- MC-33456-->

* Web サイトの表示設定で税金を除外するように指定している場合に、注文概要の小計に除外された税金が表示されなくなりました。 以前は、複数の web サイトが異なる表示設定で設定された場合、ストアレベルの設定にかかわらず、サーバー変数で定義された設定がストアに使用されていました。

### 支払い方法

<!-- MC -->

* サードパーティの支払い方法である Authorize.Net、eWay、CyberSource、Braintree、および Worldpay をコアコードに組み込む機能が削除されました。 マーチャントは、Commerce Marketplaceで利用可能な公式の拡張機能に移行する必要があります。

<!-- MC -->

* Signifyd の不正防止のコア実装はサポートされなくなりました。 マーチャントは、に移行する必要があります [Signifyd Fraud &amp; Chargeback Protection 拡張機能](https://marketplace.magento.com/signifyd-module-connect.html) これはCommerce Marketplaceで入手できます。

<!-- MC-32546-->

* 次の場合に、注文を正常に完了し、マーチャントのホームページに戻ることができます **Website Payments Pro ホストソリューション** が設定されました。 以前は、をクリックした場合 **商人に戻る**、アプリケーションが次のエラーをスローしました： `Invalid Form Key. Please refresh the page`.

<!-- ENGCOM-6606-->

* 請求先住所を切り替えても、ストアフロントのチェックアウトワークフローの支払いセクションで JavaScript 関数テキストが表示されなくなりました。 _プルリクエストで Chris Pook が修正を送信 [26378](https://github.com/magento/magento2/pull/26378)_. [GitHub-26375](https://github.com/magento/magento2/issues/26375)

<!-- ENGCOM-7223-->

* クレジットメモに、正しい金額が **修正払戻** クレジット・メモ概要のフィールド。  _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [27343](https://github.com/magento/magento2/pull/27343)_. [GitHub-13851](https://github.com/magento/magento2/issues/13851)

<!-- ENGCOM-6524-->

* から追加情報を削除できるようになりました `quote_payment column additional_information` 見積もりを保存した後のテーブル。 以前は、見積を保存した後にこの情報を削除できませんでした。理由は `unsAdditionalInformation` メソッド： `\Magento\Payment\Model\Info` データを正しく初期化できませんでした。  _プルリクエストで Marco Oliveira によって送信された修正 [26084](https://github.com/magento/magento2/pull/26084)_. [GitHub-26083](https://github.com/magento/magento2/issues/26083)

<!-- ENGCOM-6609-->

* 支払い手順は、注文が行われたストア表示から派生するようになりました。 以前は、以下の理由から、支払い手順はデフォルトのストア表示から使用されていました `BeforeOrderPaymentSaveObserver` メソッドは、デフォルトのストア表示から支払い手順を取得しました。 _Karyna Tsymbal がプル・リクエストで修正を送信 [26399](https://github.com/magento/magento2/pull/26399)_. [GitHub-26332](https://github.com/magento/magento2/issues/26332)

<!-- ENGCOM-6953-->

* 複数の店舗がある展開で注文が行われた店舗から、管理者と請求書および出荷請求書の両方に表示される支払い情報を収集するようになりました。 以前は、applicationderived payment information from the default store.  _プルリクエストで Bartomiej Szubert が修正を送信しました [26765](https://github.com/magento/magento2/pull/26765)_. [GitHub-17933](https://github.com/magento/magento2/issues/17933)

#### PayPal

<!-- MC-30498-->

* 顧客がクリックするたびに情報エラーメッセージが表示されるようになりました **PayPal で支払う** チェックアウトワークフローで無効な配送先住所を入力した後。 以前は、顧客が最初にボタンをクリックした場合にのみエラーメッセージが表示され、それ以降のクリックでは表示されませんでした。

<!-- MC-30639-->

* 注文のステータスがアプリケーションによってに変更されなくなりました。 `Processing` PayPal での支払いが失敗した場合の、チェックアウトワークフローの「支払いレビュー」セクション。

<!-- MC-30864-->

* Payflow Link 支払い方法を使用して、注文を正常に完了できるようになりました。 以前は、注文ステータスが次のフィールドに残っているため、Payflow Link 支払方法は常に支払を拒否していました `Pending` 支払い方法ログの注文ステータスが `Approved`.

<!-- MC-32494-->

* PayPal Payflow Pro を使用して行われた注文は、に設定されるようになりました。 `Suspected Fraud` 不正フィルターがトリガーされた際のステータス。

<!-- MC-33110-->

* サポートされているクレジットカードで PayPal Express Checkout を使用できるようになりました。 以前は、PayPal Express Checkout を使用して注文を完了しているときにクレジットカードのボタンをクリックすると、アプリケーションがハングし、クレジットカード情報を入力できませんでした。

<!-- MC-33117-->

* PayPal Payflow Pro 内で行われた注文は、に設定されるようになりました。 `Suspected Fraud` 不正フィルターがトリガーされた際のステータス。 以前は、PayPal の支払いトランザクションステータスは、アプリケーション側で支払い承認が発生する前に検証されませんでした。

<!-- MC-33294-->

* Web サイト制限が有効な場合、Payflow Pro が期待どおりに動作するようになりました。

<!-- MC-31196-->

* PayPal Express Checkout で発注された注文を正常に処理できるようになりました。この場合、注文の配送先住所は、顧客が配送ページのドロップダウンメニューから選択するのではなく、テキストフィールドに手動で入力した国リージョンを指定します。 以前は、アプリケーションによって注文の確認ページに次のエラーが表示されていました。 `Error 500: NOTICE: PHP message: PHP Fatal error: Uncaught Error: Call to a member function getId() on null in httpdocs/vendor/magento/module-paypal/Model/Api/Nvp.php:1527`. [GitHub-26698](https://github.com/magento/magento2/issues/26698)

<!-- MC-31573-->

* PayPal Pro の支払い方法は、Chrome 80 ブラウザーで期待どおりに動作するようになりました。 この支払い方法は、以前は、顧客のセッションへのアクセスを必要とするコールバックエンドポイントを呼び出していました。新しいデフォルトの Chrome SameSite cookie 機能では許可されないアクセスです。 [GitHub-26840](https://github.com/magento/magento2/issues/26840)

<!-- MC-31292-->

* 永続チェックアウトカートが有効になっていて、 **ログアウト時に永続性をクリア** はに設定されています。 **なし**. 以前は、アプリケーションによってログインページにリダイレクトされていました。

<!-- ENGCOM-6383-->

* Paypal Express および Web Payments Pro からの支払いは、 `Processing` 処理が開始されると、想定どおりに状態に戻します。 以前は、Paypal Web Payments Pro の支払いは `Pending` 支払い情報が次の場合でも支払い状態 `Processing` 都道府県。 _プルリクエストで Azambon によって送信された修正 [25876](https://github.com/magento/magento2/pull/25876)_. [GitHub-25659](https://github.com/magento/magento2/issues/25659)

### パフォーマンス

<!-- MC-31499-->

* 顧客データセクション無効化ロジックが改善されました。 このリリースでは、カスタム時のローカルストレージの既知の問題を回避する、すべての顧客セクションのデータを無効にする新しい方法が導入されています `sections.xml` 無効化がアクティブです。 （以前は、カスタムの場合にプライベートコンテンツ（ローカルストレージ）が正しく入力されていませんでした *etc/frontend/sections.xml* （アクションの無効化を使用） 参照： [非公開コンテンツ](https://developer.adobe.com/commerce/php/development/cache/page/private-content/#invalidate-private-content).

<!-- MC-31449-->

* 顧客アカウントの読み込みは、読み込み速度を向上させるためにリファクタリングされました。

<!-- MC-23383 ENGCOM-7006-->

* マーチャントはを使用できるようになりました [遅延読み込み](https://en.wikipedia.org/wiki/Lazy_loading) 画像を読み込みます。 _Timon de Groot がプル要求で修正を送信しました [27033](https://github.com/magento/magento2/pull/27033)_. [GitHub-27032](https://github.com/magento/magento2/issues/27032)

<!-- ENGCOM-6988-->

* ダッシュボードグラフは、に移行されました `chart.js` ライブラリ。  _プルリクエストで Bartomiej Szubert が修正を送信しました [26923](https://github.com/magento/magento2/pull/26923). [GitHub-186](https://github.com/magento/community-features/issues/186)_

<!-- ENGCOM-6232-->

* 多数の製品属性を含む大規模なカタログに対して実行される操作のパフォーマンス（3,000～23000 個のオプションの規模）は、属性オプション配列の作成方法をリファクタリングすることで向上しました。 _Behnam Shayani がプルリクエストで修正を送信 [25452](https://github.com/magento/magento2/pull/25452)_. [GitHub-20966](https://github.com/magento/magento2/issues/20966)

### Pricing

<!-- ENGCOM-6647-->

* 製品を複数回編集した後でも、アプリケーションは階層化された製品の正しい価格を保存して表示するようになりました。 以前は、アプリケーションは製品価格に対して行われた最後の編集を保存しませんでした。 _プルリクエストで Ravi Chandra によって送信された修正 [26162](https://github.com/magento/magento2/pull/26162)_. [GitHub-25195](https://github.com/magento/magento2/issues/25195)

<!-- ENGCOM-6914-->

* 固定保存と割引保存の両方の割合が、注文の最終価格に正しく適用されるようになりました。 以前は、製品の詳細ページで、アプリケーションの階層価格（固定と割引の両方）の保存率が間違って表示されていました。 _Pull 要求で Satish Subramanian が修正を送信しました [26584](https://github.com/magento/magento2/pull/26584)_. [GitHub-26583](https://github.com/magento/magento2/issues/26583)

### 製品アラート

<!-- MC-30255-->

* 設定可能な製品の再入荷に関して顧客に送信される在庫アラートメールに、正しい製品価格が含まれるようになりました。 以前は、このメールには製品価格 0 が含まれていました。

<!-- MC-32873-->

* 製品ストックアラートの登録解除が、ユーザーのセッションが期限切れの場合に機能するようになりました。 以前は、をクリックした場合 **ここをクリックしてこの製品の通知を停止** リンクすると、アプリケーションで 404 エラーが表示されました。

<!-- MC-31979-->

* 製品アラートの購読解除アクションが期待どおりに動作するようになりました。 以前は、顧客が「」をクリックした場合 **ここをクリックしてこの製品の通知を停止** リンクすると、アプリケーションで 404 エラーが表示されました。

### 製品ビデオ

<!-- MC-23743-->

* REST を使用してYouTube ビデオを更新できるようになりました（PUT） `rest/V1/products/{SKU}`）に設定します。 以前は、アプリケーションでビデオのサムネールが表示されていましたが、 **再生** ボタン。 [GitHub-23194](https://github.com/magento/magento2/issues/23194)

### レポート

<!-- ENGCOM-6635-->

* 製品リストは、設定可能な製品を SKU 別に並べ替えるようになりました。SKU は、バリエーション別に設定可能な製品をグループ化します。 以前は、レポートは次の項目で製品をグループ化していました `product_id`. _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [25858](https://github.com/magento/magento2/pull/25858)_. [GitHub-25856](https://github.com/magento/magento2/issues/25856)

<!-- ENGCOM-6427-->

* この **Admin** > **報告書** > **統計の更新** テーブルが表示されるようになりました **更新日= Null** ステータス **なし** が含まれる **更新日** 列の代わり **未定義**. _プル要求で Eden Duong が修正を送信 [25932](https://github.com/magento/magento2/pull/25932)_. [GitHub-25931](https://github.com/magento/magento2/issues/25931)

<!-- ENGCOM-6925-->

* 低在庫レポートに、無効な製品が含まれなくなりました。 _プルリクエストで Mohamed-Asar によって修正が送信されました [26862](https://github.com/magento/magento2/pull/26862)_. [GitHub-26838](https://github.com/magento/magento2/issues/26838)

<!-- ENGCOM-7110-->

* アプリケーションに、の正確な値が表示されるようになりました **年初から年初まで**  のフィールド **Admin**  >  **ストア**  >  **設定**  >  **一般**  >  **報告書**. _プルリクエストで Priya-V-Panchal によって送信された修正 [27088](https://github.com/magento/magento2/pull/27088)_. [GitHub-27086](https://github.com/magento/magento2/issues/27086)

### 返品承認（RMA）

<!-- MC-24906-->

* ストアフロントから注文と RMA を正常に作成すると、アプリケーションにエラーが表示されなくなりました。 以前は、アプリケーションで RMA が期待どおりに作成されましたが、次のエラーも表示されていました。  `We can't create a return right now. Please try again later`.

<!-- MC-30181-->

* ストアフロントの注文返品に含まれるトラッキングリンクが期待どおりに機能するようになりました。 以前は、顧客が注文返品ページの出荷トラッキングリンクをクリックすると、アプリケーションに次のエラーが表示されていました。 `PHP Fatal error: Uncaught Error: Call to a member function getTitle() on null in /app/z7kvt3uys6daq/var/view_preprocessed/pub/static/vendor/magento/module-shipping/view/frontend/templates/tracking/details.phtml:1`.

<!-- MC-30237-->

* 管理者から注文返品を作成した後、「返品」タブが期待どおりに表示されるようになりました。

<!-- MC-34150-->

* RMA メールテンプレート（`app/code/Magento/Rma/view/frontend/email/new.html`）に設定します。

### レビュー

<!-- MC-29578-->

* アプリケーションは、 **レビューを送信** ボタン：ユーザーがボタンを 1 回クリックした後。 以前は、アプリケーションは、最初のクリックの後でこのボタンを無効にせず、ユーザーが **レビューを送信** ボタンを複数回押します。

<!-- MC-31293-->

* この **Admin** > **報告書** > **レビュー** > **製品別** フィルターリストに、結果が期待どおりに表示されるようになりました。 以前は、このリストをフィルタリングしても、アプリケーションに結果が表示されませんでした。

<!-- ENGCOM-6938-->

* 保留中のレビューのメニュー項目が期待どおりにアクティブになりました **Admin** >  **Marketing** > **ユーザーコンテンツ** > **保留中のレビュー**.  _Ravinder によってプルリクエストで送信された修正 [26230](https://github.com/magento/magento2/pull/26230)_. [GitHub-26229](https://github.com/magento/magento2/issues/26229)

### 報酬

<!-- MC-31459-->

* ストアごとに異なる報酬ポイント率が設定されているマルチストア環境で営業しているストアに注文が返送された場合、アプリケーションは報酬ポイントを期待どおりに返金するようになりました。 以前は、報酬ポイントを使用して購入された返品注文について、アプリケーションは期待どおりにポイントを返金していませんでした。

### 売上

<!-- MC-29426-->

* 完了した注文が、支払いシステムとAdobe Commerceの両方に表示されるようになりました。 以前は、注文は支払いシステムに表示されていましたが、Adobe Commerceには表示されませんでした。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-30000-->

* アプリケーションは、顧客のデフォルトの配送先住所に従うようになりました。 以前は、アプリケーションは、設定に従ったデフォルトの請求アドレスとデフォルトの配送先住所および **請求先住所と同じ** 設定は自動的に有効になりませんでした。

<!-- MC-30299-->

* 割引を含む受注の払戻が正しく計算されるようになりました。 以前は、アプリケーションが誤って送料と送料の割引を計算し、払い戻し合計が支払い合計と一致しませんでした。

<!-- MC-33165-->

* マルチサイトデプロイメントで新しい顧客が注文を作成すると、アプリケーションによって正しいグループ ID が割り当てられるようになりました。 以前は、アプリケーションはデフォルトの顧客グループの設定を適用していました。

<!-- MC-31786-->

* クレジット・メモ、請求書および出荷の表示権限を含む制限付き権限を持つ管理者は、請求書および出荷を「受注」ページから期待どおりに表示できるようになりました。 以前は、制限付き管理者が注文を表示しようとすると、アプリケーションに次のエラーが表示されていました。 `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- MC-24023-->

* 顧客が買い物かごに、既存の製品在庫の半分を超えても在庫合計を超えない製品を追加した場合、アプリケーションにエラーが表示されなくなりました。 以前は、このような状況で、アプリケーションに次のエラーが表示されていました。 `The requested qty is not available`. [Github-24365](https://github.com/magento/magento2/issues/24365)

<!-- ENGCOM-6910-->

* 在庫数が 1 の場合、管理者から買い物かごに製品を正常に追加できるようになりました。 以前は、アプリケーションは商品を買い物かごに追加せず、次のメッセージが表示されていました。 `The requested qty is not available`. _プルリクエストで Serhii Petrychenko が修正を送信しました [26650](https://github.com/magento/magento2/pull/26650)._ [GitHub-25675](https://github.com/magento/magento2/issues/25675)

<!-- ENGCOM-7090-->

* カスタムオプションの名前が最大文字数を超える製品を、ストア管理者が並べ替えようとした場合に、アプリケーションに情報エラーメッセージが表示されるようになりました。 以前は、これらの条件の下では、アプリケーションはメッセージではなくレポートページを表示していました。 _プルリクエストで Mudit Shukla によって修正が送信されました [26348](https://github.com/magento/magento2/pull/26348)_. [GitHub-26345](https://github.com/magento/magento2/issues/26345)

<!-- ENGCOM-6328-->

* 販売注文住所情報編集フォームのレイアウトは、管理フォームライブラリの規則に合わせてリファクタリングされました。 _プルリクエストで Alexey Rakitin が修正を送信しました [25699](https://github.com/magento/magento2/pull/25699)_. [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6007-->

* の「製品」セクションのチェックボックス **カタログ** > **カテゴリ** これで、ページが期待どおりに動作します。  _プルリクエストで Denis Kopylov が送信した修正 [22990](https://github.com/magento/magento2/pull/22990)_. [GitHub-22988](https://github.com/magento/magento2/issues/22988)

<!-- ENGCOM-6809-->

* この `getCustomer` メソッドは、で定義された顧客オブジェクトを返すようになりました。 `phpdoc` ブロック。 以前は、このメソッドはを返していました `NULL`、および `phpdoc` ブロックは、このメソッドが返す可能性があることを強調表示しませんでした `NULL`. _Fanis Strezos がプルリクエストで送信した修正 [26423](https://github.com/magento/magento2/pull/26423)_. [GitHub-25268](https://github.com/magento/magento2/issues/25268)

<!-- ENGCOM-6492-->

* マーチャントが注文を無効にした場合、再注文が期待どおりに無効になりました。  **Admin** > **ストア**  >  **設定**  >  **売上**  >  **並べ替え**  >  **オーダーを許可**.  _プル要求で Eden Duong が修正を送信 [26051](https://github.com/magento/magento2/pull/26051)_. [GitHub-25130](https://github.com/magento/magento2/issues/25130)

<!-- ENGCOM-6627-->

* `getPrice()` 管理で注文のカスタム価格を設定する際に、メソッドが文字列ではなく float または null を返すようになりました。  _プルリクエストで Andrii Chorniy によって送信された修正 [26313](https://github.com/magento/magento2/pull/26313)_. [GitHub-25968](https://github.com/magento/magento2/issues/25968)

<!-- ENGCOM-6786-->

* この **都道府県コードとタイトル** 列 **Admin** > **ストア**  > 設定 >  **注文ステータス** は、ステータスではなく状態を期待どおりに表示するようになりました。  _プル要求で Oleh Usik によって送信された修正 [26569](https://github.com/magento/magento2/pull/26569)_. [GitHub-17847](https://github.com/magento/magento2/issues/17847)

<!-- ENGCOM-6936-->

* PDF請求書は、GB ロケールで作成された場合、正しい購入日を取り込むようになりました。 _プル要求で Eden Duong が修正を送信 [26701](https://github.com/magento/magento2/pull/26701)_. [GitHub-26675](https://github.com/magento/magento2/issues/26675)

### 販売ルール

<!-- MC-30155-->

* `quote_item.applied_rule_ids` 買い物かごの価格ルールが無効になった後、が期待どおりに更新されるようになりました。 [GitHub-24526](https://github.com/magento/magento2/issues/24526)

<!-- MC-32229-->

* 買い物かごの価格ルールを作成または編集しようとすると、アプリケーションにカテゴリツリーが期待どおりに表示されるようになりました。 以前は、ルールの作成または編集中に「条件」セクションでカテゴリを選択すると、JavaScript エラーが発生していました。

<!-- ENGCOM-6824-->

* 設定可能な製品が最初に買い物かごに追加された際に、アプリケーションが買い物かご価格ルールを使用して、買い物かごレベルの固定割引を正しく計算できるようになりました。 _プルリクエストで Lachlan Turner が修正を送信 [26623](https://github.com/magento/magento2/pull/26623)_. [GitHub-26622](https://github.com/magento/magento2/issues/26622)

### 検索 {#search-heading}

* Elasticsearch 7.6.x は、Adobe CommerceとAdobe Commerceのデフォルトのカタログ検索エンジンになりました。 Elasticsearch 7.6.x をインストールしないと、バージョン 2.4.0 をインストールまたはアップグレードできません。Elasticsearchバージョン 2.x のコードは削除されました。 Elasticsearchバージョン 5.x および 6.x は非推奨となり、サポートされなくなりました。 参照： [検索エンジンの前提条件](../../../installation/prerequisites/search-engine/overview.md).

<!-- MC-23753-->

* アプリケーションが以下をレンダリングするようになりました **&lt;** および **>** ストアフロントカタログの検索文字列の記号が正しく設定されていません。

<!-- MC-25010-->

* 製品が実行後にカテゴリで期待どおりに表示されるようになりました `cron:run` Elasticsearchを実装するデプロイメントで。

<!-- MC-25254-->

* 新しい製品属性をストアフロントで検索可能にするために、アプリケーションで完全検索の再インデックスが必要にならなくなりました。

<!-- MC-29545-->

* バンドル商品を含む商品リストをアルファベット順に並べ替えた場合、Elasticsearchが期待どおりに機能するようになりました。

<!-- MC-29951-->

* カテゴリ内の設定可能な製品をフィルタリングする際に、フィルタリング結果に在庫切れのオプションが含まれなくなりました。

<!-- MC-30131-->

* Elasticsearchを使用して商品リストページからすべての商品を選択すると、検索結果のすべての商品が期待どおりに表示されるようになりました。 以前は、検索結果が表示されませんでした。

<!-- MC-30201-->

* 1 ページに表示する検索結果の数を変更した場合に、Elasticsearchでカテゴリページの結果が正しく表示されるようになりました。 以前は、検索結果ページに表示する検索結果の数を変更すると、アプリケーションに空白のページが表示され、次のエラーが表示されていました。 `"0":"SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near'`

<!-- MC-32430-->

* 在庫切れの設定可能な製品の価格の並べ替えが正しく機能するようになりました。

<!-- MC-25176-->

* 複数の web サイトのデプロイメントで顧客がストアフロントのクイック検索を使用した場合に、アプリケーションで例外がスローされなくなりました。

<!-- ENGCOM-6842-->

* マーチャントがフッターの「検索語句」オプションをクリックして検索語句ページを開いても、アプリケーションに警告が表示されなくなりました。 **Marketing** > **SEO と検索** > **検索語句**.  _プルリクエストで vishal-webkul によって送信された修正 [25246](https://github.com/magento/magento2/pull/25246)_. [GitHub-25245](https://github.com/magento/magento2/issues/25245)

<!-- ENGCOM-7289-->

* モバイルビューで Safari を実行する際に検索入力ボックスをクリックしても、アプリケーションでビューポートのサイズが変更されなくなりました。  _プルリクエストで Pawe Tylek によって修正が送信されました [27603](https://github.com/magento/magento2/pull/27603). [GitHub-27506](https://github.com/magento/magento2/issues/27506)_

<!-- ENGCOM-6364-->

* Elasticsearchのバージョンが、管理者（**ストア** > 設定 > **設定** > **カタログ** > **カタログ** > **カタログ検索**）に設定します。 _プルリクエストでAndreas Mautz が送信した修正 [25838](https://github.com/magento/magento2/pull/25838)_. [GitHub-25674](https://github.com/magento/magento2/issues/25674)

### 送料

<!-- MC-32782-->

* 注文された製品の 1 つが仮想製品の場合、注文を複数の住所に出荷できるようになりました。 以前は、アプリケーションは物理製品の注文に成功しましたが、仮想製品の注文は空でした。

<!-- MC-29276-->

* 複数のアドレスに発送される注文に対して、固定金額の買い物かご全体の割引が正しく適用されるようになりました。 以前は、このタイプの割引は、顧客が複数の住所を持つチェックアウトを使用して注文をチェックアウトした場合に複数回適用されていました。 [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- MC-29444-->

* 買い物かご価格ルールの作成中に発送方法を選択できるドロップダウンリストに、有効な値のみが含まれるようになりました。 以前は、このドロップダウンリストには空の値または追加の値が含まれていました。

<!-- MC-30186-->

* アプリケーションは、配送ラベルをとして印刷するようになりました。 `.pdf` 選択した際のファイルの想定通りの配置 **出荷ラベルの印刷** 順序アーカイブ リストの順序から、[ アクション ] ドロップダウン リストを選択します。 以前は、アプリケーションで 404 エラーが表示されていました。

<!-- MC-31396-->

* 買い物かごに、送料無料の価格ルールに含まれるカテゴリの製品と、ルールに含まれないカテゴリの製品が含まれている場合、送料無料の価格ルールは関連する製品にのみ影響するようになりました。 以前は、買い物かごに送料無料カテゴリと価格ルールに含まれていない他のカテゴリの両方の製品が含まれていた場合、送料無料はどの製品にも適用されませんでした。

<!-- ENGCOM-6436-->

* ドロップダウン/複数選択ボックスにすべての配送業者が表示されるのではなく、空白ページが表示されなくなりました。 以前は、のエラー `toOptionArray` 関数 `vendor/magento/module-shipping/Model/Config/Source/Allmethods.php` が発生しました。 _Marc Rodriguez がプルリクエストで送信した修正 [25315](https://github.com/magento/magento2/pull/25315)_. [GitHub-13136](https://github.com/magento/magento2/issues/13136)

* 複数の所在地に出荷される受注を顧客が作成する場合に、固定金額値引が複数回適用されなくなりました。  _Mahesh Singh によってプルリクエストで送信された修正 [26419](https://github.com/magento/magento2/pull/26419)_. [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- ENGCOM-6523-->

* のプラグイン `Magento\Ups\Model\Carrier` カスタムを実装する `di.xml` これで、開発者モードで正しく動作するようになりました。 以前は、アプリケーションは次のエラーをスローしていました。 `1 exception(s): Exception #0 (BadMethodCallException): Missing required argument $data of Magento\Ups\Model\Carrier`. _プルリクエストで Bartomiej Szubert が修正を送信しました [26130](https://github.com/magento/magento2/pull/26130)_. [GitHub-25390](https://github.com/magento/magento2/issues/25390)

### サイトマップ

<!-- MC-29362-->

* アプリケーションは、サイトマップを生成する際に、期待どおりにプロジェクトベース URL を使用するようになりました。

<!-- ENGCOM-6670-->

* 生成されたサイトマップにホームページの URL が含まれるようになりました。 _プルリクエストで deepaksnair によって修正が送信されました [26445](https://github.com/magento/magento2/pull/26445)_. [GitHub-25761](https://github.com/magento/magento2/issues/25761)

### ステージング

<!-- MC-32342-->

* マルチサイトデプロイメントで 1 つの Web サイトへのアクセスのみが制限されている管理者は、その Web サイトのスケジュールされた更新をプレビューできるようになりました。 以前は、ステージングプレビューはデフォルトでデフォルトストアを使用していました。ユーザーがデフォルトストアへのアクセス権を持っていない場合は、アプリケーションが例外をスローしていました。

<!-- MC-32736-->

* 既存のスケジュールを編集しても、スケジュールが重複しなくなりました。 以前は、既存のスケジュールを編集すると、アプリケーションによってスケジュールが複製され、複製されたスケジュールを開こうとすると、アプリケーションによってエラーがスローされていました。

<!-- MC-32432-->

* クロスセル製品は、これらの製品の 1 つ以上に対して「スケジュール更新」を作成した後、「買い物かごの表示と編集」ページに期待どおりに表示されるようになりました。

### ストア

<!-- MC-25187-->

* 顧客が 1 つのストアにログインし、商品を買い物かごに追加した後、マルチストアのデプロイメントで新しいストアに切り替えても、顧客セッションが期待どおりに保持されるようになりました。 以前は、顧客が 2 番目のストアに移動すると、アプリケーションは顧客をログアウトし、買い物かごを空にしました。

<!-- ENGCOM-4781-->

* アプリケーションは、削除されたストア表示に関連するレコードを `sale_sequence_meta` および `sales_sequence_profile` テーブルが正常に作成されました。 _プルリクエストで Bartomiej Szubert が修正を送信しました [22296](https://github.com/magento/magento2/pull/22296)_. [GitHub-14958](https://github.com/magento/magento2/issues/14958)

<!-- ENGCOM-6869-->

* ベース URL が異なるストア間で切り替える際に、ストア切り替えボタンが期待どおりに動作するようになりました。 以前は、顧客がストアスイッチャーを使用してストアを切り替えると、ターゲットストアのベース URL が現在のストアとは異なる場合、リクエストは失敗していました。 _プルリクエストで Tobias Nilsson が修正を送信 [26548](https://github.com/magento/magento2/pull/26548)_. [GitHub-23755](https://github.com/magento/magento2/issues/23755), [GitHub-26384](https://github.com/magento/magento2/issues/26384)

### スウォッチ

<!-- MC-30294-->

* マーチャントは、 **ビジュアルスウォッチ** オプション オン **ストア** > **属性** > **製品** > **新しい属性**. 以前は、新しく作成したスウォッチ属性を開こうとすると、JavaScript エラーがトリガーされていました。

<!-- ENGCOM-6750-->

* 設定可能な製品に対して顧客が新しいスウォッチオプションを選択すると、広告された最低価格が期待どおりに変更されるようになりました。 _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [26241](https://github.com/magento/magento2/pull/26241)_. [GitHub-26240](https://github.com/magento/magento2/issues/26240)

<!-- ENGCOM-6685-->

* 新しいスウォッチオプションを選択すると、アプリケーションで、設定可能な製品の最小アドバタイズ価格が重複しなくなりました。 _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [26317](https://github.com/magento/magento2/pull/26317)_. [GitHub-26314](https://github.com/magento/magento2/issues/26314)

<!-- ENGCOM-6966-->

* 新規製品属性ページのスウォッチの管理（属性の値）領域のドロップダウンメニューの動作の問題を修正しました。  _プル要求で Oleh Usik によって送信された修正 [26090](https://github.com/magento/magento2/pull/26090)_. [GitHub-25910](https://github.com/magento/magento2/issues/25910)

### TargetRule

<!-- MC-31546-->

* ストアフロントで製品に表示される関連製品ブロックに、関連製品ルールで定義された条件を満たす製品が表示されるようになりました。 以前は、アプリケーションには関連製品は表示されていませんでした。

### 税

<!-- MC-29579-->

* 顧客がチェックアウト中に注文の宛先国を変更した場合、アプリケーションは配送料と価格を期待どおりに更新するようになりました。

<!-- MC-30546-->

* 該当する買い物かご価格ルールに基づいて、送料無料が期待どおりに適用されるようになりました。 以前は、注文が送料無料の条件を満たしているかどうかを計算する際に、買い物かご価格ルールで税金が考慮されていませんでした。

<!-- MC-32402-->

* を編集して保存しても、アプリケーションがエラーをスローしなくなりました。 `NOT LOGGED IN` b2B がインストールされている場合の顧客グループ。

### テスト

>[!NOTE]
>
>**MFTF は、2FA が有効な状態でテストを実行するためにGoogle Authenticator を使用するようになりました。 MFTF は、Google Authenticator を有効にするための追加設定手順がないと 2.4.0 では動作しません**. 参照： [二要素認証（2FA）のための MFTF の設定](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html#magento-functional-testing-framework).

<!-- ENGCOM-6585-->

* テストおよびアクショングループのハードコードされた URL は、ページ参照に置き換えられました。 _プライベートリポジトリーパートナー magento2ee のプルリクエスト 117 で Lukasz Bajsarowicz が送信した修正_. [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-7273-->

* テストでは、CMS ページに関連する管理者アクションを記録するタスクについて説明するようになりました。 _非公開リポジトリパートナーのプルリクエスト 172 で Lukasz Bajsarowicz が送信した修正 – magento2ee_. [GitHub-171](https://github.com/magento/magento2/issues/171)

<!-- ENGCOM-7040 7051-->

* 無効な機能テスト名が、ベストプラクティスに従って変更されました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [27118](https://github.com/magento/magento2/pull/27118) およびプライベートリポジトリ partners-magento2ee のプルリクエスト 151。 [GitHub-27117](https://github.com/magento/magento2/issues/27117)_

<!-- ENGCOM-7026-->

* Adobe Commerce `cron` は、テストデータの作成後のインデックス再作成に使用されるようになりました。該当する場合は、 `cache:flush config` 置換 `cache:flush`. _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [26990](https://github.com/magento/magento2/pull/26990)_. [GitHub-26989](https://github.com/magento/magento2/issues/26989)

<!-- ENGCOM-7421-->

* 受け入れテストは、の命名規則に従うようになりました `Magento/Indexer` および `Magento/Backup` モジュール。  _プルリクエストで Shankar Konar が修正を送信しました [27515](https://github.com/magento/magento2/pull/27515)_. [GitHub-27503](https://github.com/magento/magento2/issues/27503)

<!-- ENGCOM-6791 6825-->

* この `AdminReorderWithCatalogPrice` テストはリファクタリングされ、CI 検証プロセス中に失敗しなくなりました。 _非公開リポジトリパートナーのプルリクエスト 135 で Lukasz Bajsarowicz が送信した修正 – magento2ee_. [GitHub-26607](https://github.com/magento/magento2/issues/26607)

<!-- ENGCOM-6780 6795-->

* この `AdminAddingNewOptionsWithImagesAndPricesToConfigurableProduct` および `StorefrontApplyPromoCodeDuringCheckout` テストはリファクタリングされており、CI 検証プロセスで失敗しなくなりました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [26611](https://github.com/magento/magento2/pull/26611) およびプルリクエスト [26614](https://github.com/magento/magento2/pull/26614)_. [GitHub-26612](https://github.com/magento/magento2/issues/26612), [GitHub-26610](https://github.com/magento/magento2/issues/26610)

<!-- ENGCOM-6621-->

* この `DeleteProduct and DeleteCustomer Action Groups` テストはリファクタリングされており、CI 検証プロセスで失敗しなくなりました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [26407](https://github.com/magento/magento2/pull/26407)_. [GitHub-26396](https://github.com/magento/magento2/issues/26396)

<!-- ENGCOM-6608-->

* この `AdminMoveAnchoredCategoryTest.xml` テストはリファクタリングされており、CI 検証プロセスで失敗しなくなりました。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [26395](https://github.com/magento/magento2/pull/26395)_. [GitHub-26396](https://github.com/magento/magento2/issues/26396)

#### 統合テスト

<!-- ENGCOM-7143-->

* 統合テストで連続したリクエストが失敗しなくなりました。 以前は、リクエストオブジェクトがディスパッチ間で共有されているので、テストは失敗していました。 この `resetRequest` メソッドは、の状態を空にします。 `request`. _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [27300](https://github.com/magento/magento2/pull/27300)_. [GitHub-27299](https://github.com/magento/magento2/issues/27299)

<!-- ENGCOM-7262-->

* の対象となる追加の統合テストが追加されました `Magento_Customer` メール機能。 _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [27606](https://github.com/magento/magento2/pull/27606)_. [GitHub-27607](https://github.com/magento/magento2/issues/27607)

#### PHP 単体テスト

<!-- ENGCOM-7435 7306-->

* PHP 単体テストで、この致命的なエラーがスローされなくなりました。 `Fatal error: Class Mock_CartExtensionInterface_0ba80a0b contains 2 abstract methods and must therefore be declared abstract or implement the remaining methods (Magento\Quote\Api\Data\CartExtensionInterface::getAmazonOrderReferenceId, Magento\Quote\Api\Data\CartExtensionInterface::setAmazonOrderReferenceId) in /var/www/html/vendor/phpunit/phpunit-mock-objects/src/Generator.php(264) : eval()'d code on line 1`. _プライベートリポジトリーパートナーである magento2ee のプルリクエスト 178 で Lukasz Bajsarowicz が送信した修正。 [27701](https://github.com/magento/magento2/pull/27701)_. [GitHub-27638](https://github.com/magento/magento2/issues/27638)

<!-- ENGCOM-7271-->

* のテスト `Offline_Payments` は、PHPUnit 8 と互換性を持つようになりました。  _プル要求で Cristiano Pacheco によって送信された修正 [27627](https://github.com/magento/magento2/pull/27627)_. [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-7243 7284 7291-->

* の単体テスト `Framework`, `AdminAnalytics`, `AdminNotification`、および `AMPQ` は、PHPUnit 8 用に更新されました。 _プルリクエストで Ihor Sviziev が修正を送信しました [27522](https://github.com/magento/magento2/pull/27522), [27521](https://github.com/magento/magento2/pull/27521), [27519](https://github.com/magento/magento2/pull/27519), [27522](https://github.com/magento/magento2/pull/27522)_. [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-6542-->

* 次を実行できるようになりました `\Magento\Downloadable\Test\Unit\Helper\DownloadTest` インターネットに接続せずに単体テストを行う。  _プル要求で aleromano89 によって送信された修正 [26264](https://github.com/magento/magento2/pull/26264)_. [GitHub-23521](https://github.com/magento/magento2/issues/23521)

<!-- ENGCOM-6695-->

* の単体テストを追加しました `app/code/Magento/Fedex/Model/Source/Generic.php`. _Pull 要求で Satish Subramanian が修正を送信しました [26549](https://github.com/magento/magento2/pull/26549)_.

<!-- ENGCOM-7251 7283 7472-->

* `<magentoCron>` 複数のテストが追加され、部分的なインデックス再作成がトリガーになりました。 この変更により、以下をカバーする機能テストで偽陰性が発生する問題が解決されます `Magento_Bundle`, `CatalogImportExport`, `CatalogInventory`, `CatalogRule`, `Backend`, `Braintree`、および `Captcha`. _Lukasz Bajsarowicz がプルリクエストで送信した修正 [27322](https://github.com/magento/magento2/pull/27322), [27323](https://github.com/magento/magento2/pull/27323), [27321](https://github.com/magento/magento2/pull/27321)_. [GitHub-27320](https://github.com/magento/magento2/issues/27320)

<!-- ENGCOM-6844-->

* のすべての間違った使用方法 `<amOnPage>` は適切なに置き換えられました `<actionGroup>` 管理者は、テストで必要に応じてログアウトします。 _プライベートリポジトリーパートナー magento2ee のプルリクエスト 116 で Lukasz Bajsarowicz が送信した修正_. [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-6352-->

* テストの各アクション グループは、MFTF のベスト プラクティスに従って個別のファイルに移動され、一貫性のないファイル名が修正されました。 次のモジュールのテストが影響を受けています。

   * module-catalog-permissions
   * module-shared-catalog
   * module-catalog-event
   * module-banner
   * module-admin-gws
   * module-advanced-checkout
   * module-shipping
   * module-ui
   * module-shipping
   * module-checkout-address-search
   * module-sales
   * module-catalog
   * module-catalog-rule-staging
   * module-visual-merchandiser
   * module-customer

  _Lukasz Bajsarowicz がプルリクエストで送信した修正 [25800](https://github.com/magento/magento2/pull/25800), [26323](https://github.com/magento/magento2/pull/26323), [26321](https://github.com/magento/magento2/pull/26321), [26320](https://github.com/magento/magento2/pull/26320), [26319](https://github.com/magento/magento2/pull/26319), [26322](https://github.com/magento/magento2/pull/26322), [25828](https://github.com/magento/magento2/pull/25828), [26329](https://github.com/magento/magento2/pull/26329) （およびプライベートリポジトリパートナー – magento2ee のプルリクエスト 104、105、106、107、108、109、111、119、120、121）_. [GitHub-22853](https://github.com/magento/magento2/issues/22853)

### テーマ

<!-- MC-29804-->

* バグを解決しました： `JsFooterPlugin.php` これは、ダイナミック ブロックの表示に影響を与えました。 以前は、に直接アクセスすると、アプリケーションにこのエラーが表示されていました `/banner/ajax/load/url`: `Uncaught TypeError: strpos() expects parameter 1 to be string, null given in`.

<!-- ENGCOM-6708-->

* この `i18n` メソッドを使用すると、アンダースコアのテンプレートに文字列を追加することができます。  _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [26435](https://github.com/magento/magento2/pull/26435)_. [GitHub-18012](https://github.com/magento/magento2/issues/18012)

<!-- ENGCOM-6666-->

* この `section-config` モジュールがリファクタリングされました。 このリファクタリングにより、モジュールが次によって初期化される前に、サードパーティモジュールがPOSTリクエストを行ったり、顧客データを直接要求したりすることで発生するエラーが減少しました `data-mage-init`. _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [25764](https://github.com/magento/magento2/pull/25764)_. [GitHub-17125](https://github.com/magento/magento2/issues/17125)

<!-- ENGCOM-6924-->

* `LoadCssAsync` HTMLフォーマットエラーが修正されました。 _Pull 要求で Satish Subramanian が修正を送信しました [26764](https://github.com/magento/magento2/pull/26764)_. [GitHub-26760](https://github.com/magento/magento2/issues/26760)

<!-- ENGCOM-7052-->

* 作成時 `default.xml` および `catalog_product_view.xml` ファイル新しいテーマの作成の一環として、アプリケーションはこれらのページを作成するか、期待どおりにログファイルにエラーを記録します。 以前は、アプリケーションは、でエラーをログに記録していました `vendor/magento/framework/View/Page/Config/Renderer.php` ファイル。 _Vinh Le によってプルリクエストで修正が送信されました [27026](https://github.com/magento/magento2/pull/27026)_. [GitHub-27009](https://github.com/magento/magento2/issues/27009)

### 翻訳とロケール

<!-- MC-24186-->

* 次の場合、ストアフロントでインライン翻訳が期待どおりに機能するようになりました **Admin** > **ストア** > **設定** > **詳細** > **開発者** > **インライン翻訳** > **ストアフロントに対して有効** が設定されています。

<!-- MC-31663-->

* ストアフロントに対して有効にした場合、インライン翻訳が期待どおりに機能するようになりました。

<!-- ENGCOM-7064-->

* 製品 URL キーが期待どおりに表記変換されるようになりました。 _プルリクエストで DanieliMi によって送信された修正 [26506](https://github.com/magento/magento2/pull/26506)_. [GitHub-26499](https://github.com/magento/magento2/issues/26499)

<!-- ENGCOM-6899-->

* この `es_US Spanish (United States)` ロケールがサポートされるようになりました。 _Vinh Le によってプルリクエストで修正が送信されました [26857](https://github.com/magento/magento2/pull/26857)_. [GitHub-26843](https://github.com/magento/magento2/issues/26843)

<!-- ENGCOM-6996-->

* 数値プレースホルダーの数と JavaScript コードのプレースホルダーの数が同じになりました。 以前は、数値プレースホルダー数が %1 で始まる間、JavaScript コードは 0% と想定されていました。  _プルリクエストで korostii によって送信された修正 [25359](https://github.com/magento/magento2/pull/25359)_. [GitHub-25243](https://github.com/magento/magento2/issues/25243)

<!-- ENGCOM-6557-->

* 製品詳細ページ（`page.main.title`）。デフォルトで有効になっています。 _プルリクエストで Bartomiej Szubert が修正を送信しました [26269](https://github.com/magento/magento2/pull/26269)_. [GitHub-7065](https://github.com/magento/magento2/issues/7065)

<!-- ENGCOM-7465-->

* 請求書PDFでのアラビア語とヘブライ語のレンダリングに関する問題が解決されました。 _プルリクエストで Ihor Sviziev が修正を送信しました [27887](https://github.com/magento/magento2/pull/27887)_. [GitHub-25769](https://github.com/magento/magento2/issues/25769)

<!-- ENGCOM-6646-->

* 言語パックの継承順序が、ドキュメントの説明に従って、期待どおりに最初にリストされる最初に使用される順序で適用されるようになりました。  _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [26420](https://github.com/magento/magento2/pull/26420)_. [GitHub-8691](https://github.com/magento/magento2/issues/8691)

<!-- ENGCOM-6443-->

* ラテン文字のみがサポートされているロケールのフォルダー名にラテン文字以外の文字を入力すると、このエラーメッセージが表示されるようになりました。 `Please rename the folder using only Latin letters, numbers, underscores and dashes`. _プル要求で Eden Duong が修正を送信 [25904](https://github.com/magento/magento2/pull/25904). [GitHub-25896](https://github.com/magento/magento2/issues/25896)_

<!-- ENGCOM-6539-->

* の長さ `locale` 列： `directory_country_region_name` 次のようなロケールをサポートするために、8 から 16 に増えました  `zh_Hans_CN`. _プルリクエストで Bartomiej Szubert が修正を送信しました [26268](https://github.com/magento/magento2/pull/26268)_. [GitHub-14001](https://github.com/magento/magento2/issues/14001)

### UI

<!-- MC-32547-->

* ページビルダーを使用して、製品をボタンリンク（**コンテンツを編集** > **ボタンリンク**）に設定します。 以前は、製品を選択しようとすると、アプリケーションがこのエラーをスローしていました。 `Product with ID: XXXX doesn't exist`.

<!-- ENGCOM-7490-->

* 「戻る」ボタンが期待どおりに動作するようになりました。 **Admin** > **ストア** > **注文ステータス** > **注文ステータスを編集**. _プルリクエストで Vadim Malesh が修正を送信しました [27976](https://github.com/magento/magento2/pull/27976)_. [GitHub-1270](https://github.com/magento/magento2/issues/1270)

<!-- ENGCOM-6692-->

* で矢印キーを使用してカーソルを移動すると、プレビュー画像が予期せず変更されなくなりました **ファイル名** Adobe Stockリストの「」フィールド。 _プルリクエストで Adarsh Manickam によって修正が送信されました [25991](https://github.com/magento/magento2/pull/25991)_. [GitHub-847](https://github.com/magento/magento2/issues/847)

<!-- ENGCOM-6414-->

* この **パスワード**  の「現在のユーザー ID 検証」セクションのフィールド **Admin** > **システム** > **統合** ページは、期待どおりにスタイルを継承するようになりました。 _プルリクエストで Eduard Chitoraga が修正を送信 [25918](https://github.com/magento/magento2/pull/25918)_. [GitHub-25917](https://github.com/magento/magento2/issues/25917)

<!-- ENGCOM-6482-->

* ストアフロントの JavaScript バリデーターで検証された入力も、管理者の検証を渡します。 以前は、JavaScript バリデーターは、ストアフロントでは改行を 1 文字としてカウントしていましたが、サーバー側ではカウントされていました。 `\Magento\Catalog\Model\Product\Option\Type\maxCharacters` 改行は 2 文字としてカウントされます。 _プルリクエストで Grzegorz Bogusz が修正を送信しました [26033](https://github.com/magento/magento2/pull/26033)_. [GitHub-25974](https://github.com/magento/magento2/issues/25974)

<!-- ENGCOM-6517-->

* この `subTitle` を使用してモーダルタイトルを変更しても、タグが消去されなくなりました。 `setTitle()` を呼び出します。 以前は、タイトルとサブタイトルを持つポップアップまたはカスタムモーダルを作成しようとした場合、でタイトルを変更していました `setTitle()` メソッド、 `subTitle` 消去されました。 _プルリクエストで Andrea Parmeggiani が修正を送信しました [26142](https://github.com/magento/magento2/pull/26142)_. [GitHub-26141](https://github.com/magento/magento2/issues/26141)

<!-- ENGCOM-6464-->

* 「管理マーケティング」タブのサブメニューが、メニュー項目の長さを期待どおりに自動的に調整できるようになりました。  また、水平方向にスクロールできるようになりました。  _プルリクエストで Pawe ウ Tylek が修正を送信しました [26034](https://github.com/magento/magento2/pull/26034)_. [GitHub-18687](https://github.com/magento/magento2/issues/18687)

<!-- ENGCOM-6519-->

* テーブル `quote`  列 `customer_note` type を使用するようになりました `text` 期待どおりだ。 以前は、タイプを使用していました `varchar(255)`. _プルリクエストで Ravi Chandra によって送信された修正 [26160](https://github.com/magento/magento2/pull/26160)_. [GitHub-26155](https://github.com/magento/magento2/issues/26155)

<!-- ENGCOM-7153-->

* のテーブルヘッダーの表示の問題を修正しました **マイアカウント**  > **アドレス帳**  Address Entries テーブル。  _プル要求で Abrar Pathan によって送信された修正 [27336](https://github.com/magento/magento2/pull/27336)_. [GitHub-27335](https://github.com/magento/magento2/issues/27335)

<!-- ENGCOM-5986-->

* レイヤードナビゲーション価格ステップで使用される通貨記号が、期待どおりにデフォルト設定に基づくようになりました。  _プルリクエストで Bartomiej Szubert が修正を送信しました [24815](https://github.com/magento/magento2/pull/24815)_. [GitHub-21684](https://github.com/magento/magento2/issues/21684)

<!-- ENGCOM-6324-->

* ベラルーシ通貨（BYR）の記号が BYN に更新されました。 _プルリクエストで Bartomiej Szubert が修正を送信しました [25723](https://github.com/magento/magento2/pull/25723)_. [GitHub-24713](https://github.com/magento/magento2/issues/24713)

<!-- ENGCOM-6622-->

* カタログページの「製品を比較」セクションが、解像度が 767 px 未満のディスプレイでモバイルビューに期待どおりに表示されるようになりました。 _Hitesh によってプルリクエストで修正が送信されました [26418](https://github.com/magento/magento2/pull/26418)_. [GitHub-26416](https://github.com/magento/magento2/issues/26416)

<!-- ENGCOM-6376-->

* 製品ページのスクロールが、モバイル表示で期待どおりに機能するようになりました。  _プルリクエストで Mateusz Krzeszowiak が修正を送信しました [25385](https://github.com/magento/magento2/pull/25385)_. [GitHub-10518](https://github.com/magento/magento2/issues/10518), [GitHub-21717](https://github.com/magento/magento2/issues/21717)

<!-- ENGCOM-6368-->

* モバイル表示で、製品ページのギャラリーサムネール画像を期待どおりにスクロールできるようになりました。 _プルリクエストで iGerchak によって送信された修正 [25839](https://github.com/magento/magento2/pull/25839)_. [GitHub-21014](https://github.com/magento/magento2/issues/21014)

<!-- ENGCOM-6425-->

* 上のテーマタイトルのクリック **Admin**  > **コンテンツ** > **テーマ** レコードの重複が発生しなくなりました。 _プル要求で Eden Duong が修正を送信 [25926](https://github.com/magento/magento2/pull/25926)_. [GitHub-25925](https://github.com/magento/magento2/issues/25925)

<!-- ENGCOM-6328-->

* 管理者の請求先住所/配送先住所ページのレイアウトは、管理者フォームの表示規則に合わせてリファクタリングされました。 _プルリクエストで Alexey Rakitin が修正を送信しました [25699](https://github.com/magento/magento2/pull/25699)_. [GitHub-23481](https://github.com/magento/magento2/issues/23481), [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6628 6593-->

* 製品の詳細ページの「比較に追加」リンクが、解像度が 640 px 未満のディスプレイのモバイルビューで正しくレンダリングされるようになりました。 _プルリクエストで Pawe Tylek によって修正が送信されました [26424](https://github.com/magento/magento2/pull/26424) と Tejash Kumbhare がプルリクエストで応答しました [26365](https://github.com/magento/magento2/pull/26365)_. [GitHub-26364](https://github.com/magento/magento2/issues/26364)

<!-- ENGCOM-6607-->

* この **並べ替え** ラベルがと重ならなくなりました **並べ替え** モバイル表示のカテゴリページのボタン _プルリクエストで Andrii Kartavtsev が修正を送信しました [26381](https://github.com/magento/magento2/pull/26381)_. [GitHub-25300](https://github.com/magento/magento2/issues/25300)

<!-- ENGCOM-7137-->

* を有効にして、ダウンロード可能な製品のサンプルタイトルおよびリンクタイトルの値を更新できるようになりました  **デフォルトを使用** チェックボックス。 _プル要求で Abel Truong によって修正が送信されました [27295](https://github.com/magento/magento2/pull/27295)_. [GitHub-27169](https://github.com/magento/magento2/issues/27169)

<!-- ENGCOM-6532-->

* 間の間隔を修正しました。 **更新** ボタンと **数量** ミニ買い物かごのフィールド。  _Hitesh によってプルリクエストで修正が送信されました [26234](https://github.com/magento/magento2/pull/26234)_. [GitHub-26227](https://github.com/magento/magento2/issues/26227)

<!-- ENGCOM-7032-->

* [ アドレス帳 ] ページの [ 追加のアドレス エントリ ] テーブルの下のボーダーの色が一致するようになりました `thead` および `tbody` 境界線のカラー。 _Tejash Kumbhare によってプルリクエストで送信された修正 [26649](https://github.com/magento/magento2/pull/26649)_. [GitHub-26648](https://github.com/magento/magento2/issues/26648)

<!-- ENGCOM-7195-->

* ユーザーがモーダルオーバーレイをクリックしても、プロンプトモーダルで確認アクションが実行されなくなりました。 _プルリクエストで Serhiy Zhovnir が修正を送信しました [27399](https://github.com/magento/magento2/pull/27399)_.

### URL

<!-- ENGCOM-7112-->

* カテゴリリポジトリー（save メソッド）のリファクタリングが完了しました。これにより、以前は、カテゴリ URL キーを変更する際に一意のパスを作成することができませんでした。 _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [27304](https://github.com/magento/magento2/pull/27304)_. [GitHub-14080](https://github.com/magento/magento2/issues/14080)

<!-- ENGCOM-7208-->

* カテゴリ URL キーロジックの検証が改善されました。 _プルリクエストで Sergiy Vasiutynskyi によって修正が送信されました [27412](https://github.com/magento/magento2/pull/27412)_. [GitHub-13689](https://github.com/magento/magento2/issues/13689)

### URL の書き換え

<!-- MC-31147-->

* CMS ページの言語を変更する顧客は、選択したストア表示に正常に移動できるようになりました。 以前は、アプリケーションで 404 エラーが表示されていました。

<!-- ENGCOM-6997-->

* カテゴリパスの組み込みを有効にした製品 URL の URL 書き換え生成が、期待どおりに動作するようになりました。 以前は、複数のストアビューを使用するデプロイメントで、アプリケーションが、レビュー固有の URL パスではなくカテゴリ URL パスのデフォルト値を使用して、誤った URL 書き換えを生成することがありました。 _プルリクエストで Pieter Hoste によって修正が送信されました [26784](https://github.com/magento/magento2/pull/26784)_. [GitHub-25124](https://github.com/magento/magento2/issues/25124), [GitHub-11616](https://github.com/magento/magento2/issues/11616)

<!-- ENGCOM-6995-->

* リクエストパスがターゲットパスと同じ場合に、URL リダイレクトを防ぐためのチェックを追加しました。 _プルリクエストで Bartomiej Szubert が修正を送信しました [26902](https://github.com/magento/magento2/pull/26902)_. [GitHub-20309](https://github.com/magento/magento2/issues/20309)

<!-- ENGCOM-6303-->

* URL の書き換え操作で、URL の末尾にスラッシュが含まれている場合に、URL からクエリ文字列が削除されなくなりました。  _プルリクエストで Alexey Arendarenko が修正を送信しました [25603](https://github.com/magento/magento2/pull/25603)_. [GitHub-18717](https://github.com/magento/magento2/issues/18717)

### VAT

<!-- ENGCOM-7458-->

* の VAT 検証 URL を修正しました [EU Vat 番号](https://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl).  _修正は Shikha Mishra によりプルリクエストで送信されました [27886](https://github.com/magento/magento2/pull/27886)_. [GitHub-27874](https://github.com/magento/magento2/issues/27874)

### ビジュアルマーチャンダイザー

<!-- MC-31136-->

* 商品を新しい位置にドラッグ&amp;ドロップした場合、カテゴリを編集ページが期待どおりに動作するようになりました。 以前は、任意のカテゴリページに製品をドラッグ&amp;ドロップすると、表示ウィンドウがページの上部に再配置されていました。

### Web API フレームワーク

<!-- MC-29891-->

* POSTの問題を修正しました `/rest/default/async/bulk/V1/orders` 通話。

<!-- MC-30675-->

* POSTの問題を修正しました `/rest/default/async/bulk/V1/products` 通話。

<!-- ENGCOM-6945-->

* この `getList` を取得するためにメソッドがリファクタリングされました `is_subscribed` 拡張属性。 以前は、API を使用して顧客エンティティを取得する際に、この属性を取得できませんでした。 _プルリクエストで enriquei4 によって送信された修正 [25311](https://github.com/magento/magento2/pull/25311)_. [GitHub-13252](https://github.com/magento/magento2/issues/13252)

<!-- ENGCOM-6500-->

* を使用した顧客情報の更新 `/V1/customers/:id` は、 `group_id` 不必要に。 以前は、REST を使用して顧客を更新した場合、本文に顧客グループが含まれていなければ、顧客グループは 1 に変更されていました。 _MaxRomanov4669 がプルリクエストで送信した修正 [25958](https://github.com/magento/magento2/pull/25958)_. [GitHub-14663](https://github.com/magento/magento2/issues/14663)

<!-- ENGCOM-6920-->

* サービス契約の Nullable ゲッターが、web API で使用される際にリフレクションエラーをスローしなくなりました。 null を返すメソッドと有効な型が、順序に関係なく正しく動作するようになりました。  _プルリクエストで Marco k̦Pcke によって送信された修正 [25806](https://github.com/magento/magento2/pull/25806)_. [GitHub-25656](https://github.com/magento/magento2/issues/25656)

<!-- ENGCOM-7075-->

* POSTを使用できるようになりました `/V1/guest-carts/:cartId/items` 特定の買い物かごに商品を追加する場合。 以前は、この呼び出しを使用すると、アプリケーションはの値を無視していました `cartId`. _プルリクエストで Vadim Malesh が修正を送信しました [27172](https://github.com/magento/magento2/pull/27172)_. [GitHub-14086](https://github.com/magento/magento2/issues/14086)

<!-- ENGCOM-7102-->

* これで、を使用できます `PUT /V1/cmsPage/:id` エンドポイントを使用して、他のフィールドの値を変更せずに CMS ページのタイトルを保存する。 _プルリクエストで Vadim Malesh が修正を送信しました [27237](https://github.com/magento/magento2/pull/27237)_. [GitHub-24704](https://github.com/magento/magento2/issues/24704)

<!-- ENGCOM-7011-->

* REST リクエストの結果のページネーションが正確になりました。 以前は、特定のページから結果をリクエストした場合（例： `page_size` = 1 および `current_page` 範囲外の値）が返された場合、呼び出しは、情報メッセージではなく、結果の最後のページを繰り返しました。  _プルリクエストで Lukasz Bajsarowicz が修正を送信しました [26988](https://github.com/magento/magento2/pull/26988)_. [GitHub-26986](https://github.com/magento/magento2/issues/26986), [GitHub-8099](https://github.com/magento/magento2/issues/8099)

<!-- ENGCOM-6540-->

* GET結果 `/V1/orders/items/{id}` には、ギフトメッセージデータを含む拡張属性要素が含まれるようになりました。 _プル要求で Laura Folco によって送信された修正 [25946](https://github.com/magento/magento2/pull/25946)_. [GitHub-19093](https://github.com/magento/magento2/issues/19093)

### ウィッシュリスト

<!-- MC-29988-->

* ウィッシュリストは、ストア表示レベルで有効になっており、グローバルレベルで無効になっている場合、期待どおりに機能するようになりました。 以前は、これらの設定が行われている場合、ウィッシュリストに製品を追加すると 404 エラーが発生していました。

<!-- MC-30196-->

* 複数のウィッシュリストを含むデプロイメントでウィッシュリストの名前を変更する際、アプリケーションでウィッシュリストの新しい名前が正しく保存され、表示されるようになりました。 以前は、アプリケーションには以前のウィッシュリスト名が引き続き表示されていました。

<!-- MC-31948-->

* Internet Explorer 11.x を実行するデプロイメントで、買い物かごからウィッシュリストに移動して変更できるようになりました。以前は、この環境でウィッシュリストを作成、編集、移動することができませんでした。

<!-- ENGCOM-6518-->

* 許可されている数を超えるメールアドレスでウィッシュリストを共有しようとした場合に表示されるエラーメッセージを改善しました。  _プル要求で divyajyothi5321 によって送信された修正 [26066](https://github.com/magento/magento2/pull/26066)_. [GitHub-26064](https://github.com/magento/magento2/issues/26064)

<!-- ENGCOM-6723-->

* 解像度が 768 ピクセルより大きく 1023 ピクセル未満のディスプレイに、アプリケーションのウィッシュリストページが期待どおりに表示されるようになりました。 _Hitesh によってプルリクエストで修正が送信されました [26546](https://github.com/magento/magento2/pull/26546)_. [GitHub-26543](https://github.com/magento/magento2/issues/26543)

<!-- ENGCOM-7062-->

* クリック時に生成されるメール **ウィッシュリストを共有** では、ウィッシュリストページと同じ製品画像が表示されるようになりました。 _プル要求で Michael Bottens によって送信された修正 [27125](https://github.com/magento/magento2/pull/27125). [GitHub-27124](https://github.com/magento/magento2/issues/27124)_

<!-- ENGCOM-6602-->

* お客様は、グループ化された製品の一部であるシンプルな製品と、数量が異なる同じシンプルな製品の両方をウィッシュリストに追加できるようになりました。  _MaxRomanov4669 がプルリクエストで送信した修正 [26258](https://github.com/magento/magento2/pull/26258)_. [GitHub-11209](https://github.com/magento/magento2/issues/11209)

### WYSIWYG

<!-- ENGCOM-6275-->

* WYSIWYG 画像アップローダでを使用するようになりました。 `pub/media/wysiwyg` ストレージルートとして。 以前は、は、アップロードされたを使用していました `pub/media` をストレージルートとして使用します。これにより、画像アップローダーコードに対する最近の変更後、アップロードされた画像にアクセスできなくなります。 _プルリクエストで Pieter Hoste によって修正が送信されました [24878](https://github.com/magento/magento2/pull/24878)_. [GitHub-22609](https://github.com/magento/magento2/issues/22609)

<!-- ENGCOM-7045-->

* Chrome ブラウザーの TinyMCE4 で、2 バイト文字が期待どおりに処理されるようになりました。 以前は、TinyMCE4 は Chrome で 2 バイト文字（中国語で使用されるなど）を適切に処理できませんでした。 _プルリクエストで西弘和氏が修正を提出 [25454](https://github.com/magento/magento2/pull/25454)_. [GitHub-24637](https://github.com/magento/magento2/issues/24637)

## 既知の問題 – 一般

**問題**：ストアフロントのエラーメッセージの異常は、PHP 7.4.2 がインストールされている環境で発生します。 PHP 7.4.2 で 2.4.0 をデプロイする場合、ストアフロントのエラーメッセージ内のスペース記号はプラス（+）文字に置き換えられます。 このバグは PHP 7.4.2 にネイティブで、Adobe Commerceでは修正できません。 **回避策**：他のバージョンの PHP 7.4.x を使用することをお勧めします。参照： [ストアフロントでの生のメッセージデータ表示](https://support.magento.com/hc/en-us/articles/360045804332)  ナレッジベースの記事 <!-- MC-34170-->

**問題**：マーチャントは、管理の「パッケージを作成」ページから注文した製品をパッケージに追加してパッケージを保存することはできません。 参照： [出荷ラベルの作成](https://support.magento.com/hc/en-us/articles/360046750171) ナレッジベースの記事 この **MC-35514-2.4.0-CE-composer.patch** この問題のホットフィックスは、から入手できるようになりました。 [リリース](https://magento.com/tech-resources/download). <!-- MC-35514-->

**問題**：の API に依存しているサードパーティの拡張機能をインストールすると、アプリケーションによってエラーメッセージが表示されます `Store` cli コマンドのモジュール： `The default website isn't defined. Set the website and try again`. **回避策**:Composer からサードパーティの拡張機能への依存関係を削除し、Magentoをインストールしてから、サードパーティの拡張機能をインストールします。

**問題**：です **カートに選択項目を追加** 買い物かごの下部のボタンが機能しません。 **回避策**：を使用します **カートに選択項目を追加** ページ上部の「」ボタン。 参照： [「買い物かごに選択項目を追加」ボタンが機能しない](https://support.magento.com/hc/en-us/articles/360045838312) ナレッジベースの記事 <!-- MC-35313-->

**問題**：返品承認（RMA）用の出荷ラベルを作成した後に、マーチャントは返品ページのページ要素を操作できません。 参照： [出荷ラベルを作成すると編集ページが機能しなくなる状態を返します](https://support.magento.com/hc/en-us/articles/360046441312) ナレッジベースの記事 この **MC-35984-2.4.0-composer.patch** この問題のホットフィックスは、から入手できるようになりました。 [リリース](https://magento.com/tech-resources/download). <!-- MC-35984-->

**問題**：管理者が、設定可能な製品を SKU 別で見積もりに追加できない。 管理者がをクリックした場合 **見積もりに追加** ボタンをクリックすると、[Quote Edit] ページがロード中の状態のままになり、管理者は変更を保存できなかった。 **回避策**:B2B の見積もりを編集する回避策はありません。  ただし、SKU で追加する代わりに、製品リストから製品を選択して、製品を注文することもできます。 参照： [B2B 管理者が、設定可能な製品を見積もりに追加できない](https://support.magento.com/hc/en-us/articles/360046801971) ナレッジベースの記事 <!-- MC-35513-->

**問題**：以下の理由により、マーチャントは管理者から新しい注文を作成できません **SKU 別に製品を追加** および **製品を追加**  javascript のバンドルが有効な場合、注文作成ページにボタンが表示されない。  **回避策**：デプロイメントの JavaScript のバンドルを無効にします。 <!-- MC-36044-->

**問題**：アプリケーション a `404 not found` 複数のアドレスに配送されている注文をチェックアウトする際に、お客様が報酬ポイントを削除しようとするとエラーが発生します。 <!-- MC-35955-->

**問題**：顧客のウィッシュリストから設定可能な製品を編集すると、次の予期しない動作が発生します。予期しないフィールドが製品の設定ページに表示され、クリックした後に製品の設定ページが表示されません **OK**. アプリケーションには、次のメッセージも表示されます。 `Please load Wish List item`. **回避策**：製品の設定ページをリロードします。 <!-- MC-35617-->

**問題**：注文リストが複数のページにまたがる場合、顧客は 1 ページに表示される注文数を変更できません。 現在、注文の最後のページに移動して、ページごとに表示される注文数を変更しようとすると、アプリケーションはこのメッセージを表示します。 `You have placed no orders`. 参照： [注文表示エラー](https://support.magento.com/hc/en-us/articles/360046802271) ナレッジベースの記事  **回避策**：マイ注文ページを再度開くと、注文リストが表示されます。 <!-- MC-34153-->

**問題**：を直接クリック **輸出税率** 「新規税務処理基準の追加」ページ（ **ストア** > **税務処理基準**）に設定されているので、はダウンロードされません `tax_rates.csv` ファイルを正しく入力します。 **回避策**：の端をクリックします  **輸出税率** ボタン。  参照： [輸出税率が機能しない](https://support.magento.com/hc/en-us/articles/360045850032)  ナレッジベースの記事 <!-- MC-35345-->

**問題**：です **更新** 管理者の顧客アクティビティ ページの最後に注文された項目、比較リストの製品、最近比較した製品の各セクションのボタンが期待どおりに動作しません。 現在、アプリケーションは、を実行するたびにページをスクロールします。 **更新** ボタンをクリックしても製品名が表示されない。 参照： [顧客のアクティビティの更新が機能しない](https://magento.zendesk.com/hc/en-us/articles/360046091332) ナレッジベースの記事 <!-- MC-35296-->

### B2B

**問題**：発注書（PO）の承認前に割引コードの有効期限が切れた場合、PO には引き続き割引額が表示されますが、PO が承認されると、注文は割引前の合計に配置されます。 **回避策**：をインストールします **B2B-709 発注値引パッチ** この問題のホットフィックス。から利用できるようになりました。 **マイアカウント** > **Downloads** セクション `magento.com`.

**問題**：複数の web サイトのデプロイメントで、B2B 1.2.0 へのアップグレード中にアプリケーションで例外が発生しました。 条件 `setup:upgrade` を実行します。このエラーは `PurchaseOrder` モジュール： `Module Magento_PurchaseOrder: Unable to apply data patch Magento\PurchaseOrder\Setup\Patch\Data\InitPurchaseOrderSalesSequence for moduleMagento_PurchaseOrder`. **回避策**：をインストールします **B2B-716 InitPurchaseOrderSalesSequence データパッチへの NonTransactionableInterface インターフェイスの追加** ホットフィックス。から使用できるようになりました。 **マイアカウント** > **Downloads** セクション `magento.com`.

## 既知の問題 – VBE

### Amazon ペイ

* **問題**：顧客がクリックすると、チェックアウトワークフローに支払い方法が表示されない **標準チェックアウトに戻る** Amazon Pay でのチェックアウト中。  **回避策**：チェックアウトページを更新して、見つからないメソッドを表示します。  <!-- BUNDLE-2661-->

* **問題**：新しい買い物かご価格ルールを作成する際に使用できる「支払方法」ドロップダウンリストに、2 つの同一のAmazon Pay 方法が表示されます。  <!-- BUNDLE-2685-->

### Braintree

* **問題**：管理者が「Braintree精算レポート」ページ（**Admin** > **報告書** ）に設定します。 現在、アプリケーションには次のメッセージが表示されます。 `An error has happened during application run. See exception log for details`. 参照： [Braintree精算レポートの読み込みに失敗する](https://support.magento.com/hc/en-us/articles/360046798251) ナレッジベースの記事 この **BUNDLE-2683_SettlementReport.patch** この問題のホットフィックスは、から入手できるようになりました。 [リリース](https://magento.com/tech-resources/download). <!-- BUNDLE-2683-->

* **問題**：マーチャントは、Venmo が有効で、 **カード支払に対する Vault の有効化** 設定は無効です。 現在、アプリケーションには次のエラーが表示されます。 `The "vault_capture" command doesn't exist. Verify the command and try again`.  <!-- BUNDLE-2647-->

* **問題**：新しい買い物かご価格ルールを作成する際に使用できる「支払い方法」ドロップダウンリストに、同じ PayPal メソッドが 2 つ表示されます。   <!-- BUNDLE-2686-->

* **問題**：を開く際にアプリケーションでエラーが発生する **売上** > **Braintreeバーチャル端末**. フォームに破損した UI 要素が含まれていても、支払いを受け入れます。 **回避策**：正しいBraintree資格情報を保存します。これにより、折りたたまれている入力フィールドが修正されます。 参照： [Braintree バーチャル ターミナル ページが破損しています](https://support.magento.com/hc/en-us/articles/360046800071)  ナレッジベースの記事 この **BUNDLE-2670_VirtualTerminal.patch** この問題のホットフィックスは、から入手できるようになりました。 [リリース](https://magento.com/tech-resources/download). <!-- BUNDLE-2670-->

* **問題**：顧客がチェックアウト中にローカルの支払い方法を選択すると、エラーメッセージが表示される国はベルギー、オランダ、イタリア、スペイン、ポーランドです。  **回避策**：エラーメッセージを無視して、支払いを続行します。

### dotdigital

* **問題**：統合テストが失敗し、次のエラーが表示されます。 `PHP Fatal error: Declaration of Dotdigitalgroup\Email\Test\Integration\Model\Sync\Importer\ImporterFailedTest::setUp() must be compatible with PHPUnit\Framework\TestCase::setUp(): void in /var/www/vendor/dotmailer/dotmailer-magento2-extension/Test/Integration/Model/Sync/Importer/ImporterFailedTest.php on line 36`. **回避策**：です **BUNDLE-2684 Dotdigital 統合テストパッチ** この問題のホットフィックスは、から入手できるようになりました。 [リリース](https://magento.com/tech-resources/download). <!-- BUNDLE-2684-->

### クラルナ

* **問題**：を残します **デザインテーマ** klarna オンサイトメッセージのフィールドが空白です（**Admin**  >  **ストア**  >  **設定**  > **Klarna 設定**）に設定すると、空白のページが表示されます。  **回避策**：デザインテーマを選択して保存します。  <!-- BUNDLE-2623-->

### 頂点

* **問題**：アプリケーションにより次が表示されます  **アドレスの検証** 住所の検証が無効になっている場合でも、チェックアウトワークフローの「出荷」セクションのボタン。 アドレスバリデーターは、更新されたアドレスを再確認せず、アドレス検証が有効な場合でも、誤ったアドレスを最初に入力した後に顧客が正しいアドレスを入力すると、アドレスが無効であることを示すメッセージを引き続き表示します。 **回避策**：頂点アドレスの検証を無効にします。 <!-- BUNDLE-2604-->

## コミュニティの投稿

より広いMagento Open Sourceコミュニティに感謝し、今回のリリースへの貢献を認めたいと思います。 現在のリリースに対するコミュニティの投稿について学べる、次の方法を確認してください。

* コミュニティメンバーがこのリリースの修正を提供している場合は、これらのメモの修正済みの問題の節の修正を、「」というフレーズで識別します&#x200B;*コミュニティメンバーによって提供された修正*」と入力します。

* コミュニティ エンジニアリング チーム [Magento投稿者](https://magento.biterg.io/app/kibana) は、貢献した上位の個人とパートナーのリストを月別、四半期別、年別に保持します。 その投稿者ページから、GitHub の結合された PR へのリンクをフォローできます。

### パートナーの投稿

次の表に、パートナー様のコントリビューションを示します。 この表は、プルリクエストを行ったパートナー、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）の一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-0-partner.md}}

### 個々のコントリビューターの投稿

次の表に、コミュニティメンバーからの投稿を示します。 この表は、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）、プルリクエストを行ったコミュニティメンバーの一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-0-issues.md}}

### 必要システム構成

当社の技術スタックは、PHP と MySQL をベースに構築されています。 詳しくは、を参照してください [必要システム構成](../../../installation/system-requirements.md).

### インストールとアップグレードの手順

Composer を使用してAdobe Commerce 2.4.0 をインストールできます。

## 移行ツールキット

データ移行ツールは、既存のMagento 1.x ストアデータをMagento 2.x に転送するのに役立ちます。このコマンドラインインターフェイスには、検証、進行状況のトラッキング、ログ記録、テストなどの機能が含まれています。 インストール手順については、を参照してください [データ移行ツールのインストール](https://experienceleague.adobe.com/docs/commerce-operations/tools/data-migration/basics/install.html). を探索するか、に貢献することを検討します [データ移行リポジトリ](https://github.com/magento/data-migration-tool).

この [コード移行ツールキット](https://github.com/magento/code-migration) は、既存のMagento 1.x ストアの拡張機能とカスタマイズのMagento 2.x への転送に役立ちます。コマンドラインインターフェイスには、Magento 1.x のモジュールとレイアウトを変換するためのスクリプトが含まれています。
