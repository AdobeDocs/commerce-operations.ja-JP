---
title: Adobe Commerce 2.4.4 リリースノート
description: 2.4.4 Adobe Commerceリリースの新機能、機能強化、バグ修正および既知の問題について説明します。
source-git-commit: 065c56f20ba5b1eef8c331c5c2f5649902f1442b
workflow-type: tm+mt
source-wordcount: '12453'
ht-degree: 0%

---


# Adobe Commerce 2.4.4 リリースノート

Adobe Commerce 2.4.4 では、PHP 8.1 のサポートが導入されています。すべてのプロジェクトライブラリと依存関係は、PHP 8.1 との互換性を持つように更新されています。Core Composer の依存関係とサードパーティライブラリも、PHP 8.1 と互換性のある最新バージョンにアップグレードされました。

このリリースには、約 250 件の品質の修正および機能強化が含まれています。

>[!NOTE]
>
>私たちのパートナーのおかげです [Atwix](https://www.atwix.com/) 2.4.4 のフレームワークを PHP 8.1 と互換性を持たせるための大幅な貢献について。

{{bics}}

## 適用 `AC-3022.patch` DHL を輸送船に供給し続ける

DHL はスキーマバージョン 6.2 を導入し、近い将来にスキーマバージョン 6.0 を廃止します。 DHL 統合をサポートするAdobe Commerce 2.4.4 以前のバージョンでは、バージョン 6.0 のみがサポートされています。これらのリリースをデプロイするマーチャントは、次のリリースを適用する必要があります。 `AC-3022.patch` 最も早い便宜で、DHL を輸送船として提供し続ける。 詳しくは、 [パッチを適用して、DHL を配送先として提供し続けます](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) パッチのダウンロードとインストールに関する情報については、ナレッジベースの記事を参照してください。

## その他のリリース情報

これらの機能のコードはAdobe Commerceコアコードの四半期別リリースにバンドルされていますが、これらのプロジェクト (B2B、Page Builder、Progressive Web Application(PWA)Studio など ) のいくつかも個別にリリースされています。 これらのプロジェクトのバグ修正は、個別のプロジェクト固有のリリース情報に記載されています。この情報は、各プロジェクトのドキュメントに記載されています。

>[!NOTE]
>
>Adobe Commerce 2.4.4 からは、Braintreeを除く、ベンダーにバンドルされたすべての拡張機能が削除されました。

>[!NOTE]
>
>Composer 2.2 では、マーチャントが信頼できるプラグインを自社の `composer.json` ファイルの内容を確認してください。 現在、 `composer.json` ファイルは自動的にインストールされますが、信頼済みとマークされていません。 ただし、2022 年 7 月以降、Composer はプラグインを読み込みません（明示的に許可されていない場合）。 詳しくは、 [Adobe Commerce 2.4.4 へのアップグレード時の Composer プラグインの問題](https://support.magento.com/hc/en-us/articles/6215997614093-Composer-plugins-issues-when-upgrading-to-Adobe-Commerce-2-4-4) ナレッジベースの記事を参照し、 `composer.json` ファイルを使用して、プラグインの読み込みを明示的に許可する。

### このリリースに含まれるホットフィックス

Adobe Commerce 2.4.4 には、Adobe CommerceおよびMagento Open Source2.4.3、2.4.3-p1 および 2.3.7-p2 向けに提供された、次のホットフィックスで解決されたすべての問題の解決が含まれています。

* 対応する脆弱性 `MDVA-43395_EE_2.4.3-p1_COMPOSER_v1.patch` および `MDVA-43443_EE_2.4.3-p1_COMPOSER_v1.patch` は、このリリースで解決されました。

* `AC-384_Fix_Incompatible_PHP_Method__2.4.3_ce.patch`. このパッチは、アップグレード中に発生した致命的な PHP エラーを修正します。 詳しくは、 [Adobe Commerceアップグレード 2.4.3、2.3.7-p1 PHP 致命的なエラー修正プログラム](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) ナレッジベース記事。

### 2.4.4 のインストール後にこのホットフィックスを適用

Adobe Commerce 2.4.4 のインストール後に、次のパッチを適用することをお勧めします。

* `braintree-disabled-partial-capture-for-applepay-googlepay.patch`.  商人は、Braintreeを通じてApple Pay で支払われた注文に対して、一部払い戻しを送信できません。 商人が注文請求書から一部払い戻しのクレジット・メモを作成しようとすると、 **払い戻す数量** フィールドは編集できません。 このホットフィックスは、この問題を修正します。 詳しくは、 [Adobe Commerce 2.4.4:部分的な請求書を作成できません](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) ナレッジベース記事。  <!-- BUNDLE-3088-->

## Adobe Commerce 2.4.4 のハイライト

このリリースでは、次の点に注意してください。

### セキュリティの強化

このリリースには、セキュリティ修正とプラットフォームのセキュリティ強化の 1 つが含まれています。 このセキュリティ修正は、Adobe Commerce 2.4.3-p2 およびAdobe Commerce 2.3.7-p3 にバックポートされました。

これらの問題に関する確認済みの攻撃は、現在までには発生していません。 ただし、一部の脆弱性は、顧客情報にアクセスするために悪用されたり、管理者セッションを引き継ぐ可能性があります。 これらの問題のほとんどは、攻撃者が最初に管理者へのアクセス権を取得する必要があります。 その結果、以下の取り組みに限定されない限り、管理者を保護するために必要なすべての手順を実行するように促されます。

* IP許可リストに加える
* [二段階認証](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* VPN の使用
* ではなく一意の場所の使用 `/admin`
* パスワードの衛生状態

詳しくは、 [Adobeセキュリティ情報](https://helpx.adobe.com/security/products/magento/apsb22-13.html) を参照してください。

#### その他のセキュリティ強化

このリリースのセキュリティ強化により、次のような最新のセキュリティのベストプラクティスへの準拠が改善されました。

* 電子メール変数の使用は、より厳密な変数構文を優先してセキュリティリスクを軽減する一環として、 2.3.4 で非推奨（廃止予定）となりました。 この従来の動作は、セキュリティリスクの軽減の継続として、このリリースで完全に削除されました。

   その結果、Adobe Commerce 2.4.4 またはMagento Open Source2.4.4 にアップグレードした後、Adobe Commerceの以前のバージョンで動作した電子メールまたはニュースレターテンプレートが正しく動作しない可能性があります。影響を受けるテンプレートには、管理者の上書き、テーマ、子テーマ、テンプレートが含まれます。 を使用した後でも、デプロイメントに影響が及ぶ可能性があります [互換性ツールのアップグレード](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html?lang=en) 非推奨の使用を修正するには： 詳しくは、 [カスタム電子メールテンプレートの移行](https://developer.adobe.com/commerce/frontend-core/guide/templates/email-migration/) を参照してください。

* 統合トークンは、API Bearer トークンの認証には使用できなくなりました。 以前は、統合トークンは、トークンベースの認証用のスタンドアロンキーとして使用できました。 ただし、この動作は、有効期限が切れないアクセストークンのセキュリティ上の影響により、デフォルトで無効になっています。 以前の動作は、コマンドラインまたは管理ツールを使用して有効にできます。 詳しくは、 [トークンベースの認証](https://developer.adobe.com/commerce/webapi/get-started/authentication/gs-authentication-token/). <!-- AC-1619 -->

* セッション ID は、データベースに格納されなくなりました。 <!-- AC-522-->

* OAuth アクセストークンとパスワードリセットトークンが、データベースに保存される際に暗号化されるようになりました。 <!-- AC-520 1323-->

* 英数字以外のファイル拡張子のアップロードを防ぐため、検証が強化されました。 <!-- AC-479-->

* クーポンコードに reCAPTCHA のサポートを追加しました。 <!-- AC-461-->

* Adobe Commerceが実稼働モードの場合、Swagger がデフォルトで無効になりました。 <!-- AC-1450-->

* Adobe Commerceストアフロントの HTTPS がデフォルトで有効になりました。 この **Storefront でのセキュア URL の使用** および **管理でのセキュア URL の使用** の設定がデフォルトで有効になっており、すべての組み込み cookie がセキュリティで保護されている設定になっています。  <!-- AC-1173-->

* すべてのAdobe Commerceインストールで、依存関係の混乱プラグインが必要になりました。 以前は、このプラグインはコンポーザーベースのインストールでのみ必要でした。 信頼できるバージョンを許可するようになりました。 マーチャントは、このプラグインで設定された制約を回避し、Composer のインストールの特定の組み合わせを禁止できます。 信頼できるバージョンでは、制約を回避できます。インストールを続行する前に、Adobe Commerceに警告が表示されるようになりました。  <!-- AC-501 970-->

* 開発者は、Adobe Commerce RESTful エンドポイントで受け入れられる配列のサイズ制限をエンドポイント単位で設定できるようになりました。 詳しくは、 [API セキュリティ](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-465-->

* ユーザーが Web API を介して要求できるリソースのサイズと数をシステム全体で制限し、個々のモジュールのデフォルトを上書きするメカニズムを追加しました。 これにより、次の問題が解決されます。 `MC-43048__set_rate_limits__2.4.3.patch`. 詳しくは、 [API セキュリティ](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-1120-->

### Platform の機能強化

Adobe Commerce 2.4.4 では、PHP 8.1 がサポートされました。すべてのプロジェクトライブラリと依存関係は、PHP 8.1 との互換性を考慮して更新されました。次のプラットフォームの追加機能が追加されました。

* Adobe Commerce 2.4.4 では、Elasticsearch7.16 と OpenSearch 1.2 がサポートされています。オンプレミスでホストされたデプロイメントを使用するAdobe Commerceマーチャントは、どちらのソリューションも使用できます。 ただし、OpenSearch が、クラウドでホストされるAdobe Commerce 2.4.4 デプロイメントのデフォルトの検索エンジンになりました。 クラウドデプロイメントでバージョン 2.4.4 にアップグレードする場合は、すべて OpenSearch を使用する必要があります。 詳しくは、 [Cloud 2.4.4 でのAdobe Commerceの OpenSearch への切り替え](https://support.magento.com/hc/en-us/articles/4419942355725-Switching-to-OpenSearch-for-Adobe-Commerce-on-Cloud-2-4-4)

* この `JQuery` ライブラリがバージョン 3.6 にアップグレードされました。 `jquery-ui` ライブラリがバージョン1.13.0にアップグレードされました。その他のいくつかの JavaScript ライブラリが最新バージョンに更新されました。

* TinyMCE 5.8.1 がサポートされました。 TinyMCE 4 がコードベースから削除されました。 <!-- AC-41-->

* この `RequireJS` ライブラリが最新バージョン (v2.3.6) にアップグレードされました。 [GitHub-33672](https://github.com/magento/magento2/issues/33672) <!-- AC-40 422-->

* PHPUnit は最新バージョン (9.5.x) にアップグレードされました。 新しいバージョンとの互換性を持つように、テストおよびテストフレームワークが更新されました。 <!-- AC-404-->

* ほとんどの Laminas の依存関係は、PHP 8.1 と互換性のある最新バージョンにアップグレードされました。依存関係の数を減らすために、3 つの Laminas の依存関係がコードベースから削除されました。

#### jQuery UI のアップグレード

jQuery UI が最新バージョンにアップグレードされました (v1.13.0)。 次の v1.10.0 jQuery コンポーネントが削除されました。

* `ajaxOptions` および `cache` タブのオプション。 詳しくは、 [タブ](https://jqueryui.com/changelog/1.10.0/#tabs).

* `.zIndex()`. jQuery UI v1.12.1にはが含まれています `jquery/z-index.js`: `.zIndex()`. 詳しくは、 [UI コア](https://jqueryui.com/changelog/1.12.0/#ui-core).

* ウィジェット名のデータフォールバック。 のフルネームを使用する必要があります `.data()` キー。

* クラスのハードコーディング ( `ui-corner-all` ウィジェット内。

### パフォーマンスと拡張性の強化

Adobe Commerceのパフォーマンスが強化され、高スループットの順序処理とメッセージキューの最適化が向上しました。 このリリースで導入された非同期注文機能では、1 時間あたり約 60,000 件の注文を作成できます。 以前のバージョンのAdobe Commerceでは、1 時間あたり約 10,000 件の注文の処理をサポートしていました。これは、フラッシュ販売のボトルネックとなる可能性がありました。 新しい複数のコンシューマー機能では、単一のクラウドインスタンス上でのメッセージキューコンシューマーの数の拡大をサポートし、1 時間あたりに処理される注文数を増やします。

このリリースでのパフォーマンスの強化：

* AsyncOrder 機能は、同期実行よりも高速な順序配置をサポートします。 AsyncOrder が有効な場合、注文の配置はバックグラウンドで実行され、買い物客はストアフロントで他のタスクを完了します。

* 新しい **買い物かごへの読み込み時の在庫の確認を有効にする** 「 」設定オプションでは、買い物かごに製品を読み込む際に、切り替え可能な在庫チェックを使用できます。 これはデフォルトで有効になっています。 このオプションを無効にすると、Adobe Commerceは見積もり読み込み時に在庫チェックをスキップし、特に多くの品目を含む買い物かごのチェックアウトが高速化します。

* 新しい `multiple_processes` 設定オプションは、複数のプロセスでの並列コンシューマーの実行をサポートします。 以前は、 `cron` は、必要に応じて 1 人の消費者を実行しました。 複数のコンシューマーを起動してプロセスを並行して実行すると、タスクの実行速度が向上します。 この機能を有効にするには、 `multiple_processes` から `app/etc/env.php` ファイル。

* 構成可能な製品が 750 を超える買い物かごに対する買い物かごの操作は、 `max_input_vars` 内 `php.ini` 入力変数ボリュームをサポートするファイル。

* 合計計算を延期することで、チェックアウト時の販売ルール処理を最適化。 通常、販売ルールの処理は、買い物客が買い物かごに製品を追加したり、製品数を更新したり、  **発注** 」ボタンをクリックします。 マーチャントは、 `checkout/deferred_total_calculating` 変数の `env.php` ファイル。 または、 `bin/magento setup:config:set --deferred-total-calculating 1|0`.  <!-- MCP-573-->

* 非同期注文配置時に買い物かご価格ルールの影響を受ける注文の検証プロセスを改善しました。 <!-- MCP-304-->

詳しくは、 [高スループットの注文処理](../../../performance/high-throughput-order-processing.md).

### GraphQL

このリリースには、次のGraphQLの機能強化が含まれています。

* **交渉可能な見積もりのGraphQL補償範囲の完了**.  B2B 会社のユーザーは、GraphQLを使用して、交渉可能見積に関連するすべてのタスクを完了できるようになりました。 この API の以前のバージョンでは、ネゴシエーションフローはサポートされていましたが、チェックアウトはサポートされていませんでした。 <!-- PWA-2101-->

#### 新しい変異

* [`assignCustomerToGuestCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/assign-customer-to-guest-cart.html) 突然変異

* [`placeNegotiableQuoteOrder`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/place-negotiable-quote-order.html) 突然変異

* [`setNegotiableQuoteBillingAddress`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-billing-address.html) 突然変異

* [`setNegotiableQuotePaymentMethod`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-payment-method.html) 突然変異<!-- PWA-2114-->

* [`setNegotiableQuoteShippingMethods`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-methods.html) 突然変異

* [`setNegotiableQuoteShippingAddress`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-address.html) 突然変異

* **パフォーマンスの向上**:

   * GraphQL買い物かご操作のパフォーマンスが向上しました。 この `collectQuoteTotals()` メソッドは、GraphQLリクエスト中に 1 回だけ呼び出されるようになり、応答時間が短縮されました。 <!-- PWA-2110-->

   * GraphQL要求のキャッシュ方法が変更され、ストアフロントのパフォーマンスが向上しました。 Fastly と Vanish は、で送信されたGraphQL要求をキャッシュするようになりました。 `auth` トークン。 <!-- PWA-1817-->

* **ストアフロント関連の管理者設定が新しくなりました。**. この `storeConfig` クエリは、「ゼロ小計チェックアウト」および「小切手/送金注文」支払い方法の構成設定を返すようになりました。 <!-- PWA-1576-->

* **コアGraphQLライブラリを更新しました**. この `webonyx` コアGraphQLの機能を可能にするライブラリが、バージョン^14.9 にアップグレードされました。 <!-- PWA-2137 2184 -->

* **マルチサイトおよびマルチ言語ストアを使用したGraphQLでの翻訳の問題を修正しました。**. GraphQLリゾルバーは、期待どおりにストア範囲に基づいて翻訳された文字列を返すようになりました。 <!-- PWA-1946-->

* GraphQLは、New Relicに説明的なトランザクション名を提供するようになりました。これはデバッグに役立ちます。 [GitHub-30915](https://github.com/magento/magento2/issues/30915) <!-- PWA-1311-->

詳しくは、 [GraphQL Developer Guide](https://devdocs.magento.com/guides/v2.4/graphql/) を参照してください。

### B2B

このリリースには、複数のバグ修正が含まれています。 詳しくは、 [B2B リリースノート](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### ベンダーバンドルの拡張機能

を除き [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)の場合、すべてのベンダーバンドル拡張機能は、Adobe Commerce 2.4.4 コードベースから削除されました。 マーチャントは、 [Commerce Marketplace](https://marketplace.magento.com/extensions.html). <!-- AC-1165-->

[Amazon Pay](https://docs.magento.com/user-guide/payment/payments.html)

[dotdigital](https://docs.magento.com/user-guide/marketing/communications.html)

[クラルナ](https://docs.magento.com/user-guide/payment/payments.html)

[頂点](https://docs.magento.com/user-guide/tax/taxes.html)

[YotPo](https://docs.magento.com/user-guide/marketing/product-reviews.html)

### PWA Studio

PWA Studiov.12.3.0 は、Adobe Commerce 2.4.4 と互換性があります。reCaptcha、Page Builder コンテンツの最適化、パーソナライズされたコンテンツのサポートが含まれています。 機能強化とバグ修正について詳しくは、 [PWA Studioリリース](https://github.com/magento/pwa-studio/releases). 詳しくは、 [バージョンの互換性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) を参照してください。

### PayPal の支払いの強化

* Venmo 支払いオプションがサポートされるようになりました。  <!-- AC-1229-->

* 商人の場所ではなく、買い物客の場所に基づく買い物客向けのオプションとして、後で支払う機能が追加されました。

* 商人は、選択した国で買い物客のエクスペリエンスをテストする際に、買い物客の国を設定できるようになりました。 以前は、テストは商人がいる国に対してのみ行われていました。 この変更は、サンドボックスモードでのみ有効です。

* チェックアウトページのメッセージに、「後で支払う」を使用した場合に買い物客が支払う増分数と増分数に関する正確なメッセージが表示されるようになりました。

### ライブ検索

ライブ検索で PHP 8.1 がサポートされるようになりました。

新しい `Magento_ElasticsearchCatalogPermissionsGraphQl` モジュールは、ライブ検索の更新中に無効になっています [インストール](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/onboard/install.html). 既存のライブ検索インストールをライブ検索 2.0.0 にアップグレードして、これらの機能を活用する必要があります。 詳しくは、ライブ検索を参照してください。 [リリースノート](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/release-notes.html).

### アクセシビリティの更新

このリリースでは、標準のアクセシビリティガイドラインへの準拠が強化されました。 これらの機能強化により、視覚や言語、認知、学習の能力が限られているユーザーのエクスペリエンスが向上します。  画面Readerツールのパフォーマンスも向上しました。

アクセシビリティの強化には、次のものが含まれます。

* テキストと正確でタスクに焦点を当てた、入力用の表示可能なラベルを含むツールチップリンク
* 編集ボタンに固有のテキストが追加されました。
* 管理ボタンは、AA 標準に準拠するための独自の、アクセシブルで説明的な目的を持つようになりました
* 意味を表すアイコン画像に、代替テキストが提供されるようになりました。
* 管理ボタンとフォームフィールドのコントラストが、隣接する色とのコントラスト比が 3:1 以上に強化されました。

### Page Builder

* マーチャントが代替テキスト (`alt_text`) を画像（画像、バナー、スライド）に変換して、コンテンツのアクセシビリティを高めます。 [GitHub-746](https://github.com/magento/magento2-page-builder/issues/746) <!-- PB-1193-->

## 修正された問題

Adobe Commerce 2.4.4 のコアコードで発生していた数百の問題を修正しています。 これらの修正された問題の一部を以下に示します。

### インストール、アップグレード、導入

<!-- MC-42026-->

* Adobe Commerceで、静的コンテンツデプロイメントエラーがビルドログファイルに期待どおりに記録されるようになりました。

<!-- MC-43094-->

* データパッチでテーブルの一意の制約を無視し、MySQL データベーステーブルに重複した値を挿入できなくなりました。 以前は、パッチは重複した値を挿入し、データベースが破損していました。

<!-- AC-1480-->

* マーチャントは、Klarna を使用したAdobe Commerce 2.4.2 デプロイメントからAdobe Commerce 2.4.3 に正常にアップグレードできるようになりました。 [GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- ACP2E-77-->

* コマンドラインからサイトマップジェネレーターの設定を正常に変更できるようになりました。 以前は、Adobe Commerceで、管理者以外でサイトマップの設定を変更しようとすると、次のエラーが表示されていました。 `Import failed: Notice: Trying to access array offset on value of type null in app/code/Magento/Cron/Model/Config/Backend/Sitemap.php on line 78`.  [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-215-->

* この `bin/magento app:config:import` 更新時にコマンドがエラーなしで実行されるようになりました `time` の値 `config.php`. 以前は、（管理者を使用せずに）手動編集で製品アラート設定を変更すると、エラーが発生していました。

### アクセシビリティ

<!-- AC-1589-->

* 買い物かごとチェックアウトページでのナビゲーションに関するアクセシビリティエラーを解決しました。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* スクリーンリーダーは、製品ページ上のすべての関連フォーム要素を読み取れるようになりました。

<!-- AC-1277-->

* 画像の削除や移動のアイコンボタンのコントラストが改善され、ロービジョンのユーザーが読みやすくなりました。

<!-- AC-1272-->

* 製品インターフェイス全体で検索を実行するために使用される虫眼鏡アイコンに、アクセシブルな名前と代替テキストが割り当てられました。

<!-- AC-1275-->

* Tab キーを使用してリッチテキストエディターのツールバーにアクセスできるようになりました。

<!-- AC-1283-->

* この **この項目には重みがあります** 入力を **カタログ** > **製品** 詳細ページに、表示可能なラベルとアクセシブルな名前が追加されました。

<!-- AC-1284-->

* コントロールのアクセス可能な名前に、ページごとの項目数のドロップダウンに表示されるラベルのテキストが含まれるようになりました。

<!-- AC-1287-->

* テーブルは、 **カタログ** > **製品** 表を折りたたむと、詳細ページにラベルとアクセシブルな名前が表示されるようになりました。

<!-- AC-1288-->

* [ 製品 ] テーブルの編集リンクに、意味のある一意のリンクテキストが表示されるようになりました。

<!-- AC-1276-->

* ツールチップを展開するトリガーに、テキスト名が表示されるようになりました。

<!-- AC-1285-->

* ストアフロント全体のボタンに、一意の、わかりやすい名前が付けられるようになりました。 以前は、テキストボタンと隣接する下向き矢印アイコンボタンを持つ分割ボタンの名前が同じになっていました。

<!-- AC-1277-->

* 画像の削除や移動のアイコンボタンのコントラストが改善され、ロービジョンのユーザーが読みやすくなりました。

<!-- AC-1279-->

* 代替テキストは、「検索エンジンの最適化」アコーディオンの入力をマーチャントが編集する際に表示される鉛筆アイコンに追加されました。

<!-- AC-1272-->

* 製品インターフェイス全体で検索を実行するために使用される虫眼鏡アイコンに、アクセシブルな名前と代替テキストが割り当てられました。

<!-- AC-1286-->

* 製品ページ **新しいビュー** テキスト入力フィールドにアクセス可能な名前が付けられました。

<!-- AC-1283-->

* この **この項目には重みがあります** 入力を **カタログ** > **製品** 詳細ページに、表示可能なラベルとアクセシブルな名前が追加されました。

### AdminGWS

<!-- MC-42239-->

* 権限が制限された管理者が、期待どおりに返信を作成できるようになりました。

### バックエンド

<!-- MC-43161-->

* 管理者は、カスタム管理パスが設定され、秘密鍵が有効になっているデプロイメントで、管理者にログインできるようになりました。 以前は、Adobe Commerceに次のエラーが表示されていました。 `Invalid security or form key. Please refresh the page`.

<!-- MC-41949-->

* マルチストア階層が変更された場合、Adobe Commerceは全ストア表示の範囲にリダイレクトされなくなりました。 以前は、階層を保存した後、買い物客は間違ったストア URL にリダイレクトされ、マルチストアデプロイメントですべてのストア表示回数の範囲が選択されていました。

### 製品のバンドル

<!-- MC-42885-->

* 買い物客は、固定商品税と 2 つのオプションを含むバンドル製品を買い物かごに追加できるようになりました。 以前は、Adobe Commerceは製品を追加せず、次のエラーを表示していました。 `We can't add this item to your shopping cart right now`.

<!-- MC-42249-->

* フォームの検証を `data-validate` および `min` バンドル製品の負の値を防ぐために、属性が「買い物かごの数量」フィールドに追加されました。

<!-- MC-41794-->

* この `products` 子製品が store-view レベルで無効になっている場合、クエリは製品を正しくバンドルするようになりました。 以前は、クエリは、ストア表示レベルで無効になっている子製品を返していました。

<!-- MC-42811-->

* `cron` 次の間に、製品カテゴリのキャッシュが期待どおりにクリアされるようになりました `indexer_update_all_views` 実行。 以前は、Adobe Commerceで、カテゴリ内の多くの製品を一括更新すると、カテゴリページに誤った製品数が表示されていました。

<!-- MC-42811-->

* Adobe Commerceは、バンドル製品が在庫に再び表示されたときに、カテゴリの製品キャッシュを期待どおりに更新するようになりました。

<!-- MC-42811-->

* インデックス再作成中に実行されるキャッシュクリーニングアルゴリズムが最適化されました。 インデックスの再作成中にカテゴリがキャッシュされると、バンドル製品が期待どおりに表示されるようになりました。 以前は、インデックス再作成中に製品カテゴリがキャッシュされてから数時間は、バンドル製品が表示されませんでした。

<!-- AC-715-->

* 異なる通貨を使用するマルチストアデプロイメントでのバンドル製品の購入に関する電子メール確認で、通貨の変換が期待どおりにおこなわれるようになりました。 [GitHub-33426](https://github.com/magento/magento2/issues/33426)

<!-- ACP2E-64-->

* 製品グリッドに%プレフィックスが付いたバンドル製品に対して、高度な価格の特別価格割引が正しく表示されるようになりました。 以前は、製品グリッドに%ではなく$プレフィックスが割引の割合として誤って表示されていました。

<!-- ACP2E-262-->

* 管理でのバンドル製品のステータスは、関連製品のステータスが変更されたときに自動的に更新されるようになりました。

<!-- ACP2E-326-->

* バンドル製品のGraphQLリゾルバーは、子バンドル製品が無効になっているかどうかを確認するようになりました。 以前は、このチェックは実行されず、 `categoryList` 販売できない子製品が返されました。

<!-- MC-43223-->

* `cart` クエリ応答で、動的な価格の付いたバンドル製品に対して正確な割引が返されるようになりました。 以前は、クエリ応答には、各バンドル製品に個別に適用される割引が含まれていました。

### キャッシュ

<!-- AC-328-->

* 通常の使用では、ページキャッシュが急速に増加しなくなりました。 [GitHub-9458](https://github.com/magento/magento2/issues/9458)

<!-- magento/magento2/pull/33468-->

* 注文を配置しても、注文された製品に関連するすべてのキャッシュタグが Vanrish キャッシュから削除されなくなりました。 [GitHub-30128](https://github.com/magento/magento2/issues/30128)

<!-- AC-1478-->

* トップカテゴリから製品を更新したり、インデックスを実行して製品属性や在庫ステータスを更新したりする際に、フルサイトページのキャッシュが消去されなくなりました。 以前は、Vanrish キャッシュは、すべてのページキャッシュタグにトップメニューカテゴリ ID を追加していました。 [GitHub-33465](https://github.com/magento/magento2/issues/33465)

### 買い物かごとチェックアウト

<!-- MC-41494-->

* 広告される最低価格 **何だこれ？** これで、買い物かごページのリンクがクリック可能になり、情報ポップアップが期待どおりに開きます。 以前は、このリンクをクリックしても何も起こりませんでした。

<!-- MC-42639-->

* 買い物客は、永続的な買い物かごが有効なデプロイメントで、セッションタイムアウトの後にエラーなく注文をおこなうことができるようになりました。 以前は、Adobe Commerceでは、セッションのタイムアウト後に支払いエラーが表示されていました。

<!-- MC-42638-->

* 顧客アドレス属性に高い並べ替え順の値を割り当てても、チェックアウトページのパフォーマンスが低下しなくなりました。

<!-- MC-42813-->

* Adobe Commerceは、更新された数量が無効な場合、買い物かごの製品数量を以前の値に戻すようになりました。

<!-- MC-42347-->

* クリック **買い物かごに追加** 」ボタンをクリックすると、製品の詳細ページに期待どおりにリダイレクトされるようになりました。 以前は、買い物客は製品リストページにリダイレクトされていました。

<!-- MC-33705-->

* ゲスト買い物客は、複数のタイプのカスタム顧客アドレス属性を含む顧客アドレスを使用して、正常にチェックアウトできるようになりました。 以前は、カスタム属性の値がチェックアウト時に正しく形式設定されていませんでした。 [GitHub-30290](https://github.com/magento/magento2/issues/30290)

<!-- MC-24379-->

* Adobe Commerceは、表レートが有効な場合に、無料配送しきい値を注文に正しく適用するようになりました。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- AC-271-->

* これで、 `POST /V1/guest-carts/:cartId/items` をクリックして、異なるオプションを持つシンプルな製品を買い物かごに追加します。 以前は、この呼び出しによって、指定したオプションを持つ 2 つ目の単純製品を追加する代わりに、追加した最初の単純製品の数量が変更されていました。 [GitHub-32302](https://github.com/magento/magento2/issues/32302)

<!-- AC-1089-->

* デプロイメントが `Poland` 国と `PLN` 通貨。 以前は、買い物かごとチェックアウトページに金額が表示されていました **PLN 0**.

<!-- MC-32805-->

* Adobe Commerceで買い物客がクリックしてもエラーがスローされなくなりました。 **買い物かごを更新** ミニカート内の製品数量を変更した後。 以前は、Adobe Commerceに次のエラーが表示されていました。  `The quote item isn't found. Verify the item and try again`.

<!-- MC-43176-->

* GraphQL `products` 特定のストア内の設定可能な製品のクエリは、指定したストア上の製品の価格範囲のみを返すようになりました。 以前は、リクエストは、指定されていない店舗のシンプルな製品に対して価格範囲を返していました。

<!-- AC-691-->

* 買い物客が住所（番地フィールドがない）を追加した場合、Adobe Commerceはこのエラーをスローしなくなりました。 `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- AC-1625-->

* ミニカートが削除されたストアでのチェックアウト中に、Adobe Commerceがコンソールエラーをスローしなくなりました。 [GitHub-34513](https://github.com/magento/magento2/issues/34513)

<!-- AC-691-->

* 請求先住所に番地フィールドの値がない場合や、番地フィールドの値が配列でない場合、支払い段階でチェックアウトが失敗しなくなりました。 以前は、次のエラーでチェックアウトに失敗していました： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- ACP2E-22-->

* クーポンレポートグリッドで、売上高の合計が正しく計算されるようになりました。 以前は、合計販売額には送料が含まれていませんでした。

<!-- ACP2E-44-->

* 買い物客が発送方法を切り替えた場合に、買い物かご全体の割引が正しく計算されるようになりました。

<!-- ACP2E-159-->

* のドロップダウンリスト **都道府県** フィールドに、選択した国の事前定義済みの値が入力されるようになりました。 以前は、このフィールドはドロップダウンメニューではなく入力テキストフィールドでした。

<!-- ACP2E-172-->

* Adobe Commerceで `addConfigurableProductsToCart` ミューテーション：ストア表示を変更した後、設定可能な製品を買い物かごに直接追加します。

<!-- ACP2E-176-->

* Adobe Commerceで `addConfigurableProductsToCart` ミューテーション：設定可能な製品の無効な子を買い物かごに追加します。 以前は、Adobe Commerceが整合性制約違反エラーをスローしていました。

<!-- ACP2E-206-->

* クロス販売製品が、 **買い物かごにクロス販売品目を表示** 設定は無効です。

<!-- ACP2E-157-->

* クーポンの適用先の注文が失敗した場合、クーポン使用額は変更されなくなりました。  以前は、単一使用の自動生成クーポンは、買い物かごでクーポンが適用された後、無効とマークされていましたが、注文はおこなわれませんでした。

<!-- ACP2E-137-->

* 顧客の住所とデフォルト値を比較するための検証がチェックアウトワークフローに追加されました。 検証プロセスで変更が特定された場合、変更は設定されます `customer_address_id` から `null` を使用して、新しい顧客アドレスとして扱うことができます。 以前は、顧客がチェックアウト時に検証なしで住所を保存し、同じ顧客がチェックアウトフィールドに検証後に同じ住所を使用して注文しようとした場合、Adobe Commerceは編集済みの住所を承認せず、例外をスローしていました。

### 買い物かごの価格ルール

<!-- MC-42288-->

* クーポンの生成は、関連する買い物かごの価格ルールが `auto` オプションが有効です。 このルールを保存する際に、 `auto` オプションを選択すると、Adobe Commerceは次のメッセージを表示します。 `Rule is not saved with auto generate option enabled. Please save the rule and try again`.

<!-- MC-42743-->

* 買い物かごの価格ルールの割引の適切な適用を確認するテストを追加しました。

<!-- ACP2E-213-->

* SKU 条件と **買い物かご内の品目が「見つかりません」/「見つかりません」の場合（すべて/いずれかの条件が真）** 設定可能な製品で期待どおりに動作

<!-- ACP2E-225-->

* 買い物かごの価格ルールが固定価格のバンドル製品に正しく適用されるようになりました。 以前は、1 つ以上の子製品がルール条件で指定された属性が同じ場合、買い物かごの価格ルールはこれらの製品に適用されませんでした。

<!-- ACP2E-285-->

* Adobe Commerceが **買い物かご全体の固定金額の割引** 買い物かごの価格ルール 以前は、Adobe Commerceに次のエラーが表示されていました。 `report.ERROR: Warning: Division by zero in /home/mer33515/public_html/ee24develop/app/code/Magento/SalesRule/Helper/CartFixedDiscount.php on line 85`.

<!-- ACP2E-306-->

* が `cart` 固定金額の割引を含む買い物かごルールが有効化された場合、クエリは不正確な割引額を返しました。

### カタログ

<!-- MC-41796-->

* 製品に `datetime` 属性。

<!-- MC-42571-->

* GraphQLクエリで、子製品の表示フィルター設定に従って、設定可能な製品の子製品の結果が返されるようになりました。

<!-- MC-41853-->

* 設定可能な製品属性が変更された際、Adobe Commerceが関連製品価格を変更しなくなりました。 以前は、設定可能な製品の Minimum Advertised Price(MAP) は、ストアフロントで関連製品の価格を上書きしていました。

<!-- MC-42659-->

* 管理者は、カテゴリに残っている最後の製品を再割り当てして、空のカテゴリを保存できるようになりました。

<!-- MC-42132-->

* 管理製品グリッドおよびフィルターのドロップダウン/複数選択属性値が、管理者設定から期待どおりに導き出されるようになりました。 以前は、属性値はデフォルトのストア設定から取得されていました。

<!-- MC-43010-->

* GraphQLのカテゴリクエリは、期待どおりに、ステージ済みカテゴリの変更に関する情報を返します。

<!-- AC-711-->

* 製品リストは、親カテゴリとそのサブカテゴリの両方に製品が割り当てられ、各カテゴリ内の異なる位置に製品が割り当てられたデプロイメントで、管理者で正確にレンダリングされるようになりました。 以前は、次のエラーで製品リストのレンダリングが失敗していました： `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`. [GitHub-33145](https://github.com/magento/magento2/issues/33145)

<!-- AC-1148-->

* 多くのオプション（150 を超える）を持つ複数選択属性を新しい製品に割り当てることができるようになりました。 以前は、属性オプションは `catalog_product_entity_varchar` テーブルに含まれ、すべてのオプションが、管理で製品を再度開いた際に表示されるわけではありませんでした。 [GitHub-33486](https://github.com/magento/magento2/issues/33486)

<!-- AC-904-->

* ルーターが URL から収集したアクションクラスをインスタンス化できない場合の検証を追加しました。 Adobe Commerceに標準のエラーメッセージが表示されるようになりました。 以前は、Adobe Commerceに次のエラーが表示されていました。  `PHP Error: Cannot instantiate abstract class Magento\Catalog\Controller\Product\Compare`.

<!-- ACP2E-10-->

* Adobe Commerceでは、次の条件を満たす注文に 2 つの買い物かごルールが適用された場合に、割引が正しく計算されるようになりました。1 つの買い物かごルールがクーポンコードと **買い物かご全体の固定価格**  条件と 2 番目の買い物かごの価格ルールには、クーポンおよび **製品価格割引のパーセント** 条件。 以前は、以前の買い物かごルールで一部の製品に対して既に割引が適用されていた場合、関連するアルゴリズムは、買い物かご製品間で割り引きを均等に分割できませんでした。

<!-- ACP2E-115-->

* 多数の製品（約 10,000）をカテゴリに割り当てた場合、ブラウザーがクラッシュする原因とならなくなりました。

<!-- ACP2E-122-->

* 画像属性は、管理者からの保存とインポートのどちらでも、データベースに一貫して保存されるようになりました。 以前は、画像の ALT テキスト値の保存に矛盾がありました。 画像が存在し、ラベルが null に設定されている場合、ラベル値はデータベースでリセットされませんでした。

<!-- ACP2E-155-->

* カタログウィジェットの SQL クエリが最適化されました。 以前は、大きな MySQL クエリによってページ読み込みが遅くなり、MySQL の機能が停止していました。

<!-- ACP2E-165-->

* 在庫切れの設定可能な製品で、価格フィルターが正しく機能するようになりました。 以前は、在庫切れの設定可能な製品が正しい価格範囲で表示されていませんでした。

<!-- ACP2E-330-->

* 子製品を更新しても、部分インデックス作成プロセス中に親設定可能な製品から継承されたカタログルールの割引が削除されなくなりました。 以前は、設定可能な製品をカテゴリに割り当て、関連する単純な製品ではなく、そのカテゴリを使用してカタログルールを作成した場合、Adobe Commerceは部分インデックス作成プロセス中に、簡単な製品に割り当てられたカタログルールを削除しました。

<!-- ACP2E-216-->

* グループ化された構成可能な製品のグリッド表示リストに、製品オプションを追加する際に、シンプルな製品と仮想製品のみが含まれるようになりました。 以前は、このアプリケーションには、オプションを備えたシンプルな製品が含まれていました。

### カタログルール

<!-- MC-41807-->

* カタログルールを毎日更新しても、パフォーマンスが低下することはなくなりました。 以前は、カタログ製品価格の部分的なインデックス作成で、古い価格や日付は削除されませんでした。

<!-- MC-38263-->

* Adobe Commerceは、部分的なインデックス再作成中に、構成可能な製品のカタログ価格ルールを削除しなくなりました。 以前は、設定可能な製品のインデックスが再作成された場合、サブ製品のみインデックスが再作成されていました。

<!-- ACP2E-331-->

* カタログ価格ルールと **category が category_id ではありません** 条件は、どのカテゴリにも属さない製品に適用されるようになりました。

### 設定可能な製品

<!-- MC-42188-->

* 設定可能な製品オプションのラベル名は、管理者の注文作成時に選択したストア表示に基づくようになりました。 以前は、Adobe Commerceでは、デフォルトのストア表示のラベル名を使用していました。

<!-- MC-42187-->

* 在庫切れの製品を表示するためのグローバルフラグが有効になっている場合、製品リストに在庫切れの製品の子製品が正しく含まれるようになりました。 以前は、このフラグが有効な場合、いくつかの子製品オプションのいずれかが在庫切れになっていた場合、製品リストに子製品が含まれていませんでした。

<!-- MC-42340-->

* これで、 `addConfigurableProductsToCart` ミューテーション：デフォルト以外のストア表示で、設定可能な製品を買い物かごに追加します。 以前は、Web サイト ID とストア ID が異なる場合、設定可能な製品を買い物かごに追加できませんでした。 [GitHub-30948](https://github.com/magento/magento2/issues/30948)

<!-- MC-43051-->

* GraphQL `products` クエリが、設定可能な製品の無効な子製品に関するデータを返さなくなりました。

<!-- ACP2E-101-->

* 設定可能な製品の新しい設定を作成しても、既存の設定の変更が上書きされなくなりました。 以前は、既存のバリエーションのステータスはデフォルトのステータスで上書きされていました `enabled` 新しいバリエーションが生成された後。

<!-- ACP2E-175-->

* 設定可能な製品の無効な子を買い物かごに追加しようとしても、Adobe Commerceで内部エラーが発生しなくなりました。

### 顧客

<!-- MC-24204-->

* Adobe Commerceでは、注文作成時に管理ロケールの Web サイト範囲を考慮するようになりました。 以前は、顧客住所属性などの注文の詳細が、複数サイトのデプロイメントで 1 つの Web サイトでのみ正しく機能していました。 [GitHub-23254](https://github.com/magento/magento2/issues/23254)

### 顧客セグメント

<!-- MC-42241-->

* 一致顧客数で新しい顧客セグメントを作成すると、その顧客セグメントが会社アカウントの作成時に自動的に更新されるようになりました。 以前は、正確なカウントを取得するには、セグメントデータを更新する必要がありました。

### 電子メール

<!-- MC-42592-->

* 顧客が無効な電子メールアカウントを使用してログインしようとした場合に、チェックアウトログインポップアップの電子メールフィールド検証エラーが、顧客ログインページの電子メール検証エラーと一致するようになりました。

<!-- MC-42764-->

* Adobe Commerceは、管理者および **顧客に通知** チェックボックスがオンになっている。 以前は、送料確認 E メールには次のメッセージが含まれていました。 `We're sorry, an error has occurred while generating this content`.

<!-- MC-42486-->

* 地域 ID と国 ID の値が電子メールテンプレートに正しく変換されるようになりました。 以前は、 **リンクをプレビュー** 「管理者電子メール」テンプレートから、国および地域名が正しく表示されませんでした。

<!-- MC-36262-->

* デフォルト以外のストア表示に関して管理者から送信されたセールス更新メールに、正しい注文ステータスラベルが含まれるようになりました。 以前は、これらの電子メールのステータスは常にデフォルトのストアから表示されていました。 [GitHub-29263](https://github.com/magento/magento2/issues/29263)

<!-- AC-721-->

* Adobe Commerce `Content-Disposition: inline` ヘッダーが e メールに含まれます。 [GitHub-29258](https://github.com/magento/magento2/issues/29258)

<!-- magento/magento2/pull/32720-->

* Microsoft Outlook および MS Exchange Server を使用したデプロイメントで、注文と出荷の通知 E メールが期待どおりに動作するようになりました。 以前は、E メール本文は空でしたが、ATT*ラベルの付いた添付ファイルが含まれていました。 [GitHub-25076](https://github.com/magento/magento2/issues/25076)

<!-- ACP2E-47-->

* 注文 E メールに、買い物客のロケールを使用してローカライズされたデータが期待どおりに含まれるようになりました。 以前は、管理者ロケールを使用して電子メールを注文していました。

<!-- ACP2E-107-->

* 任意の E メールテンプレートのプレビューをクリックすると、テンプレートのプレビューが期待どおりに別のウィンドウで開くようになりました。  以前は、Adobe Commerceは、 E メールテンプレートグリッドとポップアップウィンドウから同時にテンプレートプレビューを開いていました。

<!-- ACP2E-127-->

* デフォルト以外の Web サイトから送信される非同期注文 E メールに、適切な Web サイトのロゴ URL が含まれるようになりました。 以前は、これらの電子メールには常にデフォルトまたはプライマリ Web サイトのロゴが含まれていました。 ( `storeCode` 値が、 `UrlInterface` `getUrl` 関数に置き換えます。 この値は、異なるストアや Web サイトに関する URL を区別し、正しい `baseUrl` （顧客に送信される e メールコンテンツ用）

### フレームワーク

<!-- AC-515-->

* 数値と非数値文字列の非厳密な比較は、数値を文字列にキャストし、文字列を比較することで機能するようになりました。 数値と数値文字列の比較は、引き続き以前と同じように機能します。 つまり、 `0 == "not-a-number"` が false と見なされるようになりました。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-1338-->

* ヘルパー `Magento\Payment\Helper\Data` コンストラクタで新しいレイアウトを作成しなくなりました。 以前は、このヘルパーが市外局番を指定せずにカスタムコマンドで使用されていた場合、Adobe Commerceはエラーをスローしていました。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1068-->

* 更新された `allure-framework/allure-php-api` コンポーザーの依存関係。

<!-- MC-42091-->

* Adobe Commerceは、ブートストラップファイルで例外が発生した場合、500 応答コードを返すようになりました。 以前は、Adobe Commerceは 200 OK ステータスコードを返していました。 [GitHub-22196](https://github.com/magento/magento2/issues/22196)

<!-- AC-1318-->

* ストアフロント製品の詳細ページで、通貨記号が期待どおりに読み込まれるようになりました。 以前は、JavaScript ページがリロードされると、この記号が表示されなくなることがありました。

<!-- AC-719-->

* 更新中 `symfony/console` 実行時にエラーが発生しなくなりました。 `bin/magento setup:di:compile`. [GitHub-33595](https://github.com/magento/magento2/issues/33595)

<!-- AC-1504-->

* 新しい必須オプションが `.htaccess` および `nginx.conf` PHP 8.x をサポートするためにAdobe Commerceで配布されるファイル。 古いオプションも削除されました。 [GitHub-34358](https://github.com/magento/magento2/issues/34358)

<!-- MC-42448-->

* マーチャントが複数の製品のビデオをアップロードできるようになりました。 ファイル生成プロセスで、アップロードされたファイル名に拡張子が含まれる場合にのみ、ファイル名に拡張子が追加されるようになりました。 以前は、商人がアップロードして 2 つの異なる製品用に同じビデオを保存しようとすると、Adobe Commerceは次のエラーをスローしていました。 `Notice: Undefined index: extension in /app/7ha7zds7wvqys_stg/vendor/magento/framework/File/Uploader.php on line 699`. これは、Adobe Commerceが、アップロードされたファイル名に拡張子が付いているかどうかに関係なく、名前にファイル拡張子を追加しようとしたためです。

<!-- magento/magento2/pull/34106-->

* 修正された問題： `sprintf(__())` および `sprintf(Magento\Framework\Phrase())` コードベース全体で PHP 8.x との互換性を保つためのコンストラクション。 以前は、Adobe Commerceが次のタイプのエラーをスローしていました。 `Expected parameter of type 'string', 'Magento\Framework\Phrase' provided`. [GitHub-34085](https://github.com/magento/magento2/issues/34085)

<!-- AC-1605-->

<!-- MC-42934-->

* 詳細検索クエリーパラメーターの検証を改善しました。 [GitHub-33589](https://github.com/magento/magento2/issues/33589)

<!-- ACP2E-69-->

* 実行中 `bin/magento support:backup:code` これで、予期したとおりにバックアップが作成されます。 以前は、Adobe Commerceがバックアップを作成しましたが、エラーがスローされていました。

<!-- ACP2E-82-->

* 正常に実行されました `cron` プロセスには、次のステータスが割り当てられました： `success`. 以前は、 `cron` プロセスが正常に実行されたので、プロセスが 2 回実行される可能性があります `cron` プロセスが割り当てられました `pending` ステータス。

<!-- ACP2E-170-->

* この `staging_synchronize_entities_period` `cron` ジョブが期待どおりに動作するようになりました。 以前は、最初のステージング更新が正常に適用されましたが、Adobe Commerceが以降の更新でこのエラーをスローしていました。 `report.ERROR: Cron Job staging_synchronize_entities_period has an error: The active update can't be deleted`.

<!-- ACP2E-102-->

* この `Magento_Logging` モジュールは、IPv6 をサポートするようになりました。

### 一般的な修正点

<!-- MC-42506-->

* Adobe Commerceでは、製品の複製時に、定義された範囲に従ってすべての製品フィールドをコピーするようになりました。 以前は、 **名前** および **説明** フィールドが次にリセットされました： `global` 範囲。

<!-- MC-42612-->

* Adobe Commerceは、製品価格が 0 の場合、割引にデルタ丸めを適用しなくなりました。 以前は、Adobe Commerceは負の割引額を計算していました。

<!-- MC-42215-->

* 製品の **新規に設定** 空の開始日と期限切れの終了日が割り当てられた属性を正常に保存できるようになりました。 以前は、Adobe Commerceは、次の設定で製品を保存した際に、このエラーをスローしていました。 `Make sure the To Date is later than or the same as the From Date`.

<!-- MC-41803-->

* SEO URL 識別子を変更した場合、Adobe Commerceは CMS 階層内の既存の CMS ページの重複を排除しました。 以前は、Adobe Commerceは CMS 階層に新しいノードを作成し、既存のノードを複製していました。

<!-- MC-42775-->

* 管理者は、最大処理時間の経過に伴って実行されていた操作を再試行できるようになりました。 デフォルトの最大時間は 12 時間です。

<!-- MC-42514-->

* 消費者に対する未確認メッセージが原因で、一括アクション処理中にパイプエラーが発生しなくなりました。 プリフェッチカウントプロパティにより、消費者に対するこれらのメッセージが制限され、エラーが回避されるようになりました。 以前は、 `bin/magento queue:consumers:start async.operations.all` 次のエラーが発生しました：  `Broken pipe or closed connection`.

<!-- MC-42075-->

* 2 回目のログイン試行が失敗した後、買い物客が期待どおりにログインページにリダイレクトされるようになりました。 以前は、ログインに 2 回失敗すると、買い物客は 404 ページにリダイレクトされていました。 [GitHub-32885](https://github.com/magento/magento2/issues/32885)

<!-- magento/magento2/pull/25279-->

* パスワードリセットトークンの有効性が拡張され、パスワード変更ページの送信中に競合状態が発生するのを防ぐことができました。 [GitHub-29647](https://github.com/magento/magento2/issues/29647)

<!-- AC-1316-->

* 新しい統合に割り当てられる権限が考慮されるようになりました。 [GitHub-33347](https://github.com/magento/magento2/issues/33347)

<!-- AC-1328-->

* 「お問い合わせ」フォームの例外ログに残ったメッセージに影響する回帰の問題を修正しました。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- magento/magento2/pull/31654-->

* 顧客データの JavaScript 読み込みに関する複数の問題を解決しました。 [GitHub-30498](https://github.com/magento/magento2/issues/30498)

<!-- magento/magento2/pull/33324-->

* 使用 `QuoteIdToMaskedQuoteId` の拡張機能では、応答時間が大幅に増加しなくなりました。 [GitHub-33676](https://github.com/magento/magento2/issues/33676)

<!-- AC-720-->

* クラス `BundleDiscountPrice` in `magento2/app/code/Magento/Bundle/Pricing/Price/ConfiguredPrice.php` が期待どおりに宣言されるようになりました。 以前は、Adobe Commerceが次のエラーをスローしていました。 `Class Magento\Bundle\Pricing\Price\BundleDiscountPrice not found`. [GitHub-33334](https://github.com/magento/magento2/issues/33334)

<!-- AC-1239-->

* AWS S3 アダプターで書き込まれたエスケープされた CSV フィールド値が、他のファイルシステムアダプターで書き込まれたデータと一致するようになりました。

<!-- MC-43046-->

* S3 互換のストレージがサポートされるようになりました。 [GitHub-32114](https://github.com/magento/magento2/issues/32114)

<!-- ACP2E-123-->

* あるデバイスからログアウトしても、他のデバイスから買い物客が自動的にログアウトされなくなりました。

<!-- ACP2E-168-->

* Adobe Commerceは、 **親ノード階層の使用** 設定は無効です。 以前は、Adobe Commerceはこのエラーを表示し、CMS ページの編集を保存しませんでした。 `A technical problem with the server created an error. Try again to continue what you were doing. If the problem persists, try again later`.

<!-- ACP2E-171-->

* 同じページを含むノードに対してパンくずリストが正しく表示されるようになりました。 以前は、Adobe Commerceでは、複数のノードに属するページに同じノード名が表示されていました。 Adobe Commerceは、各ページに複数のノードが存在する場合でも、ページの最初のノードのみを取得しました。

<!-- ACP2E-202-->

* URL 書き換えのインライン編集イベントが、レポートに記録されるようになりました。

<!-- ACP2E-290-->

* この `mage-messages` 新しいメッセージがない場合、cookie はリセットされません。

### ギフトカード

<!-- MC-42327-->

* 買い物客が無効なギフトカードを入力した場合の、より有益なエラーメッセージを追加しました。

### GraphQL

<!-- PWA-1938-->

* この `generateCustomerToken` および `revokeCustomerToken` 突然変異により、ユーザー状態に対して正しいキャッシュ ID が提供されるようになりました。 以前は、これらの突然変異で無効な `x-magento-cache-id`：パフォーマンスが低下しました。

<!-- PWA-1506-->

* この `setBillingAddressToCart` 突然変異は現在、 `same_as_shipping` パラメーターを使用して、配送先住所が期待どおりに一致するように請求先住所を設定します。 以前は、Adobe Commerceに次のエラーが表示されていました。 `The shipping method is missing. Select the shipping method and try again`. [GitHub-30924](https://github.com/magento/magento2/issues/30924)

<!-- PWA-1980-->

* GraphQL買い物かご操作で、クエリが要求した場合にのみ、買い物かごの総計が計算されるようになりました。 以前は、買い物かご操作では常に総計が計算されていましたが、これはリソースを大量に消費する操作です。

<!-- MC-42781-->

* この `addProductsToCart` ミューテーションが、ヘッダーで定義されたストアに割り当てられた製品のみを買い物かごに追加するようになりました。

<!-- MC-42783-->

* `products` レイヤーナビゲーションフィルターを使用するクエリで、正しい子カテゴリリストが返されるようになりました。 [GitHub-33387](https://github.com/magento/magento2/issues/33387)

<!-- MC-42831-->

* を返すクエリと変列 `ConfigurableCartItem` オブジェクトには、設定済みのバリアントに関する情報が期待どおりに含まれます。

<!-- MC-42082-->

* この `products` クエリが設定製品オプション値とバリアント属性値を返すようになりました。 以前は、クエリ応答ではこれらの値は空でした。

<!-- MC-41794-->

* この `products` 子製品が store-view レベルで無効になっている場合、クエリは製品を正しくバンドルするようになりました。 以前は、クエリは、ストア表示レベルで無効になっている子製品を返していました。

<!-- PWA-1311-->

* GraphQLは、New Relicに説明的なトランザクション名を提供するようになりました。これはデバッグに役立ちます。 [GitHub-30915](https://github.com/magento/magento2/issues/30915)

<!-- MC-42903-->

* この `setShippingAddressesOnCart` ミューテーションで、 **電話を表示** 管理者の設定はオプションに設定されています。 以前は、Adobe Commerceが次のエラーをスローしていました。 `Field CartAddressInput.telephone of required type String! was not provided`.

<!-- MC-42970-->

* 問題が `addSimpleProductsToCart` ミューテーションを使用すると、ターゲット Web サイトに割り当てられていない買い物かごにシンプルな製品を追加できます。

<!-- MC-42600-->

* MySQL クエリがGraphQL用に最適化されました `products` 検索結果を絞り込むために検索パラメーターを使用するクエリ。

<!-- MC-43189-->

* この `addConfigurableProductToCart` リクエストされた範囲に製品が含まれていない場合、ミューテーションでは、買い物かごへの製品の追加がサポートされなくなりました。

<!-- MC-42666-->

* この `products` クエリは、要求されたストレビューに割り当てられた設定可能なバリアントのみを返すようになりました。 以前は、リクエストされた設定可能な製品のすべてのバリエーションが返されていました。

<!-- MC-42652-->

* `addSimpleProductsToCart` リクエストを同時並行で正常に実行できるようになりました。 以前は、同じ SKU に対する複数のリクエストによって、製品数が予想どおりに増えるのではなく、同じ買い物かご ID に対する行項目が重複していました。

<!-- AC-856-->

* この `addProductsToCompareList` ミューテーションを使用して、設定可能な製品のバリアントを比較できるようになりました。

<!-- MC-42443-->

* 階層製品の価格がバックエンドから更新されると、新しい価格が顧客の買い物かごで正しく更新されます。 以前は、買い物かごの概要セクションの小計は正しく更新されましたが、行の小計は更新されませんでした。

<!-- AC-697-->

* この `addProductsToCart` ミューテーションを使用すると、複数選択オプションを含むバンドル製品を追加する際に、選択したすべてのオプションがカートに追加されるようになりました。 以前は、ミューテーションは最後の選択肢にのみ追加されていました。 [GitHub-33123](https://github.com/magento/magento2/issues/33123)

<!-- MC-38815-->

* オプションの電話フィールドの値が空の文字列に設定されている場合、GraphQLクエリは請求先住所を期待どおりに返すようになりました。 以前は、クエリは NULL アドレス値を返していました。 [GitHub-30218](https://github.com/magento/magento2/issues/30218)

<!-- ACP2E-51-->

* この `products` クエリの応答で、複数の製品の関連度または価格が同じ場合に、指定した並べ替え順に従って製品が一覧表示されるようになりました。

<!-- ACP2E-75-->

* 同時 `addSimpleProductsToCart` および `addProductsToCart` リクエストを実行しても見積もり項目が重複しなくなりました。

<!-- ACP2E-76-->

* `products` クエリ階層型ナビゲーションフィルターで、正しい子カテゴリリストが返されるようになりました。 現在は、ダイレクトサブカテゴリのみが `includeDirectChildrenOnly` フラグがリクエストで提供されます。 以前は、製品が複数のカテゴリに割り当てられた場合、すべてのカテゴリが集計セクションに応答して含まれていました。

<!-- ACP2E-132-->

* GraphQL検索クエリの検索候補機能を追加しました。

<!-- ACP2E-288-->

* この `OrderAddress.telephone` フィールドは、 `customer` 顧客の注文アドレスを返す、または変更するクエリやその他のクエリや突然変異。

<!-- ACP2E-278-->

* API を使用してグループ ID を変更した場合、ストアフロントと管理の両方で指定したグループのお客様に対して、価格が正しく更新されるようになりました。 以前は、API を使用してグループ ID を変更した場合、これらの価格が正しく更新されませんでした。

### 画像

<!-- MC-42080-->

* 透明な背景を持つ透かし画像が、オーバーレイする透明な製品画像に白の背景を持たなくなりました。 以前は、透かし画像と製品画像の両方が透明な背景を持つ場合、透かしは白の背景で表示されていました。

<!-- AC-1240-->

* AWS S3 を有効にした場合、請求書および送料のロゴが期待どおりにアップロードされ、表示されるようになりました。

<!-- MC-42160-->

* ストア URL とは異なるドメインに管理者が設定されているデプロイメントの CMS ページに追加された画像に関連付けられたメディアタグに、期待どおりにストア URL が含まれるようになりました。 以前は、メディアタグには、期待されるストア URL の代わりに静的な管理者 URL が含まれていました。 [GitHub-32930](https://github.com/magento/magento2/issues/32930)

<!-- ACP2E-315-->

* ストアフロントで画像を同時に読み込む際に、Adobe Commerceで画像キャッシュをフラッシュしてもエラーがスローされなくなりました。

### インポート/エクスポート

<!-- AC-1486-->

* `bin/magento remote-storage:sync` ファイル名が類似しているが、1 文字または 2 文字だけが異なる場合に、失敗しなくなりました。 以前は、最初の画像は正しく保存されていましたが、2 番目の画像と同じ名前の画像で同期エラーが発生し、次のエラーが発生していました。 `Notice: Undefined index: media/catalog/product/5/_ in /src/vendor/magento/module-remote-storage/Driver/Adapter/Cache/Generic.php on line 197`. [GitHub-34337](https://github.com/magento/magento2/issues/34337)

<!-- MC-41672-->

* Adobe Commerceは、書き出しファイル名のタイムスタンプを、スケジュールされた書き出しの後に、ユーザーのタイムゾーンに変換するようになりました。 以前は、これらの値は変換されず、Adobe Commerceに UTC タイムスタンプが表示されていました。

<!-- MC-42330-->

* 同じ CSV ファイルが複数回インポートされた場合に、Adobe Commerceがリモートストレージで重複画像を作成しなくなりました。

<!-- AC-1045-->

* 次のメッセージでインポートが失敗しなくなりました： `Import failed: Area code not set: Area code must be set before starting a session`. [GitHub-16171](https://github.com/magento/magento2/issues/16171)

<!-- AC-988-->

* 実行後に正常にインポートできるようになりました `bin/magento app:config:dump` 手動での編集 `config.php`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- MC-41672 23734-->

* デフォルト以外の複数値の区切り文字を、カスタム複数選択属性で使用できるようになりました。 以前は、インポート中に検証に失敗していました。 [GitHub-23156](https://github.com/magento/magento2/issues/23156)

<!-- ACP2E-86-->

* カテゴリ内の製品の位置は、CSV からのインポート時に正しく割り当てられるようになりました。

### 索引

<!-- MC-42791-->

* インデックスを再作成した後、Adobe Commerceでストアフロントで期待どおりに製品が表示されるようになりました。 以前は、インデックスを再作成する最初の 500 個の製品が在庫に含まれていて、次の 500 個の製品が在庫切れになっていた場合、ストアフロントには追加の製品は表示されませんでした。

<!-- magento/magento2/pull/27212-->

* マージ済みの整合性の問題を解決しました。 `indexer.xml` ファイル。 指定できる値： `classType` は、結合解除と結合で同じになりました `indexer.xml` ファイル。 [GitHub-29609](https://github.com/magento/magento2/issues/29609)

<!-- AC-190-->

* カテゴリインデクサーに同期メカニズムが実装され、完全および部分的なインデクサーが並行して実行されるのを防ぐことができました。 以前は、これらのインデクサーを並行して実行すると、製品がストアフロントのカテゴリページから一時的に省略されたり、カテゴリページが一時的に製品の空になったりしていました。

### インフラ

<!-- AC-1172-->

* サポート対象外 `str_contains` メソッドは、サポートされている関数に置き換えられました。 これは、Adobe Commerce 2.4.3 で既知の問題です。 [GitHub-33680](https://github.com/magento/magento2/issues/33680)

<!-- magento/partners-magento2ee/pull/573-->

* キーワードを正しく使用するようにコードベースをリファクタリングしました `match`:PHP 8.x での予約キーワードです。 [GitHub-33626](https://github.com/magento/magento2/issues/33626)

* HTMLタグは、JQuery 3.5.x のカスタム要素を含む非ボイド要素に対する規格に合わせて、正しくネストされ、閉じられるようになりました。 <!-- AC-1942-->

<!-- magento/magento2/pull/34234)-->

* 固定 `abs()` および `round()` PHP7.x および PHP8.x との互換性を保つ関数  [GitHub-34322](https://github.com/magento/magento2/issues/34322)

<!-- AC-719-->

* 更新中 `symfony/console` 実行時にエラーが発生しなくなりました `bin/magento setup:di:compile`. [GitHub-33595 ](https://github.com/magento/magento2/issues/33595)

<!-- magento/magento2/pull/34175-->

* 以下の制限を修正しました。 `colinmollenhour/cache-backend-redis` コンポーザーの依存関係。 [GitHub-34177](https://github.com/magento/magento2/issues/34177)

<!-- magento/magento2/pull/33932 magento/magento2/pull/33992-->

* の廃止されたメソッドの呼び出しを削除するために、コードベースがリファクタリングされました。 `phpunit/phpunit`. [GitHub-33916](https://github.com/magento/magento2/issues/33916)

<!-- MC-42960-->

* 管理者が読み取り専用である場合、Adobe Commerceに情報エラーが表示されるようになりました `pubs/media` は、画像を含む製品の製品の詳細ページにアクセスしようとします。 以前は、Adobe Commerceが PHP エラーをスローしていました。 [GitHub-32819](https://github.com/magento/magento2/issues/32819)

<!-- AC-853-->

* すべてのメンバーレベル `@api` 注釈は、コードベース全体でクラスに移動されました。

<!-- AC-1977-->

* `gift-card Cms` ウィジェットデータは次の場所から移動されました： `Magento/WidgetSampleData` (Magento Open Source) `Magento/GiftCardSampleData` (Adobe Commerce)。 これにより、PHP 8.1 上でサンプルデータを使用してインストールする際の (Magento Open Source) 問題を解決しました。

<!-- AC-1001-->

* Adobe Stock Integration コードベース全体で、 `@api` 必要に応じて。 [GitHub-32875](https://github.com/magento/magento2/issues/32875)

<!-- AC-1770-->

* 結果セット内の整数と浮動小数点は、エミュレートされた準備済み文を使用する際に、文字列ではなくネイティブの PHP 型を使用して返されるようになりました。 [GitHub-34625](https://github.com/magento/magento2/issues/34625)

<!-- AC-1697-->

* PHP 8.1 との互換性を確保するために、false 値からの配列の自動作成が無効になりました。

<!-- AC-1338-->

* ヘルパー `Magento\Payment\Helper\Data` コンストラクタで新しいレイアウトを作成しなくなりました。 以前は、このヘルパーが市外局番を指定せずにカスタムコマンドで使用されていた場合、Adobe Commerceはエラーをスローしていました。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1077-->

* これで、 `data` ブロックインスタンスのコンストラクターに対する引数 `di.xml`.

<!-- MC-43096-->

* 最適化済み `Generator.php` 読みやすくするために。 [GitHub-33809](https://github.com/magento/magento2/issues/33809)

<!-- AC-1313-->

* での JWK チェックを改善しました。 `JwsManager` クラスを使用して、アルゴリズムがヘッダーに直接設定された場合の状況を処理できます。 以前は、このチェックではこの有効なシナリオは無視されていました。 [GitHub-32636](https://github.com/magento/magento2/issues/32636)

#### PHP 8.1 の互換性のアップグレード

<!-- AC-1605-->

* PHP 8.1 で廃止された関数は、コードベースから削除されました。 [GitHub-34497](https://github.com/magento/magento2/issues/34497)

* PHP 8.1 との互換性を保つため、不完全な戻り値型を持つ内部メソッドに戻り値型宣言を追加しました。 [GitHub-34498](https://github.com/magento/magento2/issues/34498) <!-- AC-1606-->

<!-- AC-1147-->

* ルートを更新しました `composer.json` メタパッケージと  `composer.json` 各モジュールのファイルを PHP 8.1 に送信します。 [GitHub-34009](https://github.com/magento/magento2/issues/34009)

* サードパーティ `jquery.tabs` ライブラリ（最新バージョン）

* NPM パッケージ（最新バージョン） [GitHub-33512](https://github.com/magento/magento2/issues/33512), [GitHub-33972](https://github.com/magento/magento2/issues/33972) <!-- magento/magento2/pull/33515 33998-->

* `jquery.cookie` サードパーティライブラリ（最新バージョン） [GitHub-34427](https://github.com/magento/magento2/issues/34427) <!-- AC-101-->

#### コンポーザーの依存関係の更新

* すべての Composer の依存関係が、PHP 8.1 と互換性のあるバージョンに更新されました。

* PHPUnit は最新バージョン (9.5.x) にアップグレードされました。 新しいバージョンとの互換性を持つように、テストおよびテストフレームワークが更新されました。 <!-- AC-404-->

#### JavaScript 依存関係の更新

<!-- magento/magento2/pull/33871-->

* `jquery-validate` サードパーティライブラリ  [GitHub-33853](https://github.com/magento/magento2/issues/33853)

<!-- ENGCOM-8667-->

* `Less.js` (v3.13.1) [GitHub-32845](https://github.com/magento/magento2/issues/32845)

#### ライブラリの削除と廃止

* Adobe Commerce 2.4.x がサポートするすべてのブラウザーはこの機能の組み込みサポートを持っているので、次のライブラリが削除されました。

   * `es6-collections.js`   <!-- AC-18-->
   * `MutationObserver.js` <!-- AC-15-->
   * `Modernizr` <!-- AC-12-->
   * `FormData.js`

* 未使用の `jquery.hoverIntent` JavaScript ライブラリ。 [GitHub-33732](https://github.com/magento/magento2/issues/33732) <!-- AC-97-->

* `lib/internal/Magento/Framework/Filter/Money.php` は非推奨（廃止予定）となりました。 これには、 `money_format()` 関数を削除しました。 [GitHub-33870](https://github.com/magento/magento2/issues/33870)<!-- magento/magento2/pull/34366)-->

* 非推奨（サポート対象外）のを削除しました。 `grunt-autoprefixer` パッケージ。 [GitHub-34037](https://github.com/magento/magento2/issues/34037) <!-- magento/magento2/pull/34032-->

#### ライブラリのアップグレード

* 次のライブラリが、より新しいバージョンにアップグレードされました。

   * `script.aculo.us` <!-- AC-363-->
   * `Chart.js`  <!-- AC-361-->
   * `moment.js` <!-- AC-11-->
   * `moment-timezone-with-data.js`   <!-- AC-10-->
   * `matchMedia.js` <!-- AC-8-->
   * `underscore.js`  <!-- AC-13-->
   * `PrototypeJS`  <!-- AC-17-->
   * `RequireJS`
   * `LessCSS`

### 請求書

<!-- AC-1564-->

* キャスティング先 `int` は、プレフィックスに文字列が付いた場合に自動増分される請求書 ID 用に削除されました。 その結果、請求書には、文字列のプレフィックスが付いた数値に対して 0 が表示されるようになりました。 [GitHub-34451](https://github.com/magento/magento2/issues/34451)

### ログ

<!-- MC-42360-->

* Adobe Commerceは、 **システム** > **バルクアクション**. 以前は、失敗した API 呼び出しの永続的なエントリが一括アクションログに追加されていました。

<!-- AC-1607-->

* false 値を使用した配列の自動作成は許可されなくなりました。 [GitHub-34499](https://github.com/magento/magento2/issues/34499), [GitHub-34589](https://github.com/magento/magento2/issues/34589)

### Adobe Commerceコーディング規格

<!-- magento/magento-coding-standard/pull/219-->

* 更新済み `phpunit/ phpunit` を `magento-coding-standard` リポジトリ。 [GitHub-33622](https://github.com/magento/magento2/issues/33622)

<!-- magento/magento2/pull/33858-->

* 更新された `webonyx/graphql-php` Adobe Commerce coding standard リポジトリのバージョン^14.9 への依存。 [GitHub-32863](https://github.com/magento/magento2/issues/32863)

<!-- magento/magento-coding-standard/pull/322-->

* 新しいスニフを追加しました `Magento2.PHP.ArrayAutovivification` をAdobe Commerceのコーディング標準に従って、false 値から配列の自動作成を識別します。 [GitHub-34509](https://github.com/magento/magento2/issues/34509)

<!-- magento/magento-coding-standard/pull/325-->

* 新しいスニフを追加しました `Magento2.Functions.DeprecatedFunction` をAdobe Commerceのコーディング標準に変更します。 [GitHub-34547](https://github.com/magento/magento2/issues/34547)

<!-- magento/magento-coding-standard/pull/326-->

* スニフに廃止された関数を追加しました。 `Magento2.Functions.DiscouragedFunction` (Adobe Commerceのコーディング標準 ) [GitHub-34548](https://github.com/magento/magento2/issues/34548)

<!-- magento/magento-coding-standard/pull/335-->

* この `Magento2.Annotation.MethodAnnotationStructure` スニフが偽陽性で失敗することはなくなりました。 [GitHub-34679](https://github.com/magento/magento2/issues/34679)

### メディアギャラリー

<!-- AC-1054-->

* この `bin/magento media-gallery:sync` AWS S3 が有効なデプロイメントで、コマンドが失敗しなくなりました。

<!-- AC-1000-->

* メニュー項目が 11 を超え、 **古いメディアギャラリーを有効にする** 設定が有効になっています。 [GitHub-33889](https://github.com/magento/magento2/issues/33889)

<!-- MC-42837-->

* 多数の画像を含む製品を編集する際の「メディアギャラリー」タブの読み込み時間が改善されました。 [GitHub-33434](https://github.com/magento/magento2/issues/33434)

### MFTF

<!-- AC-516-->

* `CURLOPT_POSTFIELDS` では、オブジェクトを配列として使用できなくなりました。 オブジェクトを配列として解釈するには、`array`) キャストで使用できます。 この方法は、配列を受け入れる他のオプションにも当てはまります。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

* `curl_init()` 戻り値 `CurlHandle` オブジェクトの代わりにリソースを使用します。 この `curl_close()` 関数の効果はなくなりました。 代わりに、 `CurlHandle` インスタンスが参照されなくなった場合、インスタンスは自動的に破棄されます。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

<!-- AC-1397-->

* ダウンロード可能な製品の MFTF テストでのエラーを修正しました。 [GitHub-34270](https://github.com/magento/magento2/issues/34270)

<!-- magento/magento2/pull/33530-->

* 削除済み `CliCacheFlushActionGroup` から `CatalogSearch`, `GroupedProduct`, `Newsletter`, `Paypal`, `Quote`、および `Review` モジュール。 [GitHub-33531](https://github.com/magento/magento2/issues/33531)

<!-- AC-515-->

* 数値と非数値文字列の非厳密な比較は、数値を文字列にキャストし、文字列を比較することで機能するようになりました。 数値と数値文字列の比較は、引き続き以前と同じように機能します。 つまり、0 == &quot;not-a-number&quot;が false と見なされます。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-517-->

* `parse_url()` が、存在しないクエリと空のクエリとフラグメントを区別するようになりました。 [GitHub-33782](https://github.com/magento/magento2/issues/33782)

<!-- magento/magento2-functional-testing-framework/pull/873-->

* コードベースを更新し、 `ReflectionType::isBuiltin()` メソッド。 [GitHub-34194](https://github.com/magento/magento2/issues/34194)

#### 新しいアクショングループ

`AdminCheckOrderStatusInGridActionGroup` [GitHub-33747](https://github.com/magento/magento2/issues/33747)

`StorefrontSelectFirstShippingMethodActionGroup` [GitHub-33773](https://github.com/magento/magento2/issues/33773)

`AdminClickUpdateChangesOnCreateOrderPageActionGroup` [GitHub-33689](https://github.com/magento/magento2/issues/33689)

#### アクショングループ

繰り返しアクションは、これらのテストではアクショングループに置き換えられました。

`AdminAddInStockProductToTheCartTest` [GitHub-34512](https://github.com/magento/magento2/issues/34512)

`AdminAddBundleItemsTest` [GitHub-34312](https://github.com/magento/magento2/issues/34312)

`AdminConfigurableProductAddConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductBulkUpdateTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminConfigurableProductDisableAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductOutOfStockAndDeleteCombinationTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductOutOfStockTestDeleteChildrenTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductRemoveAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductRemoveConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminCreateAndEditSimpleProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateAndEditVirtualProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateInactiveFlatCategoryTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminCreateInactiveInMenuFlatCategoryTest` [GitHub-34510](https://github.com/magento/magento2/issues/34510)

`AdminCreateDuplicateCategoryTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminCreateDuplicateProductTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminDeleteSimpleProductTest` [GitHub-33783](https://github.com/magento/magento2/issues/33783)

`AdminEditRelatedBundleProductTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminMassDeleteBundleProductsTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminNavigateMultipleUpSellProductsTest` [GitHub-34314](https://github.com/magento/magento2/issues/34314)

`AdminSimpleProductSetEditContentTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminSimpleProductTypeSwitchingToConfigurableProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminConfigurableProductTypeSwitchingToVirtualProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminCreateConfigurableProductWithDisabledChildrenProductsTest` [GitHub-33775](https://github.com/magento/magento2/issues/33775)

`AdminUpdateFlatCategoryAndAddProductsTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminUpdateTopCategoryUrlWithNoRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`AdminUpdateTopCategoryUrlWithRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`CatalogProductListWidgetOperatorsTest`  [GitHub-34579](https://github.com/magento/magento2/issues/34579)

`CreateProductAttributeEntityWithReservedKeysTest`[GitHub-34422](https://github.com/magento/magento2/issues/34422)

`EnableDisableBundleProductStatusTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`StorefrontCheckRefundGrandTotalActionGroup` [GitHub-34315](https://github.com/magento/magento2/issues/34315)

`StorefrontInactiveCatalogRuleTest` [GitHub-33556](https://github.com/magento/magento2/issues/33556)

`StorefrontConfigurableProductCantAddToCartTest` [GitHub-33786](https://github.com/magento/magento2/issues/33786)

`StorefrontConfigurableProductOptionsTest` [GitHub-33785](https://github.com/magento/magento2/issues/33785)

`StorefrontConfigurableProductCanAddToCartTest` [GitHub-33784](https://github.com/magento/magento2/issues/33784)

`StorefrontConfigurableProductGridViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontConfigurableProductListViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontProductNameWithHTMLEntitiesTest` [GitHub-33806](https://github.com/magento/magento2/issues/33806)

`StorefrontProductNameWithDoubleQuoteTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

#### 新しいテスト

`AdminCreateOrderWithCheckedAppendCommentCheckboxTest` [GitHub-32381](https://github.com/magento/magento2/issues/32381)

`CheckoutWithEnabledCaptchaTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

`StorefrontAddProductWithBackordersAllowedOnProductLevelToCartTest` [GitHub-33635](https://github.com/magento/magento2/issues/33635)

`StorefrontGiftMessageForOrderOnCheckoutCartPageTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCaptchaCheckoutWithEnabledCaptchaTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCheckoutWithEnabledMinimumOrderAmountOptionTest` [GitHub-33460](https://github.com/magento/magento2/issues/33460)

#### リファクタリングされたテスト

`CaptchaWithDisabledGuestCheckoutTest` [GitHub-30828](https://github.com/magento/magento2/issues/30828)

### ニュースレター

<!-- ACP2E-147-->

* 適切な権限を持つユーザーが、顧客ニュースレターの購読を期待どおりに管理できるようになりました。 以前は、完全な権限を持つ管理者のみが、管理者顧客アカウントページで顧客ニュースレターの購読を管理できました。

### 注文

<!-- MC-41981-->

* ストアフロントと管理者の両方で、ファイルタイプのカスタムオプションとタイプドロップダウンを組み合わせた、製品を含む既存の注文を正常に並べ替えることができるようになりました。 以前は、Adobe Commerceはエラーをスローし、並べ替えを処理しませんでした。

<!-- MC-42746-->

* 店舗クレジットで支払われ、固定商品税 (FPT) が適用されている注文の請求書に、正しい総計が含まれるようになりました。

<!-- MC-42332-->

* 注文の詳細ページが期待どおりに読み込まれるようになりました。 以前は、Adobe Commerceで、特定の税金を含む注文の注文の詳細ページを読み込むと、次のエラーが発生していました。 `Call to a member function getId() on array`.

<!-- MC-38521-->

* 注文および発送権限を含む制限付き権限を持つ管理者が、注文ページを期待どおりに表示できるようになりました。 以前は、Adobe Commerceは、これらの権限を持つ管理者が注文を表示しようとするとエラーをスローしていました。 [GitHub-14633](https://github.com/magento/magento2/issues/14633)

<!-- ACP2E-74-->

* 許容される最大数量の制限が設定されている場合に、子の設定可能な製品を含む注文を行えるようになりました。

### 支払い方法

<!-- AC-1830-->

* 3DS が有効なデプロイメントで、Braintreeを使用して、課金先住所を指定せずに、購入者が注文を行えるようになりました。 以前は、買い物客がクリックするとチェックアウトが解除されていました。 **発注**、および購入を完了できませんでした。 [GitHub-34204](https://github.com/magento/magento2/issues/34204)

<!-- AC-1229-->

* Venmo 支払いオプションがサポートされるようになりました。

<!-- AC-1228-->

* PayPal は BN コードで追跡できるようになりました。

<!-- AC-493-->

* `bin/magento setup:upgrade` Adobe Commerce 2.4.2-p1 からアップグレードする際に、が期待どおりに実行されるようになりました。 以前は、Adobe Commerceが次のエラーをスローしていました。 `Unable to apply data patch Magento\Paypal\Setup\Patch\Data\UpdateBmltoPayLater for module Magento_Paypal`. [GitHub-33678](https://github.com/magento/magento2/issues/33678)

<!-- MC-42830-->

* 現在は、管理注文の配置中に、保存されたクレジットカードを取得するために正しいストア ID が使用されます。 Web サイトの範囲設定に従って、注文の配置時に、保存されたクレジットカードが表示されるようになりました。 以前は、管理者が管理者から顧客の注文を作成しようとして、「保存済みクレジットカード」の方法を選択した場合、保存済みのカードにはオプションが使用できませんでした。

<!-- AC-344-->

* ギフトカードの金額の PayPal クレジット表示の異常値が解決されました。 以前は、PayPal クレジットが有効で複数のギフトカードの金額が設定されていた場合、買い物客がギフトカードの価値の金額を変更した場合、ストアフロントは割賦支払いの金額を更新しませんでした。 これは、Adobe Commerce 2.4.3 で既知の問題でした。

#### PayPal

<!-- MC-42154-->

* Adobe Commerceは、PayPal Express 支払い方法を使用したチェックアウト時にエラーを表示しなくなりました。 以前は、チェックアウトプロセスは完了しましたが、Adobe Commerceに次のエラーが表示されていました。 `Something went wrong`.

<!-- AC-722-->

* PayPal Express が買い物かごから期待どおりに動作するようになりました。 以前は、 **PayPal** ボタンをクリックして、買い物かごからの速達チェックアウトを開始したとき、Adobe Commerceは次のエラーをスローしました。  `To check out, please sign in with your email address`. [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42279-->

* PayPal Payflow Pro は、PayPal Payflow Pro ゲートウェイが **支払いアクション** が **認証**. A **販売** トランザクションは、予期したとおりにチェックアウト時に作成された vault トークンの親トランザクション ID を持つ Payflow に送信されます。 以前は、 **遅延キャプチャ**  トランザクションが作成され、PayPal Payflow に送信されました。 [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42442-->

* PayPal Payments Advanced Payments を使用した支払いが完了した後、買い物客が期待どおりに成功ページにリダイレクトされるようになりました。 以前は、支払いが正常に処理され、エラーがログに記録されなかった場合でも、買い物客はこのページにリダイレクトされませんでした。

### パフォーマンス

<!-- AC-705-->

* にインデックスを追加しました。 `magento_giftcardaccount.code` パフォーマンスを向上させる。

<!-- MC-42158-->

* モジュールリストの読み込み実行時間が改善されました。

<!-- AC-932-->

* よく使用される検索語句キャッシュのパフォーマンスが向上しました。 以前は、 `search_query` テーブル内で、検索クエリの完了に要した時間が長くなります。 [GitHub-27559](https://github.com/magento/magento2/issues/27559)

<!-- MC-42892-->

* Adobe Commerceでは、製品の保存中に画像のサイズが同期的に変更されます。 マーチャントが、 `di.xml` ファイル。

<!-- ENGCOM-9168-->

* マルチストアデプロイメントで、カテゴリ製品インデクサーのパフォーマンスが向上しました。 [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-1179-->

* 次の新しいメモリ内キャッシュ： `glob()` システム呼び出しは、 `glob()` 呼び出し。  [GitHub-34025](https://github.com/magento/magento2/issues/34025)

<!-- ACP2E-63-->

* 非同期順序グリッドのインデックス再作成プロセスのパフォーマンスが向上しました。

<!-- ACP2E-117-->

* 製品の書き出し中のメモリ消費が最適化されました。

<!-- ACP2E-325-->

* 関連製品を含む製品詳細ページの読み込みが最適化されました。 関連する製品条件のクエリも最適化されました。

### 価格

<!-- MC-42243-->

* 製品価格が 0 に近いか等しく、共有カタログが有効な場合、価格の並べ替えが期待どおりに動作するようになりました。 以前は、価格のインデックス再作成中、0 層の価格は無視されていました。

<!-- ACP2E-87-->

* 「カテゴリ」ページの価格フィルターに 2 つ目の値が含まれていない場合、Adobe Commerceでエラーがスローされなくなりました。 以前は、Adobe Commerceはログファイルで例外をスローしていました。

### ProductAlert

<!-- MC-41917-->

* 新しい `product_alert` 消費者は、キューメッセージの作成、消費者の実行、実行時間の改善により、顧客アラートの送信を改善します。 以前は、Adobe Commerceが 100,000 個を超える製品アラートを送信する際にメモリ不足の例外をスローしていました。 Adobe Commerceはまた、すべてのアラートを送信するのに 20 時間以上かかりました。

### 製品ビデオ

<!-- MC-42105-->

* Adobe Commerceが **保存** ボタンをクリックし、ビデオの追加中に不完全な URL を入力した場合にフィールドを自動入力します ( 管理者 **カタログ**  > **製品** > **ビデオを追加**) をクリックします。 以前は、 **保存** 」ボタンが無効になり、フィールドに値が入力されなかった問題を修正しました。

### 返品認証 (RMA)

<!-- MC-42987-->

* 「管理者返品製品の作成」グリッドに、価格と共に税金を表示するように設定された製品の価格のみを含む、税金が表示されるようになりました。 以前は、Adobe Commerceは、 `tax/calculation/price_includes_tax` フラグ。

### レビュー

* 製品リスト表示に、製品の正しい星評価が表示されるようになりました。 [GitHub-30196](https://github.com/magento/magento2/issues/30196)

<!-- ACP2E-89-->

* 買い物客がクリックすると、レビューが期待どおりに表示されるようになりました **レビュー** を使用します。

<!-- ACP2E-111-->

* 製品の星評価は、ストアフロントの製品リストページのグリッド表示とリスト表示で一致するようになりました。 以前は、グリッド表示モードとリスト表示モードで、同じ製品の評価が異なる場合がありました。

### 報酬

<!-- ACP2E-129-->

* 報酬ポイント残高と報酬ポイント履歴に同じ残高が表示されるようになりました。 期限切れのポイントが正しく差し引かれるようになりました。 以前は、報酬ポイント残高に有効期限切れのポイントが正確に反映されていませんでした。

<!-- ACP2E-158-->

* 期限切れの報酬ポイントが、 **期限切れ** （ストアフロントの報酬ポイント履歴グリッドの「理由」セクション）をクリックします。

### セールス

<!-- MC-42025-->

* MariaDB 10.2.34 へのアップグレード後の、大きなデータセットを含むテーブルの非同期モードでのセールスグリッド更新のパフォーマンスが向上しました。

<!-- MC-42531-->

* Adobe Commerceで、ストアフロントからHTMLタグが期待どおりに削除されるようになりました **アカウント** > **注文** > **注文を表示** ページ。 以前は、Adobe Commerceでは、ストアフロントの顧客注文コメントセクションにHTMLタグが表示されていました。

<!-- MC-42377-->

* インデックスの存在を検証する自動テストカバレッジ `sales_shipment_grid.order_id` が追加されました。

<!-- MC-43163-->

* `POST V1/orders` 呼び出しで、エラーなしで拡張機能属性を更新するようになりました。 以前は、SQL 構文エラーが発生していました。

### 検索 {#search-heading}

<!-- MC-42799-->

* 価格範囲のレイヤーナビゲーションオプションが、カスタム価格属性で期待どおりに動作するようになりました。 Adobe Commerceは、カスタム価格属性をフィルタリングする際に、価格ナビゲーションステップの設定を使用します。 以前は、Adobe Commerceでは手動での手順設定を使用していました。

<!-- MC-42545-->

* ストアフロントに、カタログ内で使用可能なカテゴリの数に関係なく、現在のカテゴリのすべてのサブカテゴリがレイヤーナビゲーションに表示されるようになりました。

<!-- MC-41706-->

* Elasticsearchカタログ検索が読み分け符号を区別しなくなりました。 以前は、アクセントのない語句の検索結果は、同じ語句にアクセントの付いた語句の検索結果とは異なっていました。

<!-- ACP2E-8-->

* 特殊文字を含む SKU 属性に対して検索の重みが正しく設定されるようになりました。

<!-- ACP2E-36-->

* `category_name` は、システムで予約されている製品属性コードに追加されました。 ユーザーが属性コードを使用して製品属性を作成しようとすると、Adobe Commerceにエラーが表示されるようになりました `category_name`. 以前は、製品が期待されたカテゴリにリストされず、Elasticsearchエラーがログに記録されていました。

<!-- ACP2E-68-->

* GraphQLの各検索クエリの後に、よく使用される検索用語が更新されるようになりました。

<!-- ACP2E-249-->

* Adobe Commerceで、Elasticsearch価格指数のマッピングに正しい価格フィールドが追加されました。 以前は、Web サイト ID ではなく、ストア ID を使用するインデックスに、間違った価格フィールドが追加されていました。

### 送料

<!-- MC-42758-->

* 出荷メールには、現在の出荷のみの追跡番号が含まれるようになりました。 以前は、1 つの注文に複数の出荷が含まれていた場合、各出荷の E メールには、その注文に関連するすべての出荷の追跡番号が含まれていました。

<!-- MC-42396-->

* Adobe Commerceは、複数配送モードで買い物客が買い物かごから製品を削除し、1 つの配送先住所に切り替えた場合に、ミニカートを正常に更新するようになりました。 以前は、製品の価格が期待どおりに更新されていませんでした。

<!-- AC-267-->

* S3 ストレージアダプタを使用する場合、テーブルレートのインポートが期待どおりに動作するようになりました。 以前は、Adobe Commerceに次のエラーが表示されていました。 `File "https://[bucket].s3.eu-central-1.amazonaws.com/[prefix]/tmp/phpLjGmHf" not found`. [GitHub-33072](https://github.com/magento/magento2/issues/33072)

<!-- MC-42577-->

* 出荷更新メールを、次の場所から期待どおりに無効にできるようになりました： **ストア**  > **設定**  >  **セールス**  >  **セールスメール**. [GitHub-33165](https://github.com/magento/magento2/issues/33165)

<!-- ACP2E-31-->

* Adobe Commerceの請求書ページの合計に、無料配送料 (0) が管理およびストアフロントの請求書ページに表示されるようになりました。 以前は、注文の送料がゼロの場合、Adobe Commerceでは請求書ページの送料合計に送料の合計が表示されませんでした。

<!-- ACP2E-120-->

* オンライン配送業者に対する料金の要求が、複数の要求から 1 つに減少しました。 商品/パッケージごとのパッケージ保険と取り扱い価格が正しく計算されるようになりました。 以前、Adobe Commerceは FedEx の送料方法に誤った送料を表示していました。

<!-- ACP2E-174-->

* Adobe Commerceで、プエルトリコからの送料の送料ラベルを作成する際に UPS 料金が表示されるようになりました。 以前は、Adobe Commerceはこれらの UPS レートを表示していませんでした。

<!-- ACP2E-227-->

* 配送先住所が、入力ボックスから取り外された後、予想どおりに完全に消去されました。 以前は、このテキストボックスは、アドレスを削除した後も 1 つ以上の文字を保持していました。

### ステージング

<!-- MC-42194  -->

* 製品スケジュール済みの更新画像とビデオが正しく保存されるようになりました。 以前は、新しくスケジュールされた更新を作成すると、ビデオ、URL、タイトルおよび説明が削除されていました。

<!-- MC-42501-->

* Adobe Commerceで、属性が有効になっているストアビューの「新規更新のスケジュール」フォームに「最小アドバタイズされた価格」属性が表示されるようになりました。

<!-- MC-42590-->

* 製品のスケジュール済み更新フォームに、期待どおりに 1 つの「画像」タブのみが表示されるようになりました。 以前は、Adobe Commerceはこのタブを複製していました。

<!-- MC-23994-->

* スケジュール更新のプレビューで、製品在庫のステータスが正しく表示されるようになりました。 以前は、スケジュール更新の作成中に以前に無効にされた製品が有効になっている場合、製品ステータスが在庫切れと表示されていました。

### ストア

<!-- MC-42884-->

* 異なる URL の複数のストアを含むデプロイメントで、顧客としてログイン機能が期待どおりに動作するようになりました。 以前は、Adobe Commerceが正しいストアドメインにアクセスする場合でも、正しいストアを読み込めませんでした。

### サイト全体分析ツール

<!-- ACP2E-240-->

* マーチャントは、サイト全体分析ツールに期待どおりにアクセスできるようになりました。 以前は、キーペアが壊れているため、一部の商人はこのツールにアクセスできませんでした。

### 税

<!-- MC-41924-->

* Adobe Commerceで、顧客が複数の住所への配送を選択した後に項目を削除した場合に、ミニ買い物かごの小計が正しく計算されるようになりました。

<!-- MC-41945-->

* Adobe Commerceで、買い物かごに仮想製品のみが含まれている場合に、すべてのチェックアウトページに同じ税率が表示されるようになりました。

<!-- AC-714-->

* 設定可能な製品の層別価格で、正確な税込み値と除外された税額がストアフロントに表示されるようになりました。 以前は、税込みと除外の両方に同じ値が表示されていました。 [GitHub-33673](https://github.com/magento/magento2/issues/33673)

### テスト

<!-- magento/magento2/pull/34798-->

* WebAPI テストは、PHP 8.1 と互換性を持つようになりました。 [GitHub-34653](https://github.com/magento/magento2/issues/34653)

<!-- magento/magento2/pull/34820-->

* 統合テストは、PHP 8.1 と互換性を持つようになりました。 [GitHub-34567](https://github.com/magento/magento2/issues/34567), [GitHub-34569](https://github.com/magento/magento2/issues/34569)

<!-- AC-1225-->

* 商人は、商人の場所ではなく、買い物客がいる国の買い物客体験をテストできるようになりました。

<!-- AC-266-->

* 統合テストのメモリ消費が削減され、テストパフォーマンスが向上し、テスト完了に要する時間が短縮されました。

<!-- MC-41955-->

* ストアフロントと管理者のカスタム日付属性形式を検証するテストが追加されました。

<!-- AC-1517-->

* 次のエラーを修正しました： `StorefrontPOWorkflowVerifyApprovalFlowTabTest`. [GitHub-34378](https://github.com/magento/magento2/issues/34378)

<!-- AC-1571-->

* PHP 8.x の互換性に関して、機能テストが安定しています。 [GitHub-34327](https://github.com/magento/magento2/issues/34327), [GitHub-34188](https://github.com/magento/magento2/issues/34188)

<!-- magento/magento2/pull/34198-->

* WebAPI テストの機能の問題を修正しました。 [GitHub-34196](https://github.com/magento/magento2/issues/34196)

<!-- AC-1207-->

* 偽陽性の静的テストを引き起こすエラーを修正しました。 [GitHub-34056](https://github.com/magento/magento2/issues/34056)

<!-- magento/magento2/pull/34300-->

* のテストカバレッジが更新されました `call_user_func_array`. [GitHub-34301](https://github.com/magento/magento2/issues/34301)

<!-- AC-1978-->

* この `Magento\GraphQl\CatalogGraphQl\ProductSearchTest` AWSElasticsearchで実行した場合、テストでこのエラーがスローされなくなりました。 `Magento\GraphQl\CatalogGraphQl\ProductSearchTest::testSearchSuggestions Failed asserting that an array is not empty. /var/www/html/dev/tests/api-functional/testsuite/Magento/GraphQl/CatalogGraphQl/ProductSearchTest.php:94 /var/www/html/dev/tests/api-functional/framework/Magento/TestFramework/TestCase/GraphQlAbstract.php:257`.

<!-- magento/magento2/pull/33699-->

* すべてのモック変数の名前を `Mock` 非推奨の Object Manager クラスへの参照をサフィックスおよび削除します。 [GitHub-33695](https://github.com/magento/magento2/issues/33695)

* この `Magento\Framework\MessageQueue\TopologyTest` のテストは、現在はAWS MQ と互換性があります。 [!DNL RabbitMQ] サービス。 以前は、このテストは次のメッセージで失敗していました。 `Invalid exchange configuration: magento-topic-based-exchange1 Failed asserting that two arrays are equal`. <!-- AC-1248-->

<!-- magento/magento2/pull/34454-->

* 単体テストは、PHP 8.1 と互換性を持つようになりました。 [GitHub-34441](https://github.com/magento/magento2/issues/34441)

#### 単体テスト

次の単体テストを使用するためにリファクタリングしました `PHPUnit` の代わりに `AspectMock`:

`AllureHelperTest` [GitHub-33294](https://github.com/magento/magento2/issues/33294)

`ObjectHandlerUtil` [GitHub-33584](https://github.com/magento/magento2/issues/33584)

`MockModuleResolverBuilder` [GitHub-33583](https://github.com/magento/magento2/issues/33583)

`MagentoTestCase`  [GitHub-33582](https://github.com/magento/magento2/issues/33582)

`ModuleResolverTest` [GitHub-33308](https://github.com/magento/magento2/issues/33308)

`ParallelGroupSorterTest` [GitHub-33306](https://github.com/magento/magento2/issues/33306)

`SuiteGeneratorTest` [GitHub-33299](https://github.com/magento/magento2/issues/33299)

`OperationDataArrayResolverTest`  [GitHub-33296](https://github.com/magento/magento2/issues/33296)

### テーマ

<!-- MC-41887-->

* Adobe Commerceのベース URL にサブパスが設定されている場合、通知メッセージが正しく表示されるようになりました。

<!-- MC-42469-->

* 追加された `aria-label` 要素をストアフロントページテンプレートに追加して、買い物客がリンクをクリックしたときに移動するページを示します。 以前は、異なるページへのリンクに同じリンクテキストが使用されていました。 [GitHub-33075](https://github.com/magento/magento2/issues/33075)

<!-- ACP2E-73-->

* 既存のカスタムテーマを使用したストアのホームページを読み込む際に、Adobe Commerceでエラーメッセージが表示されなくなりました。 以前は、Adobe Commerceに次のメッセージが表示されていました。  `The store will not work correctly in the case when cookies are disabled`.

### 翻訳とロケール

<!-- AC-285 MC-41400-->

* この `UserExpiration` バリデーターは、 `de_DE` および `uk_UA` ロケール。 以前は、ロケールがに設定された管理者が新しいユーザーを作成する際に、管理者が有効期限を設定しようとすると、Adobe Commerceでエラーが発生していました `de_DE` または `uk_UA`. [GitHub-32497](https://github.com/magento/magento2/issues/32497)

<!-- MC-41583 AC-989-->

* スイスの地域名は、アドレスの作成または編集フォームで一貫して英語で表示されるようになりました。 [GitHub-32602](https://github.com/magento/magento2/issues/32602)

<!-- magento/magento2/pull/33128-->

* 更新済み `zip_codes.xml` ガーンジーがサルク島の郵便番号 GY10 をサポートするパターン。 [GitHub-33144](https://github.com/magento/magento2/issues/33144)

<!-- AC-1080-->

* ベラルーシ地域を `directory_country_region` 表。 [GitHub-33924](https://github.com/magento/magento2/issues/33924)

<!-- AC-1178-->

* フィリピン語（フィリピン）ロケールを実行するストアフロントの表示の異常値が解決されました。 [GitHub-33996](https://github.com/magento/magento2/issues/33996)

<!-- AC-1308-->

* ポルトガル語（ポルトガル）ロケールに設定された店舗で新しいアカウントを作成する際に、顧客の生年月日を正しく入力できるようになりました。 以前は、Adobe Commerceでアカウントを作成しようとすると、エラーが発生していました。 [GitHub-34130](https://github.com/magento/magento2/issues/34130)

<!-- ACP2E-457-->

* 製品の詳細ページがアラビア語（サウジアラビア）ロケールで正常に表示されるようになりました。 以前は、このロケールにより製品の詳細ページが壊れていました。

### UI

<!-- AC-258-->

* を使用する MFTF テストでのエラーを修正しました。 `maps.googleapis.com`.

<!-- MC-41850-->

* Adobe Commerceで、「Contact Us」フォームの電子メール入力フィールドから、改行なしのスペース文字をトリミングするようになりました。 以前は、電子メールの入力から改行なしのスペース文字を削除せずにフォームを送信していたので、ログファイルにエラーが発生していました。 この **返信先** フィールドも、生成された連絡先電子メールメッセージからストア管理者へのものではありませんでした。

<!-- MC-42793-->

* Adobe Commerceでは、管理者での位置に応じて、関連製品、アップセル製品、クロスセル製品が表示されるようになりました。

<!-- MC-42502-->

* `.action-close` ボタンが次の場合に期待どおりに動作するようになりました `Multiselect` は、モーダルで使用されます。 以前は、 `action-close` ボタンは、  `.action-close` 」ボタンをクリックします。 [GitHub-27240](https://github.com/magento/magento2/issues/27240)

<!-- AC-1217-->

* オファーのリッチスニペットが、製品表示のメイン価格フィールドに表示されるようになりました。 以前は、製品表示の関連製品ブロックのこのフィールドにこのスニペットが表示されず、Googleの検索結果に誤った価格が表示されていました。 [GitHub-34063](https://github.com/magento/magento2/issues/34063)

<!-- AC-1584-->

* iOSを実行しているデバイスでのモーダル高さの問題が解決されました。 [GitHub-34467](https://github.com/magento/magento2/issues/34467)

<!-- MC-40106-->

* アクションドロップダウンメニューがストアフロント全体で正しく配置されるようになりました。 [GitHub-31379](https://github.com/magento/magento2/issues/31379)

<!-- AC-1589-->

* 買い物かごとチェックアウトページでのナビゲーションに関するアクセシビリティエラーを解決しました。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* スクリーンリーダーは、製品ページ上のすべての関連フォーム要素を読み取れるようになりました。

<!-- AC-872-->

* Storefront カタログ製品ウィジェットの並べ替え順 (**カタログ** > **カテゴリ** > **製品**) は、管理者で設定された順序に一致するようになりました。 [GitHub-27126](https://github.com/magento/magento2/issues/27126)

<!-- AC-725-->

* アカウントの作成ページで、地域セレクターが期待どおりに機能するようになりました。 [GitHub-30099](https://github.com/magento/magento2/issues/30099)

<!-- MC-42750-->

* 管理者顧客グリッドに、新しく追加された顧客データを含むすべての顧客データが表示されるようになりました `date` カスタム属性を指定します。 以前は、Adobe Commerceでエラーが発生し、管理者顧客グリッドが `date` 属性セットが列として設定されました。

<!-- AC-1280-->

* ラベルを **カタログ**  >  **製品** 入力の目的を正確に反映するように詳細ページが変更されました。 ユーザー入力が不要なフィールドには、アスタリスクが付いたラベルが表示されなくなりました。

<!-- AC-1275-->

* Tab キーを使用してリッチテキストエディターのツールバーにアクセスできるようになりました。

<!-- AC-1284-->

* コントロールのアクセス可能な名前に、ページごとの項目数のドロップダウンに表示されるラベルのテキストが含まれるようになりました。

<!-- AC-1287-->

* テーブルは、 **カタログ** > **製品** 表を折りたたむと、詳細ページにラベルとアクセシブルな名前が表示されるようになりました。

<!-- AC-1285-->

* ストアフロント全体のボタンに、一意の、わかりやすい名前が付けられるようになりました。 以前は、テキストボタンと隣接する下向き矢印アイコンボタンを持つ分割ボタンの名前が同じになっていました。

<!-- AC-1168-->

* 追加された **今日** 管理の注文件数と金額ダッシュボードのグラフにオプションを表示して、1 日を通じての販売数と注文件数の概要を表示できます。 [GitHub-34008](https://github.com/magento/magento2/issues/34008)

<!-- AC-1481-->

* 複数選択のアクティブ（クリック）状態 **閉じる** ボタンの動作に一貫性があるようになりました。 [GitHub-34338](https://github.com/magento/magento2/issues/34338)

<!-- magento/magento2/pull/31879-->

* Cookie 制限モードが無効な場合、Adobe Commerceはアップグレード後にこのメッセージを表示しなくなりました。 `The store will not work correctly in the case when cookies are disabled`. [GitHub-33811](https://github.com/magento/magento2/issues/33811)

<!-- ACP2E-7-->

* モバイルデバイスで、テーマに製品画像が正しく表示され、垂直方向のサムネールナビゲーション方向が設定されるようになりました。 以前は、モバイルデバイスのフルスクリーンモードで、画像の拡大/縮小や非表示が正しく行われず、サムネールの垂直方向のナビゲーション方向が設定されていました。

<!-- ACP2E-23-->

* 製品の詳細ページで、 **ウィジェット製品をバックエンドストレージと同期** 設定が有効になっています。

<!-- ACP2E-70-->

* 負の値の検証が **返品数量** 「新規リターンを作成」フォームのフィールド

<!-- ACP2E-105-->

* 買い物客がクリックした際に、Adobe Commerceで重複アドレスが表示されなくなりました。 **住所の変更** 」をクリックします。 **アドレス検索** 設定が有効になっています。

<!-- ACP2E-136-->

* この **製品を追加** 管理カテゴリページの store-view スコープで作業中の管理者が、制限付き権限を持つ管理者に対して、ボタンが期待どおりに有効になりました。

<!-- ACP2E-169-->

* ブレークポイントの表示がAdobe Commerce全体で一貫するようになりました。

<!-- ACP2E-199-->

* Adobe Commerceで、カスタム顧客日付属性がカスタムロケールで管理顧客ページに正しく表示されるようになりました。

<!-- MC-41760-->

* Page Builder を使用して追加された画像が、ブラウザーウィンドウの幅 768px で表示された場合に、ストアフロントで重複しなくなりました。 以前は、このブラウザーウィンドウの幅により、Adobe Commerceでは画像のモバイルバージョンとデスクトップバージョンの両方を表示することで、複製された画像がストアフロントに表示されていました。

### URL の書き換え

<!-- AC-1510-->

* の実行時に、新しいストア表示の作成中に、すべてのストア表示に対して URL の書き換えが再生成されなくなりました。 `bin/magento setup:upgrade`. [GitHub-32954](https://github.com/magento/magento2/issues/32954)

### Visual Merchandiser

<!-- ACP2E-19-->

* Visual Merchandiser **在庫から下に移動** すべてのシンプルな製品が在庫切れの場合、設定可能な製品で自動並べ替えオプションが期待どおりに動作するようになりました。

<!-- ACP2E-61-->

* 条件が追加されていない場合、ビジュアルマーチャンダイザールールは保存されなくなりました。

### Web API フレームワーク

<!-- MC-42008-->

* 永続的な買い物かごが有効な場合に、自己認証された顧客リソースに対する Web API リクエストで認証エラーが発生しなくなりました。

<!-- MC-42313-->

* 次の子クラスを使用して、オブジェクトを作成できます： `\Magento\Framework\Api\AbstractSimpleObjectBuilder` 以前は、 `preg_match` PHP 7.3 でAdobe Commerceが Redhat でホストされた際に、次の警告メッセージが表示されました。 `Warning: preg_match(): Compilation failed: unrecognized character follows...`.

<!-- MC-24548-->

* が取得した合計 `PUT /V1/guest-carts/:cartId/collect-totals` リクエストが正しい `shippingMethod`. [GitHub-18508](https://github.com/magento/magento2/issues/18508)

<!-- MC-30627 AC-796-->

* 新しいデシリアライザーを REST API に追加しても、他のデシリアライザーが削除されなくなりました。 以前は、REST API で新しいコンテンツタイプを受け入れていましたが、API 用に CORE で定義されたコンテンツタイプが機能しなくなり、400 エラーが返されていました。 [GitHub-26433](https://github.com/magento/magento2/issues/26433)

<!-- AC-698-->

* 現在は、 `webapi.xml`ファイル。 [GitHub-33843](https://github.com/magento/magento2/issues/33843)

<!-- AC-1212-->

* Adobe Commerceが `customertoken` ログインが複数回連続して失敗した後、GraphQLまたは REST API リクエストが期待どおりに送信される問題を修正しました。 以前は、Adobe Commerceは `lock_expires_at` in `oauth_token_request_log` が現在の日時より大きい場合は、常に失敗した回数を返していたので、ユーザーはログインできませんでした。 [GitHub-34067](https://github.com/magento/magento2/issues/34067)

<!-- AC-1190-->

* マスクされた引用符 ID の追加先 `QuoteRepository::getList` で無限ループが発生しなくなりました。 以前は、REST API に依存する支払い処理を使用して注文を更新すると、この動作がトリガーされていました。 [GitHub-33675](https://github.com/magento/magento2/issues/33675)

<!-- MC-41612-->

* この `/rest/all/V1/categories/<above_created_category_id>`  PUT呼び出しは、 `available_sort_by`.  以前は、「使用可能な製品リストの並べ替え基準」ドロップダウンが選択され、カテゴリページのすべてのオプションが表示されていました。 **すべてを使用** 」チェックボックスがオンになっている。 [GitHub-32596](https://github.com/magento/magento2/issues/32596)

<!-- ACP2E-11-->

* 顧客トークンを作成するための REST API リクエストのパフォーマンスが向上しました。

<!-- ACP2E-91-->

* 次の場合に発生するエラーを修正しました。 **ストアコードを URL に追加** が **はい** と REST 呼び出しにストアコードが含まれていませんでした。 ペイロードが有効であったにもかかわらず、呼び出しは次のエラーを返しました。 `Fatal error: Allowed memory size of ********** bytes exhausted (tried to allocate **** bytes) in vendor/magento/module-store/Model/StoreRepository.php on line 75`.

<!-- ACP2E-153-->

* REST API を使用して、同じオーダーの部分的な請求書を同時に作成できるようになりました。

### ウィッシュリスト

<!-- MC-41880-->

* Adobe Commerceが **サイドバーに表示** ウィッシュリストオプションは無効です。 以前は、Adobe Commerceはこのオプションを無視していました。

### WYSIWYG

<!-- ACP2E-17-->

* WYSIWYG エディターでカスタムウィジェットが正しくレンダリングされるようになりました。

## 既知の問題

**問題**:マーチャントは、Adobe Commerce 2.4.4 からAdobe Commerce 2.4.4-p1 へのアップグレード中に、パッケージバージョンのダウングレードに関する注意事項が表示される場合があります。 これらのメッセージは無視できます。 パッケージバージョンの不一致は、パッケージ生成時の異常に起因します。 影響を受ける製品機能はありません。 詳しくは、 [2.4.4 から 2.4.4-p1 にアップグレードした後にダウングレードされたパッケージ](https://support.magento.com/hc/en-us/articles/8214752983949)  ナレッジベース記事で、影響を受けるシナリオと回避策の説明を参照してください。

**問題**:商人は、Braintreeを通じてApple Pay で支払われた注文に対して、一部払い戻しを送信できません。 商人が注文請求書から一部払い戻しのクレジット・メモを作成しようとすると、 **払い戻す数量** フィールドは編集できません。  **回避策**:パッチを適用 `braintree-disabled-partial-capture-for-applepay-googlepay.patch`. 詳しくは、 [Adobe Commerce 2.4.4:部分的な請求書を作成できません](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) ナレッジベース記事。  <!-- BUNDLE-3088-->

**問題**:管理でオプションが選択されていない場合、買い物客は買い物かごに製品を追加できません **ストア** >  **設定** > **一般** > **国オプション** > **国を許可**. Adobe Commerceでは、代わりに次のコンソールエラーが表示されます。 `Failed to load resource: the server responded with a status of 400 (Bad Request)`. <!-- AC-2564-->

**問題**:Dotdigital on **パートナーと拡張機能を検索** > **Magento Marketplace** は古くなっています。 以下に、更新された説明を示します。

Dotdigital は、デジタルマーケターや開発者がカスタマージャーニーを通じてコミュニケーションを提供するのに役立つ、顧客エンゲージメントプラットフォームです。 顧客データの力を活用し、ブランドの成長と拡張に応じて、エンゲージメント、コンバージョン、ロイヤルティを強化します。 お客様は、ファーストパーティのデータをシステム間で結び付け、強力なインサイトを引き出し、予測クロスチャネルメッセージを自動化する、使いやすいプラットフォームを好んでいます。

Dotdigital 社の 350 名以上の従業員は、世界中の中堅市場企業や企業企業に対し、様々な業界に対応しています。 我々は、責任あるマーケティングを刺激し、持続可能性、プライバシー、セキュリティに取り組んでいきたいと考えています。 Dotdigital は、ISO 14001、ISO 27701、ISO 27001に認定された、世界初のカーボンニュートラルマーケティングオートメーションプラットフォームであることを誇りに思っています。

詳しくは、 [Dotdigital — マーケティングの自動化](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html) 購入情報およびダウンロード情報。

## コミュニティへの貢献

私たちは、より広いMagento Open Sourceコミュニティに感謝し、このリリースに対する彼らの貢献を認めたいと思います。

コミュニティエンジニアリングチーム [Magento寄稿者](https://magento.com/magento-contributors) は、貢献度の高い個人およびパートナーのリストを月、四半期、年別に管理しています。 寄稿者ページから、GitHub 上の結合された PR へのリンクをたどることができます。

### パートナーへの貢献

次の表に、パートナーによる貢献の概要を示します。 この表は、プル要求に貢献したパートナー、外部のプル要求番号、および関連付けられている GitHub 問題番号（使用可能な場合）を示しています。

{{$include /help/_includes/release-notes/engcomm-2-4-4-partner.md}}

### 個々の投稿者への投稿

次の表に、コミュニティメンバーからの投稿を示します。 この表は、プル要求に貢献したコミュニティメンバー、外部のプル要求番号、および関連付けられている GitHub 問題番号（使用可能な場合）を示しています。

{{$include /help/_includes/release-notes/engcomm-2-4-4-issues.md}}

### 必要システム構成

当社の技術スタックは、PHP および MySQL 上で構築されています。 詳しくは、 [必要システム構成](../../../installation/system-requirements.md).

### インストールおよびアップグレードの手順

Adobe Commerce 2.4.4 は、 [コンポーザー](../../../installation/composer.md).

## 移行ツールキット

データ移行ツールは、既存のMagento1.x のストアデータをMagento2.x に転送するのに役立ちます。このコマンドラインインターフェイスには、検証、進行状況の追跡、ログ、テストの各機能が含まれます。 インストール手順については、 [データ移行ツールのインストール](../../../tools/data-migration-tool/install.md). 詳細を調べたり、 [データ移行リポジトリ](https://github.com/magento/data-migration-tool).

この [コード移行ツールキット](https://github.com/magento-commerce/code-migration) は、既存のMagento1.x のストア拡張機能とカスタマイズをMagento2.x に転送するのに役立ちます。コマンドラインインターフェイスには、Magento1.x のモジュールとレイアウトを変換するためのスクリプトが含まれています。
