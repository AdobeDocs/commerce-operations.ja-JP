---
title: Adobe Commerce 2.4.7-beta3 リリースノート
description: 2.4.7-beta3 Adobe Commerceリリースの新機能、機能強化、バグ修正および既知の問題について説明します。
badgeCoreBeta: label="2.4.7-beta" type="informative"
exl-id: 6ceb1d6d-5076-49a1-925f-913aa3598c90
source-git-commit: 1ff39b976c0e00808fdb6ba0ad96bc27c75bf640
workflow-type: tm+mt
source-wordcount: '19282'
ht-degree: 0%

---


# Adobe Commerce 2.4.7-beta3 リリースノート

>[!IMPORTANT]
>
>ベータ版リリースには欠陥が含まれている場合があり、「現状のまま」提供され、いかなる保証も付与されません。 Adobeは、(Adobeサポートサービスまたはその他の方法で ) ベータリリースを維持、修正、更新、変更、変更またはその他のサポートする義務を負いません。 ベータリリースの正しい機能やパフォーマンス、および付属のドキュメントや資料に何らかの方法で依存しないように注意してください。 したがって、ベータリリースを使用する場合は、完全にお客様自身のリスクに従います。

Adobe Commerce 2.4.7-beta3 では、PHP 8.3 のサポートが導入されています。150 件を超える品質の修正および機能強化がおこなわれました。 Core Composer の依存関係とサードパーティライブラリが、利用可能な最新バージョンにアップグレードされました。 このリリースでは、多くのオプションを持つ複雑な製品の製品リストページを高速に読み込むなど、パフォーマンスが大幅に向上しました。

{{bics}}

## その他のリリース情報

これらの機能のコードはAdobe Commerceコアコードのリリースにバンドルされていますが、これらのプロジェクトの一部 (B2B やProgressive Web Application(PWA)Studio など ) も個別にリリースされています。 これらのプロジェクトのバグ修正は、個別のプロジェクト固有のリリース情報に記載されています。この情報は、各プロジェクトのドキュメントに記載されています。

## Adobe Commerce 2.4.7-beta3 テスト環境

Adobe Commerce 2.4.7-beta3 は、次のコンポーネントバージョンに対してテストされています。

* Chrome 118
* Composer 2.6 または PHP 8.3 と互換性のある最新バージョン
* Elasticsearch8.11 または最新の利用可能なバージョン
* MariaDB 10.6
* MySQL 8.0
* Nginx 1.24
* OpenSearch 2.12
* PHP 8.3 および 8.2
* PHPUnit 10.x
* RabbitMQ 3.13 または最新バージョン
* Redis 7.2
* Vanish 7.4.1 または最新バージョン

当社の技術スタックは、PHP および MySQL 上で構築されています。 詳しくは、 [必要システム構成](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).


## Adobe Commerce 2.4.7 のハイライト

このリリースでは、次の点に注意してください。

### セキュリティの強化

このリリースには、Adobe Commerce 2.4.6-p5、2.4.5-p7 および 2.4.4-p8 に含まれているのと同じセキュリティ修正およびプラットフォームセキュリティ改善が含まれています。 詳しくは、 [Adobeセキュリティ情報](https://helpx.adobe.com/security/products/magento/apsb24-03.html) を参照してください。

これらの問題に関する確認済みの攻撃は、現在までには発生していません。 ただし、一部の脆弱性は、顧客情報にアクセスするために悪用されたり、管理者セッションを引き継ぐ可能性があります。 これらの問題のほとんどは、攻撃者が最初に管理者へのアクセス権を取得する必要があります。 その結果、以下の取り組みに限定されない限り、管理者を保護するために必要なすべての手順を実行するように促されます。

* IP許可リストに加える
* [二段階認証](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* VPN の使用
* ではなく一意の場所の使用 `/admin`
* パスワードの衛生状態が良好

#### その他のセキュリティ強化

このリリースのセキュリティ強化により、最新のセキュリティのベストプラクティスへの準拠が改善されました。

* **生成されていないキャッシュキーの動作の変更**:

   * ブロックの非生成キャッシュキーに、自動的に生成されるキーのプレフィックスとは異なるプレフィックスが含まれるようになりました。 ( 生成されないキャッシュキーは、テンプレートディレクティブの構文または `setCacheKey` または `setData` メソッド )
   * ブロックの生成されていないキャッシュキーに、文字、数字、ハイフン (-)、アンダースコア文字 (_) のみを含める必要があるようになりました。  <!-- AC-9831 -->

* **自動生成されたクーポンコードの数に関する制限**. Commerce で、自動的に生成されるクーポンコードの数が制限されるようになりました。 デフォルトの最大値は 250,000 です。 商人は新しい **[!UICONTROL Code Quantity Limit]** 設定オプション (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Promotions]**) 多くのクーポンでシステムを圧倒する可能性を防ぐ。 <!-- AC-8753 -->

* **デフォルトの管理 URL 生成プロセスの最適化**. デフォルトの管理 URL の生成がランダム性の向上のために最適化され、生成される URL の予測性が低下しました。 <!-- AC-9028 -->

* 新しいフルページキャッシュ設定は、HTTP に関連するリスクを軽減するのに役立ちます `{BASE-URL}/page_cache/block/esi` endpoint. このエンドポイントは、コマースレイアウトハンドルとブロック構造から、無制限で動的に読み込まれたコンテンツフラグメントをサポートします。 新しい **[!UICONTROL Handles params size]** 設定では、このエンドポイントの `handles` パラメーター。API ごとに許可される最大ハンドル数を決定します。 このプロパティのデフォルト値は 100 です。 マーチャントは、この値を管理者 (**[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL System]** > **[!UICONTROL Full Page Cache]** > **[!UICONTROL Handles params size]**) をクリックします。 詳しくは、 [Vanish を使用するように Commerce アプリケーションを設定する](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cache/configure-varnish-commerce.html). <!-- AC-9113 -->

* **REST およびGraphQL API を介して送信される支払い情報のネイティブなレート制限**. REST とGraphQLを使用して送信される支払い情報に対して、マーチャントがレート制限を設定できるようになりました。 この保護の層は、カーディング攻撃の防止をサポートし、多くのクレジットカード番号を一度にテストするカーディング攻撃の量を減らす可能性があります。 これは、既存の REST エンドポイントのデフォルトの動作の変更です。 詳しくは、 [レート制限](https://developer.adobe.com/commerce/webapi/get-started/rate-limiting/).

* のデフォルトの動作 [isEmailAvailable](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/is-email-available/) GraphQLクエリと ([V1/customers/isEmailAvailable](https://adobe-commerce.redoc.ly/2.4.6-admin/tag/customersisEmailAvailable/#operation/PostV1CustomersIsEmailAvailable)) REST エンドポイントが変更されました。 デフォルトで、API は常に true を返すようになりました。 商人は元の行動を有効にすることができます。 `true` 電子メールがデータベースに存在せず、 `false` 存在する場合は。

### Platform の機能強化

このリリースのプラットフォームをアップグレードすると、最新のセキュリティのベストプラクティスへの準拠が向上します。

Adobe Commerce 2.4.7-beta3 には、次のプラットフォームアップグレードが含まれています。

* **PHP 8.3 の互換性**. このリリースでは、PHP 8.3 のサポートが導入されています。Commerce は、PHP 8.3 と 8.2 の両方をサポートするようになりました。PHP 8.2 は、2025 年 12 月のサービス終了 (EOS) 日までサポートされます。 2025 年 12 月以降、2.4.7 のデプロイメントを実行するすべての商人は、PHP 8.3 に移行する必要があります。 <!-- AC-8988 -->

Adobe Commerce 2.4.7 は、アップグレード目的でのみ、PHP 8.1 と互換性があります。 PHP 8.1 はサポートされていないので、推奨されません。 Adobe Commerce 2.4.7-beta3 コアコード、すべてのバンドルされた拡張機能、およびすべてのAdobeが所有する拡張機能と SaaS サービスは、PHP 8.3 と互換性があります。 <!-- AC-9668 -->

* **RabbitMQ 3.11 のサポート**. このリリースは、RabbitMQ 3.11 の最新バージョンと互換性があります。RabbitMQ 3.9（2023 年 8 月までサポート）との互換性は維持されますが、Adobe Commerce 2.4.7-beta3 はRabbitMQ 3.11 とのみ使用することをお勧めします。

* **Composer 2.6.x**. Composer 2.2.x との互換性が維持されます。 <!-- AC-9663 -->

* **Vanish キャッシュ 7.4 のサポート**. このリリースは、Vanish Cache 7.4 の最新バージョンと互換性があります。6.0.x および 7.2.x バージョンとの互換性は維持されますが、Vanish Cache バージョン 7.4 または 6.0 LTS でのみAdobe Commerce 2.4.7-beta3 を使用することをお勧めします。 <!-- AC-9662 -->

* **ELASTICSEARCH8.11** 互換性 <!-- AC-9661 -->

* **Redis 7.2** <!-- AC-9660 -->

* The `extjs` ライブラリはの最新バージョンに置き換えられました `jsTree`. <!-- AC-9320 -->

* `jquery/fileUpload` ライブラリが削除されました。 <!-- AC-10569 -->

Adobe Commerceコアコード内のすべての JavaScript ライブラリと NPM の依存関係が、利用可能な最新のバージョンに更新されました。 すべての Laminas ライブラリの依存関係が、PHP 8.3 と互換性のある最新バージョンに更新されました。 <!-- AC-9667 9665 -->

#### その他のアップグレード

* **1 回の注文サポートにつき複数のクーポン**. マーチャントは、新しい **[!UICONTROL Maximum number of coupons per order]** 設定オプション。 この値は、デフォルトで 1 に設定されています。 この機能の REST サポートがこのリリースに追加され、GraphQLのサポートは近日中に利用可能になります。

* UPS が UPS に対しておこなっている更新をサポートするために、Commerce UPS XML API ゲートウェイが新しい Commerce UPS REST API に移行されました。 [API セキュリティモデル](https://developer.ups.com/oauth-developer-guide). (UPS は、すべての API に対して OAuth 2.0 セキュリティモデル（bearer トークン）を実装しています。) 以前の Commerce UPS XML API はすべて、Adobe Commerce 2.4.7 コードベースから削除されました。 <!-- AC-8918 -->

* Adobe Commerceと FedEx の統合は、従来の FedEx WSDL Web Services から最新の FedEx RESTful API に移行されました。 FedEx Web Services の追跡、住所の検証、郵便番号の検証 WSDL は、2024 年 5 月に廃止されます。 <!-- AC-1470 -->

* 新しい USPS Ground Advantage 発送方法のサポートを追加しました。 これは、2023 年 7 月にリリースされた USPS の新しい出荷方法、USPS Ground Advantage との既製の統合です。 この新しい統合は、送料の取得と配信のスケジュール、および USPS 配送サービスを通じた返品に使用できます。 USPS Ground Advantage の出荷方法は、USPS Ground Advantage の出荷方法がリリースされた際に廃止された、これらの出荷方法に代わるものです。

   * USPS 小売拠点
   * ファーストクラスパッケージサービス
   * 区画選択グラウンド <!-- AC-9182 -->

* Temando 発送モジュールがコア Commerce コードベースから削除されました。 この機能は、Adobe Commerce 2.4.4 で非推奨（廃止予定）となりました。 <!-- AC-8130 -->

### パフォーマンスと拡張性の強化

Commerce 2.4.7-beta3 には、コマースのパフォーマンスと拡張性に関する次の機能強化が含まれています。

* エンタープライズマーチャントが、最大で **100 万件のアクティブなクーポンベースの買い物かごの価格ルール** Adobe Commerceでは、買い物かごやチェックアウト操作のパフォーマンスが大幅に低下することはありません。 <!-- ACPT-1198 -->

* **多くのオプションを持つ複雑な製品の製品リストページ**. 100 を超えるオプションを持つ複雑な製品を含む製品リストページの読み込み時間が改善されました。 また、製品をカテゴリ別にリストするGraphQL要求のパフォーマンスも向上しました。 <!-- ACPT-1683 -->

* **REST で JSON 形式がサポートされるようになりました。 [API を読み込み](https://developer.adobe.com/commerce/webapi/rest/modules/import/)**. 商人は 1 分あたり最大 10 万件のレコードを JSON 形式でAdobe Commerceにインポートできるようになりました。 <!-- ACPT-943 -->

* **セールス・ルールのパフォーマンスの向上**. 多数（約 10 万）のアクティブなセールス・ルールにより、企業への導入のパフォーマンスが向上しました。 プロモーションを頻繁に実装するエンタープライズデプロイメントでは、多くのアクティブな買い物かごルールがデプロイされます。 Commerce 2.4.7 を実行するこれらのタイプのエンタープライズデプロイメントでは、チェックアウト操作中に設定された買い物かご価格ルールの数に関連するパフォーマンスの低下は見られません。 <!-- ACPT-1198 -->

* **多数のストアを持つデプロイメントで、ストアレベルの構成の保存操作を高速化**. 500 を超えるストアを含むデプロイメントでの設定の保存には時間がかかる場合があります。 新しい非同期設定モジュールでは、コンシューマーを使用してメッセージキューで保存操作を処理する cron ジョブを実行することで、非同期設定の保存操作を有効にします。 AsyncConfig はデフォルトで無効になっています。

* **大規模な設定のための設定キャッシュの生成を高速化**. The `bin/magento cache:clean config` コマンドは、config キャッシュが有効な場合に、config キャッシュを事前に警告するようになりました。 これにより、大規模な設定での設定キャッシュの生成に必要なダウンタイムが短縮されます。 設定の保存操作で、 `config_scopes` キャッシュをキャッシュに書き込む前にキャッシュを作成することで、設定データの書き込み中に他のリクエストがロックアウトされる時間を短縮できます。

### GraphQL API 用アプリケーションサーバー

GraphQL API 用 Application Server を使用すると、Adobe Commerceは Commerce GraphQL API リクエスト間の状態を維持でき、ブートストラップが不要になり、すべてのGraphQL API で高いスループット、低い待ち時間、効率的なリソース使用が可能になります。 プロセス間でアプリケーション状態を共有することで、GraphQL API リクエストの効率が大幅に向上し、GraphQL API 応答の速度が平均で 30%向上します。 <!-- ACPT-27 -->

### Adobe Commerce Extension Metapackage

このリリースでは、Adobe Commerce Extension メタパッケージ v2.0.0-beta3 が導入されました。このリリースは、このコアリリースで選択されたAdobe Commerce拡張機能を自動的にバンドルします。 このメタパッケージに含まれるこれらの拡張機能のバージョンは、 `composer update` を実行すると、最新のコアリリースにアップグレードする際にこれらの拡張機能をアップグレードするプロセスが簡単になります。 これらの拡張機能は、独立したリリーススケジュールを維持します。

Adobe Commerce 2.4.7-beta3 用Adobe Commerce Extension メタパッケージには、次の拡張機能が含まれています。

* [Adobe Commerce Admin UI SDK](https://developer.adobe.com/commerce/extensibility/admin-ui-sdk/)
* [Adobe CommerceとAdobe IMSの統合](https://experienceleague.adobe.com/docs/commerce-admin/start/admin/ims/adobe-ims-integration-overview.html)
* [Adobe CommerceのAdobe I/Oイベント](https://developer.adobe.com/commerce/extensibility/events/)
* [Adobe Stock](https://experienceleague.adobe.com/docs/commerce-admin/content-design/media/adobe-stock/adobe-stock.html)
* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html)
* [支払いサービス](https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/guide-overview.html)

この拡張機能メタパッケージの今後のバージョンには、追加の拡張機能が含まれる可能性があります。

### Adobe Commerce Webhook

コマースの Web フック (v1.2.0 ) を使用すると、開発者は、Adobe Commerceイベントのトリガー時に外部システムへの呼び出しを実行する同期ロジックを設定できます。 同期呼び出しは、Commerce がサードパーティのエンドポイントを使用して注文の合計、税金、支払いなどの値を即座に計算または検証し、その結果をAdobe Commerceに書き戻す必要がある場合に必要です。

コマース Web フックは、デフォルトでインストールされるようになりました。 詳しくは、 [Adobe Commerce Webhook の概要](https://developer.adobe.com/commerce/extensibility/webhooks/)

### Adobe Stock

Adobe Stockパッケージ (`adobe-stock-integration`) は、コマース拡張機能メタパッケージ (`extensions-metapackage`) を使用して、より頻繁な更新をサポートできます。 <!-- CABPI-630 -->

### B2B

このリリースは B2B 1.4.2 でパッケージ化されています。

* **販売者が見積もりを開始しました**. B2B セールス担当者は、管理者の Quote グリッドと Customer グリッドから直接見積もりを開始できるようになりました。 詳しくは、 [見積もり依頼](https://experienceleague.adobe.com/docs/commerce-admin/b2b/quotes/quote-request.html).

* **品目割引**. 割引は、割引率、固定値、または見積内の特定の品目に対する拡張価格として適用できるようになりました。

* **見積もりに関する注記交換**. ネゴシエーション・プロセス中に、B2B の購入者と販売者は、見積書に直接メモを追加できます。 透明性を確保するために、行項目と見積もり履歴には、注記の作成と更新が含まれます。 詳しくは、 [見積もりの交渉](https://experienceleague.adobe.com/docs/commerce-admin/b2b/quotes/quote-price-negotiation.html).

* **見積もりの詳細ビューの改善**. 見積もりの詳細ページを表示している間、販売者と購入者は、SKU 別または製品カタログ別に品目を追加し、メモを追加または編集し、品目の割引を適用し、見積もりの詳細ページから直接製品設定にアクセスできます。

* REST とGraphQLの更新

   * このリリースで導入された販売者が開始した見積もり機能に対して Web API カバレッジを提供するエンドポイントが追加されました。 `POST /V1/negotiableQuote/draft`. 詳しくは、 [ネゴシエーション可能な見積もりの管理](https://developer.adobe.com/commerce/webapi/rest/b2b/negotiable-manage/).

   * 共有カタログのストアフロント機能の強化された Web API カバレッジには、カスタム価格アクションを割り当ててリセットする新しいエンドポイントが含まれます。 `POST /V1/sharedCatalog/:sharedCatalogId/assignTierPrices` および `POST /V1/sharedCatalog/:sharedCatalogId/resetTierPrices`.

コマース B2B 向けの REST およびGraphQL API の適用範囲について詳しくは、 [Commerce Web API](https://developer.adobe.com/commerce/webapi/) 開発者向けドキュメント。 詳しくは、 [B2B リリースノート](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html) バグ修正の説明を参照してください。

### Braintree

* 3DS 用のデバイスデータが検証され、[Braintree] コントロールパネルに表示されるようになりました。 The `collectDeviceData` 現在は、 `true` （内） `verifyCard` 3DS を呼び出します。 <!-- BUNDLE-3327 -->

* 管理者支払い設定ページに、リリースノートおよびBraintree拡張機能ページへのリンクが追加されました。 <!-- BUNDLE-3325 -->

* BraintreeSDK が最新バージョンに更新されました。 <!-- BUNDLE-3323 -->

### コマースとAdobe IMSの統合

Adobe IMS統合パッケージ (`adobe-commerce/adobe-ims-metapackage`) は、コマース拡張機能メタパッケージ (`extensions-metapackage`) を使用して、より頻繁な更新をサポートできます。 <!-- CABPI-630 -->

### GraphQL

Commerce 2.4.7 には、強化されたGraphQLキャッシュ機能、カスタム属性のGraphQLスキーマのサポート、ヘッドレス注文キャンセルのサポート、およびリゾルバー処理の改善が含まれています。

* **より柔軟な買い物かご管理**. The `clearCart` ミューテーションが、単一のアクションで、指定した買い物かごの内容をクリアするようになりました。 これは、 `clearCustomerCart` ミューテーション（廃止予定）。 <!-- LYNX-254 -->

* **買い物かごの変更の作成の改善**. The `createGuestCart` 非推奨（廃止予定）の `createEmptyCart` 突然変異。 以前は、 `createEmptyCart`の場合は、買い物かごがゲスト用かログイン済みの顧客用かを判断できませんでした。 <!-- LYNX-224 -->

* **注文項目に製品画像が含まれるようになりました**. `OrderItemInterface` では、画像を注文した製品に関連付けて、より効率的に読み込むことができる製品画像を表示します。  [GitHub-32369](https://github.com/magento/magento2/issues/32369) <!-- AC-7918 -->

* **リゾルバーキャッシュのサポートの拡張**. 次のGraphQLクエリリゾルバーがGraphQL Resolver Results キャッシュでキャッシュできるようになりました。これにより、クエリがPOSTリクエストと共に送信される際のパフォーマンスが向上します。

   * `Magento\CustomerGraphQl\Model\Resolver\Customer::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\CustomerAddress::resolve`
   * `Magento\CustomerGraphQl\Model\Resolver\IsSubscribed::resolve` <!-- B2B-2658 -->
   * `Magento\CatalogGraphQl\Model\Resolver\Product\MediaGallery::resolve` <!-- B2B-2677 -->

* **注文キャンセルのサポート**. The [cancelOrder](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) ミューテーションを使用すると、顧客は注文をキャンセルし、その識別子とキャンセル理由を渡すことができます。 <!-- LYNX-197 -->

   * 新しい `order_cancellation_enabled` および `order_cancellation_reasons.description` 応答フィールド ( `storeConfig`
クエリは、ユーザーが開始した注文の取り消し要求をサポートします。 詳しくは、 [ストアの注文キャンセル設定をクエリします](https://developer-stage.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/#query-a-stores-order-cancellation-configuration)

* **カスタム属性のサポートの強化**. GraphQLのカスタム属性のサポートは、すべての属性タイプをサポートするように API データを強化することで強化されました。 GraphQL EAV 属性スキーマで、管理者で顧客属性と顧客アドレスオブジェクトを拡張し、GraphQLを使用してそれらを取得できるようになりました。 機能強化の特定の領域は次のとおりです。 <!-- LYNX-61 110-->

   * 顧客や顧客の住所などの特定の領域に対するカスタム属性のサポートを拡張/追加
   * カスタム属性のキャッシュを追加しました
   * 製品の既存のカスタム属性のサポートの強化

* **GraphQLのキャッシュ機能の強化により、ページ読み込み速度が向上**. これらのクエリにキャッシュ機能が追加され、ほとんどのPWAページのページ読み込み時間が短縮されました。

   * [availableStores](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/)
   * [国](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/countries/) および [国](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/country/)
   * [storeConfig](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/)
   * [通貨](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/currency/)
   * [customAttributeMetadata](https://developer.adobe.com/commerce/webapi/graphql-api/index.html#query-customAttributeMetadata)

* **GraphQLパーサーのパフォーマンスの向上**. GraphQLパーサーのパフォーマンスが向上し、リクエストごとの parse メソッドの呼び出し回数が減少しました。 現在は 1 回呼び出されます。 以前は、パーサーが少なくとも 3 回呼び出されていました。

#### 既存の突然変異の新しいフィールド

* 追加された `quickorder_active` フィールドから [storeConfig](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) および [availableStores](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/) クエリ。 このフィールドは、クイックオーダー機能が有効になっているかどうかを示します。

* 次のフィールドを `setBillingAddressOnCart` および `setShippingAddressesOnCart` 突然変異：

   * `fax`
   * `middlename`
   * `prefix`
   * `suffix`

#### 新しいクエリと変異

* [attributeForms](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-form/) クエリ<!-- LYNX-151 -->
* [attributesList](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-list/) クエリ<!-- LYNX-150 -->
* [cancelOrder](https://developer.adobe.com/commerce/webapi/graphql/schema/orders/mutations/cancel-order/) 突然変異<!-- LYNX-172 -->
* `clearCart` 突然変異 <!-- LYNX-254 -->
* `createGuestCart` 突然変異
* [customAttributeMetadataV2](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata-v2/) クエリ

#### 非推奨（廃止予定）のクエリと突然変異

* `clearCustomerCart` 突然変異<!-- LYNX-254 -->
* [createEmptyCart](https://developer.adobe.com/commerce/webapi/graphql/schema/cart/mutations/create-empty-cart/) 突然変異<!-- LYNX-224 -->
* [attributesMetadata](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-metadata/) クエリ
* [customAttributeMetadata](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata/) クエリ

### Inventory management

Inventory management(v1.2.7-beta3) は、製品在庫を管理するツールを提供します。 このコミュニティが開発した機能は、Adobe CommerceとMagento Open Sourceのコアコードにバンドルされています。

### 支払い

* GraphQLは、Venmo を除くすべての支払い方法のコア操作に対してサポートを追加しました。 支払いサービスの新しいGraphQLエンドポイントについては、 [チェックアウト](https://developer.adobe.com/commerce/webapi/graphql/schema/checkout/). <!-- BUNDLE-3326 -->

* Venmo を除くすべての支払い方法で、クレジットカードの保管機能が強化されました。 買い物客は、ACH の支払いをヴォールティングまたは保存し、アカウントページで表示または削除できるようになりました。 マーチャントは、管理者から ACH Vault に登録された支払いを有効または無効にできます。 <!-- BUNDLE-3324 -->

* チェックアウトワークフローに、PayPal、Google Pay、Apple Pay を提供する高速支払いセクションが含まれるようになりました **[!UICONTROL Express]** ボタン。 <!-- BUNDLE-3322 -->

[支払いオプション](https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/payments-checkout/payments-options.html) は、サポートされる支払い方法を紹介します。

### PWA Studio

PWA Studiov.13.3.x はAdobe Commerce 2.4.7-beta3 と互換性があります。 アクセシビリティを向上させるための複数の機能強化が含まれています。 バグ修正について詳しくは、 [PWA Studioリリース](https://github.com/magento/pwa-studio/releases). 詳しくは、 [バージョンの互換性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) を参照してください。

### Web API フレームワーク

**買い物かごあたりの複数のクーポンの使用**

新しい REST エンドポイントは、買い物かごに関連付けられた複数のクーポンの表示、追加および削除をサポートします。 <!-- LYNX-208 -->

買い物かごに関連付けられているすべてのクーポンコードを返します。

`GET  /rest/default/V2/carts/{cartId}/coupons`
`GET  /rest/default/V2/carts/mine/coupons`

買い物かごへのクーポンコードの追加：

`POST /rest/default/V2/carts/{cartId}/coupons/{couponCode}`
`POST /rest/default/V2/carts/mine/coupons/{couponCode}`
`POST /rest/default/V2/negotiable-carts/{cartId}/coupons/{couponCode}`

買い物かごから 1 つのクーポンコードを削除します。

`DEL  /rest/default/V2/carts/{cartId}/coupons`
`DEL  /rest/default/V2/carts/mine/coupons`
`DEL  /rest/default/V2/negotiable-carts/{cartId}/coupons`

買い物かごから複数のクーポンコードを削除します。

`DEL /rest/default/V2/carts/{cartId}/coupons/{couponCode}`
`DEL /rest/default/V2/carts/mine/coupons/{couponCode}`
`DEL /rest/default/V2/negotiable-carts/{cartId}/coupons/{couponCode}`

**その他のエンドポイント**
このリリースでは、REST API での制限の回避策を提供する 2 つの新しい REST エンドポイントが導入されました `GET` および `POST V1/products/attributes` エンドポイント。 これらのエンドポイントは、 `is_filterable` 両方の属性 `Filterable(with results)` および `Filterable(no results)` オプション **[!UICONTROL Use in Layered Navigation]** オプション。 ( `is_filterable` 属性プロパティのタイプはです `Boolean`（このプロパティをに設定することはできません）。 `Filterable(no results)`.)

回避策として、2 つの新しい REST エンドポイントが実装されました。

* `PUT /V1/products/attributes/{attributeCode}/is-filterable/{isFilterable}`. パスパラメーター： `attributeCode` (`String`) および `isFilterable` (`int` 値： 0 はいいえ、1 はいいえ `Filterable (with results)`; 2 は `Filterable (no results)`) をクリックします。
* `GET /V1/products/attributes/{attributeCode}/is-filterable`. パスパラメーター： `attributeCode` (`String`) をクリックします。<!-- ACP2E-2275 -->

## 修正された問題

Adobe Commerce 2.4.7-beta3 コアコードでの数百の問題を修正しました。 このリリースに含まれる修正された問題のサブセットを以下で説明します。 以前の Commerce 2.4.7-beta に含まれていた修正点についても説明します。

### インストール、アップグレード、導入

<!-- AC-10396 -->

* 不要なキャッシュ操作が設定プロセスから削除されました。 以前は、Commerce は、次の場合に不必要にディスクに設定を書き込んでいました。 `bin/magento setup:db-data:upgrade` または `bin/magento setup:upgrade` が実行され、セットアップ中に som モジュールに問題が発生していました。 [GitHub-38124](https://github.com/magento/magento2/issues/38124)

<!-- ACP2E-1675 -->

* メモリ不足と大きなテーブルに起因するデプロイメントの問題が解決されました。 The `bin/magento  setup:upgrade` 大きな MySQL テーブルに関連するメモリを超えたエラーが原因で、コマンドが失敗しなくなりました。

<!-- ACP2E-2198 -->

* `bin/magento setup:install` 次の日を過ぎると正常に完了する `app/etc/config.php` は削除されました。 以前は、インストール中に見つからないファイルが再生成されず、Commerce がエラーをスローしていました。 [GitHub-37805](https://github.com/magento/magento2/issues/37805)

<!-- AC-8381 -->

* `bin/magento setup:upgrade` テーブルと関連付けられたテーブルの両方をインストールする新しいモジュールをインストールする際に、正常に実行するようにリファクタリングされました。 `mview` インデクサー。 [GitHub-37304](https://github.com/magento/magento2/issues/37304)

<!-- ACP2E-1882 -->

* 区切り文字エラーにより、データベースの復元が失敗しなくなりました。 以前は、Commerce がこのエラーをスローしていたのは、 `bin/magento setup:rollback --db` 実行済み： `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1505 -->

* The `bin/magento setup:upgrade` コマンドが次のタイプの MySQL メモリ制限関連エラーで失敗しなくなりました。 `PHP Fatal error:  Allowed memory size of 4294967296 bytes exhausted (tried to allocate 20480 bytes)`. 複数選択の属性の移行が最適化され、次の期間中にメモリを消費しなくなりました。 `setup:upgrade`.

<!-- ACP2E-1751 -->

* 管理者とコマンドラインの両方で、データベースバックアップの生成が期待どおりに動作するようになりました。 以前は、Adobe Commerceが次のエラーをスローしていました。 `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1604 -->

* 実行中 `setup:config:set` 特定せずに `--lock-db-prefix` パラメーターで、現在の値が `env.php` ファイル。

<!-- ACP2E-1498 -->

* Vanish の設定が更新され、ゲストユーザーが他の顧客グループに関連するキャッシュ済みコンテンツにアクセスできなくなりました。

<!-- AC-7113 -->

* 買い物客は、分割データベースを実装するデプロイメントに、 **[!UICONTROL Checkout Async]** が有効になっている。 以前は、Adobe Commerceが次のエラーをスローしていました。 `An error occurred on the server. Please try to place the order again`.

<!-- https://github.com/magento/magento2/pull/33092 -->

* `bin/magento setup:upgrade` テーブルと関連付けられたテーブルの両方をインストールする新しいモジュールをインストールすると、が正常に完了するようになりました。 `mview` インデクサー。

<!-- ENGCOM-9243 -->

* `bin/magento setup:upgrade` メッセージキューのトピックにトピック名が含まれていない場合に、より有益なエラーメッセージを表示するようになりました。 [GitHub-34246](https://github.com/magento/magento2/issues/34246)

<!-- https://github.com/magento/magento2/pull/36239 -->

* `bin/magento setup:upgrade` 結合された XML ファイルが無効な場合に、より有益なエラーメッセージが表示されるようになりました。 エラーメッセージにファイル名が含まれるようになりました。

### 管理 UI

<!-- AC-9632 -->

* 顧客グリッドの管理に関する表示の問題を修正しました。 以前は、表示されるページ内にグリッド列が完全に含まれていませんでした。

<!-- AC-2916 -->

* 管理静的グリッドの行に、ホバー時の色が期待どおりに適用されるようになりました。 [GitHub-35358](https://github.com/magento/magento2/issues/35358)

<!-- AC-7551 -->

* チェックアウトワークフローで、空白のない買い物客がギリシャの郵便番号を入力した場合に警告が表示されなくなりました。 [GitHub-36676](https://github.com/magento/magento2/issues/36676)

<!-- AC-9357 -->

* 管理者 `It's time to change your password` リンクは、管理者パスワードを変更ページに期待どおりにリダイレクトされるようになりました。 [GitHub-37902](https://github.com/magento/magento2/issues/37902)

<!-- ACP2E-2460 -->

* サブメニューのタイトルに、ユーザーに割り当てられているアクセスレベルに関係なく、すべての兄弟が表示されるようになりました。 以前は、サブメニューに複数の兄弟グループが存在している場合でも、この情報はアクセス権が制限された管理者ユーザーに対して非表示になっていました。

<!-- AC-9164 -->

* ページタイトルのサフィックスが `title` タグと `meta title` タグを使用して、製品ページに貼り付けます。 [GitHub-37680](https://github.com/magento/magento2/issues/37680)

<!-- ACP2E-2023 -->

* 製品の在庫ステータス条件が、関連する製品ルールに正しく適用されるようになりました。

<!-- ACP2E-2083 -->

* The **[!UICONTROL Login as Customer]** ボタンがモバイルデバイスに正しく表示されるようになりました。

<!-- ACP2E-2146 -->

* Adobe Commerceに管理者が表示されなくなりました **[!UICONTROL Add new customer group]** ボタンをクリックします。

<!-- ACP2E-2286 -->

* 権限が制限された管理者ユーザーは、親製品が別のスコープに割り当てられた子製品を保存できるようになりました。 以前は、Commerce は、子製品が変更された範囲に割り当てられていない親製品のキャッシュを無効にしていました。

<!-- ACP2E-2042 -->

* 管理者ユーザーは、表示データが破損したり失われたりせずに、管理者フィルター表示を正常に切り替えることができるようになりました。 [GitHub-37529](https://github.com/magento/magento2/issues/37529)

<!-- ACP2E-2068 -->

* アーカイブされた注文グリッドが、期待どおりに新しい注文ステータスで非同期的に更新されるようになりました。 アーカイブ・グリッド内の注文ステータスを更新するイベント・ベースのアプローチにより、クレジット後のメモ払い戻しを含む注文ステータスが正確になります。

<!-- ACP2E-2049 -->

* 管理グリッドアクションドロップダウンメニューが、選択したリンクの上に期待どおりにマウスポインターを置くことができるようになりました。 **[!UICONTROL Content]** > **[!UICONTROL Pages]** （および B2B モジュール内の共有カタログ）。 以前は、このメニューはほとんど非表示で、管理者ユーザーはスクロールしてオプションを表示する必要がありました。 [GitHub-36710](https://github.com/magento/magento2/issues/36710)

### Analytics

<!-- ACP2E-2266 -->

* 製品の詳細ページ `meta itemprop="image"` および `meta itemprop="description"` プロパティがメイン製品画像で使用できるようになりました。 [GitHub-37497](https://github.com/magento/magento2/issues/37497)

<!-- ACP2E-2314 -->

* 買い物かご内の製品グリッドの「レポート」セクションに、 **[!UICONTROL Catalog Price Scope]** が **[!UICONTROL Website]**. 以前は、製品がデフォルトの Web サイト以外の Web サイトに割り当てられた場合、製品価格は 0 と表示されていました。

<!-- AC-9275 -->

* Google Analytics(GA4) ポータルで、売上高レポートが期待どおりに表示されるようになりました。 [GitHub-37605](https://github.com/magento/magento2/issues/37605)

<!-- ACP2E-1880 -->

* `price` および `quantity` Google Tag Manager データレイヤーの値が、Google Analyticsに期待どおりに数値として送信されるようになりました。 以前は、これらの値は文字列として送信されていました。

<!-- ACP2E-2030 -->

* デプロイメントデータをNew Relicモジュールに送信する際のヘッダーデータ処理のエラーが解決されました。

<!-- ACP2E-1833 -->

* Google Analytics4 のタグが無効になった場合、Google Analytics3 のタグが期待どおりにトリガーされるようになりました。

### バナー

<!-- ACP2E-1818 -->

* バナーコンテンツの読み込み方法をリファクタリングして、過度のデータベースクエリを削除し、買い物かごの読み込み時間を改善しました。

### 製品のバンドル

<!-- ACP2E-1464 -->

* 製品のカテゴリ数は、 **[!UICONTROL Display Out Of Stock*]** が有効になっている。

<!-- AC-8966 -->

* The `customerCart` クエリで、バンドル製品に適用されたすべての割引が期待どおりに返されるようになりました。 以前は、バンドル製品に適用された合計割引がゼロとして返されていました。

<!-- ACP2E-2618 -->

* 100%の割引が適用されたバンドル製品の正しい価格が製品の詳細ページに表示されるようになりました。 以前は、Commerce は製品価格のバンドルに 100%の割引を適用していませんでした。

<!-- ACP2E-2377 -->

* 買い物かごの価格ルールが、動的な価格のバンドルされた製品の各子製品にではなく、製品バンドルに適用されるようになりました。

<!-- ACP2E-1650 -->

* を使用して `POST V1/shipment` エンドポイント：バンドル製品を含む出荷を作成します。 エンドポイントで項目が期待どおりに追加され、次のエラーが返されなくなりました。 `The shipment couldn't be saved`.

<!-- ACP2E-1926 -->

* 無期限にスケジュールされた更新を含むシンプルな製品を含む、バンドル製品のスケジュールされた更新を保存できるようになりました。 バンドル製品のスナップショットが作成されると、リンクされた製品は ID、エンティティ ID、SKU でも取得されるようになります。 以前は、バンドル製品のスケジュール済み更新が、現在のシンプル製品のバージョンではなく、保存されたときに、シンプル製品の元のバージョンがチェックされていました。

<!-- ACP2E-1650 -->

* これで、 `GET V1/shipment/` 製品に **[!UICONTROL together]** 出荷タイプが設定されました。 バンドル製品も、出荷タイプのプロパティに基づいて検証されるようになりました。

<!-- ACP2E-2038 -->

* 買い物客が店頭の買い物かごにあるバンドル製品の数量を編集できるようになりました。 以前は、Adobe Commerceは `ItemId` ストアフロントの買い物かごで製品が編集され、エラーが表示されたとき。 [GitHub-37696](https://github.com/magento/magento2/issues/37696)

<!-- ACP2E-1801 -->

* スラッシュ (`/`) 文字を使用します。 以前は、管理者ユーザーはこの方法を使用して製品を管理者の注文に追加できず、Commerce は JavaScript エラーをスローしていました。

<!-- ACP2E-1799 -->

* 管理者ユーザーは、新しく追加されたバンドルオプションの 10 進数のデフォルト値を、 **[!UICONTROL Qty Uses Decimal]** 対応するシンプルな製品に対してが有効になっています。 以前は、小数値は保存済みの選択項目に対してのみ設定できました。

<!-- ACP2E-1347 -->

* 多数のオプションを含む、バンドル製品の保存に最適化されたパフォーマンス

<!-- ACP2E-1478 -->

* 製品オプションで SKU を重複させずに、バンドル製品が正常に読み込まれるようになりました。 以前は、Adobe Commerceで、重複したエントリを持つバンドル製品を読み込むと、製品オプションに複数の重複 SKU が作成されていました。

<!-- ACP2E-1388 -->

* バンドル内の製品の 1 つが在庫切れの場合に、バンドル製品の価格が正しく計算されるようになりました。 以前は、バンドルの一部であった製品が在庫切れの場合、価格の計算から削除されていました。

<!-- ACP2E-1503 -->

* 必要な子製品の最後の購入時に、バンドル製品が在庫切れと表示されるようになりました。 以前は、単純な製品が在庫切れの場合、バンドル製品は在庫内として店頭に表示されていました。

<!-- ACP2E-1443 -->

* 不要なオプションを含むバンドル製品を、 `addBundleProductsToCart` 突然変異が解決された。

<!-- ACP2E-1264 -->

* The `categoryList` クエリで、 **[!UICONTROL Show out-of-stock products]** 設定が有効になっています。 以前は、在庫切れのオプションはクエリ応答に含まれていませんでした。

<!-- ACP2E-1345 -->

* で作成された製品をバンドル `POST V1/products` カタログ価格の範囲がに設定されている場合に成功するようになりました。 `website`. 以前は、整合性制約違反が発生していました。 [GitHub-35595](https://github.com/magento/magento2/issues/35595)

### キャッシュ

<!-- ACP2E-2070 -->

* ログイン後のキャッシュ cookie が、Web サイトを参照した後も同じになりました。 以前は、ログインコントローラーが誤ったキャッシュ cookie を送信していたので、ページが複数回キャッシュされていた可能性がありました。

<!-- ACP2E-1840 -->

* CMS ブロックを含む CMS ページでのGraphQLGET操作からの応答が、Fastly キャッシュで期待どおりにクリアされるようになりました。 以降のスケジュール更新で、正確なが表示されるようになりました。これらのページのコンテンツを更新します。

<!-- ACP2E-1524 -->

* 親製品の子製品の 1 つが管理者から保存されたときに、その親製品のページキャッシュが期待どおりにクリアされるようになりました。 他の製品タイプと同様に、設定可能なバリアントのキャッシュの無効化に到達するために、プラグインチェックが導入されました。インデクサーの状態（スケジュール設定またはリアルタイム）に関係ありません。 以前は、設定可能なバリエーションが管理者から更新された後、ストアフロントで価格が正しく更新されませんでした。

<!-- ACP2E-1454 -->

* AWS資格情報のキャッシュメカニズムが追加されました。 資格情報プロバイダーは、Magentoキャッシュを使用して、EC2 構成用にAWSから取得した資格情報をキャッシュするようになりました。

<!-- AC-7639 -->

* 設定可能な製品に関連付けられたシンプルな製品が保存された際に、設定可能なキャッシュタグを追加することを目的とするプラグインが、期待どおりに動作するようになりました。 シンプルな製品が次の方法で更新されると、関連する設定可能なキャッシュタグがすべて期待どおりに削除されます。 `POST V1/products`. 以前は、すべての価格が店頭で更新されたわけではなく、キャッシュを手動でクリアする必要がありました。 [GitHub-36726](https://github.com/magento/magento2/issues/36726)

### 買い物かごとチェックアウト

<!-- ACP2E-2658 -->

* Commerce で、永続的な買い物かごが有効な場合に、製品の詳細ページ (PDP) や CMS ページなどの完全なページキャッシュ可能なページを生成する際に、ユーザー固有の見積もりデータを読み込まないことで、パフォーマンスを最適化しました。 以前は、システムは、これらのページの生成中に、ユーザー固有のセッションと見積もりデータを不必要に読み込んでいたため、パフォーマンスに影響を与えていました。

<!-- ACP2E-2684 -->

* カスタムアドレスのカスタム属性が、期待どおりにデータベースに保存されるようになりました。 以前は、データベースに保存された属性値の前に属性コードが付いていました。

<!-- ACP2E-2517 -->

* 製品属性の買い物かごルールフィルターテキストの生成が改善されました。 個々の製品が複数回読み込まれなくなりました。

<!-- AC-8920 -->

* Adobe Commerceは、チェックアウト中にエラーが発生した場合に情報のエラーメッセージを表示し、買い物客が以前のチェックアウトステップに戻らなくなりました。 以前は、買い物客は配送先ページに戻っていました。

<!-- ACP2E-2520 -->

* The `cart` 仮想買い物かごの発送方法と住所がクエリによって返されなくなりました。 以前は、買い物かごに物理製品と仮想製品の両方が含まれ、すべての物理製品が削除された場合、買い物かごのクエリの応答には配送先情報が含まれ続けていました。

<!-- ACP2E-2267 -->

* Commerce で、買い物かごへの追加アクションがトリガーされた場合に、情報メッセージが表示されるようになりました。 以前は、 `The requested qty is not available` 必要に応じてストアフロントに表示されない場合がありました。

<!-- ACP2E-2166 -->

* 大きなアドレス帳を持つお客様の場合、チェックアウトページの読み込み時間が改善されました。 Commerce は、 **[!UICONTROL Customer Addresses Limit]** 設定。 以前は、Commerce はアドレス帳全体を読み込んでいました。

<!-- ACP2E-2174 -->

* 1 つの品目が在庫切れの場合、在庫品目に対して期待どおりに買い物かごの製品数量を変更できるようになりました。 以前は、在庫切れの場合、買い物客はどの品目の製品数も変更できませんでした。

<!-- ACP2E-2269 -->

* The `AdvancedSalesRule` 製品属性フィルターが decimal 属性バックエンドタイプで正しく機能するようになりました。 その結果、買い物かごのルールは `Coupon Type` に設定 **[!UICONTROL No Coupon]** 現在は、期待どおりに動作します。

<!-- ACP2E-2376 -->

* 買い物かご全体の割引額が、バンドル製品と設定可能な製品の両方を含む買い物かごに期待どおりに適用されるようになりました。

<!-- ACP2E-2092 -->

* 顧客セクションの cookie が cookie のドメイン設定を遵守するようになりました。 以前は、セッションが共有されていたにもかかわらず、サブドメインを含むストアで期待どおりにミニ買い物かごが更新されていませんでした。

<!-- AC-9340 -->

* 複数のアドレスへの注文の送付で、地域 ID の処理中にエラーがトリガーされることはなくなりました。

<!-- AC-8853 -->

* 買い物かごレベルで適用される固定割引額が正しくなりました。[GitHub-37496](https://github.com/magento/magento2/issues/37496)

<!-- AC-2044 -->

* 配送方法を条件として設定した買い物かごの価格ルールが適用される定額配送方法を選択した後、買い物客がクーポンを適用した場合、クーポンが注文に正常に適用されるようになりました。 以前は、「クーポンが無効です」というエラーが表示された買い物かごページがあり、クーポンは適用されませんでした。 [GitHub-34866](https://github.com/magento/magento2/issues/34866)

<!-- AC-8596 -->

* The **[!UICONTROL My billing and shipping address are the same]** 買い物客が Chrome オートコンプリートを使用して配送先住所を入力し、次に「 」をクリックする場合、チェックボックスがデフォルトでオンのままになるようになりました。 **次へ** 発送方法ブロックを再読み込みする前に、次の手順を実行します。 [GitHub-33725](https://github.com/magento/magento2/issues/33725)

<!-- ACP2E-2005 -->

* The `applied_rule_ids` 値を `quote_item` 表に、適用されたルール ID の正しいリストが含まれるようになりました。 以前は、この値には最後に適用されたルール ID のみが含まれていました。

<!-- ACP2E-2025 -->

* ローカルストレージのミニカートと顧客データが、セッションがサーバーから削除されるとリセットされるようになりました。 以前は、このデータは、セッションファイルが削除されたときに表示されていました。

<!-- ACP2E-1763 -->

* 永続的な買い物かごが有効な場合に、個別の買い物かごが誤って管理者からマージされることはなくなりました。

<!-- ACP2E-1988 -->

* チェックアウト出荷ステップのデフォルトの出荷先住所には、以前に選択した受け取り先住所が設定されなくなりました。

<!-- ACP2E-1614 -->

* キャッシュがフラッシュされた後、買い物かご内の製品が関連製品リストやアップセル製品リストから除外されなくなりました。

<!-- ACP2E-1580 -->

* 買い物かごの税金および送料見積もりに、デフォルトの宛先設定が正確に反映されるようになりました。 以前は、デフォルトの税金宛先の計算設定を構成し、「都道府県/地域」と「郵便番号」を指定した場合、郵便番号の値のみが買い物かごの **[!UICONTROL Estimate Tax and Shipping]**. これは、Adobe Commerceが、管理者からデフォルトの地域 ID を設定する条件文を呼び出す前に、地域 ID を undefined に設定していたためです。

<!-- ACP2E-1547 -->

* 永続的な買い物かごが有効な場合、Adobe Commerceがチェックアウト中にこのエラーをスローしなくなりました。 `Invalid state change requested`. 以前は、このエラーがスローされると、同じ `quote_id` 時々作成されました。

<!-- ACP2E-1456 -->

* ミニ買い物かごに、買い物かごの税金設定を反映したバンドル製品価格が表示されるようになりました。 以前は、ミニカートには常にバンドル製品の価格に税が含まれていました。

<!-- ACP2E-1414 -->

* アクティブな買い物かごに依存する顧客セグメントルールのパフォーマンスが向上し、買い物かごへの製品の追加に要する時間が短縮されました。

<!-- AC-7503 -->

* これで、買い物かごページから提供された送料の推定が正確になりました。 `collectShippingRates` が 1 回のみ設定されるようになりました。 以前は、送料の見積もりが複製されていました。 [GitHub-36648](https://github.com/magento/magento2/issues/36648)

<!-- ACP2E-1417 -->

* The `cart` 指定した買い物かご内の製品が在庫切れの場合に、クエリがエラーを返さなくなりました。 以前は、このクエリを使用して購入する買い物客は、品目が在庫切れで、チェックアウトページが空白の場合に、購入を完了できませんでした。

<!-- ACP2E-1459 -->

* へのゲスト API リクエスト `POST V1/guest-carts/<cartId>/shipping-information` もはや～を返さない `cancel` モバイル環境でのログイン中にページがリロードされた場合のステータス。 以前は、Adobe Commerceで 500 エラーがスローされ、この例外が記録されていました。 `TypeError: Argument 2 passed to Magento\CustomerCustomAttributes\Model\Plugin\ProcessCustomerShippingAddressCustomAttributes::beforeSaveAddressInformation() must be of the type string, null given`.

<!-- AC-7886 -->

* 無料配送の適格要件は、 **[!UICONTROL Subtotal (Excl. Tax)]** 条件が適用されます。 [GitHub-36760](https://github.com/magento/magento2/issues/36760)

<!-- AC-6672 -->

* The `cart` クエリが製品の正しい階層の価格を返すようになりました。 [GitHub-29655](https://github.com/magento/magento2/issues/29655)

<!-- ACP2E-1162 -->

* 購入者を導くために、チェックアウトページに情報のエラーメッセージが追加され、出荷ページでのクーポンの申し込みが、選択した発送方法と競合する場合に役立つようになりました。 以前は、メッセージが買い物客に前のページに戻るように伝えていました。

<!-- ENGCOM-8387 -->

* ゲストによるチェックアウトが有効になっている場合ではなく、必要な場合にのみ認証ポップアップが初期化されるようになりました。 ゲスト買い物客がチェックアウトに進もうとすると、ゲストのチェックアウトが無効になると、これが初期化されます。 [GitHub-30672](https://github.com/magento/magento2/issues/30672)

### 買い物かごの価格ルール

<!-- AC-2054 -->

* 買い物かご価格ルールの製品のサブ選択条件に、 `total (incl.tax)` オプションが期待どおりに表示されます。 [GitHub-34871](https://github.com/magento/magento2/issues/34871)

<!-- ACP2E-2029 -->

* The `If an item is FOUND/NOT FOUND in the cart with ALL/ANY of these conditions true` カタログ価格ルール条件がカテゴリ属性と SKU 属性で正しく機能するようになりました。 以前は、この条件は買い物かごの価格クーポンロジックで正しく適用されず、無効なクーポンが注文に適用されていました。 [GitHub-37660](https://github.com/magento/magento2/issues/37660)

<!-- ACP2E-1932 -->

* これで、 `Magento_OfflineShipping` 拡張機能が無効です。 以前は、Adobe Commerceが次のエラーをスローしていました。 `report.ERROR: Warning: Undefined array key "simple_free_shipping"`. [GitHub-37580](https://github.com/magento/magento2/issues/37580)

<!-- ACP2E-1516 -->

* ある発送方法に関連する買い物かごの価格ルールを店舗に対して設定し、この発送方法をチェックアウト時に別の方法に変更すると、買い物かごの価格ルールが期待どおりに適用されるようになりました。 以前は、 `applied_rule_ids` 値は `sales_order_item` 表、および買い物かごの価格ルールが注文に適用されていませんでした。

### カタログ

<!-- ACP2E-2257 -->

* マーチャントは、製品カルーセルを使用して CMS ブロックを作成できるようになりました。 `catalog_product_price dimensions-mode` が `website`. 以前は、Commerce はブロックを保存せず、次の SLQ エラーをスローしていました。 `report.CRITICAL: PDOException: SQLSTATE[42S02]: Base table or view not found: 1146 Table`.

<!-- AC-6847 -->

* 商品の詳細ページで商品の色が変更された際に、コマースで重複した画像が表示されなくなりました。  [GitHub-36243](https://github.com/magento/magento2/issues/36243)

<!-- ACP2E-2504 -->

* 大規模なマルチストア環境で新しいストアを追加した後、または既存の値を変更した後に、Web サイト固有の値を同期するアルゴリズムを最適化しました。

<!-- ACP2E-2631 -->

* キャッシュされた画像ファイルのクリーンアッププロセスが改善され、 `pub/media/catalog/product` フォルダー。 以前は、隠しディレクトリを使用すると、クリーンアップ操作中にディスク領域の問題が発生していました。 操作を終了できました。削除されなかった一時的な非表示ディレクトリが残ります。

<!-- AC-10316 -->

* バンドル製品価格が正しく計算され、価格の計算時の操作順序に関する問題が解決されました。 [GitHub-35665](https://github.com/magento/magento2/issues/35665)

<!-- AC-6996 -->

* 不要な句が次の場所から削除されました： `catalog_product_price` インデックスクエリ。大きなカタログを持つストアに対するこのインデクサーのパフォーマンスが向上しました。 [GitHub-32382](https://github.com/magento/magento2/issues/32382)

<!-- ACP2E-2522 -->

* Commerce が製品の詳細ページに製品の説明テキストを挿入しなくなりました。 **[!UICONTROL Meta Description]** フィールド（このフィールドが空のままの場合）。 以前は、HTMLの説明に PageBuilder や他の製品エディターで生成されたHTMLコードが含まれていた場合、そのHTMLが Meta に表示されていました **[!UICONTROL Description]** フィールドに値を入力し、このフィールドを空のままにすることはできません。

<!-- ACP2E-2308 -->

* 構成可能な製品 PDP ページで構成可能な製品オプションが、ページ上の他の構成可能な製品オプションの影響を受けなくなりました。 以前は、製品の詳細ページに製品カルーセルが表示されている場合に、ドロップダウン属性を持つ設定可能な製品がトリガーされなくなりました。 スウォッチオプションを持つ他の設定可能な製品がページに存在する場合、設定可能な製品オプションは選択できませんでした。

<!-- ACP2E-2260 -->

* 最近閲覧した製品情報が、ストア表示設定に従って表示されるようになりました。 以前は、名前や優先言語を含む、ストア表示ごとに最近表示された製品データは更新されませんでした。

<!-- ACP2E-2296 -->

* Chromium ベースの Web ブラウザーのモバイルビューの製品ページで、Vimeo ビデオが期待どおりに再生されるようになりました。

<!-- ACP2E-1959 -->

* The `bin/magento catalog:images:resize` コマンドを使用すると、カスタムテーマを持つカスタム web サイトに割り当てられた製品の製品画像が正しく生成されるようになりました。

<!-- ACP2E-1982 -->

* でのメタデータ `NULL` または `NOT NULL` デフォルトのストアの値は、 **デフォルト値を使用** チェックボックスが期待どおりに表示されます。 以前は、 `NULL` このチェックボックスがオフの場合、値は保存されませんでした。

<!-- ACP2E-2093 -->

* 商人は、製品の詳細ページから既存の画像を正常に削除し、同じ名前の新しい画像をアップロードできるようになりました。 以前は、ストアフロントの製品ページに正しい画像が表示されていませんでした。

<!-- ACP2E-2128 -->

* The `productDetail` 製品画像の場合に、クエリが null ではなく製品名を返すようになりました。 `alt` 属性が空に設定されている。

<!-- ACP2E-2215 -->

* ダウンロード可能な製品と物理的な製品の両方を含む注文に、注文が完了し次第、ダウンロード可能な製品への作業リンクが含まれるようになりました。 以前は、ダウンロード可能な製品へのリンクは、同じ注文で出荷されるまで使用できませんでした。

<!-- ACP2E-2343 -->

* あるストア/ルートカテゴリから別のストア/ルートカテゴリにカテゴリが移動された場合に、URL の書き換えが更新されるようになりました。 サブカテゴリが新しい親カテゴリに転送されると、古いデータベースエントリが削除されるようになりました。 データベースに関連するエントリのみが含まれるようになりました。 以前は、 `url_path` が適切なストア ID で更新されませんでした。

<!-- ACP2E-2152 -->

* 残りの `V1/products/<sku>/media` エンドポイントで、複数のメディア画像の同時アップロードを処理できるようになりました。 以前は、複数のリクエストを同時に処理する際に、一貫性のないデータが作成され、このデータがデータベースに保存されると、Commerce でエラーがスローされていました。

<!-- ACP2E-2259 -->

* 新しく作成した顧客アカウントを使用する買い物客がログアウトすると、顧客セグメントバナーが期待どおりに動作するようになりました。 以前は、ログインしている顧客セグメント用に作成されたバナーは、そのアカウントセッションが終了した後も表示されていました（つまり、登録されている買い物客がログアウトした後も表示されていました）。

<!-- ACP2E-2219 -->

* カテゴリ製品および製品カテゴリインデクサーの部分的なインデックス再作成のパフォーマンスが改善されました。 以前は、 `indexer_update_all_views` cron ジョブは、1 つの製品またはカテゴリごとに、再インデクサーを複数回実行しました。

<!-- ACP2E-2043 -->

* 在庫設定（数量）に基づいて製品の在庫ステータスが在庫切れに自動的に更新されると、在庫ステータスは在庫数量が更新されると在庫に更新されます。 以前は、 `stock_status_changed_auto` 製品の在庫設定が在庫に更新された際に、設定は無視されました。

<!-- AC-8904 -->

* ツールバーの並べ替えが、 **[!UICONTROL Remember Category Pagination]** の設定が有効になっています。 [GitHub-33220](https://github.com/magento/magento2/issues/33220)

<!-- ACP2E-1640 -->

* 複数選択属性が、 **[!UICONTROL Use Default Value]** store-view スコープのチェックボックスがオンになっている。 以前は、製品が編集されてデフォルト値が保存されると、このチェックボックスはオフになっていました。

<!-- ACP2E-1878 -->

* Web サイトへのアクセスが制限された管理者ユーザーは、自分の範囲内にある製品に画像を追加できるようになりました。 管理者ユーザーが製品へのアクセス権を持っていない場合、Commerce に情報メッセージが表示されます。 以前は、Web サイトへのアクセスが制限された管理者ユーザーは、アクセス権を持つ製品に画像を追加できませんでした。

<!-- ACP2E-1956 -->

* ユーザー定義 `special_from_date`, `special_to_date`, `news_from_date`、および `news_to_date` 値は、製品が store-view の範囲で編集された場合には上書きされません。

<!-- AC-6761 -->

* Commerce で、管理/ **[!UICONTROL Category]** > **[!UICONTROL Products in category]** 製品名がストアごとに異なるマルチストアデプロイメント。 [GitHub-36208](https://github.com/magento/magento2/issues/36208)

<!-- ACP2E-1975 -->

* The `addProductsToCart` ミューテーションは、データを含むカスタマイズ可能なオプションを返すようになりました。 以前は、空のカスタマイズ可能なオプションのみが返されていました。 [GitHub-37599](https://github.com/magento/magento2/issues/37599)

<!-- ACP2E-1859 -->

* キャッシュをクリアした後、カテゴリページを再読み込みせずに新しい製品をカテゴリに追加した場合、製品の位置と ID の選択が正しく表示されるようになりました。 以前は、製品の位置と選択が一致せず、正しく表示されませんでした。

<!-- ACP2E-1779 -->

* マーチャントは、ダウンロード可能な製品の予定変更の将来の開始日時を更新できるようになりました。 以前は、Adobe Commerceは、ダウンロード可能な製品の将来の開始日時の更新中に次のエラーをスローしていました。 `The downloadable link isn't related to the product. Verify the link and try again`.

<!-- ACP2E-1943 -->

* ストアフロントに製品のバックオーダーステータスが正しく表示されるようになりました。 以前は、出荷に使用できた製品が誤って逆注文と見なされていました。

<!-- ACP2E-1948 -->

* 管理者ユーザーが製品の作成時に使用した表示から別のストア表示にストア表示を変更した場合、管理者からダウンロード可能な製品にアクセスしてもエラーが発生しなくなりました。 管理者ユーザーが店舗表示をすべての店舗表示からデフォルトの店舗表示に切り替えた場合、製品価格が浮動小数点値に正常に変換されるようになりました。 以前は、Adobe Commerceはエラーをスローしていました。 [GitHub-37519](https://github.com/magento/magento2/issues/37519)

<!-- ACP2E-1994 -->

* 書き出された製品に正しい `manage_stock` 値 ( `use_config_manage_stock` 値が次と等しい `1`. 以前は、このデフォルト値は正しくありませんでした。

<!-- ACP2E-1479 -->

* カスタムオプションで作成した製品を画像を削除した後に保存した場合、Adobe Commerceで警告メッセージが表示されなくなりました。

<!-- ACP2E-1419 -->

* 製品の在庫が再び在庫されたときに送信される製品在庫アラート電子メールで、製品のサムネール画像が期待どおりに表示されるようになりました。 以前は、この画像はアラート E メールには表示されませんでした

<!-- AC-3003 -->

* カテゴリツリー内の製品数（管理者） **[!UICONTROL Catalog]** > **[!UICONTROL Category]**) は現在は正確です。 以前は、カテゴリ製品数を `catalog_category_product_index` 表。 このバグをトリガーしたタイポを修正しました。 [GitHub-35417](https://github.com/magento/magento2/issues/35417)

<!-- ACP2E-1239 -->

* 製品の詳細ページのメイン製品画像は、 `product_image_white_borders` テーマ内 `view.xml` は無効です。 以前は、Fotorama JS の高さ設定が正しくないため、ページ読み込み中に製品画像が下方にシフトしていました。

<!-- ACP2E-1361 -->

* 顧客が価格ドロップアラートを購読した際、製品価格の下落に関する通知が届くようになりました。 以前は、アプリケーションレベルのキャッシュのため、価格下落通知が送信されない場合がありました。

<!-- ACP2E-1422 -->

* Web API を使用して製品属性を作成するプロセスに、サーバー側の検証が追加されました。 次を有効にすることはできません： **[!UICONTROL Use in Layered Navigation Catalog]** フィールドに、 **[!UICONTROL Catalog Input Type for Store Owner]** フィールドの値が次の値 `Text Field`, `Text Area`, `Text Editor`, `Date`または `Date and Time`. 以前は、製品はカテゴリや検索結果から除外されていました。

<!-- ACP2E-1413 -->

* 買い物客がページを開いた後、カテゴリページが正しいページネーションで再読み込みされ、ページネーションを変更し、製品ページに移動して、カテゴリページに戻るようになりました。 [GitHub-36563](https://github.com/magento/magento2/issues/36563)

<!-- ACP2E-1334 -->

* 設定可能な製品のオプションである、在庫切れのシンプルな製品が、 **[!UICONTROL Display Out of Stock Products]** が **はい**. 以前は、ステータスと実際の可用性に関わらず、すべてのオプションが使用可能として表示されていました。

<!-- ACP2E-1384 -->

* 特定のストアビューの Web サイトのスコープ属性を更新しても、グローバルスコープの属性の値が上書きされなくなりました。 以前は、同じ SKU と `store_view_code` その結果、既定の範囲と [ すべてのストア ] 表示範囲の価格が不正確になっていました。

<!-- ACP2E-1632 -->

* マーチャントは、GIF画像を管理者から製品の画像ギャラリーに追加できるようになりました。 以前は、Adobe Commerceに次のエラーが表示されていました。 `imagecolorsforindex(): Argument #2 ($color) is out of range`.

<!-- ACP2E-1709 -->

* 未定義の配列キーによるエラーを処理するためのチェックが追加されました。 以前は、宣言スキーマのホワイトリストの生成中にエラーが発生していました。

<!-- ACP2E-1749 -->

* Adobe Commerceは、カスタム日付の有効な結果を返すようになりました。 `01/01/1970`. 以前は、カスタム属性が次のエラーを返していました。 `Invalid input datetime format of value '1/01/1970`. [GitHub-37274](https://github.com/magento/magento2/issues/37274)

<!-- AC-6507 -->

* `routes` フラグメントを使用するクエリで、カテゴリ情報が期待どおりに返されるようになりました。 以前は、カテゴリページで内部サーバーエラーが発生していました。 [GitHub-35906](https://github.com/magento/magento2/issues/35906)

<!-- ACP2E-1772 -->

* に関する問題 `cataloginventory_stock` 部分的なインデックス再作成プロセスが解決され、インデクサーのパフォーマンスが向上しました。 以前は、在庫カテゴリと製品カテゴリが正確に更新されていませんでした。

<!-- AC-8226 -->

* 製品が属するカテゴリが新しい親に移動された場合、Adobe Commerceでは、製品の 301 リダイレクトが生成されるようになりました。 [GitHub-37039](https://github.com/magento/magento2/issues/37039)

### カタログルール

<!-- ACP2E-1834 -->

* スケジュールの更新で有効にした場合、カタログルールのインデックスが正しく作成されるようになりました。 その結果、割引価格が正しく生成され、インデックスが作成されました。 以前は、2 つのカタログルールが使用可能で、最初のルールのカタログルールのインデックス作成操作が完了する前に 1 つのルールが最初のルールの後にアクティブ化された場合、2 つ目のカタログルールのカタログルール割引価格は生成されませんでした。

<!-- ACP2E-1579 -->

* 複数の Web サイト環境で、カタログルールが期待どおりに適用されるようになりました。

### 設定可能な製品

<!-- ACP2E-1881 -->

* マーチャントが選択できるようになりました **[!UICONTROL Skip quantity at this time]** および **[!UICONTROL Skip image uploading at this time]** 関連するシンプルな製品のソースに影響を与えることなく、設定可能な製品を設定する場合。 以前は、  **[!UICONTROL Skip quantity at this time]** その結果、製品ソースが消失した。

<!-- AC-7099 -->

* The **[!UICONTROL As low as]** すべてのオプションの価格が同じ場合、設定可能な製品価格にラベルが表示されなくなりました。

<!-- ACP2E-2464 -->

* Web サイトの権限を持つ管理者ユーザーは、別のストアコンテキストの設定可能な製品の一部である子製品を保存できるようになりました。 プロセスのインデックス再作成で、このタイプの設定可能な製品がスキップされるようになりました。

<!-- ACP2E-2003 -->

* 1 つの子製品がスケジュールされた更新で無効化された場合、2 つの子製品を持つ設定可能な製品が在庫切れとしてマークされなくなりました。

<!-- AC-8060 -->

* 複数のオプションを指定した構成可能な製品に対する保存操作のパフォーマンスが向上しました。 以前は、製品の保存操作中にタイムアウトが発生する可能性がありました。 [GitHub-36928](https://github.com/magento/magento2/issues/36928)

<!-- ACP2E-1764 -->

* 買い物客が製品オプションを選択すると、設定可能な製品価格のストアフロント表示が期待どおりに変化するようになりました。 [GitHub-37378](https://github.com/magento/magento2/issues/37378)

### クーポン

<!-- ACP2E-2495 -->

* 顧客ごとの使用数が限られているクーポンコードを、以前使用した順序が失敗した場合に 2 回目に使用できるようになりました。 以前は、以前のオーダーがキャンセルされた場合、プロモーションコードはリリースされませんでした。

<!-- ACP2E-2428 -->

* スペース文字を含むクーポンコードは、無効化されなくなりました。 以前は、クーポンコードに（実際のコードの前後に）スペース文字が含まれている場合、検証に失敗していました。 [GitHub-38048](https://github.com/magento/magento2/issues/38048)

<!-- ACP2E-1551 -->

* 買い物客は、同じ買い物かご価格ルールで生成された、2 つの異なる自動生成クーポンコードを使用できるようになりました。 The `Uses per Coupon` クーポンタイプが `Auto` （クーポンタイプ=と同様）`Specific Coupon`) ) をクリックします。 これにより、買い物客は、コードが異なる場合に、同じ買い物かご価格に複数のクーポンコードを適用できます。

<!-- ACP2E-1496 -->

* 買い物客の単一使用クーポン値は、適用された順序がキャンセルされた際に、期待どおりに復元されるようになりました。

<!-- ACP2E-1195 -->

* The `GET V1/coupons/<couponId>` エンドポイントは、自動生成されたクーポンと同様に、手動で作成されたクーポンに対して、期待される完全な応答を返すようになりました。 以前は、一部のフィールドが省略されていました ( 例： `usage_limit`, `usage_per_customer`、および `created_at`) をクリックします。

### cron

<!-- ACP2E-2457 -->

* The `aggregate_sales_report_bestsellers_data` cron ジョブは、非常に大きな一時的な MySQL テーブルを作成しなくなり、正常に完了しました。 この cron ジョブは、すべてのストアのデータを一度に挿入するのではなく、ストアごとにデータを挿入するようになりました。 以前は、この cron ジョブにより、 `No space left on device` エラー。

<!-- ACP2E-2427 -->

* 内の保留中のレコードの数 `cron_schedule` cron ジョブが不要な cron ジョブロックを取得しようとするのを防ぐことで、テーブルが削減されました。 以前は、cron ジョブは、ジョブを実行するのに遅すぎる場合にロックを取得しようとしました。 での Cron ジョブ `cron_schedule` 予定時刻を過ぎているにもかかわらず、見逃したとはマークされていませんでした。 Commerce でも、次のエラーがエラーログに繰り返し表示されていました。 `report.WARNING: Could not acquire lock for cron job: indexer_update_all_views`.

<!-- AC-9207 -->

* cron 式でのゼロで除算の致命的なエラーを修正しました。 [GitHub-37804](https://github.com/magento/magento2/issues/37804)

<!-- ACP2E-1792 -->

* The `sales_clean_quotes` cron プロセスは、 `store_id` および `updated_at columns` を参照してください。 この変更により、多数の引用符を処理する際の cron ジョブのパフォーマンスが向上します。

<!-- AC-7987 -->

* 管理者ユーザーが、 `bin/magento cron:run` プロセスは現在実行中です。 現在実行中のプロセスのタイトルに、グループ名とジョブ名が一覧表示されるようになりました。 [GitHub-34321](https://github.com/magento/magento2/issues/34321)

### 顧客

<!-- AC-6748 -->

* Adobe Commerceに **[!UICONTROL Date of Birth]**, **[!UICONTROL Tax/VAT Number]**, **[!UICONTROL Gender]**, **[!UICONTROL Telephone]**, **[!UICONTROL Company]**、および **[!UICONTROL Fax]** 設定に基づいて顧客を編集ページのフィールド。 [GitHub-36196](https://github.com/magento/magento2/issues/36196)

### 顧客セグメント

<!-- ACP2E-2471 -->

* 顧客セグメントの条件で、一致したすべての顧客が期待どおりに読み込まれるようになりました。 以前は、一致する顧客セグメントリストに、一致する顧客がすべて含まれていませんでした。

### 電子メール

<!-- ACP2E-2125 -->

* 読み分け符号やアクセント記号（UTF8 E メール）を含む E メールが、顧客や企業に対してサポートされるようになりました。また、ゲストや登録顧客による注文もサポートされます。 以前は、Commerce は、DiaCritics を含む顧客レコードを保存せず、次のエラーを表示していました。 `Something went wrong while saving the customer`.

<!-- ACP2E-2503 -->

* E メールの送信者名にコロンを含めることはできなくなりました。 新しい検証ルールで、管理の「 Store Email Addresses 」セクションからコロン文字を含む送信者名を保存できなくなりました。 **[!UICONTROL Stores]** > **[!UICONTROL General]**. 以前は、マーチャントはコロンを含む送信者名を保存していたので、メールサーバーでエラーが発生していました。

<!-- ACP2E-2018 -->

* カスタムの画像オプションを含む製品の「顧客電子メールを返す」（デフォルトテンプレート）で、画像オプションがHTMLマークアップとして表示されなくなりました。

<!-- ACP2E-1529 -->

* 会社管理者の電子メールに `CMS Block URL` 変数を使用します。

<!-- AC-2903 -->

* 顧客の E メールアドレスに、読み分け符号を含めることができるようになりました。 以前は、フロントエンド検証では、E メールアドレスに DiaCritics を含むユーザーの作成が禁止されていました。 [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1682 -->

* 在庫および価格のアラート E メールが、Web サイトのデフォルトのストア表示で設定した言語に従って翻訳されるようになりました。 以前は、これらのメールは翻訳されていませんでした。

<!-- ACP2E-1571 -->

* `POST V1/order/notify-orders-are-ready-for-pickup` では、注文の準備ができたときにのみ注文の受け取り準備ができたことを警告する E メールを顧客に送信するようになりました。 リクエストが例外なしで実行された場合にのみ、電子メールがトリガーされるようになりました。

### 房室

<!-- ACP2E-2222 -->

* EAV インデクサーでは、バッチ処理中に非表示エンティティを削除する必要がなくなりました。 デフォルトでは、インデクサーは非表示の製品をバッチ処理しなくなり、インデクサーのパフォーマンスが向上しました。

### フレームワーク

<!-- AC-10865 -->

* コーディングプラクティスの実行時に作成されたコードベース全体でリファクタリングされたコードで、 `app/etc/env.php` ファイルにはフロントエンドセクションが含まれます。 このリファクタリングは、Commerce 2.4.4 以前のデプロイメントをアップグレードする際の潜在的な問題に対処します。 [GitHub-38363](https://github.com/magento/magento2/issues/38363)

<!-- AC-8005 -->

* 次に関連するエラーメッセージを明確にしました： `StockItemValidator.php` の場合、API 呼び出し中に値 0 の在庫 ID が提供されます。 [GitHub-31107](https://github.com/magento/magento2/issues/31107)

<!-- AC-10583 -->

* にデフォルトの空の配列を追加しました。 `$tagGenerators` in `CompositeTagGenerator` 依存関係インジェクションコンパイル時のエラーを防ぐ。 以前は、 `bin/magento setup:upgrade` コマンドを実行すると、 `Magento_DirectoryGraphQl` および `Magento_StoreGraphQl` モジュールが無効化され、エラーが発生しました。 [GitHub-38165](https://github.com/magento/magento2/issues/38165)

<!-- AC-9232 -->

* 未使用の `AlgorithmProviderFactory` クラスは削除され、次を含むクラスでこのクラスに対する依存関係も削除されました： `JweAlgorithmManagerFactory.php`, `JweContentAlgorithmManagerFactory.php`、および `JwsAlgorithmManagerFactory`. [GitHub-37783](https://github.com/magento/magento2/issues/37783)

<!-- AC-9776 -->

* The `var/log/system.log` 次を含まないファイル `main.INFO error` メッセージ。 メニューエントリログは、レベル INFO から DEBUG に移動されました。 以前は、 `var/log/system.log` ファイルには次のようなメッセージが殺到しました。 `Add of item with id Magento_Theme::design_config was processed … `.

<!-- AC-8809 -->

* 次の場合に Redis のプリロードが失敗しなくなりました： `exec()` は false を返します。 を防ぐための検証がプリロードプロセスに追加されました `array_combine` 受信から `false` を 2 つ目の引数として使用します。 その結果、プリロードは、 `exec()` 戻り値 `false`. [GitHub-37509](https://github.com/magento/magento2/issues/37509)

<!-- AC-8220 -->

* リファクタリングした `Magento_CatalogWidget` 置き換えるモジュール `$block` 関数のエスケープ， `$escaper` エスケープ関数 [GitHub-37107](https://github.com/magento/magento2/issues/37107)

<!-- AC-9336 -->

* `Swaziland` は次に更新されました： `Eswatini` をコードベース全体に渡して読み込みます。 [GitHub-37873](https://github.com/magento/magento2/issues/37873)

<!-- ACP2E-2638 -->

* 新しいニカラグア通貨 (NIO) を使用可能な通貨のリストに追加しました。

<!-- AC-10591 -->

* 名前を変更した `reponseBody` 変数を `responseBody` in `app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`.[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- AC-9221 -->

* 小数数量が有効になっている製品のトランザクションで発生した小計丸めエラーを解決しました。 [GitHub-37817](https://github.com/magento/magento2/issues/37817)

<!-- ACP2E-2127 -->

* 管理者顧客グリッドの日付フィルターが、指定されたロケールに従って期待どおりに動作するようになりました。

<!-- AC-9027 -->

* The `bin/magento setup:upgrade` 次の理由により、コマンドが失敗しなくなりました： `$schemaPatch` 変数のデータ型です。 以前は、文字列の値は `get_class` 関数でエラーが発生していました。 [GitHub-37545](https://github.com/magento/magento2/issues/37545)

<!-- ACP2E-2485 -->

* 次の場合に重大なデータベースの読み取りエラーが発生しました： `synchronous_replication` は、Adobe Commerce Cloud上のスレーブ接続に対して有効になっていません。

<!-- ACP2E-2345 -->

* 設定時にトランザクション中に接続がタイムアウトした場合、MySQL データベースへの接続が復元されるようになりました `max_messages = 0` 消費者向け 以前は、接続が終了していました。

<!-- ACP2E-2121 -->

* The `magento/module-release-notification` 2.4 開発コードでは、次のコメントを使用して core モジュールが非推奨とマークされました。 `Starting from Magento 2.4.7,  Magento_ReleaseNotification module is deprecated in favor of another in-product messaging mechanism`.

<!-- AC-9388 -->

* プロキシコードの生成で、実稼動モードで実行されるデプロイメントの期待どおりにプロキシファイルとファクトリファイルが生成されるようになりました。 [GitHub-35252](https://github.com/magento/magento2/issues/35252)

<!-- AC-1477 -->

* インドのラダック州が管理アドレスにオプションとしてリストされました。 **[!UICONTROL State]** ドロップダウンメニュー。 [GitHub-33698](https://github.com/magento/magento2/issues/33698)

<!-- AC-8388 -->

* イベントカウントダウンティッカーがカテゴリページに期待どおりに表示されるようになりました。

<!-- AC-8369 8368 8365 8317 8351 8357 8377 8357 8351 8323-->

* 禁止された `@author` タグは、次のモジュールを含め、コードベースから削除されました。 `Magento_user-variable-wee`, `Magento_Catalog`、および `Magento_Customer`, `Magento_Wishlist`, `Magento_Review` `Tax`、およびフレームワーク全体を通じて。 [GitHub-37245](https://github.com/magento/magento2/issues/37245), [GitHub-37246](https://github.com/magento/magento2/issues/37246), [GitHub-37249](https://github.com/magento/magento2/issues/37249), [GitHub-37263](https://github.com/magento/magento2/issues/37263)

<!-- AC-9489 -->

* の JSON シリアライザー `User` モジュールは、より正確で新しいシリアライザ (`JsonHexTag`) をクリックします。 以前は、通常のシリアライザーでシリアル化されたデータを使用しようとすると、エスケープされていない要素が含まれていた場合に Commerce がクラッシュすることがありました。 [GitHub-31377](https://github.com/magento/magento2/issues/31377)

<!-- ACP2E-2138 -->

* 完全なインデックス再作成の実行中にパイプラインエラーが発生しなくなりました (`bin/magento indexer:reindex`) をクリックします。 AMPQ 接続は、プロセスマネージャがプロセスをフォークする前に閉じられるようになりました。

<!-- ACP2E-2244 -->

* キューメッセージバリデーターが、すべての配列要素のサブタイプを検証するようになりました。 以前は、Commerce は例外をスローしていました。

<!-- ACP2E-2066 -->

* のトピックごとのキュー接続設定 `app/etc/env.php` 現在は正しく機能します。 以前は、カスタム交換で新しいメッセージキューが作成された場合、製品アラートキューが正しく生成されませんでした。 トピックのキュー接続が `app/etc/env.php` カスタム交換では、そのカスタム交換を含むすべてのトピックに対して新しいバインディングが作成されました。 商人は製品アラートを処理できませんでした。

<!-- ACP2E-2144 -->

* でマークされた時間形式  `/* mariadb-5.3 */` コメントが次の間にエラーを引き起こさない `bin/magento setup:install` MariaDB サーバーをバージョン 10.5.1 以降にアップグレードする場合。

<!-- ACP2E-2147 -->

* AwsS3 ドライバは、基本のデフォルトファイルストレージ実装の代わりとして、期待どおりに動作するようになりました。 以前は、このドライバがファイルストレージ用に構成されている場合、データが破損する可能性がありました。 [GitHub-37844](https://github.com/magento/magento2/issues/37844)

<!-- ACP2E-1999 -->

* `bin/magento config:show` および `set` 使用するコマンド `$_ENV` 変数で、キャメルケース文字または大文字を含む web サイトおよびストアコードの使用がサポートされるようになりました。

<!-- AC-8923 -->

* を使用してクラスを追加しました。 `!important` Tailwind 3 で CSS レイアウトのサポートに使用される [GitHub-37568](https://github.com/magento/magento2/issues/37568)

<!-- AC-9115 -->

* 見つからない `jQuery` 依存関係が `trim-input.js` ファイル。 [GitHub-37683](https://github.com/magento/magento2/issues/37683)

<!-- AC-9387 -->

* イベント固有の詳細が 2 番目の属性 (`context`) `log` メソッド。 [GitHub-37879](https://github.com/magento/magento2/issues/37879)

<!-- AC-9109 -->

* カタログ画像に縦横比の値が追加され、不要なスクリプトが UI フレームワークから削除されました。 [GitHub-37691](https://github.com/magento/magento2/issues/37691)

<!-- AC-9188 -->

* 無効な XML 設定によってトリガーされるエラーメッセージを改訂し、より有益にしました。 [GitHub-37788](https://github.com/magento/magento2/issues/37788)

<!-- AC-9335 8817-->

* コードベース全体での動的プロパティの作成に関連する非推奨のコードをリファクタリングしました。

<!-- AC-7009 -->

* 製品データベースが非常にアクティブな大規模ストアのインデクサーのパフォーマンスが向上しました。 インデクサーは、各インデックスに対して複数回ではなく、最新の製品情報に対して 1 回インデックスを作成するようになりました。 以前は、製品が Web サイトから消え、製品データが Web サイト上で古くなっていた可能性がありました。 [GitHub-30012](https://github.com/magento/magento2/issues/30012)

<!-- ACP2E-1971 -->

* `mview_state` スレーブデータベース接続が利用可能な場合の、changelog アクティビティに基づく状態を正確に示すようになりました。 以前は、これらのレコードは `waiting` changelog に新しいエントリがない場合でも、クラウドデプロイメントの状態。

<!-- ACP2E-2022 -->

* のサポートを追加しました。 `precision` 非推奨（廃止予定）との機能パリティを保持する通貨フォーマットのオプション `ZendCurrency` クラス。

<!-- AC-8854 -->

* cookie のメッセージは観測可能な属性に変換され、開発者が状態を操作できるようになりました。これにより、UI がトリガーに変わる可能性があります。 以前は、cookie は読み取り専用で、操作できませんでした。 [GitHub-37308](https://github.com/magento/magento2/issues/37308)

<!-- AC-6325 -->

* 管理者ユーザーは、コマースインスタンスが S3 ストレージに接続されている場合に、請求書を生成できるようになりました。 以前は、Commerce で次のエラーが表示されていました： `Cannot create image resource. File not found`. [GitHub-35706](https://github.com/magento/magento2/issues/35706)

<!-- AC-6906 -->

* Adobe Commerceで、VIES 検証サービスによる VAT 番号検証が失敗した場合に、例外メッセージが期待どおりにログに記録されるようになりました。 [GitHub-36065](https://github.com/magento/magento2/issues/36065)

<!-- AC-8146 -->

* The `Administrators` 管理者ロールの作成中に管理者ロールを取得するために使用されたクエリから名前が削除されました。 [GitHub-36998](https://github.com/magento/magento2/issues/36998)

<!-- AC-8607 -->

* The `bin/magento setup:config:set` 無効なデータベースユーザー名が `app/etc/env.php` ファイル。 [GitHub-37409](https://github.com/magento/magento2/issues/37409)

<!-- AC-8595 -->

* デフォルトの管理 UI コンポーネントで予約語の列で並べ替えを実行しても、 `var/log/exception.log`. [GitHub-37423](https://github.com/magento/magento2/issues/37423)

<!-- AC-8562 -->

* 追加済み `AddDataForCostaRica.php` コスタリカに対して状態情報を提供する。 [GitHub-37382](https://github.com/magento/magento2/issues/37382).

<!-- AC-8577 -->

* ユーザーが管理者から無効な URL にアクセスしようとするシナリオに関するエラーメッセージを改善しました。 [GitHub-35682](https://github.com/magento/magento2/issues/35682).

<!-- ACP2E-1841 -->

* `Param $options[`position`]` の通貨記号の動作が期待どおりに動作し、通貨記号の位置のカスタマイズがサポートされるようになりました。 以前は、Zend Framework 1 からの移行後、 `toCurrency` メソッドは無視されました `position` パラメーター。 この問題は、管理インターフェイス全体で発生していました。

<!-- AC-8817 -->

* コードベース全体での動的プロパティの作成に関連する非推奨のコードをリファクタリングしました。

<!-- AC-8154 -->

* Adobe Commerceで TinyMCE エディターを拡張して作成したカスタムスタイル形式と、2.4.6 以前のMagento Open Sourceリリースが、ページビルダーで期待どおりに使用できるようになりました。 `text` コンテンツタイプ。 以前は、カスタムスタイル形式は無視され、Adobe Commerce 2.4.6-p1 にアップグレードした後に読み込まれるデフォルトの形式のみでした。 [GitHub-36950](https://github.com/magento/magento2/issues/36950)

<!-- AC-8576 -->

* 次の情報を `quote.php` ファイル： `Important: This method also copies customer data to quote and removes quote addresses`. [GitHub-37400](https://github.com/magento/magento2/issues/37400)

<!-- ACP2E-1973 -->

* ロックプロバイダーのインスタンス化が完了しました `\Magento\Framework\Lock\Proxy` クラス。 これで、ロックプロバイダーが `lock` 設定 `app/etc/env.php` ファイル。

<!-- ACP2E-1492 -->

* 同時要求による更新中の競合状態を防ぐため、注文に対してミューテックスが実装されました。 以前は、注文のキャンセルに対する同時リクエスト（競合状態）により、 `inventory_reservation` 表。

<!-- ACP2E-1381 -->

* The `populateWithArray` 関数は、オブジェクトのプロパティをスネークケースに正しく変換し、との互換性を持たせるようになりました。 `AbstractModel` ゲッターとセッター 以前は、データ属性名に複数の大文字が連続して含まれている場合、スネークケースのフォーマットが正しくありませんでした。

<!-- ACP2E-1522 -->

* 自動増分値 ( `catalog_product_entity_varchar` 製品を保存すると、テーブルが正しく増分されるようになりました。 以前は、この値が 10 ずつ増えていました。

<!-- ACP2E-1701 -->

* JavaScript/CSS キャッシュをフラッシュしようとした際に、Adobe Commerceでこのファイルシステム例外がスローされなくなりました。 `No such file or directory`.

<!-- ACP2E-1358 -->

* の値 `value_id` in `customer_entity_int` が正しく増分されるようになりました。 の代わりに更新クエリが実行されます `insert on duplicate key update` これらの属性を組み込むエンティティを更新する際に使用します。 その結果、EAV モデル内で使用される自動増分列が線形的に増加します。 以前は、列の自動増分処理は、挿入クエリの失敗により値をスキップしていました。 [GitHub-28387](https://github.com/magento/magento2/issues/28387)

<!-- AC-8462 -->

* 不要な空白を次の場所から削除しました： `id` 必要のない属性。 ( このバグは、Adobe Commerce 2.4.6 のコード変更によって導入されました )。

<!-- AC-7923 -->

* ストアがシングルストアモードの場合、ストアコードはストア URL に表示されなくなりました。 [GitHub-36831](https://github.com/magento/magento2/issues/36831)

<!-- AC-7988 -->

* に対してマイナーな更新がおこなわれました `around` プラグイン [GitHub-31443](https://github.com/magento/magento2/issues/31443)

<!-- AC-7989 -->

* スウォッチ `Helper` 誤ったインポート別名を削除するためにリファクタリングされました。 [GitHub-31373](https://github.com/magento/magento2/issues/31373)

<!-- AC-8708 -->

* 管理者ユーザーは、 `sitemap.xml` ファイルに書き込みます。 以前は、管理者ユーザーは管理者からファイルを削除できましたが、ファイルシステムには残っていました。 [GitHub-37468](https://github.com/magento/magento2/issues/37468)

<!-- ACP2E-1747 -->

* クーポンは、適用された注文で支払いが失敗した場合に使用されるようにフラグ付けされなくなりました。 キューのメッセージは、コンシューマーの開始時に、公開された順序で処理されるようになりました。 以前は、最初のメッセージはキューから取り出され、メッセージがキューに登録されたかどうかを確認するだけでした。その後、拒否されたので、最初のメッセージが最後に処理されました。

<!-- ACP2E-1627 -->

* Adobe Commerceで、ユーザーが発送ラベルを印刷しようとしたときに、ログファイルで例外がスローされなくなりました。 以前は、拡張機能によって添付ファイルを含む応答ヘッダーが変更された場合、ログファイルで例外がスローされていました。

<!-- AC-7986 -->

* さらに多くのHTMLクラスのサポートが `elements.xsd`. [GitHub-36891](https://github.com/magento/magento2/issues/36891)

### 一般的な修正点

<!-- AC-10591 -->

* 名前を変更した `reponseBody` 変数を `responseBody` in `app/code/Magento/CatalogRule/Controller/Adminhtml/Promo/Catalog/NewConditionHtml.php`.[GitHub-38093](https://github.com/magento/magento2/issues/38093)

<!-- ACP2E-2647 -->

* 製品の更新をスケジュールすると、複数選択の属性データがクリアされなくなりました。 以前は、製品の更新がスケジュールされていた場合、製品の複数選択属性データが誤ってクリアされていました。 [GitHub-37675](https://github.com/magento/magento2/issues/37675)

<!-- AC-2904 -->

* デフォルト以外のストア範囲で製品を保存しても、を使用して読み込んだ場合に、変更されていない属性がストア範囲にならなくなりました。 `ProductRepository`. [GitHub-8897](https://github.com/magento/magento2/issues/8897)

<!-- ACP2E-2132 -->

* アクセス制限が有効な場合、買い物客は階層ノードとして設定されたページにアクセスできるようになりました。 以前は、無限リダイレクトループが発生し、ブラウザーが次のエラーをスローしていました。 `ERR_TOO_MANY_REDIRECTS`.

<!-- ACP2E-2404 -->

* 製品の詳細ページのカスタムフィールド検証に、情報エラーメッセージが追加されました。 [GitHub-38006](https://github.com/magento/magento2/issues/38006)

<!-- ACP2E-2511 -->

* 名前フィールドで特殊文字を使用できるようになりました。 以前は、名前バリデーターでアンパサンド (&amp;) が制限されていました。これにより、顧客名にアンパサンドが含まれている場合に、顧客の追加や編集操作がブロックされました。 [GitHub-38080](https://github.com/magento/magento2/issues/38080)

<!-- ACP2E-2469 -->

* 特定のストアへのアクセスが制限された管理者ユーザーは、一括更新アクションを使用して製品レビューを更新できるようになりました。 以前は、Commerce は次の例外をスローしていました。 `report.CRITICAL: TypeError: array_intersect(): Argument #1 ($array) must be of type array, null given in app/code/Magento/AdminGws/Model/Models.php:439`.

<!-- AC-8600 -->

* ストアフロントのログインページの「パスワードを表示」機能で、パスワードが期待どおりに表示されるようになりました。 以前は、パスワードは表示されませんでした。 [GitHub-37432](https://github.com/magento/magento2/issues/37432)

<!-- ACP2E-2062 -->

* 製品比較リストは、常にゲスト買い物客に特有の Web サイトになり、他の Web サイトから追加された製品（両方の Web サイトに割り当てられた製品を含む）が含まれなくなりました。

<!-- ACP2E-2087 -->

* 絵文字を含む CMS コンテンツブロックが、データベースに保存した際に、絵文字の後に切り捨てられなくなりました。 以前は、デフォルトのデータベース設定で 4 バイト文字をサポートしていなかったので、コンテンツは絵文字の後に切り捨てられていました。

<!-- ACP2E-2154 -->

* 関連する製品ルールの **次のいずれかである** 条件は、 **一致する製品** 設定。 以前は、このルールで製品が識別されていませんでした。

<!-- ACP2E-2164 -->

* CMS ページグリッドでは、管理者ユーザーに割り当てられたストア表示に基づいてページをフィルタリングするようになりました。 以前は、役割の範囲は適用されていませんでした。

<!-- AC-8823 -->

* 次の場合に、パスワードが期待どおりに表示されるようになりました。 **[!UICONTROL Show Password]** のチェックボックスがアクティブになっている。

<!-- ACP2E-2037 -->

* 顧客エンティティのパスワードトークンのリセットシステム属性 (`rp_token`) の検証は、顧客アカウントの作成中に属性の検証から削除され、読み分け符号の検証は、結果の顧客電子メールにのみ含まれます。 以前は、Commerce は顧客レコードを保存せず、次のエラーを表示していました。 `Something went wrong while saving the customer`.

<!-- AC-8826 -->

* 列を削除した後、編集内容を管理ページとブロックグリッドに正常に保存できるようになりました。 [GitHub-37525](https://github.com/magento/magento2/issues/37525)

<!-- ACP2E-1933 -->

* 会社の管理者は、ストアフロントから会社のユーザーを追加できるようになりました。 以前、Commerce は、管理者ユーザーが新しいユーザーを追加しようとしたときにこのエラーをログに記録していました。 `report.CRITICAL: Error: Call to a member function __toArray() on null in app/code/Magento/LoginAsCustomerLogging/Observer/LogSaveCustomerObserver.php:123`.

<!-- ACP2E-1972 -->

* 別のデバイスでパスワードをリセットした後、あるデバイスから新しいパスワードで正常にログインできるようになりました。

<!-- ACP2E-1609 -->

* 管理者の顧客アドレス **都道府県** フィールドで、最後に保存した値が期待どおりに保持されるようになりました。 以前は、このフィールドから値を削除しても、Commerce では削除された値が **都道府県** フィールドに入力します。 [GitHub-36846](https://github.com/magento/magento2/issues/36846)

<!-- ACP2E-1796 -->

* 最初に選択を解除してから新しく作成した CMS ページを選択した場合、Adobe Commerceで制約違反エラーがスローされなくなりました。

<!-- ACP2E-1639 -->

* 階層 Web サイトのルートが、新しく作成した CMS ページに正しく割り当てられるようになりました。 以前は、階層 Web サイトのルート選択が、新しく作成された CMS ページで一致しなかった問題を修正しました。

<!-- ACP2E-1508 -->

* カテゴリの RSS フィードの要求時に、次の場合にエラーが発生しなくなりました： **[!UICONTROL RSS Feed Top Level Category]** が有効になっている。 以前は、RSS フィードのカテゴリページを参照すると、Elasticsearchが発生していました `CRITICAL` 次の場合のログファイルのエラー **[!UICONTROL RSS Feed Top Level Category]** が有効になっている。

<!-- ACP2E-1490 -->

* 次の場合に正しい値が保存されました： `gws_store_groups` ユーザーロールの作成中にロールの範囲が変更された場合。 以前は、ロールの範囲が `All`、 `gws_store_groups` ユーザーの作成中は値が null として保存されましたが、ロールの編集中は保存されませんでした。 また、役割の範囲が `Custom`を、 `gws_store_groups` の値は常に null として保存されました。

<!-- ACP2E-1446 -->

* これで、パスワードのリセットページにアクセスできるようになりました。 **[!UICONTROL Add Store Code to Urls]** の設定が有効になっています。 管理者のパスワードリセットリンクにより、以前にログインページ（404 ページ）が開いていました。

<!-- ACP2E-1274 -->

* Admin 統計ダッシュボードの日付範囲は、設定で指定されたタイムゾーンに基づいて計算され、データベースからデータを取得するために UTC に変換されるようになりました。

<!-- ACP2E-1665 -->

* ストアビューをフィルタリングし、「 」をクリックした後、CMS 階層フィルターが期待どおりに動作します **[!UICONTROL Save]** 管理者 **[!UICONTROL Content]** > **[!UICONTROL Hierarchy]**. 以前は、 **[!UICONTROL Save]** ページは更新されましたが、コンテキストは失われ、選択したストア表示は表示されなくなりました。

<!-- ACP2E-1631 -->

* クリック **[!UICONTROL Send invitation]** ボタン（管理者） **[!UICONTROL Marketing]** > **[!UICONTROL Private sales]** > **[!UICONTROL Invitation]**) は、フォームキーと共にPOSTリクエストを送信し、招待を正常に送信するようになりました。 以前は、このボタンをクリックした際に、HTTPPOSTメソッドもフォームキーも存在しませんでした。

<!-- ACP2E-1608 -->

* AWS S3 を使用して、0 バイトファイルをリモートストレージに正常にコピーできるようになりました。

<!-- AC-7402 -->

* ストア ID が Web サイト ID と一致しない別の Web サイト用にその顧客が作成された場合、管理者ユーザーは、その顧客が管理者から新しい顧客アドレスを追加できるようになりました。 以前は、Adobe Commerceに次のポップアップメッセージが表示されていました。 `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- AC-8247 -->

* CMS ブロックエディターページに正しいウィジェットが表示されるようになりました。 `block_id` の値です。 [GitHub-29644](https://github.com/magento/magento2/issues/29644)

### ギフトカードとラッピング

<!-- AC-7372 -->

* 商人は負の値を持つギフトカードを作成できなくなりました。

<!-- ACP2E-1890 1806-->

* The `setGiftOptionsOnCart` ミューテーションで、注文から期待どおりにギフト用ラッピングが削除されるようになりました。 の値 `gift_wrapping_id` は、買い物かごレベルで設定解除されるようになりました。 以前は、 `gift_wrapping_id` は、この値が買い物かごレベルで未設定の場合でも、注文がおこなわれた後に、以前の値に更新されました。

<!-- ACP2E-1866 -->

* 単純な商品の一部払い戻しが、カードが適用された注文から処理された場合、ギフトカードのアカウントは、期待どおりにアクティブなままになりました。 以前は、ギフトカードのアカウントは削除されていました。

<!-- ACP2E-1805 -->

* The `setGiftOptionsOnCart` ミューテーションで、買い物かごからギフトメッセージを削除する際に、データベースが正常に更新されるようになりました。 以前は、メッセージの詳細はデータベースで更新されず、ギフトメッセージは買い物かごから削除されませんでした。

<!-- ACP2E-1741 -->

* ギフトレジストリ `Event Information` ラベルが期待どおりに翻訳されるようになりました。

<!-- ACP2E-1586 -->

* 小計は、カスタムギフトカードの金額に対して正しく計算されるようになりました。

<!-- ACP2E-1350 -->

* 複数のアドレスを持つチェックアウト時にギフトカードが正しく適用されるようになりました。 以前は、複数の住所への出荷時にギフトカードの金額が正しく適用されず、ギフトカードの金額が無効になっていました。

<!-- ACP2E-1341 -->

* 次の期間にエミュレーションが開始 `send()` エミュレーションが完了した後、 `getInfoBlockHtml()` を呼び出すと、エラーは記録されません。 以前は、 `system.log` ファイルに次のエラーがあふれています： `main.ERROR: Environment emulation nesting is not allowed`. [GitHub-35603](https://github.com/magento/magento2/issues/35603)

<!-- ACP2E-1612 -->

* これで、 `updateCartItems` ミューテーション：買い物かご内のギフトカードを更新する場合に使用します。 以前は、このミューテーションによって買い物かご内で更新できるのはカードの金額のみでした。

<!-- ACP2E-1669 -->

* ギフト用ラッピングは、マージされた買い物かごに基づく見積もりに、期待どおりに含まれるようになりました。 以前は、ギフトメッセージは正常にマージされましたが、選択項目をラッピングしていませんでした。

<!-- AC-7530 -->

* The `addProductsToCart` ミューテーションにより、ギフトカードが買い物かごに正常に追加されるようになりました。 以前は、このクエリではギフトカードの受信者名が想定されていましたが、送信者名が代わりに返されていました。 Adobe Commerceが次のエラーをスローしました： `Please specify a recipient name`. [GitHub-36665](https://github.com/magento/magento2/issues/36665)


### Google Tag Manager

<!-- ACP2E-1520 -->

* Googleタグモジュールは、正しいデータをデータレイヤーにプッシュするようになりました。 以前は、ページインプレッション数データはデータレイヤーにプッシュされませんでした。

### GraphQL

<!-- AC-8964 -->

* The `getCustomerWishlist` 設定可能な製品を含むリストをクエリする際に、クエリが内部サーバーエラーを引き起こさなくなりました。

<!-- AC-8966 -->

* The `customerCart` クエリで、バンドル製品に適用されたすべての割引が期待どおりに返されるようになりました。 以前は、バンドル製品に適用された合計割引がゼロとして返されていました。

<!-- AC-8964 -->

* The `getCustomerWishlist` 設定可能な製品を含むリストをクエリする際に、クエリが内部サーバーエラーを引き起こさなくなりました。

<!-- AC-9147 -->

* 次の宣言 `is_subscribed` フラグ、そのリゾルバー、キャッシュ、および関連するテストが、 `CustomerGraphQl` モジュールを `NewsletterGraphQl` モジュール。

<!-- AC-9362 -->

* The `addProductsToCart` 突然変異は、関連のない誤りを報告しなくなった `user_errors`. 以前は、買い物かごに関連するエラーは、 `user_errors` 予期される操作エラーと共に。 [GitHub-37908](https://github.com/magento/magento2/issues/37908)

<!-- ACP2E-2119 -->

* The `products` クエリ製品フィルターで、部分一致の結果と完全一致の結果を返すようになりました。 新しい `match_type` (PARTIAL, FULL) 属性は、一致タイプの指定をサポートします。 以前は、クエリは完全に一致するもののみを返していました。

<!-- ACP2E-2155 -->

* Mutex が `addConfigurableProductsToCart` クエリを使用して、同時リクエストによる更新中に競合状態を防ぎます。 以前は、マーチャントが同じ設定可能な製品を買い物かごに追加する 2 つの並列リクエストを送信した際に、同じ製品 SKU を持つ 2 つの異なる項目が追加されていました。 [GitHub-37847](https://github.com/magento/magento2/issues/37847)

<!-- ACP2E-2201 -->

* GraphQL応答の製品集計に、 **[!UICONTROL Use in Layered Navigation]** が **[!UICONTROL Filterable (no results)]**. 以前は、ゼロ以外の値のみが返されていました。

<!-- ACP2E-2141 -->

* のパフォーマンスを向上しました。 `setShippingAddressForEstimate` カスタム製品属性を含む買い物かご関連の操作のクエリ。 以前は、クエリは、パラメーターが変数として送信された場合に、すべての製品属性を読み込んでいました。

<!-- ACP2E-2255 -->

* The `products` クエリ `ConfigurableProduct.configurable_options` フィールドは、少なくとも 1 つの有効な製品を持つ値のみを返すようになりました。 以前は、このフィールドは無効なシンプル製品を返していました。

<!-- ACP2E-2151 -->

* のパフォーマンスを向上しました。 `GetCategories query` 生成される不要な SQL クエリの数を減らすことで、

<!-- AC-8623 -->

* GraphQLライブラリコンポーネントのアドレスエラー処理が期待どおりに動作するようになりました。

<!-- AC-9058 -->

* The `products` 動的価格が no に設定され、割引が適用されている場合、クエリは関連するすべての storefront 価格の詳細を返すようになりました。 以前は、製品の価格帯は返されませんでした。 [GitHub-35649](https://github.com/magento/magento2/issues/35649)

<!-- ACP2E-1744 -->

* GraphQLトランザクション名に、New Relicログの最上位クエリ名のみが含まれるようになりました。 以前は、トランザクション名にはセカンダリクエリ名も含まれていました。

<!-- AC-8623 -->

* GraphQLライブラリコンポーネントのアドレスエラー処理が期待どおりに動作するようになりました。

<!-- AC-7430 -->

* 製品の表示設定が `Catalog`, `products` その製品に対するクエリによって、設定が正しく解決されるようになりました。 以前は、提供されたフィルターは、 `Visibility: Catalog` 設定。 [GitHub-36591](https://github.com/magento/magento2/issues/36591)

<!-- ACP2E-1769 -->

* The `customer` クエリが次の値を返すようになりました `product_sale_price` 製品価格が税を含むように設定されている場合に、注文に対する税を含むフィールド。 [GitHub-36946](https://github.com/magento/magento2/issues/36946)

<!-- ACP2E-1584 -->

* タイプの製品属性 `DateTime` 次にマッピング： `FilterRangeTypeInput` 製品クエリでフィルターします。 以前は、これらの属性は `FilterMatchTypeInput`. この変更の結果、クエリは次の項目をフィルタリングします： `DateTime` 属性が必要です `from` および `to` の値に一致しない値を返します。

<!-- ACP2E-1552 -->

* The `customer` ストア ID でフィルタリングした場合、クエリは、特定のストア表示に関連する顧客のレビューのみを期待どおりに返すようになりました。

<!-- AC-7544 -->

* The `categories` クエリが `items.redirect_code` 応答値に null 値が含まれています。 [GitHub-36675](https://github.com/magento/magento2/issues/36675)

<!-- ACP2E-1465 -->

* フルキャッシュのクリーンアップ後、GraphQL応答で、ルールベースの関連製品が期待どおりに読み込まれるようになりました。 以前は、ルールに基づく照合をおこなう製品 EAV 属性は、ストアフロントの製品ページを再読み込みした後に読み込まれたものの、リクエストされたエンティティに対して読み込まれませんでした。

<!-- ACP2E-1486 -->

* The `changeCustomerPassword` ミューテーショントリガーが、パスワードを正常にリセットした後、電子メールが期待どおりに送信されるようになりました。

<!-- ACP2E-1494 -->

* `urlResolver` および `route` クエリで、 `Target Path` の URL は、絶対 URL です。 以前は、 `urlResolver` クエリを使用してリダイレクトデータを取得すると、クエリが NULL を返しました。

<!-- AC-7979 -->

* The `products` 複数のストアビューが存在する場合、クエリが正しいラベルを返すようになりました。 [GitHub-29635](https://github.com/magento/magento2/issues/29635)

<!-- ACP2E-1315 -->

* The `categoryList` クエリが入力された値を返すようになりました `product` のセクション `options` バンドル製品の子製品のブロックを期待どおりに作成します。 以前は、バンドル製品の子製品に関する情報は返されていませんでした。

<!-- AC-7114 -->

* The `route` クエリで、内部サーバーエラーなしで、カテゴリと製品のルートが期待どおりに返されるようになりました。 [GitHub-36544](https://github.com/magento/magento2/issues/36544)

<!-- ACP2E-1652 -->

* The `products` クエリを取得しました `url_key` 値を指定できます。

<!-- LYNX-1716-->

* `product` 指定した共有カタログに割り当てられた製品に対してのみ、クエリが集計を返すようになりました。 以前は、共有カタログに割り当てられていない製品の集計データが、階層型ナビゲーションに表示されていました。

<!-- AC-6680 -->

* The `OptionValueProvider` クラス `get()` メソッドは、指定された `option_id` 期待どおり。 以前は、エラーが返されていました。 [GitHub-35910](https://github.com/magento/magento2/issues/35910)

<!-- AC-6745 -->

* The `products` クエリは、使用可能なすべての集計（フィルター）と、正しく変換されたラベルを返すようになりました。 以前は、価格およびカテゴリ集計ラベルが期待どおりに翻訳されていませんでした。 [GitHub-36140](https://github.com/magento/magento2/issues/36140)

<!-- AC-6666 -->

* フラグメントを使用できるようになりました `ProductCard` クエリ時 `related_products`, `upsell_products`、および `crosssell_products` オン `ProductInterface`. [GitHub-29769](https://github.com/magento/magento2/issues/29769)

<!-- AC-7014 -->

* The `products` クエリは、保存された順序で、関連製品、アップセル製品、クロスセル製品を返すようになりました。 [GitHub-36461](https://github.com/magento/magento2/issues/36461)

<!-- AC-8573 -->

* GraphQLクエリで、位置で並べ替えられた関連製品データが返されるようになりました。 [GitHub-33010](https://github.com/magento/magento2/issues/33010)

<!-- AC-8542 -->

* `category_url_path` は次に追加されています： `ProductAttributeFilterInput`：単一のクエリでカテゴリのすべての製品をリクエストできます。 [GitHub-32460](https://github.com/magento/magento2/issues/32460)

<!-- AC-821 -->

* 検証を処理するメソッドの前に、現在のストアをGraphQLのミューテーションに設定するメソッドが実行されるエラーを修正しました。 [GitHub-31336](https://github.com/magento/magento2/issues/31336)

### 画像

<!-- ACP2E-1353 -->

* 管理者の favicon アイコンアップロードフォームがサポートされるようになりました。 `.ico` ファイルタイプ。 [GitHub-34858](https://github.com/magento/magento2/issues/34858)

### インポート/エクスポート

<!-- ACP2E-2261 -->

* 製品の読み込み処理で、正しい区切り文字で値が解析されるようになりました。 以前は、インポート処理では、決定された値区切り文字がデフォルト値と等しくなくなるまで、パイプ (「|」) 演算子を使用して複数選択値を解析していました。 その後、インポートプロセスが失敗しました。

<!-- ACP2E-2490 -->

* 301 リダイレクトが `URL Key` の値は CSV の読み込みによって更新されます。

<!-- ACP2E-2129 -->

* 出荷テーブルのレートが、テーブルレートインポート CSV ファイルで期待どおりに更新されるようになりました。 テーブルレートのアップロードファイルは、非同期コンフィギュレーションプロセッサ cron ジョブが実行されるまで一時的に保存されます。 この cron ジョブは、ファイルの新しい場所を取得し、それに応じて処理します。 以前は、非同期プロセッサが間違った場所でファイルを探していたので、テーブルレートが期待どおりに更新されませんでした。

<!-- ACP2E-2298 -->

* 書き出しファイルグリッドに、タイムスタンプに関係なく、書き出されたすべてのファイルが表示されるようになりました。 以前は、グリッドには、同じタイムスタンプを持つ書き出し済みファイルがすべて表示されていませんでした。 [GitHub-36951](https://github.com/magento/magento2/issues/36951)

<!-- ACP2E-2028 -->

* カスタマイズ可能なオプションを持つ製品を正常に読み込めるようになりました。 以前は、インポート中にオプションデータが失われていました。 [GitHub-37598](https://github.com/magento/magento2/issues/37598)

<!-- ACP2E-2214 -->

* 書き出された CSV ファイル内の特殊文字が、Excel で期待どおりに表示されるようになりました。 [GitHub-37921](https://github.com/magento/magento2/issues/37921)

<!-- ACP2E-2301 -->

* を使用した在庫ソースと顧客アドレスのインポート **[!UICONTROL Customers and Addresses (single file)]**  オプションが正常に完了しました。

<!-- ACP2E-1930 -->

* メモリ不足のため、製品の読み込みが失敗しなくなりました。 以前は、メモリ不足のため、約 1,000 万個の製品が既に含まれるデータベースに、任意の数の製品をインポートできませんでした。

<!-- AC-9116 -->

* 検証チェックで、インポートする有効なデータがない場合に、インポートプロセスが期待どおりに停止し、Commerce で次のエラーが表示されるようになりました。 `There are no valid rows to import`. 以前は、検証はこれらの条件で合格しましたが、インポートプロセスは次のメッセージで失敗していました。 `entity values are mixed`. [GitHub-32905](https://github.com/magento/magento2/issues/32905)

<!-- ACP2E-1754 -->

* 同じ製品の URL キーを読み込むと、既存のデフォルトのストア表示キーが上書きまたは削除されなくなりました。 上書きされなかった場合にのみ、ストアビューで URL の書き換えが再生成されるようになりました。 `url_key` の値です。 以前は、URL を読み込むと、同じ URL キーで書き換えられ、既存のデフォルトのストア表示 URL キーが上書きされていました。 (`key_store` URL の書き換えは削除されましたが、製品のデフォルトのストア表示レベルでの URL の書き換えは、引き続きにに設定されていました。 `key_store`.)

<!-- ACP2E-1875 -->

* 読み込み中に製品数が予期せず変更されなくなりました。 キャッシュのフラッシュは、読み込みプロセスの後まで延期されるようになりました。

<!-- ACP2E-1813 -->

* スケジュールされたインポートアクションのステータスが、インポート操作の成功または失敗を正確に表すようになりました。 以前は、すべてのアクションが成功として記録されていました。

<!-- AC-7039 -->

* コマースで、 **[!UICONTROL Disable Automatic Group Change Based on VAT ID]** 設定を使用して、顧客レコードをインポートします。 以前は、 `disable_auto_group_change` の値は無視されました。 [GitHub-36409](https://github.com/magento/magento2/issues/36409)

<!-- AC-965 -->

* `Magento\Framework\Convert\Excel` は、前にスペースが付いた数値を正常に処理するようになりました。 Excel XML でフィールドが `String`. 以前は、Excel ライターは、これらの値を `number`無効なファイルになりました。 [GitHub-33422](https://github.com/magento/magento2/issues/33422)

<!-- ACP2E-1641 -->

* マーチャントは、読み込みデータを表示するロケールと、データバリデーターによるこのデータの解析方法を指定できるようになりました。 ロケール値が指定されていない場合、Adobe Commerceは（デフォルトのストア表示ではなく）デフォルトの設定ロケールを使用してデータを解析します。 管理では、読み込みおよび書き出し処理は、管理者ユーザーインターフェイスロケールを引き続き使用して、それぞれデータの読み込み、解析、書式設定をおこないます。

<!-- ACP2E-1847 -->

* での製品の読み込み `country_of_manufacture` 製品を読み込む管理者ユーザーとは異なるロケール設定を持つ管理者ユーザーが作成した属性が、検証エラーをスローしなくなりました。 以前は、このインポート操作により、 `country_of_manufacture` 属性。

<!-- ACP2E-1981 -->

* ストアの読み込みプロセスによって、在庫ソースデータが正常に読み込まれ、読み込みプロセスが完了すると、Commerce に完全な通知メッセージが表示されるようになりました。 以前は、通知メッセージが見つかりませんでした。

<!-- ACP2E-1889 -->

* インデクサーがスケジュールモードの場合、冗長なインデクサーの無効化が削除されました。

<!-- ACP2E-1994 -->

* 書き出された製品に正しい `manage_stock` 値 ( `use_config_manage_stock` 値が次と等しい `1`. 以前は、このデフォルト値は正しくありませんでした。

<!-- ACP2E-1620 -->

* スケジュールされたインポート操作中に画像が正常にインポートされなかった場合、Adobe Commerceで、スケジュールされたインポートグリッドに情報のエラーメッセージが表示されるようになりました。 以前は、エラーメッセージは表示されませんでした。

<!-- ACP2E-1565 -->

* 製品イメージが見つからない場合に、製品の読み込み処理が中断されなくなりました。 以前は、CSV ファイルを使用したサードパーティサービスの読み込み中に製品画像が見つからなかった場合、Adobe Commerceに次のエラーが表示されていました。 `Maximum error count has been reached or a system error is occurred!`.

<!-- ACP2E-1476 -->

* B2B が有効になっているデプロイメントで、顧客グリッドからの顧客エクスポートのパフォーマンスが向上しました。

<!-- ACP2E-1391 -->

* 製品の読み込みプロセスで、 `configurable_variations` 列にはコンマが含まれます。

<!-- ACP2E-1377 -->

* デコードは、書き出しプロセスから除外されました。 CSV 書き出しファイルのテキストは、読み込み後も変更されません。 その結果、再読み込み後に説明が変更されることはありません。 以前は、HTMLタグは、製品の書き出しと読み込みの後、ページビルダーエディターで削除されていました。

<!-- ACP2E-1451 -->

* 環境変数として追加されるデフォルト以外の設定（Web サイトまたはストア範囲）が、 `app:config:import` 再帰エラーが発生したプロセス。

<!-- ACP2E-1569 -->

* 保存時に更新モードのカタログ検索および価格インデクサーは、インポート後に無効化されなくなりました。 以前は、新しいElasticsearchと既存の製品が読み込まれると、製品インデクサーのドキュメントのバージョンが変更されていました。

<!-- ACP2E-1482 -->

* 製品レポートが `var` ディレクトリ。 以前は、これらのレポートはドキュメントルートディレクトリに書き出されていました。ドキュメントルートディレクトリは、クラウドインスタンスの読み取り専用ディレクトリです。

<!-- ACP2E-1736 -->

* 複数選択の顧客アドレスフィールドが空の場合に、書き出し処理が中断または中止されなくなりました。

### 索引

<!-- ACP2E-2204 -->

* 価格インデクサーのパフォーマンスに関する問題が解決されました。 インデクサーのパフォーマンスが徐々に低下することはありません。 インデクサーはリファクタリングされ、一時テーブルの作成方法を変更することでインデクサーの処理速度を向上させました。 これらの一時テーブルは、時間のかかるDELETE文で処理される代わりに再作成されるようになりました。

<!-- ACP2E-2033 -->

* 価格インデクサーのパフォーマンスが向上しました。 インデックスのヒントが価格インデクサーに追加され、インデックス作成中に実行される MySQL クエリの実行時間が改善されました。

<!-- AC-9223 -->

* すべてのインデクサが同じ色を使用してインデクサの状態を表すようになりました。 [GitHub-34648](https://github.com/magento/magento2/issues/34648)

<!-- ACP2E-1697 -->

* すべての Web サイトにルールが割り当てられないデプロイメントでの、カタログルール製品インデクサーのパフォーマンスが向上しました。

<!-- ACP2E-1401 -->

* インデクサーがに設定されている場合のカスタム製品タイプの作成 **[!UICONTROL Update on schedule]** インデックスの更新を引き起こさなくなりました。 `cron` タスクが失敗しました。 [GitHub-36471](https://github.com/magento/magento2/issues/36471)

<!-- ACP2E-1574 -->

* カタログ権限のインデックス作成に起因するストアフロント製品の詳細ページの表示の問題が解決されました。 以前は、Adobe Commerceが最初にインデックステーブルをクリアし、フル時にインデックスを再作成していました `catalogpermissions_product` または `catalogpermissions_category` インデックス作成プロセス。 ストアフロントで、インデックスの再作成が完了するまで、カタログ権限が期待どおりに機能しませんでした。

<!-- AC-6816 -->

* `bin/magento indexer:reindex customer_grid` 顧客グリッドに新しく作成されたカスタム顧客属性が含まれる場合に、MySQL エラーが発生して失敗することはなくなりました。 [GitHub-36233](https://github.com/magento/magento2/issues/36233)

<!-- AC-8076 -->

* 複数のインデクサーのインデクサーモードを変更する（つまり、マスアクションインデクサーモードを変更する）と、現在のモードが適用されるインデクサーモードと異なる場合にのみ、インデクサーのモードが変更されるようになりました。 これにより、データベースへの不要なトリップを防ぐことで、パフォーマンスが向上します。 [GitHub-36823](https://github.com/magento/magento2/issues/36823)

### インフラ

<!-- AC-9390 -->

* 置き換えられた MySQL `CREATE TEMPORARY TABLE ... LIKE` リファクタリングして `CREATE TEMPORARY TABLE` MySQL 8.x に準拠するために使用します。 [GitHub-37926](https://github.com/magento/magento2/issues/37926)

<!-- ACP2E-1462 -->

* Adobe Commerceでは、正しくない形式の HTTP リクエストがサーバーに送信された場合に表示されるエラーメッセージに、サーバーのルートへの完全パスが含まれなくなりました。 現在は、文字列のみが `explode` メソッドを 2 番目の引数として使用します。

<!-- AC-8384 -->

* `restricted_classes.php` は置き換えられました `Zend_Validate_File_Upload`. 以前は、インポートファイルのアップロード中に、で設定された値より大きい値をバリデーターがクラッシュしていました。 `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- ACP2E-1146 -->

* データソースモデルが提供し、セットアップデータパッチ（通常はサードパーティのモジュールから）を使用してインストールした属性オプションが、顧客セグメントルールで使用できるようになりました。 以前は、この組み合わせによって、設定済みのセグメントと一致する顧客のリストが返されていませんでした。

<!-- AC-7093 -->

* E メールテンプレートエンジンで、ネストされた特定のディレクティブ ( 例えば、 `{{if}}{{depend}}...{{/depend}}{{/if}}`) をクリックします。 [GitHub-36438](https://github.com/magento/magento2/issues/36438)

<!-- AC-7920 -->

* `product` 集計データを含むクエリで、ブール型の製品属性に対して正しいラベル値が返されるようになりました。 [GitHub-29123](https://github.com/magento/magento2/issues/29123)

<!-- https://github.com/magento/magento2/pull/29173 -->

* 結合時に CSS ファイルが破損しなくなる `var/tmp` および `pub/static` は異なるファイルシステム上にあり、 **[!UICONTROL CSS Merging Enabled]** が有効になっている。 一時ファイルは、両方のファイルが同じファイルシステム上にあることを確認するために、ターゲットファイルと同じ静的ディレクトリに作成されています。 その結果、名前を変更する呼び出しはアトミックです。 [GitHub-29172](https://github.com/magento/magento2/issues/29172)

<!-- https://github.com/magento/magento2/pull/36769 -->

* メンバー関数を呼び出す際の潜在的なエラーを修正しました `getId()` オン `int`：顧客が管理画面に表示された際に例外がトリガーされることがありました。

<!-- https://github.com/magento/magento2/pull/34092 -->

* デザインテーマ設定プロセッサで、配列の種類に対して型チェックが適用されるようになりました。 [GitHub-34440](https://github.com/magento/magento2/issues/34440)

### Inventory management

<!-- ACP2E-1883 -->

* 製品数量の返品を含むクレジットメモの後、製品が自動的に在庫状態に戻るようになりました。 以前は、商品が在庫切れで、クレジットメモがこの商品の在庫を返した場合、商人は手動で商品の在庫ステータスを変更する必要がありました。

<!-- ACP2E-2123 -->

* デフォルトのソース項目のインデックスを再作成する冗長な要求を削除することで、非同期モードでの在庫インデクサーのパフォーマンスを向上しました。

<!-- AC-7023 -->

* 設定可能な製品のストアフロント在庫数の精度に影響する在庫インデクサーの問題を修正しました。 [GitHub-36421](https://github.com/magento/magento2/issues/36421)

<!-- ACP2E-2082 -->

* REST を使用した在庫ソース品目の更新 `V1/inventory/source-items` 現在は、より高速に動作します。 この呼び出しで、変更されていない在庫製品に対するインデックスの再作成やクリーンキャッシュ操作がトリガーされなくなりました。

<!-- ACP2E-1842 -->

* REST `V1/products/<sku>` トリガーが製品の在庫ステータスを更新する際に、自動在庫インデックス再作成をおこなうようになりました。 以前は、更新中の製品に対して、在庫の再インデックスはトリガーされませんでした。

<!-- ACP2E-1653 -->

* 子製品がで更新された際に、設定可能な製品在庫のステータスがストアフロントで期待どおりに更新されるようになりました。 `V1/inventory/source-items`.

<!-- ACP2E-2114 -->

* The `POST <store_code>/V1/inventory/source-items` REST 呼び出しで、返された在庫ソース項目内の空白のペイロードを検証し、必要に応じて検証に関するエラーメッセージを送信するようになりました。

<!-- ACP2E-2072 -->

* 商人が買い物客に対し、注文の受け取り準備ができたことを、 **[!UICONTROL No Manage Stock]** 製品に対して設定が有効になっています。 以前は、この設定が有効になっている場合、Commerce で次のエラーメッセージが表示されていました。 `Your order is not ready for pickup`.

<!-- ACP2E-2227 -->

* マーチャントは、設定可能な製品に関連付けられているシンプルな製品が削除された注文に対して、クレジットメモを作成できるようになりました。 以前は、商人はクレジットメモを作成できず、コマースは `TypeError` 例外です。

<!-- ACP2E-2310 -->

* 管理グリッドのソース数は、フィルターが適用された後に有効なレコードを返すようになりました。 以前は、 `getSourcesCount` メソッドは、常に、フィルターの適用後にソースの合計数を返しました。

<!-- ACP2E-1364 -->

* 「在庫から下に移動」オプションを使用して製品を並べ替えた場合、カテゴリページが管理ダッシュボードにリダイレクトされなくなりました。 この問題は、SQL join ステートメントがまだ含まれていないことを確認した後で、条件ステートメント内に SQL join ステートメントを配置することで解決されました。 以前は、ページは次のメッセージで Admin ダッシュボードにリダイレクトされていました。`Invalid security or form key. Please refresh the page`.

<!-- ACP2E-1488 -->

* `AUTO_INCREMENT` の `inventory_source_item` 次の期間で表が増えることはなくなりました： `UPDATE` 操作。 以前は、更新するたびに `AUTO_INCREMENT` このテーブルの、最終的に `AUTO_INCREMENT` 新しいレコードを `inventory_source_item table`. その結果、管理者ユーザーが管理者から新しい製品を作成しようとすると、次のエラーが表示されました。 `Numeric value out of range...`.

<!-- ACP2E-1378 -->

* 管理者ユーザーは、Inventory managementを使用して、特定のストア表示範囲に対して、管理者から顧客カートに製品を追加できるようになりました。 以前は、在庫 ID が正しく決定されず、管理者ユーザーは顧客の買い物かごに製品を追加できませんでした。

<!-- ACP2E-1399 -->

* 在庫とカタログ間の同期では、 **[!UICONTROL Synchronize with Catalog]** 設定を行います。 以前は、この設定が有効な場合にのみ製品が正しく同期されていました。

<!-- ACP2E-1382 -->

* 発送元の選択時に使用可能な製品の範囲内に含まれる注文から製品数量が差し引かれた場合、Adobe Commerceはページの再読み込み後にエラーをスローしなくなりました。

<!-- ACP2E-1259 -->

* 設定可能な製品とその子製品が更新された場合に、設定可能な製品在庫ステータスが正しく更新されるようになりました。 `Stock Availability` 値は一括在庫更新によって更新されます。 以前は、一括更新で構成可能な製品とその子製品を在庫に戻すことはできませんでした。

<!-- ACP2E-2096 -->

* デフォルト以外のソースのデータタイプがに更新されました `DECIMAL (12, 4)` 8 桁までの整数をサポートする。これは、デフォルトの在庫に実装された同じ制限です。 この値は、管理者の製品ページの追加および編集と同期され、すべてのタイプの在庫ソースに対して最大 8 桁の入力検証をサポートするようになりました。 以前は、 **[!UICONTROL Quantity]** フィールド（デフォルト以外のソースの場合）は、最大 6 桁までサポートされていました。

<!-- ACP2E-2054 -->

* ストアフロントから注文されたデフォルト以外のソースが出荷用に処理される際に、デフォルトソースとデフォルト以外のソースの両方で、製品販売可能数量に関する正しい情報が表示されるようになりました。 以前は、Adobe Commerceで、製品ソースに対して間違った在庫ステータスが表示されていました。

<!-- ACP2E-1950 -->

* `\Magento\Catalog\Model\Product::getIsSalable()` 製品オブジェクトで定義された範囲 (`\Magento\Catalog\Model\Product::getStoreId()`) をクリックします。 以前は、 `getIsSalable()` 製品オブジェクトに関係なく、現在の範囲に基づいて在庫ステータスが返されました。

### ログ

<!-- ACP2E-1788 -->

* システムレポート機能の日時形式が更新され、ログファイルのレコードがレポートに含まれるようになりました。

<!-- ACP2E-1385 -->

* 管理者ユーザーは、管理者の「バルクアクションログ」セクションで、統合によって作成されたバルクアクションのログを表示できるようになりました。

### ログイン

<!-- ACP2E-1521 -->

* 1 つのブラウザーでパスワードをリセットし、その後別のブラウザーでログインしても、例外が発生しなくなりました。 [GitHub-36447](https://github.com/magento/magento2/issues/36447)

<!-- ACP2E-1332 -->

* アカウントをアクティベートした後、期待どおりにログインページにリダイレクトされるようになりました。 以前は、のお客様は自動的にログインしていました。

### メディアギャラリー

<!-- ACP2E-2568 -->

* マーチャントは、同じ名前で大文字と小文字が異なる画像をメディアギャラリーにアップロードできるようになりました（大文字と小文字が混在）。 以前は、ページビルダーでは、画像ファイル名で大文字と小文字が区別されず、大文字と小文字以外の名前を持つファイルが、大文字と小文字が区別されるファイルシステムでホストされた Commerce メディアストレージで上書きされていました。

### 購入回数

<!-- ACP2E-2535 -->

* 商人は、一部の報酬ポイントで支払われた注文の部分返品に対して、期待どおりにクレジットメモを作成できるようになりました。 以前は、商人が部分返品を作成した場合、注文ステータスが誤ってクローズ済と識別され、管理注文ページにクレジットメモオプションが表示されませんでした。

<!-- ACP2E-2632 -->

* ローテーションログのアーカイブ頻度が毎週または毎月の間隔に設定されている場合、管理者のアクションログのローテーションが期待どおりに機能するようになりました。 以前は、週次または月次の間隔を設定した場合、ログは回転されませんでした。

<!-- ACP2E-2583 -->

* Commerce で、部分的にキャンセルされた注文に正しい割引額が適用されるようになりました。 以前は、 `base_discount_cancelled` 列が誤って計算されていました。 割引注文の請求書に、負の値のサポートが追加されました。

<!-- ACP2E-2585 -->

* 残りの `V1/orders` エンドポイントで、注文のインポート時にギフトカードを期待どおりに適用するようになりました。 以前は、このエンドポイントのギフトカード拡張属性の変更は保存されませんでした。

<!-- ACP2E-2412 -->

* Commerce では、管理者ユーザーが管理で注文を作成した際に指定された並べ替え順に基づいて、カスタム顧客アドレス属性を並べ替えるようになりました。

<!-- ACP2E-2400 -->

* 商人がこのページから検索を開始すると、管理受注グリッドページが期待どおりに読み込まれるようになりました。 以前は、商人がこのテーブルから注文を検索しようとすると、ページがフリーズし、Commerce で `Request-URI Too Long` ブラウザーコンソールでエラーが発生しました。

<!-- ACP2E-2294 -->

* 店舗クレジットと追加の支払い方法で注文金額全体が払い戻された場合、注文ステータスが完了ではなくクローズ済みとしてマークされるようになりました。 以前は、払い戻し金額が正しく計算されなかったので、注文ステータスは完了とマークされていました。

<!-- ACP2E-2213 -->

* のパフォーマンスを向上しました。 `OrderRepository::get()` メソッドを使用して、データベースから注文を読み込む回数を減らします。 以前は、このメソッドは注文を複数回読み込んでいました。 [GitHub-36636](https://github.com/magento/magento2/issues/36636)

<!-- ACP2E-1918 -->

* 他の注文品目が払い戻し可能な場合に、商人は、合計がゼロの一部の品目を含む注文に対してクレジット・メモを生成できるようになりました。 以前は、顧客が注文の一部の品目に対して 100%の割引を受けている場合、商人は複数の返金を実行できませんでした。

<!-- AC-8254 -->

* 子製品と親製品のリンクが、管理者から子製品を再注文する際に、注文ページに表示されるようになりました。 [GitHub-37028](https://github.com/magento/magento2/issues/37028)

<!-- AC-1756 -->

* 注文ページのヘッダーセクションに、送信された請求書、クレジットメモ、および出荷に関する期待される情報が含まれるようになりました。 [GitHub-27474](https://github.com/magento/magento2/issues/27474)

<!-- AC-7632 -->

* 構成可能な製品を 1 つだけ含む注文のクレジットメモが正しく生成されるようになりました。 以前は、 `isLast()` 関数が返されませんでした `true` 期待どおり。 [GitHub-36722](https://github.com/magento/magento2/issues/36722)

<!-- ACP2E-1961 -->

* のパフォーマンスの向上 `aggregate_sales_report_bestsellers_data` メインデータクエリを最適化して cron ジョブを実行します。

<!-- ACP2E-1962 -->

* 管理者ユーザーが顧客の Web サイトに対する権限を持っていない場合、Adobe Commerceが顧客残高に対してオフラインで払い戻しを行うクレジットメモを作成する際にエラーをスローしなくなりました。 以前は、Adobe Commerceが次のエラーをスローしていました。 `More permissions are needed to view this item`、管理者ユーザーがストアクレジットの返金を作成できませんでした。

<!-- ACP2E-1714 -->

* バンドル製品を含む注文に対して部分的な返金が行われた場合、注文ステータスが正しくなりました。 以前は、残りの注文が完了していない場合でも、一部払い戻しが発行された後は、注文ステータスが完了と表示されていました。 [GitHub-37377](https://github.com/magento/magento2/issues/37377)

<!-- ACP2E-1514 -->

* 管理者から 1 回限りのカスタム価格を使用して注文が最初に生成された場合、買い物客はカスタム価格を使用して製品を注文できなくなりました。 以前は、注文にカスタム価格の品目が含まれている場合、このカスタム価格は、再注文機能を使用しておこなわれた他の注文に適用されていました。

<!-- ACP2E-1421 -->

* 買い物客は、注文ページに間違った注文ステータスを保存できなくなりました。 品目の出荷時に、注文ステータスが「完了」から「処理」に変更されなくなりました。 以前は、Adobe Commerceは、買い物客がコメントを入力した後で注文ステータスを保存する前に、現在の注文ステータスを確認していませんでした。 [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1387 -->

* 返される設定可能な製品が削除された場合、Adobe Commerceで storefront の注文返却ページでエラーがスローされなくなりました。 以前、Adobe Commerceは次のエラーを記録していました： `report.CRITICAL: Error: Call to a member function getShipmentType() on null in magento2ee/app/code/Magento/Rma/view/frontend/templates/return/create.phtml:52`.

<!-- ACP2E-1367 -->

* 販売注文グリッドが、すべての注文と非同期で同期されるようになりました（期待どおり）。 [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1197 -->

* 注文ページの「顧客の注文」セクションの購入日別フィルター機能が期待どおりに動作するようになりました。 以前は、メソッドに同じタイムゾーンが指定されている場合、タイムゾーンの変換ロジックがエラーをスローした場合に JavaScript エラーが発生していました。

<!-- ACP2E-1294 -->

* Adobe Commerceダッシュボードの初回読み込み時に、正しい注文の統計が表示されるようになりました。 以前は、ダッシュボードに間違った注文情報が表示されていましたが、期間が更新されると正しい情報が表示されていました。

<!-- ACP2E-1762 -->

* 管理者ユーザーは、管理者から新しい注文作成中にストア表示を選択した後、注文ページに期待どおりにリダイレクトされるようになりました。

<!-- ACP2E-1418 -->

* The `GET V1/orders/<OrderID>` エンドポイントは、シンプルな製品の在庫ステータスに関係なく、設定可能な製品とシンプルな製品の両方に関する情報を順番に返すようになりました。 管理者ユーザーは、選択した品目（製品）が在庫または販売可能な場合にのみ、注文をおこなうことができます。 以前は、この API から在庫がある製品に関する情報のみが返されていました。

<!-- AC-7901 -->

* 送料に税が含まれ、税の計算が割引後に適用される場合、送料が有効になっている場合に、クレジットメモページがクラッシュしなくなりました。 以前は、Adobe Commerceは `Division by zero` 例外です。 [GitHub-36800](https://github.com/magento/magento2/issues/36800)

<!-- AC-1342 -->

* の使用 `rest/V1/orders/{id}/comments` エンドポイント：注文ステータスを指定せずに注文に関するコメントを投稿しても、注文の表示に影響を与えなくなりました。 以前は、注文ステータスは NULL として `sales_order` および `sales_order_grid` 「自分の注文」ページも管理者の注文グリッドも、この注文を表示していません。 [GitHub-34180](https://github.com/magento/magento2/issues/34180)

<!-- ACP2E-1597 -->

* 請求書、出荷、クレジットメモは、注文 ID が異なる場合、関連する注文と共に、アーカイブから正常に戻すことができるようになりました。 以前は、注文がアーカイブに移動され、復元された場合、ID 番号が一致しない場合に、請求書、送料、クレジットメモのレコードがその注文から失われていました。 [GitHub-36847](https://github.com/magento/magento2/issues/36847)

### Page Builder

<!-- AC-8777 -->

* ページビルダーで画像のサイズを変更しても、正しい縦横比が維持されるようになりました。 [GitHub-37493](https://github.com/magento/magento2/issues/37493)

<!-- AC-10919 -->

* 指定された最大ファイルサイズを超える画像をアップロードしようとすると、必要に応じてページビルダーでエラーメッセージが表示されるようになりました。 以前は、Commerce で、指定された最大値より小さい、アップロードされた画像ファイルに関する警告ポップアップメッセージが表示されていました。

<!-- ACP2E-1992 -->

* CMS ページの製品スライダーに、スライダーに含めるために選択された子製品の親製品が含まれるようになりました。 以前は、親製品はスライダーから除外されていました。

<!-- ACP2E-2115 -->

* HTML変換されたコンテンツが、 `Magento_AsyncConfig` モジュールが無効です。 以前は、E メールテンプレートには生のHTMLのみが含まれていました。

<!-- AC-9128 -->

* Chrome ブラウザーでの Page Builder の保存操作のパフォーマンスが向上しました。

<!-- ACP2E-1954 -->

* 管理者/ **[!UICONTROL Content]** > **[!UICONTROL Pages]** コピーしたテキストをすべてのスタイルに挿入するには、 `text` 要素を選択します。 以前は、Page Builder でプレーンテキストのみが表示され、スタイルは保存されませんでした。

<!-- ACP2E-1646 -->

* 管理者ユーザーが特定の ACL を持っている場合、Page Builder を使用した製品コンテンツの編集中に CORS エラーが表示されなくなりました。 これで、管理者ユーザーは製品を保存できます。 以前は、Page Builder で製品が保存されず、保存プロセスがフリーズしていました。

<!-- ACP2E-1852 -->

* PageBuilder でアップロードした画像の画像プレビューに、正確なファイルサイズ情報が含まれるようになりました。

<!-- ACP2E-2016 -->

* Chrome ブラウザー (v112) で、ページビルダーのページ要素が許容可能な速度でレンダリングされるようになりました。 以前は、Chrome ブラウザーで PageBuilder を実行してもコンテンツの保存が遅く、Commerce がこのエラーをブラウザーコンソールに記録していました。 `[ERROR] Page Builder was rendering for 5 seconds without releasing locks`.

<!-- ACP2E-1654 -->

* 要素がリモートビデオファイルに直接リンクされている場合、iOSのモバイル Safari ブラウザーで、ページビルダーのビデオ要素の自動再生が期待どおりに動作するようになりました。 以前は、プレビュー画像は表示されませんでした。

<!-- ACP2E-1974 -->

* Chrome ブラウザーで Page Builder が期待どおりに動作するようになりました。 以前は、そのブラウザーでおこなったコンテンツの変更が常に保存されていませんでした。

<!-- ACP2E-2086 -->

* 管理製品編集ページを読み込むと、製品が断続的に生成されなくなりました。 `Uncaught TypeError` JavaScript エラー。

<!-- ACP2E-1886 -->

* ページビルダーエディターを使用してアップロードした画像が、で使用するようにタグ付けされるようになりました。 **[!UICONTROL Content]** > **[!UICONTROL Media Gallery]**. 以前は、これらの画像は **どこでも使用されない** （メディアギャラリー内）

<!-- ACP2E-1564 -->

* ページビルダーカルーセルから買い物かごに製品を追加しても、同じ製品を表示する 2 つの異なるウィジェットを持つページの品目数が重複しなくなりました。

<!-- ACP2E-1542 -->

* ページビルダーで `tabindex` HTML属性のハイパーリンクタグへの追加 `a` ハイパーリンクを編集する場合は、テンプレートを保存します。

<!-- ACP2E-1444 -->

* 製品ウィジェットと Page Builder プレビューで、製品の特殊文字が正しく処理されるようにHTMLしました。 以前は、製品ウィジェットに `&` 文字。

<!-- ACP2E-1441 -->

* プレビューモードでコンテンツブロック全体を選択して更新すると、Page Builder のテキスト要素のコンテンツが期待どおりに更新されるようになりました。

<!-- ACP2E-1362 -->

* ページビルダーのテキストエディター間でのテキストのコピー&amp;ペーストが期待どおりに機能するようになりました。 以前は、テキストを貼り付けようとしたページを保存できず、Adobe Commerceに次のコンソールエラーが表示されていました。 `[ERROR] Page Builder was rendering for 5 seconds without releasing locks.`.

<!-- ACP2E-1568 -->

* Page Builder `column-block` 以前のバージョンの Page Builder で作成されたコンテンツタイプが正しく表示されるようになりました。

<!-- ACP2E-1234 -->

* 管理から製品を作成する際の、製品メタデータの説明のフィルタリングが改善されました。 以前は、Page Builder が有効になっている場合、製品のメタデータの説明はデフォルトの` {{name}} {{description}}` マスク。 デフォルトの製品メタ説明マスクは、 `{{name}}`. [GitHub-36107](https://github.com/magento/magento2/issues/36107)

<!-- ACP2E-1758 -->

* コンテンツのない動的ブロックを追加しても、エラーがトリガーされなくなりました。

### 支払い

<!-- ACP2E-2533 -->

* Commerce で、PayPal からの 502 個のエラーが正しく処理されるようになりました。これは、このエラーが発生した場合に注文の作成を防ぐことです。 以前は、PayPal から 502 エラーが発生しても注文は作成され、Commerce レコードと PayPal の間に矛盾が生じていました。

<!-- AC-9142 -->

* PayPal Express チェックアウトトランザクションに、子製品の SKU と完全な製品タイトルが含まれるようになりました。 The `Magento/Paypal/Model/Cart.php` ファイルで、子の製品 SKU を親の製品タイトルと共に収集して、子の SKU で製品タイトルを識別するようになりました。 [GitHub-36808](https://github.com/magento/magento2/issues/36808)

<!-- ACP2E-1964 -->

* The **[!UICONTROL Card Security Code Does Not Match]** 設定は、Payflow Pro の支払いプロセス中に、期待どおりに処理されるようになりました。 以前は、この評価プロセスは完了せず、チェックアウトがブロックされていました。

<!-- ACP2E-1215 -->

* 買い物客が Vault トークンを持っていない場合、Vault 支払い方法オプションが管理チェックアウトワークフローに表示されなくなりました。 [GitHub-36273](https://github.com/magento/magento2/issues/36273)

<!-- ACP2E-1303 -->

* The **[!UICONTROL Venmo]** PayPal ボタンが有効な場合に、ボタンを非表示にできるようになりました。 以前は、 **[!UICONTROL Venmo]** ボタンを買い物かご、ミニカート、製品の詳細、チェックアウトページから削除できませんでした。

<!-- BUNDLE-3313 -->

* 買い物客は、チェックアウト時にクーポンコードを適用しながら、発送方法を選択できるようになりました。 以前は、これらの条件の下で、Commerce はエラーをスローし、定額配送を注文に割り当てていました。

<!-- BUNDLE-3310 -->

* PayPal および PayPal のクレジット支払い方法のストアフロント処理に関する問題が解決されました。

<!-- BUNDLE-3273 -->

* 現地支払が有効な場合の理想的な支払いで支払われた注文のフォールバック URL の問題を解決しました。

<!-- BUNDLE-3253 -->

* 買い物客は、姓を追加しないと PayPal の注文を作成できなくなりました。

#### Braintree

<!-- AC-2901 -->

* Braintreeの支払い情報は店舗ごとに保存され、買い物客には買い物をする店舗に保存されたカード情報のみが表示されるようになりました。 以前は、買い物客はチェックアウト時にすべての店舗から保存されたカード情報を確認できました。 [GitHub-34253](https://github.com/magento/magento2/issues/34253)

<!-- BUNDLE-3304 -->

* 買い物客は、Braintreeの支払いに対する vault が無効になっている場合、カード支払い方法を使用して、複数のアドレスに発送された注文をチェックアウトできるようになりました。 [GitHub-37615](https://github.com/magento/magento2/issues/37615)

<!-- BUNDLE-3244 -->

* マーチャントがBraintreeアカウントで同じ通貨に対して 2 つの異なるマーチャントアカウント ID を持つデプロイメントで、正しいアカウントで、部分的に請求済みの注文が期待どおりに取り込まれるようになりました。

<!-- BUNDLE-3250 -->

* Adobe Commerceで、Braintreeが支払った注文の 2 番目の部分請求書を作成する際に、 **[!UICONTROL Enable Vault for Card Payments]** が有効になっている。 以前は、商人が 2 番目の請求書を作成しようとすると、Adobe Commerceは次のエラーをスローしました。 `Your payment could not be taken. Please try again or use a different payment method. Payment method token is invalid`.

<!-- ACP2E-1229 -->

* 買い物客が請求先住所を更新した際、Braintreeワークフローで「チェックアウトボールトの支払い方法」オプションが自動的に選択解除されなくなりました。 以前は、買い物客が「 」を選択解除したときの支払い方法が選択解除されていました。 **[!UICONTROL My billing and shipping address are the same]** 」ボタンをクリックします。

<!-- BUNDLE-3248 -->

* Adobe Commerce 2.4.5-p2 からアップグレードした後、Braintreeを通じて PayPal にチェックアウトする際の問題を解決しました。 [GitHub-37242](https://github.com/magento/magento2/issues/37242)

<!-- BUNDLE-3257 -->

* Google Pay モーダルポップアップの配送先住所フィールドの住所に関して、電話番号が期待どおりにレンダリングされるようになりました。 以前は、電話番号が見つかりませんでした。

<!-- BUNDLE-3228 -->

* Braintree応答に次の値が空の場合、注文はBraintreeで正常に処理されるようになりました： `threeDSecureInfo/eciFlag`. 以前は、この値が空の場合、チェックアウト中に PHP エラーが発生していました。

<!-- BUNDLE-3243 -->

* ミニ買い物かごからGoogle Pay をチェックアウトする際に、買い物客が注文確認ページにクーポンを適用した場合に、Adobe Commerceがエラーをスローしなくなりました。 以前は、買い物客は 404 ページにリダイレクトされていました。

<!-- BUNDLE-3245 -->

* 買い物客は、Braintreeの支払いと非表示の ReCAPTCHA v2 または v3 を使用したAdobe Commerce 2.4.6 を使用して、チェックアウトを完了できるようになりました。 [GitHub-37241](https://github.com/magento/magento2/issues/37241)

<!-- BUNDLE-3241 -->

* 買い物客が **[!UICONTROL PayPal]** ボタンを使用すると、必要なオプションを最初に選択せずに、設定可能な製品を購入できます。 以前は、買い物客は **[!UICONTROL PayPal]** ボタンが追加され、その後、次のエラーで製品ページにリダイレクトされました。

<!-- BUNDLE-3148 -->

* The **[!UICONTROL PayPal]** ボタンが、買い物かごおよびミニ買い物かごページに期待どおりに表示されるようになりました。 以前は、このボタンは買い物かごページに表示されず、ミニ買い物かごページに複製されていました。

### パフォーマンス

<!-- AC-9302 -->

* 未使用の `Magento\Catalog\Controller\Adminhtml\Product\Initialization\Helper` から `Magento\Catalog\Model\ProductRepository`. 以前は、 `ProductRepository` このヘルパーをロードしました。 `Adminhtml` コントローラ。 [GitHub-37864](https://github.com/magento/magento2/issues/37864)

<!-- AC-9127 -->

* バンドルされた製品に多くのオプションが追加された場合のページ読み込み速度のパフォーマンスが向上しました。 [GitHub-29409](https://github.com/magento/magento2/issues/29409)

<!-- ACP2E-2069 -->

* カテゴリに製品を割り当てるプロセス ( **[!UICONTROL Products in Category]** タブが最適化されました。 The **[!UICONTROL Assign]** および **[!UICONTROL Remove]** ボタン **[!UICONTROL Add Product by SKU]** 製品がグリッドに完全に読み込まれるまで、タブが無効になります。 以前は、管理者ユーザーは、数百万の登録済み製品を含むカタログに SKU 別に製品を追加できませんでした。

<!-- ACP2E-2098 -->

* のパフォーマンス `addProductToCart` 多数のカスタム製品属性を使用して実行する際のミューテーションが改善されました。 以前は、多くの製品属性（約 1,000）でこのミューテーションが実行された場合、Commerce はすべての製品属性を読み込もうとしました。

<!-- ACP2E-1965 -->

* 買い物かごルールで使用される製品属性を読み込む際のパフォーマンスの問題が解決されました。 現在は、アクティブな買い物かごルールの製品属性のみが読み込まれます。

<!-- ACP2E-1864 -->

* The `bin/magento setup:perf:generate-fixtures setup/performance-toolkit/profiles/ee/small.xml` コマンドを複数回実行した場合に正常に実行されるようになりました。 以前は、次のエラーが 2 回以上実行されるとスローされていました。 `Coupon with the same code already exists`.

### Promotion

<!-- ACP2E-1290 -->

* の効果 **[!UICONTROL Fixed amount discount for whole cart]** 価格ルール（適用時） **[!UICONTROL Apply to shipping amount]** ルールが、期待どおりに製品と送料の間で均等配分されるようになりました。 以前は、割引の計算が正しくありませんでした。

<!-- ACP2E-1300 -->

* The **[!UICONTROL Discard Subsequent Rules]** 設定が期待どおりに適用されるようになりました。 この設定を有効にすると、優先度の低い他のルールは別の製品にのみ適用できます。 [GitHub-35707](https://github.com/magento/magento2/issues/35707)

### reCAPTCHA

<!-- ACP2E-2509 -->

* 非表示の reCAPTCHA v3 がチェックアウトページで期待どおりに動作するようになりました。 **[!UICONTROL Sign in]** 」ボタンをクリックします。 以前は、買い物客はログインできず、コマースは JavaScript エラーをスローしていました。

<!-- ACP2E-1539 -->

* チェックアウトワークフローのGoogle reCAPTCHA が、小切手、注文、カスタム支払い方法に対して期待どおりに機能するようになりました。

<!-- ACP2E-1311 -->

* Google ReCAPTCHA チェックボックスが読み込まれる前は、Adobe Commerceフォームを送信できなくなりました。

<!-- ACP2E-1338 -->

* reCAPTCHA ウィジェットは、 **[!UICONTROL Place Order]** 」ボタンをクリックします。 以前は、ウィジェットはページの上部に表示されていました。

### レポート

<!-- ACP2E-1541 -->

* 注文件数レポート (**[!UICONTROL REPORTS]** > **[!UICONTROL Sales]** > **[!UICONTROL Orders]**) では、デフォルト以外の通貨を使用する店舗で注文が生成される場合に、正しい注文値が含まれるようになりました。 以前は、このレポートに正しくない値が含まれていました。 [GitHub-36742](https://github.com/magento/magento2/issues/36742)

<!-- ACP2E-1477 -->

* 販売注文レポートフォームの誤った情報を明確にするために修正しました。

<!-- ACP2E-1435 -->

* 管理者ユーザーは、 `+` （プラス）放棄買い物かごレポートページからのサイン。 [GitHub-36560](https://github.com/magento/magento2/issues/36560)

<!-- AC-7394 -->

* New Relicがコマース管理で無効化された後、GraphQLトランザクション名が正しく表示されるようになりました。 [GitHub-36112](https://github.com/magento/magento2/issues/36112)


### レビュー

<!-- ACP2E-1998 -->

* Invisible reCAPTCHA v3 が有効な場合、買い物客は重複した製品レビューをすばやく送信できなくなりました。

### 報酬

<!-- ACP2E-2099 -->

* ポイントの有効期限が切れた後、報酬ポイントの有効期限の E メールが送信されなくなりました。 The `magento_reward_balance_warning_notification` および `magento_reward_expire_points` cron タスクはリファクタリングされ、柔軟性と E メール送信機能を向上させました。 以前は、マーチャントは、これらの Cron タスクによって短時間で生成される多くの E メールを送信できませんでした。 この問題により、時間の影響を受ける通知の配信に遅延が生じる可能性があります。

<!-- ACP2E-2283 -->

* 期限切れの報酬ポイントが、買い物客の現在の報酬ポイントの残高から期待どおりに減算されるようになりました。

<!-- ACP2E-1473 -->

* 報酬ポイント残高の更新メール通知で、現在のストアコンテキストが考慮されるようになりました。 以前は、報酬ポイントの残高は、デフォルトストアの構成設定を使用した電子メールを更新していました。

<!-- ACP2E-1329 -->

* クレジットメモの作成後に報酬ポイントを払い戻すことができるようになりました。 以前は、クレジットメモを作成した後も商人は報酬ポイントを払い戻すことができず、注文状況は残っていました `Completed`，ではない `Closed`.

### RMA

<!-- ACP2E-2246 -->

* 残りの `POST /V1/returns` 要求では、製品ごとに 1 つの RMA が作成されるようになりました。 以前は、この要求は検証を回避し、製品ごとに複数の RMA を返す場合がありました。

<!-- ACP2E-2450 -->

* RMA 属性がデフォルトの EAV フォームに自動的に追加され、 **[!UICONTROL Show on Storefront]** RMA 属性が次の値に設定されています： **いいえ**. 以前は、カスタム返品属性が作成され、 **[!UICONTROL Show on Storefront]** RMA 属性がに設定されました **いいえ**.

<!-- ACP2E-2211 -->

* の値 **[!UICONTROL Enable RMA]** 属性が、設定で指定された値 ( **[!UICONTROL Use Config]** 製品の編集ページのチェックボックスがオンになっている。

<!-- ACP2E-1230 -->

* The **[!UICONTROL Enable RMA]** 個々の製品レベルの属性は、ストア RMA 設定に従うようになりました。 以前は、ストアの設定内容に関係なく、製品を追加した際に、この設定はデフォルトでオフになっていました。

### 検索 {#search-heading}

<!-- ACP2E-2272 -->

* ヘッダーのミニ検索フロントエンドでのオートコンプリート検索候補が、期待どおりに機能するようになりました。 以前は、この機能が有効な場合、オートコンプリートはこのフィールドに入力されませんでした。 [GitHub-37557](https://github.com/magento/magento2/issues/37557)

<!-- ACP2E-2101 -->

* インデクサーが追加され、管理者検索バーからおこなわれたクエリのパフォーマンスが向上しました。 以前は、 `search_query` テーブル内で、クエリの完了に要した時間が長くなります。

<!-- ACP2E-2279 -->

* トルコ語の文字を含む名前で、製品の名前によるアルファベット順の並べ替えが正しく機能するようになりました。

<!-- ACP2E-1854 -->

* The **[!UICONTROL Use in Search Results Layered Navigation]** 製品属性プロパティは、 **[!UICONTROL Use in Search]** 設定は次のように設定されています： **[!UICONTROL Yes]**.

<!-- ACP2E-1870 -->

* 詳細検索で、アドバンス検索の価格と SKU フィルターを組み合わせて適用した場合、正しく機能するようになりました。 [GitHub-37581](https://github.com/magento/magento2/issues/37581)

<!-- ACP2E-1787 -->

* 空の検索フィールドに対する検索は実行されなくなりました。 これにより、 `search_query` 表。 以前は、間違ったクエリや空の検索フィールドに対するクエリを実行すると、大きなデータセットが返され、 `search_query` ～に問題が生じた `/tmp`.

<!-- ACP2E-1916 -->

* カタログエントリをドロップダウンのカスタム属性で並べ替える際、Storefront フィルターが期待どおりに機能するようになりました。

<!-- ACP2E-1499 -->

* 検索結果で、属性の検索の重み付けに基づいて、期待どおりの結果が表示されるようになりました。

<!-- AC-7505 -->

* の下の情報テキスト `Search Weight` 属性の `Storefront Properties` 管理上の入力フィールド **[!UICONTROL Stores]** > **[!UICONTROL Attributes]** > **[!UICONTROL Product]** では、可能な値について説明します。 [GitHub-36646](https://github.com/magento/magento2/issues/36675)

### 送料

<!-- ACP2E-2515 -->

* 動的な価格属性が無効な場合にバンドル製品が買い物かごに追加されると、買い物かごの価格ルールが期待どおりに動作するようになりました。 送料は無料で、動的属性が有効か無効かに関わらず、正しい表料が適用されます。 以前は、フリー送料が期待どおりに適用されていませんでした。

<!-- AC-9729 -->

* Commerce で、注文の一部出荷を作成した後に、期待どおりに新しい出荷ページに移行するようになりました。 以前は、一部出荷を作成した後、Commerce では、注文の残りの製品に対して完全な出荷ページが作成されませんでした。 [GitHub-38063](https://github.com/magento/magento2/issues/38063)

<!-- AC-8795 -->

* 複数の住所に注文を送付する合計金額が正しく計算されるようになりました。 以前は、見積書に複数の配送先住所が含まれていた場合、合計コレクターは、 `$quote->getShippingAddress()` それを通す代わりに `$shippingAssignment` 期待どおり。 [GitHub-37283](https://github.com/magento/magento2/issues/37283)

<!-- ACP2E-2459 -->

* Commerce で、管理者ユーザーがログイン機能を顧客機能として使用した場合に、複数の配送先住所を含むチェックアウト中に例外がスローされなくなりました。

<!-- ACP2E-2258 -->

* 発送ラベルが作成された後に製品をパッケージに追加すると、製品がパッケージの作成ページの製品グリッドに正しく表示されるようになりました。

<!-- ACP2E-2044 -->

* The `cart` クエリで、個別の出荷割引と一意の割引ラベルを別々の出荷割引として、個別の出荷割引が返されるようになりました。 新しい `applied_to` discount プロパティは、買い物かご項目に適用される割引の違いをサポートします。 以前は、すべての送料割引が 1 つのハードコードに組み合わされていました。 **[!UICONTROL Shipping Discount]** の値です。

<!-- ACP2E-1826 -->

* 管理者ユーザーが再注文を作成すると、最初の注文の請求先住所と配送先住所が、管理者ユーザーが **[!UICONTROL Reorder]** ボタン（管理者） **[!UICONTROL Sales]** > **[!UICONTROL Orders]** > **[!UICONTROL View]** ) をクリックします。 同じアドレスが買い物客のアドレス帳に保存されている場合、並べ替えは常に、これらのアドレスの更新バージョンを組み込みます。 以前は、配送先住所フィールドには更新されたデータが事前に入力されていましたが、請求先住所フィールドには入力されていませんでした。

<!-- AC-7003 -->

* The **[!UICONTROL Shipping Policy]** 「管理ストア表示」の範囲で、「 **[!UICONTROL Apply custom Shipping Policy]** が有効になり、カスタム配送ポリシーが使用可能になります。 [GitHub-36425](https://github.com/magento/magento2/issues/36425)

<!-- AC-7550 -->

* The `cart` クエリが次の値を返すようになりました `selected_shipping_method` 次のいずれかと一致する値 `available_shipping_methods` 通信事業者および方法コード。 以前は、選択した発送方法の 1 つにアンダースコアが含まれていた場合、これらの通信事業者/方法コードが一致しませんでした。 [GitHub-36606](https://github.com/magento/magento2/issues/36606)

<!-- AC-2556 -->

* The `setShippingAddressesOnCart` street 配列の 2 番目の値が null の場合に、突然変異でエラーがスローされなくなりました。 以前は、この例外がスローされていました。 `The address failed to save. Verify the address and try again`. [GitHub-35160](https://github.com/magento/magento2/issues/35160)


### サイトマップ

<!-- AC-2465 -->

* XML サイトマップがマルチストーリーデプロイメントで期待どおりに機能するようになりました。 以前は、サイトマップに各ストアに割り当てられたデフォルトページが含まれていませんでした。 [GitHub-35001](https://github.com/magento/magento2/issues/35001)

<!-- AC-2267 -->

* Web サイトで商人が製品を作成して保存できるようになりました。 `id != 1` およびシングルストアモードが有効です。 以前は、次のメッセージで保存操作が失敗していました。 `SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails`. [GitHub-35009](https://github.com/magento/magento2/issues/35009)

### ステージング

<!-- ACP2E-2665 -->

* セールスルールのステージング更新は、ステージングダッシュボードで重複しなくなりました。

<!-- ACP2E-2173 -->

* スケジュールの更新が進行中に買い物客が買い物かごに追加した場合、バンドル製品が正しく更新されるようになりました。 以前は、スケジュールタスクの処理中にオプションを含むバンドル製品が買い物かごに追加された場合、 Commerce は次の例外をスローしていました。 `Some of the products below do not have all the required options. Please select all required options`.

<!-- ACP2E-2252 -->

* スケジュールの更新で、バンドルオプションの正しい価格が維持されるようになりました。 以前は、特定のウェブサイトまたは店舗のビューで、これらの価格はゼロに変更されていました。

<!-- ACP2E-2150 -->

* スケジュールされた更新を更新しても、終了日が指定されていない場合に、ステージング済みアイテムの以前のバージョンが削除されなくなりました。 以前は、ステージングされた項目が更新されると、終了日が指定されない場合に、ロールバックされた項目のバージョンが削除されていました。 Commerce は、削除前にエラーをスローしたり、管理者ユーザーに警告を表示したりしませんでした。

<!-- ACP2E-1923 -->

* 買い物かごの価格ルールの予定更新後に、店舗表示のラベル値が消去されなくなりました。 以前は、更新で指定されていない場合でも、これらのラベルは消去されていました。

<!-- ACP2E-1803 -->

* リンクされたページに対して、コンテンツステージングのプレビューが正しく機能するようになりました。 以前は、ステージングプレビューではリンクされたページに移動できず、正しく保存されないページに移動していました。

<!-- ACP2E-1876 -->

* ステсージング更新をハングしても、後日割り当てられたスケジュール済み更新が削除されなくなりました。

<!-- ACP2E-1501 -->

* JavaScript エラーは、Content Experiment が有効な場合に、カテゴリのスケジュールされた更新を追加または編集する際にGoogle Analyticsされなくなりました。

<!-- ACP2E-1344 -->

* マーチャントは、カテゴリの表示または編集後に、カテゴリの既存のスケジュール更新を正常に保存できるようになりました。 以前は、Adobe Commerceは `system.log`.

<!-- ACP2E-1596 -->

* 以前に追加した製品が買い物かご内にある間にスケジュール済みの更新が適用された場合、ダウンロード可能なリンクが期待どおりに保持されるようになりました。 以前は、ダウンロード可能なリンクは、顧客のマイアカウント（マイダウンロード可能な製品）ページと管理者の注文表示ページから消えていました。

<!-- ACP2E-1458 -->

* 製品が適用されるステージング用の更新後、製品が期待どおりにストアフロントに表示されるようになりました。 以前は、カタログ在庫のインデクサーモードが「スケジュールに従って更新」に設定されている場合、製品は「管理」で有効になっていましたが、ストアフロントカテゴリに表示されませんでした。 完全なインデックス再作成で問題が修正されました。

<!-- ACP2E-1647 -->

* The `staging.synchronize_entity_period` 内のコンシューマーキュー `magento_bulk` プロセスに対するステージングの更新がない場合、テーブルは増加しなくなりました。 以前は、 `cron` が毎分実行するように設定されている場合、 `staging.synchronize_entity_period` 毎分、消費者がこのテーブルに追加されます。

<!-- ACP2E-1415 -->

* 別の製品の保存中に製品のスケジュール変更を作成した場合、Adobe Commerceで SQL エラーがスローされなくなりました。 以前は、Adobe Commerceに次のエラーが表示されていました。 `The product with the SKU "%1" couldn't be added to the current update`.

### ターゲットルール

<!-- ACP2E-1438 -->

* 異なるストアビューで Target ルールが正しく機能するようになりました。 以前は、関連する製品ルールのキャッシュに関する問題により、マルチストアデプロイメントで推奨製品が表示されませんでした。

### 税

<!-- ACP2E-2651 -->

* 税金が設定され、FPT が有効な場合、請求書に正しい小計が表示されるようになりました。

<!-- ACP2E-2245 -->

* Commerce で、 **[!UICONTROL Regular Price]** 値： **[!UICONTROL Special Price]** 値の値： **[!UICONTROL Price Display Settings]** が税込みに設定されている。

<!-- ACP2E-2303 -->

* 設定で指定されたとおりに、税がチェックアウトワークフローの送料に期待どおりに含まれるようになりました。

<!-- AC-9758 -->

* The `cart` クエリ `applied_taxes` 応答値に、個々の税務処理基準がすべて想定どおりに含まれるようになりました。 以前は、複数の税ルールを設定した場合に合計税額が戻されていました。

<!-- ACP2E-2247 -->

* の折りたたみ/展開アイコン **[!UICONTROL Additional Settings]** 「 」セクションを使用して、税務処理基準の作成時に期待どおりに機能するようになりました。 以前は、展開アイコンのみが機能していました。 [GitHub-37922](https://github.com/magento/magento2/issues/37922)

<!-- ACP2E-1527 -->

* 「税金ルールの編集」ページから、「税率の国」と「地域」の値を期待どおりに編集できるようになりました。 以前は、そのページで行った編集は保存されませんでした。

<!-- ACP2E-1143 -->

* 輸送方法が更新されると、買い物かごの見積もり領域の税額が期待どおりに更新されるようになりました。 以前は、チェックアウト時に買い物客が国を変更した後も税率は更新されませんでした。

<!-- AC-8227 -->

* The `tax class` ストア表示範囲で既存の設定可能なプロダクトの新しいバリエーションを作成する際、新しく作成されたシンプルプロダクトの値が親プロダクトの値に設定されるようになりました。 以前は、この値は none に設定されていました。 その結果、買い物かご内のこれらの製品には税金が追加されず、お客様は過少請求された税金になりました。 [GitHub-37180](https://github.com/magento/magento2/issues/37180)

### テスト

<!-- ACP2E-2501 -->

* 改善された `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` e メールフィールドを早期に完了することに起因するエラーを除外するためのテスト。

<!-- AC-10863 -->

* `StorefrontVerifyProductAfterPartialReindexOnSeveralWebsitesTest` は、信頼性を向上させるためにリファクタリングされました。 [GitHub-38359](https://github.com/magento/magento2/issues/38359)

<!-- ACP2E-2501 -->

* 修正された `AdminSimpleProductwithTextandVisualSwatch` 検索で使用する属性を明示的に設定する追加の手順を導入してテストします。

<!-- AC-9194 -->

* 修正された誤植 ( `SortbyTest` 単体テスト。 [GitHub-37792](https://github.com/magento/magento2/issues/37792)

<!-- AC-9035 -->

* 単体テストで存在しないクラスへの参照を削除しました。 [GitHub-37636](https://github.com/magento/magento2/issues/37636)

<!-- ACP2E-2604 -->

* 改善された `AdminCreateOrderWithVirtualProductFromDefaultSourceWithBackorders` e メールフィールドを早期に完了することに起因するエラーを除外するためのテスト。

<!-- ACP2E-2202 -->

* リファクタリング `Magento\GraphQl\Catalog\ProductSearchTest::testFilterProductsBySingleCategoryId` でのランダムなカテゴリ順序を処理するテスト `products` 応答をクエリします。

<!-- AC-7098 -->

* の大きなアレイに関するパフォーマンスの問題 `TableNameSniff` が解決されました。

<!-- ACP2E-1690 -->

* ギフトレジストリ編集機能の統合テストで、既存のエンティティ ID に依存しなくなりました。 必要なデータはすべて、器具を通じて取得されます。 以前は、 `\Magento\GiftRegistry\Controller\Index\EditPostTest` 失敗しました。

<!-- ACP2E-1748 -->

* `CollectionTest::testGetDateRangeFirstPart()` 夏時間を考慮するようになりました。

<!-- ACP2E-1824 -->

* 次の修正された廃止の通知： `StorefrontDeleteItemFromRequisitionListPrintView`.

### UI フレームワーク

<!-- AC-10877 -->

* ファイルのアップロードスタイルが Luma のテーマで重複しなくなりました。 [GitHub-32373](https://github.com/magento/magento2/issues/32373)

<!-- AC-9984 -->

* 番地フィールドの顧客アカウント編集住所フォームの番地フィールドが、正しく保存されるようになりました。 これらのフィールドは、フォーム内の指定されたキーで正しく並べ替えられるようになりました。 [GitHub-37973](https://github.com/magento/magento2/issues/37973)

<!-- AC-9107 -->

* ギフトレジストリでのカーソルの動作を修正しました **[!UICONTROL Message]** テキストフィールド。

<!-- AC-3001 -->

* 製品の詳細ページの累積レイアウトシフト (CLS) 値が改善されました。 （この指標は、ページレイアウトの視覚的安定性を定量化します）。[GitHub-35410](https://github.com/magento/magento2/issues/35410)

<!-- AC-10567 -->

* テンプレートのレンダリング中に発生するエラーのメッセージを改善しました。 コマースに情報メッセージが表示されるようになりました。 以前は、PHP エラーが発生した場合に、Commerce でHTMLリークが表示されていました。

<!-- ACP2E-2595 -->

* カスタム顧客属性 ( タイプ `File attached`) は、削除された後にアップロードされた画像で正しく機能するようになりました。 以前は、カスタム属性がアップロードされ、削除されてから再度アップロードされた場合、ストアフロントから保存できませんでした。

<!-- AC-9125 -->

* カレンダーテンプレートファイルの構文エラーを修正しました。 [GitHub-37725](https://github.com/magento/magento2/issues/37725)

<!-- AC-6445 -->

* シングルストアモードが有効な場合、管理者ユーザーはストアフロントのロゴを変更できるようになりました。 以前は、Commerce にデフォルトのフォールバックロゴが表示されていました。 [GitHub-35952](https://github.com/magento/magento2/issues/35952)

<!-- ACP2E-2045 -->

* Mixin の設定値が空ではなくなり、読み込み位置に関係なく jQuery Mixin が機能するようになりました。 以前は、jQuery の mixin がブラウザー間で一貫して読み込まれていませんでした。

<!-- AC-8823 -->

* 次の場合に、パスワードが期待どおりに表示されるようになりました。 **[!UICONTROL Show Password]** のチェックボックスがアクティブになっている。

<!-- ACP2E-2034 -->

* Adobe Commerceで、特別価格の固定バンドル製品に対して正しい価格が表示されるようになりました。

<!-- AC-8285 -->

* ストアフロントフッターテンプレートファイルの GitHub の問題リストページへのリンクを更新しました。 [GitHub-37214](https://github.com/magento/magento2/issues/37214)

<!-- AC-6282 -->

* 最近表示されたウィジェットに、グループ化された製品価格で正しい税額が表示されるようになりました。 [GitHub-35881](https://github.com/magento/magento2/issues/35881)

<!-- AC-6636 -->

* 管理者ユーザーは、シンプルな製品用に作成したカスタマイズ可能なオプションを期待どおりにドラッグ&amp;ドロップできるようになりました。 [GitHub-36051](https://github.com/magento/magento2/issues/36051)

<!-- AC-8345 -->

* 製品ドロップダウン属性タイプの順序が、設定可能な製品ページの画像の順序と一致するようになりました。 [GitHub-37285](https://github.com/magento/magento2/issues/37285)

<!-- ACP2E-1969 -->

* システムメッセージの読み込みが迅速になりました。 表示されているメッセージのみが読み込まれます。 以前は、すべてのメッセージがデータベースから読み込まれていましたが、これは時間がかかっていました。

<!-- ACP2E-1804 -->

* 次の設定によるパンくずリストノードの削除 `remove=true` レイアウト XML を使用すると、カテゴリページのページタイトルが削除されなくなりました。 以前は、パンくずリストを削除すると、カテゴリページからページタイトルが削除されていました。

<!-- ACP2E-1717 -->

* 複数選択の顧客属性が含まれる場合、顧客登録フォームが期待どおりに読み込まれるようになりました。 以前は、Adobe Commerceは次の例外をスローしていました。 `[2023-03-05T05:57:40.032602+00:00] report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- ACP2E-1602 -->

* コンソールエラーなしで、一重引用符を含むようこそメッセージがストアフロントに正しくレンダリングされるようになりました。 以前は、ようこそメッセージに一重引用符が含まれていた場合、ストアフロントレンダリング中にようこそメッセージが読み込まれていませんでした。 Adobe Commerceでもコンソールエラーが表示されていました。

<!-- ACP2E-1369 -->

* 注文履歴から注文管理ページの「戻る」までのビューをすばやく変更しようとしても、Adobe Commerceでエラーがスローされなくなりました。 以前は、Adobe Commerceに次の一般的なエラーが表示されていました。 `A technical problem with the server created an error`.

<!-- ACP2E-1374 -->

* 1 つの Web サイトに制限された権限を持つ管理者ユーザーが、 `all stores view` 範囲。

<!-- ACP2E-1648 -->

* 虫めがねウィジェットが製品ページで期待どおりに読み込まれるようになりました。

<!-- ACP2E-1216 -->

* 複数行のカスタマイズ可能なオプションが、請求書、出荷、クレジット・メモ・PDF・ドキュメントで適切にレンダリングされるようになりました。 以前は、複数行テキストの前に予期しない改ページが発生していて、そのテキストがページを超えると、テキストが切り捨てられていました。

<!-- AC-7402 -->

* ストア ID が Web サイト ID と一致しない別の Web サイト用にその顧客が作成された場合、管理者ユーザーは、その顧客が管理者から新しい顧客アドレスを追加できるようになりました。 以前は、Adobe Commerceに次のポップアップメッセージが表示されていました。 `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- ACP2E-1529 -->

* 会社管理者の電子メールに `CMS Block URL` 変数を使用します。

<!-- ACP2E-1775 -->

* 注文の詳細ページでのコメントの送信に関連するエラーメッセージが、より多くの情報を得られるようになりました。 以前は、買い物客が **[!UICONTROL Submit comment]** 注文ステータスを変更したり、コメント領域にテキストを入力したりしなくても、Adobe Commerceは次のメッセージを表示しました。 `The comment is missing. Enter and try again`.

<!-- ACP2E-1659 -->

* 管理者の日付範囲フィールドに、カレンダーアイコンが期待どおりに表示されるようになりました **[!UICONTROL Marketing]** > **[!UICONTROL Cart Price Rules]** 1 つのフィールドに対して日付が選択された後。 以前は、1 つのフィールドに日付を選択すると、他のフィールドにカレンダーアイコンが表示されなくなり、Adobe Commerceにプレースホルダーテキストが表示されていました。 [GitHub-36499](https://github.com/magento/magento2/issues/36499)

<!-- ACP2E-1717 -->

* 複数選択フィールドを含む顧客登録フォームが正常に読み込まれるようになりました。 以前は、このフォームに複数選択フィールドが含まれている場合に読み込まれず、次のエラーがトリガーされていました。 `report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- AC-7092 -->

* 製品ギャラリーの全画面表示モードでビデオサムネールをクリックすると、ビデオが期待どおりに表示されるようになりました。 以前は、ビデオが表示されず、ブラウザーコンソールに JavaScript エラーが表示されていました。 [GitHub-36456](https://github.com/magento/magento2/issues/36456)

<!-- AC-7806 -->

* 著作権行に、毎年自動的に更新される変数を追加しました。 [GitHub-36776](https://github.com/magento/magento2/issues/36776)

<!-- AC-8441 -->

* 製品ページの画像スライダーがモバイル表示で期待どおりに動作するようになりました。 以前は、最初の画像のみが正常に表示されていました。 [GitHub-37232](https://github.com/magento/magento2/issues/37232)

### URL の書き換え

<!-- ACP2E-2549 -->

* マルチストアデプロイメントでのストアレベルの表示設定に基づいて、URL の書き換えが生成されるようになりました。 以前は、製品の表示が **非表示** デフォルトのストア範囲の下に表示されます。

<!-- AC-10464 -->

* `Category::getUrl()` は 301 リダイレクトを取得しなくなりました。 [GitHub-38152](https://github.com/magento/magento2/issues/38152)

<!-- ACP2E-2629 -->

* Commerce で、ルートカテゴリとに設定された製品に対して、製品 URL の書き換えが生成されなくなりました。 **[!UICONTROL Not Visible Individually]** （カスタムストアに対する欠落した URL 書き換えの生成時）

<!-- ACP2E-2481 -->

* カテゴリ URL キープロパティが更新された後、正規 URL タグに期待どおりの変更が反映されるようになりました。 以前は、古いカテゴリ URL が使用されていました。これにより、新しい URL へのリダイレクトが直ちにトリガーされました。

<!-- AC-6728 -->

* 製品がカテゴリに追加された際に、すべてのストア表示で、カテゴリ製品 URL の書き換えが期待どおりに生成されるようになりました。 [GitHub-32910](https://github.com/magento/magento2/issues/32910)

<!-- ACP2E-1783 -->

* Commerce で、製品 URL の301/302リダイレクトを作成しようとしたときに、 **カテゴリ/製品 URL の書き換えを生成** が有効になっている。 製品が作成され、カテゴリに割り当てられると、自動 URL 書き換えが作成されます。1 つはダイレクト URL 用、もう 1 つはカテゴリパスを通じて製品用です。 新しい製品 URL の書き換えが作成されると、製品、カテゴリ、ストア間の相関関係がチェックされます。 このチェックは、相関するエンティティのプロパティ（カテゴリと製品）に基づいておこなわれるようになりました。 以前は、このチェックは、既存の URL の書き換え時に実行されていました。

<!-- ACP2E-1737 -->

* 新しいカテゴリが CSV ファイルからインポートされた場合、すべてのストア表示でカテゴリ URL の書き換えが生成されるようになりました。

<!-- ACP2E-1700 -->

* 製品 URL サフィックスとカテゴリ URL サフィックスの設定が、 `url_rewrite` 表。 以前は、URL サフィックス設定を更新する際の競合状態が発生し、設定された URL サフィックスと `url_rewrite` テーブルが一致しませんでした。

<!-- ACP2E-1703 -->

* カテゴリ URL の書き換えを作成する際、Adobe Commerceはカテゴリツリーをすべてのレベルでレンダリングするようになりました。 以前は、カテゴリの最初の 3 つのレベルのみが表示されていました。 [GitHub-36973](https://github.com/magento/magento2/issues/36973)

<!-- ACP2E-1644 -->

* 子ノードが 1 つある新しく作成した CMS ページが、マーケティングフィルターグリッド (**[!UICONTROL Marketing]** > **[!UICONTROL URL rewrites]**) をクリックします。 以前は、これらの CMS ページに対して URL の書き換えが作成されていませんでした。

<!-- ACP2E-1737 -->

* 新しいカテゴリのインポート中に、カテゴリ URL の書き換えが CSV ファイルに存在するようになりました。

<!-- ACP2E-1668 -->

* URL の書き換えを行わないマルチストア CMS ページが、期待どおりに転送されるようになりました。 以前は、URL の書き換えを行わない要求されたマルチストア CMS ページはストアのホームページにリダイレクトされていましたが、元の CMS ページはリダイレクトされませんでした。

### Visual Merchandiser

<!-- ACP2E-1363 -->

* これで、 `Categories` 属性を使用します。 以前は、Adobe Commerceは次の例外をスローしていました。 `Something went wrong while saving the category`.

### Web API フレームワーク

<!-- AC-6980 -->

* Commerce で `Integration not secure` 管理での警告 **[!UICONTROL System]** > **[!UICONTROL Extensions]** > **[!UICONTROL Integrations]** 時に **[!UICONTROL Callback URL]** および **[!UICONTROL Identity link URL]** フィールドが空です。 [GitHub-36407](https://github.com/magento/magento2/issues/36407)

<!-- ACP2E-2483 -->

* 追加された `taxes`, `itemized_taxes`、および `additional_itemized_taxes` 拡張属性を  `Magento\Sales\Api\Data\OrderInterface`. これらの属性を使用すると、Order REST 呼び出しで適用済みの税金を保存できます。

<!-- ACP2E-2610 -->

* 階層価格 REST API で小数点以下の数量をサポートするようになりました。 以前は、この API では、 **[!UICONTROL Use Decimal Quantity]** の設定が有効になっています。

<!-- AC-8998 -->

* 残りの `V1/orders/{id}/comments` エンドポイントで、保留中の注文のステータスにコメントを追加しようとした際に、注文のステータスが変更されなくなりました。 有益なエラーが発生するようになりました。 以前は、このエンドポイントでコメントを追加する際の順序のステータスが変更されていました。

<!-- ACP2E-2275 -->

* REST API `GET` および `POST V1/products/attributes` エンドポイントが `is_filterable` 両方の属性 `Filterable(with results)` および `Filterable(no results)` オプション **[!UICONTROL Use in Layered Navigation]** オプション。 以前は、このエンドポイントは同じ値を返していました。これは、 `is_filterable` 属性プロパティのタイプはです `Boolean`（このプロパティをに設定することを許可していません）。 `Filterable(no results)`. [GitHub-37979](https://github.com/magento/magento2/issues/37979)

<!-- AC-9117 -->

* 見つからない `media_gallery_entries` フィールドが REST に追加されました。 `V1/configurable-products/sku/children` endpoint. 以前は、この関数には、の保存と表示に必要なコードが含まれていませんでした `media_gallery_entries`. [GitHub-37607](https://github.com/magento/magento2/issues/37607)

<!-- ACP2E-1986 -->

* 残りの `V1/carts/mine/estimate-shipping-methods` メソッドは、ペイロードフィールドデータのすべてのレベルを検証し、無効なデータの 400 HTTP コードを返すようになりました。 以前は、API ペイロードの最初のレベルのみが検証され、ペイロードの検証されていないレベルで無効なデータが返された場合、Commerce は 500 ステータスコードを返していました。

<!-- ACP2E-2053 -->

* 非同期の一括 REST API 操作で、階層価格と異なる属性セットで製品を更新できるようになりました。 以前は、異なる属性セットを持つ製品をこの方法で更新できず、Commerce で次のエラーが表示されていました。 `The product was unable to be saved. Please try again`.

<!-- AC-7002 -->

* The `POST /V1/products/tier-prices` エンドポイントで、価格帯の作成時に無効な顧客グループ名が使用された場合に、より有益なエラーメッセージが返されるようになりました。 以前は、Adobe Commerceは次のようなエラーを返していました： `Notice: Undefined index: XXXXX in ~/public_html/vendor/magento/module-catalog/Model/Product/Price/Validation/TierPriceValidator.php on line 474"`. [GitHub-36431](https://github.com/magento/magento2/issues/36431)

<!-- ACP2E-1776 -->

* 認証済みの非同期一括 API リクエストを実行して、デフォルト以外のグループ ID を持つ顧客を作成できるようになりました。 以前は、これらのリクエストにより、グループ ID がデフォルト値にリセットされていました。

<!-- ACP2E-1543 -->

* Bulk API を使用して作成されたお客様は、割り当てられた Web サイトで設定された言語で顧客登録電子メールを受け取るようになりました。 以前は、すべての電子メールが、顧客が割り当てられている Web サイトのロケールではなく、デフォルトのロケールに送信されていました。

<!-- ACP2E-1339 AC-7577-->

* The `POST V1/guest-carts` 次の場合、電話はゲスト注文を送信しない **[!UICONTROL Allow Guest Checkout]** は無効です。

<!-- ACP2E-1336 -->

* これで、管理者からステータスを持つ注文を開くことができるようになりました `Received` when `AsyncOrder` が有効になっていません。 以前は、注文ステータスが次の条件で変更された場合、管理から注文の詳細ページを開くことができませんでした： `POST V1/orders`.

<!-- ACP2E-1526 -->

* Adobe Commerceが正常に返されるようになりました `content` の属性（base64 イメージコード） `GET V1/products/sku/media` 製品メディア API 応答。 The `content` 属性は、以前は応答に表示されていませんでした。

### ウィッシュリスト

<!-- ACP2E-1784 -->

* Commerce で、買い物客が同じ項目を複数回ウィッシュリストに追加しようとしたときに、その項目が既にウィッシュリストに追加されていることを示すメッセージが表示されるようになりました。 以前は、これらの条件の下で、Commerce はウィッシュリストの製品数を増やしました。

<!-- AC-8610 -->

* Adobe Commerceは、必要なアップロード済みのカスタマイズ可能なオプションファイルを含む製品をウィッシュリストに正常に追加するようになりました。 以前は、Commerce がウィッシュリストに 2 つの製品を追加していましたが、1 つは追加していませんでした。 [GitHub-37437](https://github.com/magento/magento2/issues/37437)

## 既知の問題

Adobe Commerce 2.4.7 GA では、次の既知の問題が修正されます。

**問題**:AWS Cloud ネイティブサービスは、PHP 8.3 と互換性がありません。PHP 8.3 との互換性は、Adobe Commerce 2.4.7 GA で導入されます。 <!-- AC-11395 -->

**問題**：キャッシュが Fastly CDN(**[!UICONTROL Caching Application=Fastly CDN]**) をクリックします。 これは、ゲストの買い物客と登録顧客の両方に影響します。  <!-- AC-11411 -->

**問題**：製品に割り当てられている共有カタログが製品から削除された後、ミニカートから期待どおりに製品が削除されません。 <!-- AC-8935 -->

## 必要システム構成

当社の技術スタックは、PHP および MySQL 上で構築されています。 詳しくは、 [必要システム構成](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## インストールおよびアップグレードの手順

Adobe Commerce 2.4.7-beta3 は、 [コンポーザー](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
