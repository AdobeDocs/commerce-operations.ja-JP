---
title: Adobe Commerce 2.4.3 リリースノート
description: 2.4.3 Adobe Commerce リリースの新機能、機能強化、バグ修正および既知の問題について説明します。
exl-id: 34b1248f-a44e-489b-94ae-945d31abecea
source-git-commit: 1eaf2329c16e6dbe3e93cb7fff3a6920b4b8379d
workflow-type: tm+mt
source-wordcount: '15110'
ht-degree: 0%

---

# Adobe Commerce 2.4.3 リリースノート

Adobe Commerce 2.4.3 では、パフォーマンスとセキュリティの強化に加えて、プラットフォームが大幅に改善されました。 セキュリティの強化には、reCAPTCHA の対象範囲の拡張と、組み込みのレート制限の組み込みが含まれます。 Core composer の依存関係とサードパーティライブラリは、PHP 8.x と互換性のある最新バージョンにアップグレードされました。

このリリースには、コアコードに対する 370 を超える新しい修正と、33 のセキュリティ強化が含まれています。 Adobe Commerce 2.4.2 リリースノートで確認された既知の問題はすべて、このリリースで修正されました。

{{bics}}

参照： [Adobe Commerce 2.4.2-p2 リリースノート](../security/2-4-2-patches.md) Adobe Commerce 2.4.2-p2 の詳細

## その他のリリース情報

これらの機能のコードは四半期ごとのリリースにバンドルされていますが、これらのプロジェクトのいくつか（B2B、ページビルダー、Progressive Web Application（PWA） Studio など）も個別にリリースされています。 これらのプロジェクトのバグ修正は、各プロジェクトのドキュメントで利用できる別のプロジェクト固有のリリース情報に記載されています。

## API レート制限の問題に対処するには、MC-43048__set_rate_limits__2.4.3.patch を適用します

このホットフィックスは、配列に 20 個を超える項目を含むリクエストを web API で処理できない問題の解決策を提供します。 この問題は、Magento Open Source 2.4.3、Adobe Commerce 2.4.3、または 2.3.7-p1 を実行するデプロイメントに影響します。 サービス拒否（DoS）攻撃を防ぐために、これらのリリースには組み込みのレート制限が追加され、デフォルトの最大値は 20 に設定されていました。 このパッチは、デフォルトの制限を高い値に戻します。 ストアで DoS 攻撃が発生していると思われる場合、Adobeでは、リクエストできるリソースの数を制限するために、デフォルトの入力制限をより低い値にすることをお勧めします。 を参照してください。 [Web API が、配列に 20 個を超える項目を含むリクエストを処理できない](https://support.magento.com/hc/en-us/articles/4406893342093) ナレッジベースの記事

## AC-384__Fix_Incompatible_PHP_Method__2.4.3_ce.patch を適用し、アップグレード時に PHP の致命的なエラーに対処します

Adobe Commerce 2.4.3 にアップグレード中に、次の致命的なエラーが発生する場合があります。

```terminal
PHP Fatal error: Uncaught Error: Call to undefined function Magento\Framework\Filesystem\Directory\str_contains() in [...]/magento/vendor/magento/framework/Filesystem/Directory/DenyListPathValidator.php:74
```

このエラーは、 `str_contains` 関数は、PHP 8.x の関数です。 Adobe Commerce 2.4.3 では PHP 8.x をサポートしていません。このホットフィックスは、この関数を、サポートされている PHP 7.x 関数に置き換えます。 を参照してください。 [Adobe Commerce アップグレード 2.4.3、2.3.7-p1 PHP 致命的なエラーのホットフィックス](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) ナレッジベースの記事

## 適用 `AC-3022.patch` 引き続き DHL を配送業者として提供するため

DHL ではスキーマバージョン 6.2 を導入しており、近い将来、スキーマバージョン 6.0 を廃止する予定です。 DHL 統合をサポートするAdobe Commerce 2.4.4 以前のバージョンは、バージョン 6.0 のみをサポートしています。これらのリリースをデプロイするマーチャントは、 `AC-3022.patch` 早期に DHL を配送業者として提供し続けることができます。 を参照してください。 [配送業者として DHL を引き続き提供するためのパッチを適用する](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) パッチのダウンロードとインストールについては、ナレッジベースの記事を参照してください。

## ハイライト

このリリースのハイライトは次のとおりです。

### セキュリティの大幅な強化

このリリースには、33 のセキュリティ修正と platform のセキュリティの改善が含まれています。 これらのセキュリティ修正の多くは 2.4.2-p2 および 2.3.7-p1 に移植されています。

#### リモートコード実行（RCE）およびクロスサイトスクリプティング（XSS）の脆弱性を閉じるのに役立つ 33 のセキュリティ強化

これらの問題に関連する確認された攻撃は、今日まで行われていません。 ただし、特定の脆弱性が悪用されて、顧客情報にアクセスしたり、管理者のセッションを引き継いだりする可能性があります。 これらの問題のほとんどは、攻撃者が最初に管理者へのアクセス権を取得する必要があります。 そのため、IP許可リストに加えるを含め、管理者を守るために必要なすべての手順を実行することをお勧めします。 [二要素認証](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)、VPN の使用、ではなく一意の場所の使用 `/admin`、および適切なパスワードハイジーン。 参照： [Adobeセキュリティ速報](https://helpx.adobe.com/security/products/magento/apsb21-64.html) を参照してください。

#### その他のセキュリティ機能強化

このリリースのセキュリティの強化により、次のような最新のセキュリティのベストプラクティスへのコンプライアンスが向上しています。

* A **新しい Composer プラグイン** は、依存関係の混乱を防ぎ、公開パッケージリポジトリ上の内部パッケージと同じ名前を持つ悪意のあるパッケージを識別するのに役立ちます。 を参照してください。 [Adobeリリース 2.4.3 リリースの新しい Composer プラグイン](https://magento.com/blog/best-practices/adobe-releases-new-composer-plugin-magento-243-release) ブログ投稿。

* **レート制限が API に組み込まれるようになりました** サービス拒否（DoS）攻撃を防ぎます。 Web API では、クライアントが要求できるリソースのサイズまたは数に制限を課すようになりました（デフォルトの最大値は 20 に設定されており、ビジネスニーズに基づいて異なる値に設定できます）。 参照： [レート制限](https://developer.adobe.com/commerce/webapi/get-started/api-security/) これらの制限の設定については、を参照してください。 <!-- MC-35358-->

* **ReCAPTCHA の対象範囲が拡張されました** 組み込むには：

   * 対応するHTMLページを持つ Web API については、ReCAPTCHA を参照してください。 （統合からアクセスする web API は除く。） ReCAPTCHA カバレッジは、スパム攻撃からエンドポイントを保護します。 OAuth を使用するサードパーティの統合サービスから web API にアクセスすると、ReCAPTCHA が無効になる。<!-- MC-34472-->

   * 注文ストアフロントページと支払関連の web API。 これらのページの reCAPTCHA 保護は、デフォルトで無効になっており、管理者から有効にすることができます。 このカバレッジは、カード攻撃から店舗を保護するための抗ブルートフォースメカニズムを追加します。

{{cve-notice}}

### インフラストラクチャの改善

このリリースには、フレームワークの品質と次の機能領域を向上させる機能強化が含まれています。

* 顧客アカウント

* カタログ

* CMS

* OMS

* インポート/エクスポート

* プロモーションとターゲティング

* 買い物かごとチェックアウト

* B2B

* ステージングとプレビュー

**PayPal Pay Later がサポートされるようになりました** PayPal を含むデプロイメントで。 この機能により、買い物客は購入時に全額を支払うのではなく、隔週の分割払いで注文の支払いを行うことができます。 <!-- MC-40556-->

**新規 `use_application_lock` インデックス作成モード**. この `use_application_lock` モードでは、環境変数を使用するか、 `app/etc/env.php` ファイル。 このモードを有効にしてエラーが発生した後に、インデクサーを手動でリセットする必要がなくなりました。 参照： [再インデックスプロセスに対するアプリケーションロックモードの使用](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### プラットフォームの機能強化

バージョン 2.4.3 はまだ PHP 8.x と互換性がありませんが、次のプラットフォームアップグレードにより、PHP 8.x との将来の互換性に近づいています。

* Core Composer の依存関係とサードパーティライブラリは、PHP 8.x と互換性のある最新バージョンにアップグレードされました。 <!-- MC-39514-->

* KnockoutJS ライブラリが v3.5.1 （最新バージョン）にアップグレードされました。 <!-- MC-40694-->

* 非推奨（廃止予定）の TinyMCE v3 ライブラリが削除されました。 この `Magento_Tinymce3Banner` tinyMCE v3.x に関連するモジュールおよび MFTF テストがAdobe Commerceから削除されました。 <!-- MC-42199 42170 -->

* バージョン 2.4.3 はテストされ、Redis 6.0.12 との互換性が確認されています。 （バージョン 2.4.x は Redis 5.x と互換性があります）。

* Laminas ライブラリの依存関係は、PHP 8.x 互換バージョンにアップグレードされました。 一部の冗長な依存関係がから削除されました `composer.json` ファイル。 **Adobe Commerce 2.4.3 ではラミナス 3.4.0 を使用します。**. <!-- MC-39513-->

### パフォーマンスの強化

このリリースには、製品価格およびカタログルールインデクサーのインデックス化時間を短縮する機能強化が含まれています。 マーチャントは、顧客グループまたは共有カタログから web サイトを除外できるようになりました。これにより、インデックス作成のレコード数が減り、インデックス作成時間が短縮されます。

### Live Search

[Live Search](https://docs.magento.com/user-guide/live-search/overview.html) powered by [Adobe Sensei](https://www.adobe.com/sensei.html) 人工知能と機械学習アルゴリズムを使用して、集計した訪問者データの深い分析を実行することで、直感的な検索エクスペリエンスを提供します。 参照： [Live Search リリースノート](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/release-notes.html).

### GraphQL

このリリースでは、次の機能がGraphQLでサポートされるようになりました。

* **共有カタログ**<!-- PWA-1294-->

* **ウィッシュリスト**. この [addWishlistItemsToCart ミューテーション](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-wishlist-items-to-cart.html) 指定したウィッシュリストから顧客の買い物かごに項目を移動します。 <!-- magento/partners-magento2ee#449-->

* **ギフト レジストリ**. 以下のタスクが対象となります。 <!-- PWA-1290-->

   * の使用 [giftRegistry クエリ](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry.html) お客様のギフトレジストリの内容を返却するため。

   * ギフト レジストリの検索条件 [タイプ](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-type-search.html), [電子メール](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-email-search.html)、または [ID](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-id-search.html).

   * [作成](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-gift-registry.html), [更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry.html)、または [削除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry.html) ギフト レジストリ。

   * [更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry-items.html) または [削除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry-items.html) ギフト レジストリの項目。

   * [すべての項目を移動](https://devdocs.magento.com/guides/v2.4/graphql/mutations/move-cart-items-to-gift-registry.html) カートからギフト レジストリへ。 <!-- ENGCOM-9082 9087-->

   * [追加](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-gift-registry-registrants.html), [更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry-registrants.html)、または [削除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry-registrants.html) ギフトレジストリからの登録者。

   * [共有](https://devdocs.magento.com/guides/v2.4/graphql/mutations/share-gift-registry.html) 招待者を含むギフト レジストリ。

* **交渉可能な見積**. を参照してください。 [`negotiableQuote`](https://devdocs.magento.com/guides/v2.4/graphql/queries/negotiable-quote.html) および [`negotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/queries/negotiable-quotes.html) クエリ。 <!-- PWA-1292-->

  新しい突然変異は次のとおりです。

   * [`requestNegotiableQuote`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-negotiable-quote.html)

   * [`setNegotiableQuoteShippingAddresses`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-address.html)

   * [`updateNegotiableQuoteQuantities`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-negotiable-quote-quantities.html)

   * [`removeNegotiableQuoteItems`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-negotiable-quote-items.html)

   * [`closeNegotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/close-negotiable-quotes.html)

   * [`deleteNegotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-negotiable-quotes.html).

* **共有ルート**. この [ルートクエリ](https://devdocs.magento.com/guides/v2.4/graphql/queries/route.html) および [RoutableInterface](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/routable-interface.html) 製品、カテゴリおよび CMS ページでのルーティングリクエストをサポートします。 この `urlResolver` クエリは非推奨（廃止予定）になり、その機能はに置き換わりました `route` クエリ。

を参照してください。 [GraphQL開発者ガイド](https://devdocs.magento.com/guides/v2.4/graphql/) これらの機能強化の詳細について説明します。

### B2B

バージョン 2.4.3 では、B2B v1.3.2 が導入されています。このリリースには、複数のバグ修正が含まれています。 参照： [B2B リリースノート](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### ページビルダー

ページビルダーが、Magento Open Sourceのバンドル拡張機能として使用できるようになりました。 これは、Adobe Commerce 2.4.3 およびMagento Open Source 2.4.3 のデフォルトのコンテンツ編集ツールになりました。WYSIWG エディターをサードパーティのモジュールに置き換えることができます。

ページビルダーは、次の管理領域で TinyMCE エディターを置き換えます。

* CMS ページ
* CMS ブロック
* カテゴリの説明
* 製品の説明

TinyMCE で作成されたすべてのコンテンツは、HTMLとしてページビルダーに移行されました。

### PWA Studio

機能強化とバグ修正について詳しくは、以下を参照してください [PWA Studioリリース](https://github.com/magento/pwa-studio/releases). 参照： [互換性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) PWA Studioのバージョンとその互換性のあるバージョンのリストを確認できます。

### 互換性アップグレードツール

の範囲 [互換性アップグレードツール](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html) は、コミュニティからのフィードバックに基づいて拡張されました。 参加する [#upgrade-compatibility-tool](https://magentocommeng.slack.com/archives/C019Y143U9F) Slackチャネル :Adobe製品チームやコミュニティのサポートを受けたり、ツールの今後の方向性を導いたりするのに役立ちます。

### Cloud Managed Services のアップデート

このリリースには、Amazon Simple Storage Service （AWS S3）およびAmazon Aurora Cloud Managed Services のサポートに対する機能強化が含まれています。 これは、AWS ElastiCache、AWS Elasticsearch、およびAWS管理キュー（Rabbit MQ）の認定サポートを提供します。 （これらのサービスの機能、パフォーマンス、およびAdobe Commerceとの統合についてテストしました。）

### Adobe Stockの統合

このリリースにはAdobe Stock Integration v2.1.1 が含まれています。

### ベンダーが開発した拡張機能

このリリースの機能および変更点の更新については、次のトピックを参照してください。

* [Amazon ペイ](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html). Amazon Pay は非推奨（廃止予定）となり、2.4.x の今後のリリースで削除される予定です。 バージョン 2.4.3 以降には、互換性のアップデートと主要なバグの修正のみが含まれます。

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](../../../upgrade/modules/upgrade.md)

* [クラルナ](https://marketplace.magento.com/klarna-m2-klarna.html)

* [頂点クラウド](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Yotpo 製品レビュー](../../../upgrade/modules/upgrade.md)

## 修正された問題

2.4.3 コアコードの何百もの問題を修正しました。

### インストール，アップグレード，デプロイメント

<!-- MC-41154-->

* この `bin/magento setup:db:status` アップグレードに成功した後、コマンドが、すべてが最新であることを示すメッセージを返すようになりました。 以前は、アプリケーションにこのエラーが表示されていました。 `Declarative Schema is not up to date`.

<!-- MC-40031 -->

* 新しい設定可能な製品の作成に失敗した場合に、フォームの再読み込み時に設定値が保持されるようになりました。 以前は、フォームの再読み込み時に値が失われ、アプリケーションに次のエラーが表示されていました。 `The value specified in the URL Key field would generate a URL that already exists`. [GitHub-32102](https://github.com/magento/magento2/issues/32102)

<!-- MC-37596-->

* を実行しても、アプリケーションで例外がスローされなくなりました `bin/magento setup:upgrade` redis を使用したMagento Open SourceデプロイメントからAdobe Commerceにアップグレードするには、次の手順に従います。

<!-- MC-34453-->

* 以前に作成した買い物かご価格ルールは、デプロイメントをMagento Open SourceからAdobe Commerceにアップグレードした後、コンテンツステージングダッシュボードページに表示されるようになりました。

<!-- ENGCOM-8508 -->

* Galera クラスターで実行されるデプロイメントで、より多くのお客様がサポートされるようになりました。 [GitHub-31038](https://github.com/magento/magento2/issues/31038)

<!-- ENGCOM-9036 MC-41938 -->

* アプリケーションがと共にインストールされている場合、管理者はの配置に正常にログインできるようになりました `—use-rewrites=0` option または with `web/seo/use_rewrites` が 0 に設定されました `core_config_data_table`. [GitHub-32100](https://github.com/magento/magento2/issues/32100)

<!-- ENGCOM-8451 -->

* 更新日 `sortOrder` 読み込み対象 `AsyncCssPlugin`. アプリケーションが読み込まれます `AsyncCssPlugin` 次の前 `JsFooterPlugin`. [GitHub-30882](https://github.com/magento/magento2/issues/30882)

<!-- ENGCOM-8701 -->

* `Magento\Config\Model\Config\PathValidator` 現在は、表示パスをチェックして要素が存在するかどうかを判断し、設定パスがある場合は、を使用します `config.xml` 検証の代わりにパスを使用します。 [GitHub-27678](https://github.com/magento/magento2/issues/27678)

<!-- ENGCOM-8684 -->

* Grunt を使用して、またはサーバー側コンパイルで Less ファイルをコンパイルしても、同じ結果が得られるようになりました。 以前。 `.abs- styles`（その他を拡張） `.abs- styles` 。対象： `_extends.less`Grunt でコンパイルした際に、が正しく出力されなかった。 その結果、実稼動デプロイメントと開発デプロイメントの違いが生じました。 [GitHub-7231](https://github.com/magento/magento2/issues/7231)

### AdminGWS

<!-- MC-40703-->

* 管理 GWS はを使用するようになりました `int` の値 `website_id` カスタム権限を持つ管理者向けの管理コレクションの SQL 条件。

### Adobe Stockの統合

<!-- MC-39754-->

* 情報メッセージと管理者へのリンクがアプリケーションに表示されるようになりました **ストア** > **設定** > **詳細** > **システム** 次の場合は、Adobe Stockを検索ページ **API キー（クライアント ID）** および **クライアント秘密鍵** が設定されていない。 以前は、アプリケーションにこのエラーが表示されていました。 `We couldn't find any records` リンクはありません。

### バックエンド

<!-- MC-40389-->

* 制限付きアクセスを持つ管理者（例えば、1 つの web サイトのみにアクセス権を割り当てられている管理者）は、グローバルスコープに設定されたカテゴリを編集できなくなりました。

<!-- MC-39037-->

* 生成されたシステムレポート （**システム** > **サポート** > **システムレポート**）が正しくレンダリングされるようになりました。 以前は、レポートのコンテンツの位置がずれていました。

<!-- MC-30152 ENGCOM-8625-->

* アプリケーションの検証がオフになります **価格** 次の場合に期待どおりにフィールド **ダイナミック価格** 設定は、バンドル製品の作成中に有効になります。 以前は、から値を削除すると、アプリケーションが検証エラーをスローしていました **価格** フィールドの条件 **ダイナミック価格** の設定は有効でした。 [GitHub-26214](https://github.com/magento/magento2/issues/26214)

<!-- MC-24840-->

* 2 つの URL からアクセスできるようにアプリケーションが設定されているデプロイメントで、管理者 URL がデフォルトの web サイト URL と異なる場合に、無限リダイレクトが発生しなくなりました。

### バンドル製品

<!-- MC-41810-->

* これで、を使用できます `addProductsToCart` 1 つの買い物かごに複数のチェックボックスオプションを含むバンドル製品を追加するミューテーション。

<!-- MC-41614-->

* バンドル製品の価格インデックス作成が一時テーブルを使用して実行され、データベーステーブルのロックを回避できるようになりました。 以前は、アプリケーションは物理テーブルを使用していたため、テーブルがロックされていました。

<!-- MC-41177 magento/magento2#32594-->

* バンドル品目の価格を 0.00 に設定できるようになりました。以前は、価格を 0.00 に設定した後に編集ページに戻ると、価格がデフォルト値に戻っていました。 [GitHub-32383](https://github.com/magento/magento2/issues/32383)

<!-- MC-40603-->

* バンドル製品を含む注文の注文詳細で、注文前に価格が変更された場合、バンドル製品の正しい価格が表示されるようになりました。

<!-- MC-40035-->

* バンドル製品の在庫ステータスが、子製品の在庫ステータスに基づいて更新されるようになりました。 以前は、バンドル製品が、製品から 1 つのオプションが削除され、バンドル製品に同じ SKU を持つ 2 つのオプションがあった場合に、在庫切れと表示されていました。

<!-- MC-39276-->

* 管理者は、バンドル製品の値を変更できるようになりました `Shipment Type` 別の属性グループに移動した後の属性。 以前は、この属性は常に `Together` 値：属性セット内のデフォルトグループ以外の属性グループに移動された場合。

<!-- MC-38900-->

* GraphQL `setGuestEmailOnCart` ミューテーションがゲストのメールを正しく更新するようになりました。 以前は、見積もりアドレス テーブルと見積もりアドレス テーブルは更新されていませんでした。

<!-- MC-37719-->

* REST API 呼び出しを使用して、バンドル製品に子製品を追加、削除または更新すると、期待どおりにインデックス再作成がトリガーされるようになりました。 以前は、これらのアクションでは、インデックス再作成がトリガーになっていませんでした。その結果、手動でインデックス再作成を実行するまで、バンドル製品のストックステータスは変更されませんでした。

<!-- MC-35725 ENGCOM-8568-->

* 階層価格を持つバンドル製品の正しい価格範囲がアプリケーションに表示されるようになりました。 [GitHub-30284](https://github.com/magento/magento2/issues/30284)

<!-- MC-35638-->

* バンドルのオプションの価格が変更された後、アプリケーションの買い物かごページとチェックアウトワークフローの出荷手順で、期待どおりの合計価格が表示されるようになりました。

<!-- MC-32617-->

* 顧客の買い物かごからアクセスして、バンドル製品を正常に設定できるようになりました。 以前は、製品の設定ページが完全に読み込まれることはなく、設定を保存できませんでした。

<!-- MC-30317 ENGCOM-7141-->

* マーチャントは、マルチストアデプロイメントの各ストア表示で、バンドル製品に一意の価格を割り当てることができるようになりました。 Web サイト固有の価格は、 `catalog_product_bundle_selection_price` テーブル。 以前は、アプリケーションは、web サイトの範囲に基づいてバンドル製品の価格を決定していませんでした  **ストア** > **設定** > **カタログ** > **カタログ** > **価格** > **カタログの価格スコープ** はに設定されました `Website`. では、web サイト固有の価格は保存されませんでした `catalog_product_bundle_selection_price`. [GitHub-12584](https://github.com/magento/magento2/issues/12584)

<!-- ENGCOM-8705 MC-38953-->

* バンドル製品の請求書に、関連付けられたシンプルな製品の正しい数量が表示されるようになりました。 **動的な価格設定** が無効になっています。 以前は、バンドル製品に関連付けられた単純な製品は、バンドル製品ではなく、親製品の数量を持っていました）。 [GitHub-30802](https://github.com/magento/magento2/issues/30802)

<!-- magento/magento2#30374 MC-36930-->

* この `updateProductsInWishlist` mutation は、ウィッシュリスト内のバンドル製品に属する項目を正常に更新するようになりました。 以前は、このミューテーションは、ウィッシュリストの項目を更新する代わりに、項目を削除して新しい項目を作成し、項目 ID を変更していました。

<!-- MC-38575-->

* 次を設定できるようになりました `required_options` および `has_options` を使用してバンドル製品を作成または更新する際の、バンドル属性（期待されるもの） `POST /V1/product/:sku` エンドポイント。 以前は、1 に設定しようとしても、これらのカスタム アトリビュートは 0 （ゼロ）に設定されていました。

<!-- MC-38483-->

* 以前は見つからなかったバンドル製品データが、ステージングプロセスに含まれるようになりました。 これにより、買い物客が製品リストページからバンドル製品を購入した場合と、製品ページから直接追加した場合の製品の動作の不整合が解決されます。

### キャッシュ

<!-- ENGCOM-8554-->

* この `varnish6.vcl` 顧客ページのキャッシュをバイパスするようにファイルを更新しました。

### CAPTCHA

<!-- MC-41572-->

* CAPTCHA は、買い物客から提供されたデータを正しく検証し、買い物客が PayPal Payflow Pro でのチェックアウトに何度も失敗した後、CAPTCHA フィールドが期待どおりに表示されるようになりました。

<!-- MC-41281-->

* CAPTCHA 検証が、チェックアウトワークフローの支払いページでランダムに失敗しなくなりました。

<!-- MC-41001-->

* 失敗した完了試行回数を超えると、アプリケーションに CAPTCHA フィールドが期待どおりに表示されるようになりました。 以前は、アプリケーションで CAPTCHA チャレンジを再度試みるように促されましたが、CAPTCHA フィールドは表示されませんでした。

<!-- MC-40359-->

* CAPTCHA がチェックアウトページで期待どおりに機能するようになりました。 以前は、買い物客が CAPTCHA チャレンジに正しく回答すると、チェックアウトページのローダーが完了せず、アプリケーションに次のエラーが表示されていました。 `captchaData[formId] is undefined`. （このエラーは、買い物客が、以前に 2.3.5-p1 を実行するデプロイメントにアクセスしたのと同じブラウザーを使用した場合にのみ発生しました）。

<!-- ENGCOM-8630-->

* `_.isEmpty()` をチェックイン `defaultCaptcha.js` ファイルが正常に完了しました。 以前は、これらのチェックが完了しなかったため、アップグレード後にチェックアウトページを読み込むことができませんでした。 [GitHub-31641](https://github.com/magento/magento2/issues/31641)

### 買い物かごとチェックアウト

<!-- MC-41911-->

* カート内の製品数量を変換および更新する際に、アプリケーションでロケール固有の小数点以下のロケーターが考慮されるようになりました。

<!-- MC-41574-->

* 注文の際に、指定した顧客名と配送先住所が省略されなくなりました。 以前は、以下の理由で名前が省略されていました。 `same_as_billing` フラグはデータベースに保存されませんでした。

<!-- MC-40946-->

* 買い物かごで商品を編集した際に、ギフトレジストリへのリンクが期待どおりに保持されるようになりました。 以前は、これらのリンクは、 **買い物かごを更新** ボタン。

<!-- MC-40696-->

* コンシューマー向けのすべてのキューメッセージ `quoteItemCleaner` 次に、ステータスを「」に変更します `complete` 期待どおり、いくつかの製品を削除した後。 以前は、このコンシューマーのステータスが「」に変更されたのは 1 つのメッセージのみでした `complete`、残りはステータスをに変更しました。 `in progress`.

<!-- MC-40657-->

* 買い物客が「」をクリックした場合にのみ、関連するブロックに利用条件の検証メッセージが表示されるようになりました **注文する** ボタン。 以前は、買い物客がチェックアウトワークフローで支払い方法を変更するたびに、アプリケーションによって「割引コードを適用」ブロックにこのメッセージが表示されていました。 `The order wasn't placed. First, agree to the terms and conditions, then try placing your order again`.

<!-- MC-40271 magento/partners-magento2ee#476-->

* スケジュール更新プレビューからバンドル製品を買い物かごに追加して買い物かごをクリックした後、期待どおりにチェックアウトページにリダイレクトされるようになりました。 [GitHub-447](https://github.com/magento/partners-magento2ee/issues/447)

<!-- MC-39581-->

* 買い物客がクリックに失敗した場合、チェックアウト支払い手順で請求先住所フォームへの変更が破棄されるようになりました **更新** ボタンをクリックして、発送手順に戻ります。

<!-- MC-39517  magento/partners-magento2ee#460-->

* 買い物客が無効な製品数量を追加してをクリックしても、アプリケーションに情報エラーメッセージが表示され、製品数量が更新されなくなりました **品目と数量の更新** 「買い物かごを管理」ページのボタン。 以前は、アプリケーションによって製品数量がアップグレードされ、エラーメッセージが表示されていませんでした。 [GitHub-459](https://github.com/magento/partners-magento2ee/issues/459)

<!-- MC-37807 ENGCOM-8530-->

* カスタマイズ可能なオプションを備えた製品 `(File)` 複数出荷のチェックアウトプロセスの全体を通して、期待どおりにアクティブなリンクを含めるようになりました。 以前は、このリンクはありませんでした。 [GitHub-31095](https://github.com/magento/magento2/issues/31095)

<!-- MC-37689-->

* 管理者の買い物かごに、複数通貨をサポートするストアの正しい通貨で製品価格が表示されるようになりました。 以前は、価格は指定された通貨に複数回変換されていました。最初はストアフロントから買い物かごに製品が追加されたとき、次に注文が後で管理者にレンダリングされたときに変換されました。

<!-- MC-36703  magento/partners-magento2ee#439-->

* ストアフロントで買い物客によって作成された管理者からの注文を管理者が完了すると、アプリケーションは買い物かごを期待どおりに空にするようになりました。 以前は、管理者が注文を完了した後に顧客が再度ログインしても、ストアフロントのカートには注文の内容が含まれていました。 [GitHub-30262](https://github.com/magento/magento2/issues/30262)

<!-- MC-35640-->

* 買い物客は、Minimum Advertised Price （MAP）が通常の製品価格を超える製品を買い物かごに追加できるようになりました。

<!-- MC-35289-->

* 買い物客は、複数の住所を使用してチェックアウトする際に、チェックアウトワークフローから請求先住所を正常に変更できるようになりました。

<!-- MC-29335-->

* ゲストが作成したすべての有料支払いトランザクションがデータベースに保存され、期待どおりに管理者に表示されるようになりました。 以前は、同時注文のごく一部のみがデータベースに保存され、データベースのロックによるタイムアウトが原因で、ほとんどの注文が失われていました。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-23989 magento/magento2#32251 -->

* ゲストがミニ買い物かごに製品を入れたときに、特殊文字を含むインラインのようこそメッセージがアプリケーションで正しく表示されるようになりました。 以前は、アプリケーションは製品をミニカートに追加しなかったか、ウェルカムメッセージを表示しませんでした。 [GitHub-32250](https://github.com/magento/magento2/issues/32250)

<!-- MC-41165-->

* ストア内配信が有効な場合、チェックアウトワークフローの出荷ページが正常に読み込まれるようになりました。 以前は、アプリケーションが JavaScript エラーをスローし、配送チェックアウトページが完全にレンダリングされませんでした。

<!-- ENGCOM-9006-->

* さんがを追加しました `itemResolvers` カタログへの引数 `di.xml` ファイル。 その結果、設定可能な製品モジュールとグループ化された製品モジュールが無効になっている場合でも、チェックアウトが機能しなくなります。 [GitHub-30860](https://github.com/magento/magento2/issues/30860)

<!-- ENGCOM-8944-->

* アプリケーションのラジオボタンが **お支払いと配送情報** 管理者の並べ替えワークフロー中に想定どおりにセクションに追加されます。 [GitHub-30257](https://github.com/magento/magento2/issues/30257)

<!-- MC-39158 ENGCOM-8493-->

* 複数のオプションを持つバンドル製品が買い物かごに含まれている場合、アプリケーションは、買い物かごレベルの固定割引を使用して、買い物かご価格ルールを正しく適用できるようになりました。 以前は、買い物かご価格ルールは注文に完全には適用されていませんでした。 [GitHub-30952](https://github.com/magento/magento2/issues/30952)

<!-- MC-40983 ENGCOM-8828-->

* この **カートに追加** カテゴリリスト表示のボタンが期待どおりに動作するようになりました。 [GitHub-32232](https://github.com/magento/magento2/issues/32232)

<!-- ENGCOM-8490-->

* POSTを使用できるようになりました `/V1/carts/mine/items` グループ化された製品のカスタム数量を買い物かごに追加する手順は、次のとおりです。 [GitHub-26909](https://github.com/magento/magento2/issues/26909)

<!-- ENGCOM-8886-->

* チェックアウトワークフローの請求先住所領域に出荷先住所が入力されなくなりました。 以前は、いつ **都道府県** 請求先住所のフィールドが空で、出荷先住所と請求先住所が異なるため、アプリケーションで請求先住所が入力されました **都道府県** 配送先住所の情報を格納するフィールド。 [GitHub-31608](https://github.com/magento/magento2/issues/31608)

### カタログ

<!-- MC-36787-->

* の一括更新 **数量増分を有効にする** および **数量の増分** 属性が期待どおりに動作するようになりました。 [GitHub-29544](https://github.com/magento/magento2/issues/29544)

<!-- MC-41801-->

* 数値のみの SKU を含む共有カタログを正常に複製できるようになりました。 以前は、共有カタログを複製しようとすると、次の理由でアプリケーションがエラーをスローしていました `\Magento\Catalog\Model\ProductIdLocator` クラスは、数値のみの SKU で正しく機能しませんでした。

<!-- MC-41575-->

* 管理者との最近の製品同期を有効にすると、アプリケーションで JavaScript エラーがスローされなくなりました。 以前は、アプリケーションにこの JavaScript エラーが表示されていました。 `Cannot read property 'status' of undefined`.

<!-- MC-41534-->

* カスタムテーマレイアウトの更新が期待どおりに適用されるようになりました。 以前は、カスタムテーマレイアウトの更新は無視されていました。

<!-- MC-41499-->

* 製品カテゴリのキャッシュが、が期待どおりにクリアされました `cron` 次の期間 `indexer_update_all_views` 実行。 以前は、インデックス再作成後のカテゴリページの製品数が正しく表示されていませんでした。

<!-- MC-41422-->

* ストア表示の製品の更新 REST API リクエストで属性が指定されていない場合、属性値が変更されなくなりました。 以前は、属性が指定されていない場合、アプリケーションは属性値をデフォルトのスコープ値にリセットしていました。

<!-- MC-41284-->

* 管理者製品グリッド （管理者 **カタログ** > **製品**）で、製品が SKU でフィルタリングされる際に、正しい製品数が表示されるようになりました。

<!-- MC-40873-->

* カテゴリ権限が有効な場合、製品が CMS ページに追加されると、アプリケーションに正確な在庫ステータスが表示され、指定された顧客グループの価格を表示できなくなりました。 以前は、実際の在庫状況に関係なく、すべての製品が在庫切れと表示されていました。

<!-- MC-40859-->

* 詳細価格設定顧客グループ価格ブロック価格入力フィールドの最小幅が 5 桁になりました。 以前は、低解像度ディスプレイではこのフィールドに 2 つの記号しか表示されていませんでした。

<!-- MC-40825-->

* 製品を削除した後、アプリケーションによって製品メディア画像が正常に削除されるようになりました。 以前は、製品の削除が成功した後、製品メディア画像はフォルダーに残っていました。

<!-- MC-40811 magento/magento2#32042-->

* 管理で製品を作成または編集してから、デザインの更新をスケジュールを作成すると、ページレイアウトが期待どおりに更新されるようになりました。 [GitHub-32007](https://github.com/magento/magento2/issues/32007)

<!-- MC-40773-->

* 値が 0 のカスタム製品属性は、正常に空白として保存できるようになりました。 以前は、アプリケーションはこの値を空白に更新していませんでした。

<!-- MC-40736 ENGCOM-8789-->

* カスタムカテゴリレイアウトの更新ファイルが、期待どおりに製品に適用されるようになりました。 以前は、更新ファイルのハンドル （`catalog_category_view_*`）が製品ハンドルと一致しませんでした。 [GitHub-27285](https://github.com/magento/magento2/issues/27285)

<!-- MC-40679-->

* 管理製品リストの固定製品税（FPT）列の並べ替えが無効になっています。 以前は、FPT 列が並べ替えられた後は、製品ページを再読み込みできませんでした。

<!-- MC-40443-->

* 複数の Web サイトのデプロイメントで、一致する製品の価格が各 Web サイトで異なる場合、ページビルダー製品ウィジェットのプレビューが期待どおりに機能するようになりました。

<!-- MC-40344 ENGCOM-8629-->

* GETを使用した商品検索時の位置による並べ替え `/rest/V1/products/?searchCriteria[filterGroups]` これで期待どおりに動作するようになりました。 以前は、製品コレクションにフィールドがありませんでした `position` 並べ替えの値。 [GitHub-31591](https://github.com/magento/magento2/issues/31591)

<!-- MC-40122-->

* 管理者ユーザーには、の 2 つのスペースが表示されるようになりました **名前** および **SKU** 製品グリッドのフィールド 以前は、アプリケーションは複数のスペースを 1 つのスペースに折りたたんでいました。

<!-- MC-39869-->

* 管理者の販売可能数量が 0 の場合、製品はストアフロントに在庫切れとして表示されるようになりました。 以前は、これらの製品はストアフロントで在庫済みとしてリストされており、アプリケーションはアクティブと表示されていました **カートに追加** ボタン。 [GitHub-31117](https://github.com/magento/magento2/issues/31117)

<!-- MC-39809-->

* 管理者は、カスタマイズ可能なオプションを使用して製品を追加できるようになりました `(File)` 管理顧客ページの「買い物かご」セクション（顧客のアクティビティ列）から「注文品目」グリッドに移動します。 以前は、値がに挿入される前に正しくフォーマットされていなかったので、アプリケーションはリストに項目を追加しませんでした `\Magento\Catalog\Model\Product\Type\AbstractType::_prepareOptions`.

<!-- MC-39619-->

* 1 つのオプションのみを持つバンドル製品の場合、アプリケーションでは、製品オプションを選択するように買い物客に求めるプロンプトが表示されなくなりました。

<!-- MC-39617-->

* 新しいウィジェットの作成中に、レイアウトの更新（アンカーおよびアンカー以外のカテゴリ）にすべてのサブカテゴリが表示されるようになりました。

<!-- MC-39481-->

* この `product` 1 つのストア表示に対してのみ製品名が更新された場合に、マルチストアデプロイメントのすべてのストア表示のデフォルト値がクエリで上書きされなくなりました。 [GitHub-31083](https://github.com/magento/magento2/issues/31083)

<!-- MC-39470 magento/magento2#31492-->

* Adobe Commerceは、管理関連商品、アップセルおよびクロスセルのリストのページあたりの値を変更した場合に、予想どおりに合計ページ数を更新します。 [GitHub-31059](https://github.com/magento/magento2/issues/31059)

<!-- MC-39444-->

* 管理者は、2 つ以上のカスタマイズ可能なオプションを備えた製品を追加できるようになりました `(File)` を SKU で注文します。

<!-- MC-39140-->

* 権限が制限された管理者が管理者の CMS ページに製品ウィジェットを追加しても、アプリケーションがエラーをスローしなくなりました。 以前は、管理者が「」をクリックすると、アプリケーションがこのエラーをスローしていました **保存** ボタン：  `We are sorry, an error has occurred while generating the content`.

<!-- MC-39134-->

* 製品詳細ページが開き、「日付カスタマイズ」オプションに、以前の注文の日付が次の場合に入力されるようになりました **JavaScript カレンダーの使用** が有効になっています。 現在の設定に基づいて値がフォーマットされていない場合、カスタム日付オプション値リゾルバーは代替形式にフォールバックするようになりました。 以前は、カスタム日付オプションの値は空でした。

<!-- MC-39104-->

* 商品が在庫切れの場合、アプリケーションには買い物かごにエラーが 1 つだけ表示されるようになりました。 以前は、アプリケーションに冗長なメッセージが表示されていました。 [GitHub-27469](https://github.com/magento/magento2/issues/27469)

<!-- MC-35717  magento/partners-magento2ee#427-->

* 管理者は、カスタマイズ可能なオプションで製品を追加できるようになりました `(File)` を SKU で注文します。 [GitHub-30285](https://github.com/magento/magento2/issues/30285)

<!-- MC-30625-->

* 指定せずに製品と価格を保存できるようになりました `type_id`. [GitHub-13639](https://github.com/magento/magento2/issues/13639)

<!-- MC-39024-->

* REST 時に、グループ製品が期待どおりにストアフロントで使用できるようになりました `PUT /V1/products/:sku/links` リクエストは、新しい子製品を新しいグループ製品に関連付けるために使用されます。 以前は、実行後に製品のインデックスが正しく作成されませんでした `bin/magento cron:run`.

<!-- ENGCOM-9010 8947-->

* を使用した製品は作成できなくなりました `NULL` SKU 値 以前は、カスタムインポーターを通じて、またはデータベース内で直接、SKU 値のない製品を作成できましたが、管理者から編集しようとすると、アプリケーションがエラーをスローしました。 [GitHub-27411](https://github.com/magento/magento2/issues/27411), [GitHub-32525](https://github.com/magento/magento2/issues/32525)

<!-- ENGCOM-8902-->

* シンプルな製品に必要なカスタムオプションを追加しても、警告が表示されずに親の複合製品から削除されなくなりました。 アプリケーションに情報の警告が表示され、製品は保存されません。  以前は、アプリケーションは製品の変更を保存し、警告を表示していませんでした。 [GitHub-30492](https://github.com/magento/magento2/issues/30492)

### カタログルール

<!-- MC-39896-->

* この `products` カタログ価格ルールが品目に適用される場合、クエリは現在の値を返すようになりました。 [GitHub-26738](https://github.com/magento/magento2/issues/26738)

<!-- ENGCOM-8367-->

* で始まる一時テーブル `catalogrule_product__temp` 買い物かごまたはカタログのルールの有効期限が切れた後、無効になった後、または非アクティブになった後、インデックス再作成が失敗した場合、が期待どおりに削除されるようになりました。 [GitHub-22273](https://github.com/magento/magento2/issues/22273)

<!-- ENGCOM-8949-->

* タイムゾーンは、でも同じ方法で適用されるようになりました `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexById` および `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexByIds`. [GitHub-29549](https://github.com/magento/magento2/issues/29549)

### CMS コンテンツ

<!-- MC-41471-->

* 大きな画像は、の場合、アップロード中に期待どおりにサイズ変更されるようになりました **フロントエンドのサイズ変更を有効にする** 構成設定が有効になっています。

<!-- MC-40663 ENGCOM-8883-->

* CMS ページ保存コントローラーのエラー処理を修正しました。 以前は、 `Error` オブジェクトがにスローされました `cms_page_prepare_save` イベント、アプリケーションはこのオブジェクトをに渡しました `addExceptionMessage` 関数。この関数は次の値を必要とするため、契約を解除します `Exception`. これを解決するには、 `addErrorMessage` 関数。 [GitHub-30149](https://github.com/magento/magento2/issues/30149)

<!-- MC-33490 magento/partners-magento2ee#435 -->

* CMS の「ページ階層を編集」タブで、新しいページを複数のノードに割り当てることができるようになりました。 以前は、ページをノードに割り当てようとしたときに、一意の制約違反が発生していました。 [GitHub-363](https://github.com/magento/partners-magento2ee/issues/363)

### 設定可能な製品

<!-- MC-40719-->

* 製品の設定可能なオプションをクリックしても、製品の画像ギャラリーに製品のサムネールが重複しなくなりました。

<!-- MC-37418-->

* ウィッシュリストから設定可能な製品を編集しているときにアプリケーションに表示される設定ポップアップが、 **OK** ボタン。

<!-- MC-39878  magento/magento2#31472-->

* 構成可能な製品が 1 つしかない受注の請求書が正しく生成されるようになりました。 [GitHub-31143](https://github.com/magento/magento2/issues/31143)

<!-- ENGCOM-8673-->

* 買い物客は、デフォルト以外のストア表示から設定可能な製品を買い物かごに追加できるようになりました。 以前は、デフォルト以外のストア表示の買い物客が設定可能な製品を追加しようとすると、アプリケーションに次のエラーが表示されていました。 `Could not add item to cart. Please check required options and try again`. [GitHub-31660](https://github.com/magento/magento2/issues/31660)

### コンテンツセキュリティポリシー（CSP）

<!-- ENGCOM-8577-->

* コンテンツセキュリティポリシーでは、を介した base64 エンコードされた画像とフォントの読み込みをサポートするようになりました `data: scheme`.

### cron

<!-- MC-30804-->

* Cron のクリーンアップクエリがリファクタリングされ、次のパフォーマンスの問題が削減または排除されました。 `cron` ジョブが保留状態のままになる、MySQL クエリが遅くなる、CPU 使用率が増加する。 [GitHub-26507](https://github.com/magento/magento2/issues/26507)

<!-- ENGCOM-8571-->

* `cronjobs` ステータスになっている `running` 24 時間以上は、自動的にステータスに変更されるようになりました。 `error`.  その結果、そのジョブの新しいインスタンスが再び実行される可能性があり、ジョブが誤ってステータスに設定されたままになっている場合は、ジョブ ステータスを手動で変更する必要はありません `running`. 以前は、次の場合： `cronjob` はステータスでスタックしていました `running`同じジョブの新しいインスタンスを開始できないため、ジョブの状態を手動で変更する必要がありました。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` ジョブが期待どおりに完了し、このシリアル化エラーがスローされなくなりました。  `[Magento\Framework\DB\Adapter\DeadlockException]SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction, query was: DELETE FROM cron_schedule WHERE (status = 'missed') AND (job_code in ('indexer_reindex_all_invalid', 'indexer_update_all_views', 'indexer_clean_all_changelogs')) AND (created_at < '2018-09-28 18:32:28')`. [GitHub-18409](https://github.com/magento/magento2/issues/18409)

<!-- ENGCOM-8571-->

* `indexer_update_all_views`  cron ジョブは、前回のエラー後に期待どおりに実行されるようになりました。 失敗した実行は、で失敗とマークされます `cron_schedule schedule`。それ以降の実行は自動的には失敗しません。 以前は、 `cron_schedule` 保留中のジョブが入ったテーブル `indexer_update_all_views` cron ジョブが実行されませんでした。 [GitHub-23054](https://github.com/magento/magento2/issues/23054)

<!-- ENGCOM-8571-->

* `cron` デッドロックが、次の結果として発生しなくなりました `cron` グループが重複している大規模な展開でロックを設定しようとしています。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` でデッドロックが発生しなくなった `cron_schedule` ほんの数回の後のテーブル `cron` ジョブが実行されました。 [GitHub-22438](https://github.com/magento/magento2/issues/22438)

### カスタム顧客属性

<!-- MC-41611-->

* この **都道府県** ストアフロントの顧客アカウントアドレス帳のフィールドがとして読み込まれるようになりました。ドロップダウンページ要素のままです。 この **Submit** すべてのページ要素が完全に読み込まれるまで、ボタンは無効になります。 以前は、アプリケーションはこのフィールドをドロップダウン要素としてレンダリングする前にテキストボックスとして読み込んでおり、買い物客がテキストフィールドに値を入力して保存できましたが、後でチェックアウト中にエラーが発生していました。

<!-- MC-40906 magento/partners-magento2ee#509-->

* このアプリケーションでは、ストアフロントと管理者の両方の注文ページにカスタムの顧客アドレス属性が正しく表示されるようになりました。 以前は、ドロップダウン属性の選択したオプションがアドレス情報セクションになく、入力属性の値に属性コードが含まれていました。 [GitHub-508](https://github.com/magento/partners-magento2ee/issues/508)

<!-- MC-40329-->

* ファイルのアップロード時に、「管理者の顧客アドレス」フィールドに添付ファイルを含む顧客アドレス属性を保存すると、アプリケーションがエラーをスローしなくなりました。 これは、コントローラ アクションに return ステートメントがないことが原因で発生しました。 以前は、アプリケーションは次のエラーをスローしていました。 `Something went wrong while saving the file`.

<!-- MC-39354-->

* REST GETの買い物かご API 呼び出しで、請求先と配送先住所に対して正しいカスタム属性値を返すようになりました。 以前は、カスタムアドレス属性がマイアカウントのストアフロントページの注文詳細ページと管理者に正しく表示されていませんでした。

<!-- MC-24495-->

* アプリケーションは、入力タイプが customer address 属性に含まれるファイルを正常に処理するようになりました `file (attachment)`. 以前は、添付ファイルのアップロード中にアプリケーションが次のエラーをスローしていました。 `Something went wrong while saving the file`.

### 顧客

<!-- MC-41216-->

* ストアのクレジットメールは、選択した範囲を考慮し、正しいメールアドレスから送信されるようになりました。

<!-- MC-40579-->

* アカウント作成日によるフィルタリングで、設定されたタイムゾーン設定に従い、関連するすべての作成済みアカウントを取り込んだ結果が生成されるようになりました。

<!-- MC-40502-->

* データが以前にキャッシュされていた場合、顧客グリッドフィルターは、制限付きユーザーに対して正しい web サイトオプションを使用するようになりました。 以前は、顧客グリッドフィルターは、キャッシュから web サイトパラメーターを取得し、制限されたユーザーに対して正しくないデータを含めていました。

<!-- MC-39189-->

* 複数の web サイトのデプロイメントで 1 つの web サイトが削除されると、アプリケーションが管理者顧客ページで例外をスローしなくなりました。 以前は、管理者が包括的な顧客リストにアクセスしようとすると、アプリケーションに一部の顧客が表示されず、次のエラーが表示されていました。 `The website with id 2 that was requested wasn't found. Verify the website and try again`.

<!-- MC-38913-->

* 権限を持つ管理者は、顧客の「アカウント情報」タブから様々な web サイトに顧客を再割り当てできるようになりました。

<!-- MC-39852-->

* 入力タイプがの顧客アドレス属性を作成する場合、ファイルを正常にアップロードできるようになりました `(File)`. 以前は、ファイルをアップロードして保存しようとすると、アプリケーションが次のエラーをスローしていました。 `Something went wrong while saving the file`.

### 顧客セグメント

<!-- MC-40999-->

* アプリケーションでは、ストアフロントの顧客セグメントに基づいて、関連する製品が期待どおりに表示されるようになりました。 以前は、特定の顧客セグメントに関連する製品ルールが作成された際に、アプリケーションにこのセクションが表示されていませんでした。

<!-- MC-40503-->

* 対応する顧客セグメントがゲストと登録済みの顧客の両方に適用される場合、動的ブロックが買い物かごに登録された顧客に表示されるようになりました。 以前は、アプリケーションはゲストの場合にのみブロックを表示していました。

<!-- MC-40385-->

* 顧客セグメントは、管理者から注文があると、自動的に更新されるようになりました。 以前は、管理者の注文を作成した後、管理者ユーザーは、関連する顧客セグメントに移動して関連するセグメントデータを手動で更新し、をクリックする必要がありました **セグメントデータを更新** ボタン。

<!-- MC-39490-->

* このアプリケーションでは、関連する顧客セグメント内のすべての顧客について、買い物かごに動的ブロックが表示されるようになりました。 以前は、ゲストセグメントにゲストと登録済み顧客の両方が含まれている場合でも、ゲストにブロックが表示されませんでした。

<!-- MC-39464-->

* を使用した顧客のセグメント化ルールに起因するデータベースパフォーマンスの問題 `Product was Ordered` 状況が解決されました。

<!-- MC-38895-->

* REST/SOAP API 用の顧客セグメントイベントオブザーバーを追加しました。 その結果、REST/SOAP API を通じて注文が行われる際に、セグメントで定義された条件が一致した場合、顧客セグメントが期待どおりに自動的に更新されるようになりました。

<!-- MC-38346-->

* GraphQL リクエスト用にカスタマーセグメントイベントプロセッサーが追加されました。 以前は、顧客セグメントを買い物かご価格ルールの条件で使用した場合、買い物かごに買い物かご価格ルールの割引が適用されていませんでした。 [GitHub-371](https://github.com/magento/partners-magento2ee/issues/371)

### ディレクトリ

<!-- MC-39520-->

* チェックアウトワークフローの配送セクション中に、買い物客が無効な郵便番号を入力しても、アプリケーションが例外をスローしなくなりました。 [GitHub-23371](https://github.com/magento/magento2/issues/23371)

### ダウンロード可能

<!-- MC-35779-->

* 注文にダウンロード可能な製品と、ダウンロード可能なオプションを備えた設定可能な製品の両方が含まれている場合、アプリケーションは新しい注文メールにダウンロード可能な製品へのリンクを表示するようになりました。 以前は、スタンドアロンのダウンロード可能な製品へのリンクが表示されていましたが、ダウンロード可能なオプションを備えた設定可能な製品へのリンクは表示されませんでした。

### 動的ブロック （以前のバナー）

<!-- MC-40327-->

* ダイナミック ブロックは、指定したページにのみ表示されるようになりました。 以前は、動的ブロックが指定されていない場合、アプリケーションは、ウィジェットに割り当てられたすべてのバナーをすべてのページに表示していました。

<!-- MC-39839-->

* 空のコンテンツを含むダイナミック ブロックを保存できるようになりました。

### EAV

<!-- MC-41756-->

* 顧客の住所属性の日付値が、2 桁の形式ではなく 4 桁の形式で保存されるようになりました。

### 電子メール

<!-- MC-39757-->

* 管理者のパスワードリセットページのパスワードリセットリンクが期待どおりに動作するようになりました。 以前は、管理者パスワードのリセットページでカスタムテンプレートを使用した場合、管理者がメール内のリンクをクリックすると、アプリケーションにこのメッセージが表示されていました。 `Your password reset link has expired`. これは、カスタムメールテンプレートにユーザー ID に対して間違った変数が含まれていたために発生しました。

<!-- MC-41588-->

* ストア表示レベルで有効になっている場合、管理者からの顧客 E メールの送信が正しく機能するようになりました。 以前は、メール通知設定がストアビューレベルで有効になっていても、グローバルレベルで有効になっていない場合、アプリケーションは顧客メールを送信しませんでした。

<!-- MC-40950-->

* 非同期のメール送信が有効になっている web サイトが少ないマルチサイトデプロイメントでも、アプリケーションは期待どおりにメールを送信するようになりました。 以前は、1 つ以上の web サイトでこの設定が無効になっている場合、有効になっていても、どの web サイトからもメールが送信されませんでした。 請求書、出荷、およびクレジット メモ E メールにも同様の問題がありました。 ただし、注文注釈、請求書注釈、出荷注釈、クレジットメモ注釈の各メールは正常に送信されました。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-34323 magento/partners-magento2ee#505-->

* 管理者からギフトレジストリを共有するときにアプリケーションが送信するメールメッセージに、レジストリの場所への有効なリンクが含まれるようになりました。 以前は、このリンクを取得すると 404 エラーが発生していました。 [GitHub-504](https://github.com/magento/partners-magento2ee/issues/504)

<!-- MC-30127 magento/magento2#31455-->

* 請求書と請求書PDFに、バンドル製品の価格が期待どおりに含まれるようになりました。 以前は、請求書PDFにバンドル製品の誤った価格が含まれていました。 [GitHub-12856](https://github.com/magento/magento2/issues/12856)

<!-- ENGCOM-9021-->

* 戻り値がであることを確認するために、文字列キャストがメールテンプレートフィルターメソッドに追加されました。 `string`. 以前は、開発者モード以外で例外が発生した場合、アプリケーションはエラーを `phrase` オブジェクト。 これが次に致命的なエラーを引き起こしました `Uncaught TypeError`. [GitHub-32671](https://github.com/magento/magento2/issues/32671)

<!-- ENGCOM-8807-->

* 非同期送信が有効な場合、注文確認メールが期待どおりに送信されるようになりました（**ストア**  >  **設定**  >  **売上**  > **販売メール**  >  **一般設定**  >  **非同期送信**）を使用できます。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-18023 ENGCOM-9000-->

* お客様が「お問い合わせ」フォームからメールを送信しようとすると、例外が発生した場合、アプリケーションは期待どおりにエラーをログに記録するようになりました。 [GitHub-23645](https://github.com/magento/magento2/issues/23645)

### フレームワーク

<!-- MC-41712-->

* Admin 内の親クラスが、元のクラスおよび継承されたインタフェースとともに、docblock 注釈についてチェックされるようになりました。 以前は、親クラスがチェックされていなかったので、イベントをトリガーする顧客関連のアクションを管理で実行すると、エラーが発生していました。 アプリケーションは、次のエラーを例外ログに記録しました： `report.CRITICAL: Method's return type must be specified using @return annotation.`.

<!-- MC-41192-->

* Redis ページキャッシュが有効なデプロイメントで Redis サーバーが停止した場合、アプリケーションが致命的なエラーをスローしなくなりました。

<!-- MC-40739-->

* アプリケーションは、 **バックアップからメディア フォルダを除外する** でバックアップが有効な場合の設定 `bin/magento config:set system/backup/functionality_enabled 1`. 以前は、この設定にもかかわらず、へのパスが原因でメディアフォルダーがバックアップされていました `/magento` がダブル //で誤って形成されました。

<!-- MC-40654 ENGCOM-8881-->

* このアプリケーションは、管理者の買い物かごページで期待どおりに翻訳可能なすべての文字列を翻訳できるようになりました。 以前は、翻訳の読み込みに時間がかかり、コントローラアクションの事前ディスパッチをサブスクライブしたすべてのオブザーバーがスキップされていました。 [GitHub-31849](https://github.com/magento/magento2/issues/31849)

<!-- MC-39776-->

* 新しい顧客アカウントを作成ページの **顧客としてログイン** 「拡張機能を有効にする」設定は無効になっています。 以前は、アプリケーションは JavaScript エラーをスローしました。

<!-- MC-39537-->

* 使用 `bin/magento setup:db-schema:split-sales` データベーステーブルを移動する機能が期待どおりに動作するようになりました。 テーブルが作成され、データが正しく入力されるようになりました。 以前は、テーブルの存在のチェックが正しくなかったため、アプリケーションがスローされていました `SQLSTATE` 実行時のエラー `bin/magento setup:db-schema:split-sales`.

<!-- MC-39193-->

* によってフォークされる子プロセスの例外処理 `ProcessManager` が改善されました。 ここで例外が発生すると、メインプロセスが終了し、エラーメッセージが 1 回だけ表示されます。 以前は、複数のインデクサーの失敗がログに記録され、複数のメッセージが表示されていました。 [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- MC-39132-->

* グローバル Adobe Commerce プラグイン（例：） `webapi_rest` および `graphql` ）が、次の場合に新しいカスタム領域タイプでトリガーされなくなりました `di.xml` このの領域ファイルには、プラグインが登録されていません。

<!-- MC-38770-->

* 初期化時に発生する例外はキャッシュされなくなり、500 応答コードがトリガーになります。

<!-- MC-33179  magento/partners-magento2ee#431-->

* マーチャントは、ストア表示によって、カタログイベントとの間で画像を割り当てたり、削除したりできるようになりました。 以前は、カタログイベントの編集中にストアの表示を変更すると、 **画像を削除** チェックボックスがアクティブではなく、アプリケーションに次のエラーが表示されました： `Uncaught ReferenceError: toggleValueElements is not defined at HTMLInputElement.onclick`. [GitHub-364](https://github.com/magento/partners-magento2ee/issues/364)

<!-- ENGCOM-8232-->

* 最後のハンドラーが `communication.xml` ファイルが、以前に作成したすべてのハンドラーを上書きしなくなりました。 [GitHub-29528](https://github.com/magento/magento2/issues/29528)

### 一般的な修正点

<!-- MC-41194-->

* マイプロダクトレビューページとマイアカウントページの最近のレビューに、正しい数の星が表示されるようになりました。 以前は、アプリケーションは最初のレビューのみにレビューを適用し、ページ上の他のレビューを未開始のままにしました。

<!-- MC-40653-->

* ヘッダー内のアカウントリンクが WCAG 標準に従うようになりました。 以前は、ヘッダー内のアカウントリンクに重複した ID が含まれていたため、WCAG 検証が失敗していました。

<!-- MC-40528-->

* アプリケーションは、カタログイベントの日付を UTC タイムゾーンで保存するようになりました。 以前は、アプリケーションに保存されたカタログイベントの日付は、ユーザーのタイムゾーンでした。

<!-- MC-39765-->

* ゲスト買い物客が無効なアドレスを使用した場合に、アプリケーションがシステムログで生成されるエラーをスローしなくなりました。 以前は、アプリケーションは、ページをレンダリングする代わりに、次のエラーを断続的に表示していました。 `No such entity with addressId`. [GitHub-15115](https://github.com/magento/magento2/issues/15115)

<!-- MC-39747-->

* サポートされていない形式の画像の場合、画像のサイズ変更処理が停止しなくなりました。 以前は、 `catalog:images:resize` サポートされていない画像形式が見つかりました。プロセスが停止し、アプリケーションに次のエラーが表示されました： `bin/magento catalog:images:resize Unsupported image format`.

<!-- ENGCOM-8925-->

* ロゴ画像の WEBP および AVIF サポートが管理者に追加されました。 [GitHub-32495](https://github.com/magento/magento2/issues/32495)

<!-- MC-38156-->

* の範囲は変更できなくなりました `media_gallery` 属性。 以前は、の範囲を変更した場合 `media_gallery` ～に帰する `global`、アプリケーションがエラーをスローしました。

<!-- MC-36818  magento/partners-magento2ee#470-->

* スケジュールされた更新として追加された関連製品は、更新の終了日を過ぎるとストアフロントの製品ページに表示されなくなります。 [GitHub-469](https://github.com/magento/partners-magento2ee/issues/469)

<!-- MC-34489 magento/partners-magento2ee#491-->

* クリックすると、アプリケーションに正確で情報のあるメッセージが表示されるようになりました **アイテムの管理** マイアカウントギフトレジストリページとレジストリ製品が在庫切れです。 以前は、アプリケーションは次のエラーをスローしていました。 `Error: Call to a member function getId() …`. [GitHub-490](https://github.com/magento/partners-magento2ee/issues/490)

<!-- MC-33667-->

* 新しいページを追加ページから CMS ページを web サイトのルート階層に、期待どおりに追加できます。

<!-- MC-33499 magento/partners-magento2ee#446-->

* エンティティタイプが選択されている場合、スケジュールされた書き出しのリストでフィルタリングが期待どおりに機能するようになりました。 以前は、フィルターが機能せず、アプリケーションが JavaScript エラーをスローしていました。 [GitHub-361](https://github.com/magento/partners-magento2ee/issues/361)

<!-- MC-30084 ENGCOM-8674-->

* カテゴリ画像が、から期待どおりにコピーされるようになりました `catalog/tmp/category` ディレクトリ `catalog/category` データベースストレージメソッドを使用してカテゴリを保存する場合のディレクトリ。 の画像行 `media_storage_file_storage` テーブルにも正しいが含まれるようになりました `directory_id`. [GitHub-11995](https://github.com/magento/magento2/issues/11995)

<!-- MC-24768-->

* マーチャントは、変更を CMS 階層に送信した後、無効化されたキャッシュについて期待どおりに通知されるようになりました。 以前は、アプリケーションは CMS 階層の保存中にキャッシュを無効化しませんでした。

<!-- MC-24725-->

* 買い物かごの「買い物かごへの冗長なAJAX リクエスト」セクションが削減されました。 以前は、アプリケーションが買い物かごの小計を適切に読み込まなかったので、買い物かごのリロードが再びトリガーされていました。

<!-- MC-23740-->

* 予約語が URL キーに含まれないようにするために、URL の検証を追加しました。 参照： [よく知られた Uniform Resource Identifier （URI）の定義](https://tools.ietf.org/html/rfc5785)

<!-- ENGCOM-9037-->

* PHP 7.4 を実行するデプロイメントで、以下の場合にアプリケーションが 404 エラーを返すようになりました。 **「カテゴリ/製品」 URL の書き換えを生成** はに設定されています。 **不可**&#x200B;そして、買い物客は存在しないカテゴリパスにアクセスしようとします。 以前は、アプリケーションは次のような 500 エラーを返していました。 `Trying to access array offset on value of type bool`. [GitHub-31984](https://github.com/magento/magento2/issues/31984)

<!-- MC-32257 magento/partners-magento2ee#507-->

* から属性セットを使用して作成された製品を正常に編集できるようになりました **デザイン グループとスケジュール デザインの更新** グループが削除されました。  以前は、その属性セットから作成された製品を編集しようとすると、アプリケーションが致命的なエラーをスローしていました。 [GitHub-44](https://github.com/magento/partners-magento2ee/issues/44)

<!-- ENGCOM-8901-->

* `nowdoc` はに置き換えられました `heredoc` が含まれる `Magento_Backend` ストアスイッチャー。 [GitHub-32262](https://github.com/magento/magento2/issues/32262)

<!-- ENGCOM-8539-->

* 管理者は、ログイン後、リクエストされた管理者ページに直接リダイレクトされるようになりました。  以前は、管理者がログインすると、管理者ダッシュボード（または起動ページとして設定されたページ）にリダイレクトされ、手動で宛先に移動する必要がありました。 [GitHub-31042](https://github.com/magento/magento2/issues/31042)

<!-- ENGCOM-8685-->

* アルゼンチン，ボリビア，チリ，エクアドル，ガイアナ，パラグアイ，ペルー、スリナム，ベネズエラの各地域を追加 `directory_country_region` テーブル。 [GitHub-31169](https://github.com/magento/magento2/issues/31169)

<!-- ENGCOM-8505-->

* アルバニア，デンマーク，ギリシャ，アイスランド，ポルトガル，スウェーデンの各地域を `directory_country_region` テーブル。 [GitHub-31040](https://github.com/magento/magento2/issues/31040)

<!-- MC-30104 magento/magento2#31480 -->

* 例外が発生した場合、メッセージは MysqlMQ メッセージキュー内でエラーとしてフラグ付けされるようになりました。 [GitHub-18140](https://github.com/magento/magento2/issues/18140)

<!-- ENGCOM-8579-->

* 管理者クレジット・メモおよび請求書ページの税金情報をロードする際に、正しい区分オブジェクトが参照されるようになりました。 [GitHub-31197](https://github.com/magento/magento2/issues/31197)

<!-- MC-40346-->

* Royal Mail のクリック&amp;ドロップ統合が期待どおりに動作するようになりました。 以前は、統合をアクティベートしようとすると、アプリケーションで次のエラーが発生していました。 `Sorry! Something went wrong. Please try again later`. [GitHub-28996](https://github.com/magento/magento2/issues/28996)

<!-- ENGCOM-8498-->

* 間違った出荷、クレジット・メモまたは請求書 ID が URL で渡された場合に、アプリケーションに情報エラー・メッセージが表示されるようになりました。 以前は、アプリケーションは致命的なエラーをスローしました。 [GitHub-30424](https://github.com/magento/magento2/issues/30424)

<!-- ENGCOM-8632-->

* 静的ファイルの場所の再帰は削除されました。  アプリケーションに、500 エラーではなく 404 ページが表示されるようになりました。 以前は、デフォルトの NGINX 設定のバグにより、無限再帰が発生していました。 [GitHub-31530](https://github.com/magento/magento2/issues/31530)

<!-- ENGCOM-8550-->

* の名前 `cms_index_noroute.xml` ファイルはに修正されました `cms_noroute_index.xml`. [GitHub-31300](https://github.com/magento/magento2/issues/31300)

<!-- ENGCOM-8516-->

* この `.editorconfig` ファイルをリファクタリングして、の自動書式を修正しました。 `db_schema_whitelist.json` ファイル。 [GitHub-31171](https://github.com/magento/magento2/issues/31171)

<!-- ENGCOM-9018-->

* ブラウザーウィンドウのサイズを変更しても、バインディング拡大鏡イベントが重複してトリガーされなくなりました。 [GitHub-30788](https://github.com/magento/magento2/issues/30788)

<!-- ENGCOM-8722-->

* フィルタリング時にアプリケーションが SQL 例外をスローしなくなりました `Magento\Users\Model\ResourceModel\Users\Collection` 作成者： `user_id`. [GitHub-31216](https://github.com/magento/magento2/issues/31216)

### ギフトカード

<!-- MC-40412-->

* ギフトカードがキャンセルされた場合、保留中の支払い料金が期待どおりにギフトカードから削除されるようになりました。 以前は、アプリケーションがエラーをスローしたのは `cron` ギフト カードが削除された後に実行しました。

<!-- MC-37658-->

* 買い物客は、複数のアドレスでチェックアウトしている場合に、注文の確認ページで注文からギフトカードを削除できるようになりました。 以前は、買い物客がカードを選択してクリックした際に、アプリケーションが注文からギフトカードを削除していませんでした **削除**.

<!-- MC-34407-->

* ギフト カードを買い物かごに追加した後にギフト カードの値を変更すると、その新しい価格が買い物かごに表示されるようになりました。

<!-- MC-32651-->

* ギフトカード作成ページに価格範囲検証ロジックが追加されました。 以前は、管理者は、最大値を超える最小値を持つカードを作成できました。 [GitHub-493](https://github.com/magento/partners-magento2ee/issues/493)

<!-- MC-32638979 magento/partners-magento2ee#40851-->

* この `addRequisitionListItemsToCart` リクエストにの値が含まれていない場合、クエリがカスタムギフトカードの金額を期待どおりに返すようになりました。 `allow_open_amount`.

<!-- MC-32373-->

### ギフトメッセージ

<!-- MC-38655-->

* この `setGiftOptionsOnCart` ミューテーションがギフトメッセージを正しく作成するようになりました。 [GitHub-388](https://github.com/magento/partners-magento2ee/issues/388)

### ギフト レジストリ

<!-- MC-33057 magento/partners-magento2ee#467-->

* **イベントの日付** ギフトレジストリの作成または編集中に、ストアフロントと管理者の値が同じになりました。 以前は、ギフトレジストリを編集および保存するたびに、 **イベントの日付** 1 日遅れてストアフロントと管理者の両方で。 [GitHub-466](https://github.com/magento/partners-magento2ee/issues/466)

<!-- MC-32587  magento/partners-magento2ee#511-->

* 無効になった商品は、ギフト登録画面に表示されなくなります。 以前は、ギフトレジストリに追加された後に製品が無効になった場合、買い物客がレジストリにアクセスすると、アプリケーションは次のメッセージを表示していました。 `Error: Call to a member function getId() …`. [GitHub-510](https://github.com/magento/partners-magento2ee/issues/510)

### ギフト包装

<!-- MC-38260-->

* ストアビューのギフトラップラベルの翻訳が期待どおりに機能するようになりました。

<!-- MC-36749-->

* 複数のアドレスに出荷される注文に対して、想定どおりにギフトラッピングが適用されるようになりました。

<!-- MC-34820-->

* すべての製品が削除されると、アプリケーションによって買い物かごからギフト包装料金が削除されるようになりました。

<!-- MC-32259 magento/partners-magento2ee#500-->

* クレジット・メモにギフト・ラップと構成可能な製品手数料が含まれている場合、クレジット・メモの合計が正しくなるようになりました。 以前は、ギフトラップ税額がクレジット・メモ合計に必ずしも含まれていませんでした。 [GitHub-34](https://github.com/magento/partners-magento2ee/issues/34)

### Google Analytics

<!-- ENGCOM-8450-->

* Google Analyticsが有効になっている場合に、管理者がストアフロントでページを読み込もうとしても、アプリケーションがエラーをスローしなくなりました。 の CSP エントリ `connect-src` AJAX リクエスト to www.google-analytics.comを許可するように追加されました。 [GitHub-30880](https://github.com/magento/magento2/issues/30880)

### Google Tag Manager

<!-- MC-39072-->

* Google Tag Manager が有効な場合、チェックアウトワークフローの支払いページの請求先住所の UI コンポーネントで見積先住所が正しく使用されるようになりました。 以前は、支払いページで JavaScript エラーが発生していました。

### GraphQL

<!-- MC-41885-->

* GraphQL `products` クエリは、属性編集ページで使用されるのと同じ並べ替え順で並べ替えられた属性オプションを返すようになりました。

<!-- MC-41473-->

* への応答 `{ category(id: 2){ children { name children { name } } } }` GraphQL リクエストに、正しく並べ替えられたカテゴリツリーが含まれるようになりました。

<!-- MC-41030-->

* この `CartItemPrices` オブジェクトに、新しいGraphQL フィールドが含まれるようになりました `fixed_product_taxes`：買い物かご項目に適用される固定製品税の配列を返します。 以前は、買い物かご項目に適用された固定製品税は、買い物かごクエリに含まれていませんでした。

<!-- MC-40920-->

* GraphQLへの空のリクエストで、応答コード 500 ではなく 200 がスローされるようになりました。 以前は、GraphQL パーサーは、クエリ結果が生成される前に例外をスローしていました。

<!-- MC-40867 magento/partners-magento2ee#532 -->

* この `applyRewardPointsToCart` ミューテーションは、買い物かごの総計を更新して、控除された報酬ポイントの値を正確に反映するようになりました。 [GitHub-486](https://github.com/magento/partners-magento2ee/issues/486)

<!-- MC-40379-->

* GraphQLを使用してアップセル製品のリンクを作成した場合に、無効になった製品はGraphQLの応答に含まれなくなりました。

<!-- MC-40262-->

* マーチャントはGraphQLを使用できるようになりました `setShippingAddressesOnCart` ゲストのチェックアウトが無効な場合に、買い物客の買い物かごの請求先住所と配送先住所を設定する方法。

<!-- MC-39508-->

* この `categoryList` で複数のフラグメントが含まれる場合に、クエリで例外がスローされなくなりました `CategoryTree` オブジェクト。 [GitHub-31086](https://github.com/magento/magento2/issues/31086)

<!-- MC-38995-->

* GraphQL `product` クエリで、正しい顧客グループ価格が返されるようになりました。

<!-- MC-38822-->

* GraphQL `products` クエリ応答では、製品属性の位置に従って集計を並べ替えるようになりました。

<!-- ENGCOM-8462-->

* 商品およびカテゴリ URL のサフィックスに null 値が含まれる場合に、GraphQLのクエリ中にタイプエラーがスローされなくなりました。 [GitHub-30909](https://github.com/magento/magento2/issues/30909)

<!-- magento/magento2#31164-->

* この `CustomizableDateValue` オブジェクトには、が含まれるようになりました。 `type` 属性。 この値は、DATE、DATE_TIME、TIME のいずれかに設定できる列挙です。

<!--  magento/partners-magento2ee#421-->

* この [`dynamicBlocks` クエリ](https://devdocs.magento.com/guides/v2.4/graphql/queries/dynamic-blocks.html) 指定したフィルタに一致するダイナミック ブロックのコンテンツを返します。

<!-- ENGCOM-8603-->

* POST `V1/products/special-price-delete` リクエストで、指定されたの価格のみが削除されるようになりました `store_id` 期待どおりだ。 以前は、この呼び出しにより、指定された SKU のすべての特別価格がすべての店舗から削除されていました。 [GitHub-25907](https://github.com/magento/magento2/issues/25907)

<!--  magento/partners-magento2ee#280 -->

* エラーを修正しました `country_code` の属性 `createGiftRegistry` 変異。

<!-- magento/partners-magento2ee#280 -->

* の問題を修正しました `giftRegistryUid` 属性 `updateGiftRegistryItems` 変異。

<!-- magento/partners-magento2ee#280 -->

* を防ぐためのチェックを追加 `updateGiftRegistryRegistrants` ランダムなユーザーを登録者としてギフトレジストリに追加するために使用される突然変異。

<!-- magento/magento2#31380 -->

* この `addConfigurableProductsToCart` ミューテーションが、指定された製品の正しいサムネールを返すようになりました。 以前は、親製品のサムネールが返されていました。

<!-- ENGCOM-8477-->

* この `products` 特別価格期間が将来の日付に設定されている場合、クエリで製品の特別価格が公開されなくなりました。 [GitHub-30210](https://github.com/magento/magento2/issues/30210), [GitHub-29631](https://github.com/magento/magento2/issues/29631)

<!-- magento-engcom/magento2ee#576-->

* この `customer` クエリ応答に次の内容が含まれるようになりました `total_giftcard` の一部としての属性 `OrderTotal` オブジェクト。

<!-- MC-41084 ENGCOM-9042 -->

* の原因となった問題を修正しました `products` 階層価格が設定されていない品目の価格階層に関する誤った情報を返すクエリ。 [GitHub-32279](https://github.com/magento/magento2/issues/32279)

### 画像

<!-- MC-38951-->

* POSTを使用してバンドル製品を作成またはアップデートする際に、required_options と has_options バンドル属性を期待どおりに設定できるようになりました `/V1/product/:sku` エンドポイント。 以前は、1 に設定しようとしても、これらのカスタム アトリビュートは 0 （ゼロ）に設定されていました。

### インポート/エクスポート

<!-- MC-41576-->

* ページエンティティ属性の書き出しグリッドの製品エンティティのカテゴリ ID フィルターが、期待どおりに動作するようになりました。

<!-- MC-41439 ENGCOM-9005-->

* グループ化された製品の在庫ステータスが、すべての子製品が在庫切れになった場合に、在庫切れに対して期待どおりに更新されるようになりました。 [GitHub-32647](https://github.com/magento/magento2/issues/32647)

<!-- MC-41184-->

* 読み込みによって子製品のストックステータスが更新される際に、設定可能な製品のストックステータスが期待どおりに自動的に更新されるようになりました。 以前は、子の製品のストックステータスが読み込みによって更新された場合、製品のストックステータスは自動的に更新されませんでした。

<!-- MC-41151-->

* スケジュールされた書き出しで空の値を保存できるようになりました。 以前は、書き出しの作成または保存後に、アプリケーションによって空のフィルター値が更新されていました。 両方 `no` および `not specified` 値は、データベースでゼロで表され、値は `not selected` はで上書きされました `no`.

<!-- MC-41092-->

* 製品、在庫ソース、顧客エンティティを書き出す際に、書き出しプロセスでユーザーロールの範囲が考慮されるようになりました。 以前は、エクスポートプロセスでユーザーロールのスコープが無視され、プライベートユーザーロールのエクスポートエンティティのエクスポートが許可されていました。

<!-- MC-40943-->

* 製品税区分が次のように設定されます `None` を使用して製品を読み込んだ場合 `tax_class_name` 値 `None` または `0`. 以前は、次の場合： `product tax_class_name` はでした `None` アプリケーションにより、CSV ファイルに新しい税クラスが作成されました `None`既存の税クラスと重複しています。 次の場合 `product tax_class_name` はでした `0` csv ファイルでは、アプリケーションはこの値を無視し、読み込み後に製品税クラスが変更されませんでした。

<!-- MC-40898-->

* 管理者は、を正常に変更できるようになりました `name` バンドル製品の `bundle_values` 管理者から。 以前は、管理者から名前を変更した後、アプリケーションによってストアフロントに製品が在庫切れとして表示されていました。 また、製品は同じ SKU を 1 つのバンドルオプションセクションに統合されました。

<!-- MC-40333-->

* 顧客データを書き出す際に、アプリケーションでユーザーの範囲が考慮されるようになりました。 以前は、顧客を書き出そうとすると、アプリケーションはすべての web サイトから顧客データを書き出していました。

<!-- MC-40305-->

* アプリケーションは、CSV ファイルの読み込み中に、アップセル、クロスセル、および関連製品間の製品関係を、次の場合に期待どおりに削除するようになりました `__EMPTY__VALUE__` は CSV ファイルで指定されます。

<!-- MC-40012-->

* 多くの顧客のカスタムアドレスデータのエクスポート（管理者 **システム** > **Export**）を使用しても、メモリエラーが日常的に発生しなくなりました。 以前は、カスタムアドレスデータを書き出す際に、アプリケーションがすべての顧客データを読み込もうとすると、メモリが不足し、アプリケーションがメモリ割り当て失敗エラーをスローしていました。

<!-- MC-39977-->

* 重複した階層の価格は、デフォルトの CSV インポートプロセス中にインポートされなくなりました。 以前は、重複階層価格のインポートを防ぐための検証が欠落しており、重複階層価格が発生すると、マーチャントは製品を保存できませんでした。 マーチャントは、製品の変更をスケジュールしようとすると、このエラーも表示しました。 `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry…`.

<!-- MC-39609  magento/magento2#31397-->

* すべての製品画像が読み込み時に検証されるようになりました。 以前は、製品に複数の画像がある場合、アプリケーションは最初の画像のみを検証していました。 [GitHub-28236](https://github.com/magento/magento2/issues/28236)

<!-- MC-39483-->

* 読み込み時に、期待どおりに顧客の住所から地域を削除できるようになりました。 以前は、空のリージョンを持つ顧客の住所が読み込まれた場合、割り当てられたリージョンは変更されませんでした。

<!-- MC-38810-->

* 商品属性に JSON またはHTMLコンテンツが含まれる商品が CSV ファイルに正しく書き出されるようになりました。 以前は、CSV ファイルの誤ったフィールドに、重複したデータ文字列が含まれていました。

### 索引

<!-- MC-39718 ENGCOM-8567-->

* 子プロセスが失敗した場合、プロセスマネージャーがエラーで終了するようになりました。 以前は、プロセスマネージャーに渡される関数の数（インデクサーディメンションなど）がの値よりも小さい場合、プロセスマネージャーは常に正常に終了していました `MAGE_INDEXER_THREADS_COUNT` 環境変数。 [GitHub-30964](https://github.com/magento/magento2/issues/30964)

<!-- MC-39272-->

* REST PUTを使用して商品をリンクした場合に、ストアフロントの検索結果で商品が期待どおりに表示されるようになりました `/V1/products/:sku/links` インデクサーモードがに設定されている場合はリクエスト **保存時の更新**.

<!-- MC-38310 magento/magento2#32693-->

* インデクサーモードがに設定されている場合、カタログ価格ルールインデクサーが期待どおりに動作するようになりました。 **保存時の更新**. [GitHub-370](https://github.com/magento/partners-magento2ee/issues/370)

<!-- ENGCOM-8890-->

* 製品を含まない無効なカテゴリを削除しても、カタログ検索およびカテゴリのフラットインデックステーブルには影響しなくなりました。 以前は、非アクティブなカテゴリを削除すると、完全な再インデックスがトリガーされていました。 [GitHub-23297](https://github.com/magento/magento2/issues/23297)

<!-- ENGCOM-8599 8474-->

* カスタムインデクサーで、サブスクリプションに異なるエンティティ列名を使用できるようになりました。 以前は、データベーストリガーは、最後にに設定されたインデクサーの列名を使用していました **スケジュールで更新** 指定されたインデクサーではなく、 [GitHub-21853](https://github.com/magento/magento2/issues/21853)

<!-- ENGCOM-8887-->

* AJAXお客様データの節（`Magento_Customer/js/section-config`）に設定する必要があります。 [GitHub-31948](https://github.com/magento/magento2/issues/31948)

<!-- MC-39569-->

* カテゴリ内で製品を追加、削除、または並べ替えた後、次のインデクサーが無効にならなくなりました。 `catalog_category_product` および `catalogsearch_fulltext` （およびその扶養家族）。 以前は、このような不注意による削除によって、サイトの完全なインデックス再作成がトリガーされていました。 フラットカタログが有効になっていない場合、これらの条件下では、完全な再インデックスが実行されなくなりました。

### インフラストラクチャ

<!-- MC-41445-->

* 依存関係 `pelago/emogrifier` はバージョン 3.1.0 から 5.0.0 に更新されました。この更新の結果、に後方互換性のない変更が導入されました `Magento\Email\Model\Template\Filter` クラス。 変更されたコードは、メールテンプレートのレンダリング中に実行されます。 参照： [BIC 参照](https://developer.adobe.com/commerce/php/development/backward-incompatible-changes/reference/).

<!-- MC-42212-->

* の問題を修正しました `\Magento\CatalogInventory\Model\Indexer\Stock\CacheCleaner::getCategoryIdsByProductIds` そのため、新しい製品を保存できませんでした。

<!-- MC-42199-->

* 非推奨（廃止予定）の TinyMCE v3 ライブラリが削除されました。 この `Magento_Tinymce3Banner` tinyMCE v3.x に関連するモジュールおよび MFTF テストがAdobe Commerceから削除されました。

<!-- MC-41497-->

* アプリケーションは、 `Invalid header value detected` フランス語の区別符号（「é」、「è」など）を含むメールアドレスを買い物客が入力した場合に、お問い合わせフォームでエラーが発生します。 アプリケーションは、ユーザー名の UTF-8 文字を ASCII エンコーディングに変換するようになりました。 以前は、メールアドレスの一意のセクションで UTF-8 文字が ASCII エンコーディングに変換されていませんでした。

<!-- MC-39947-->

* プラグインが親クラスに追加されると、アプリケーションが PHP の致命的エラーをスローしなくなりました。 [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-9012-->

* これらのモジュールの README.md ファイルを更新しました。 `Magento_Msrp`, `Magento_MsrpConfigurableProduct`, `Magento_MsrpGroupedProduct`, `Magento_Multishipping`, `Magento_MysqlMq`. [GitHub-32577](https://github.com/magento/magento2/issues/32577)

<!-- magento/partners-magento2ee#501-->

* `phpcpd` は、PHP 8 の互換性を保つために v6.0.3 に更新されました。

<!-- ENGCOM-9073-->

* `ramsey/uuid` は、PHP 8.0 との互換性のために更新されています。 [GitHub-31777](https://github.com/magento/magento2/issues/31777), [GitHub-826](https://github.com/magento/magento2-functional-testing-framework/issues/826)

<!-- ENGCOM-8997-->

* `colinmollenhour/php-redis-session-abstract` は、PHP 8 の互換性を保つために v1.4.4 に更新されました。 [GitHub-32709](https://github.com/magento/magento2/issues/32709)

<!-- ENGCOM-8527-->

* のタブとスペースの無効な組み合わせを修正しました `phpstan.neon` ファイル。 [GitHub-31239](https://github.com/magento/magento2/issues/31239)

<!-- ENGCOM-8668-->

* 廃止されたプロパティの使用を削除 `$_isScopePrivate` コードベース全体。 [GitHub-30506](https://github.com/magento/magento2/issues/30506)

<!-- ENGCOM-8551-->

* ページレイアウトは、でハードコードされなくなりました  `Magento\Widget\Block\Adminhtml\Widget\Instance\Edit\Chooser\Container`.  その結果、 `getPageLayouts()` 関数は、異なるモジュールで宣言されているページレイアウトの実際のリストを期待どおりに返すようになりました。 以前は、ハードコーディングされたレイアウトのみが返されていました。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8509-->

* この `composer.lock` ファイルは、コーディング標準の最新バージョンに更新されました。 [GitHub-31152](https://github.com/magento/magento2/issues/31152)

<!-- ENGCOM-9015 -->

* に見つからない依存関係を追加しました `web-token/jwt-framework` にパッケージ化します `magento/module-jwt-framework-adapter`. [GitHub-32578](https://github.com/magento/magento2/issues/32578)

<!-- ENGCOM-9019 -->

* にパッシブリスナーが追加されました `fotorama.js` lighthouse 指標のスコアを向上させるためのライブラリ。 [GitHub-31140](https://github.com/magento/magento2/issues/31140)

<!-- ENGCOM-9014 -->

* Google Analyticsモジュールの README.md ファイルが更新されました。 [GitHub-32616](https://github.com/magento/magento2/issues/32616)

<!-- ENGCOM-8375 -->

* Process Manager では、フォークされたプロセスで例外を適切に処理するようになりました。 メインプロセスが終了し、エラーメッセージが 1 回だけ表示されるようになりました。 また、フォークされたプロセスからの例外は、メインプロセスでスローされたときに処理されるようになりました。 以前は、アプリケーションは複数のインデクサーの失敗を記録し、複数のエラーメッセージを表示していました。  [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- ENGCOM-8544 -->

* プラグインが親クラスに追加されると、アプリケーションがエラーをスローしなくなりました。 （ `optionsProvider` パラメーターは次の後に宣言されるようになりました： `getContentIdentities` 。対象： `Assest.php`.） 以前は、アプリケーションは次のエラーをスローしていました。  `Error: Cannot instantiate interface Magento\Framework\Data\OptionSourceInterface`. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-8549 -->

* 実行中 `Magento\Framework\Filesystem\Io\Ftp::ls()` 空のフォルダーで、空の配列を期待どおりに返すようになりました。 以前は、アプリケーションは次の例外をスローしていました。 `Invalid argument supplied for foreach() in vendor/magento/framework/Filesystem/Io/Ftp.php…`. [GitHub-31288](https://github.com/magento/magento2/issues/31288)

<!-- ENGCOM-8791 -->

* この `update` では、役割とルールの両方のメソッドが非推奨（廃止予定）としてマークされました `app/code/Magento/Authorization/Model/Role.php`. [GitHub-30756](https://github.com/magento/magento2/issues/30756)

<!-- ENGCOM-8946 -->

* SameSite cookie パラメーターの連結が修正されました。 以前は、が誤った連結で追加されていました `lex` 接尾辞 `value`, `domain`、およびその他のパラメーター。 [GitHub-26377](https://github.com/magento/magento2/issues/26377), [GitHub-32440](https://github.com/magento/magento2/issues/32440)

<!-- ENGCOM-8698 ENGCOM-9034 -->

* `allure-framework/allure-phpunit` は、コードベース全体で v1.3.1 にアップグレードされています。 以前は、アプリケーションにこのエラーが表示されていました。  `Warning: Use of undefined constant GLOB_BRACE - assumed 'GLOB_BRACE' (this will throw an Error in a future version of PHP) in /var/www/html/src/vendor/allure-framework/allure-phpunit/src/Yandex/Allure/Adapter/AllureAdapter.php:74.` [GitHub-24635](https://github.com/magento/magento2/issues/24635)

<!-- ENGCOM-8783 -->

* エラーの実行中に、アプリケーションにより詳細なエラーが表示されるようになりました `bin/magento` 実稼動モードのコマンド。 以前は、アプリケーションにエラーメッセージが表示されなかったか、情報が欠落しているメッセージが表示されていました。 [GitHub-32786](https://github.com/magento/magento2/issues/32786)

<!-- ENGCOM-8953 -->

* この `ArrayIterator` PHP オブジェクトは、PHP 7.4 で期待通りに動作するように更新されました。 [GitHub-32088](https://github.com/magento/magento2/issues/32088)

<!-- ENGCOM-8469 -->

* 配送業者が利用できない場合に顧客が注文を完了しようとすると、アプリケーションがエラーをスローしなくなりました。 代わりに、チェックアウトページと次のメッセージが表示されます。 `Sorry, no quotes are available for this order at this time`. 以前は、アプリケーションで空白のチェックアウトページが表示され、次のメッセージが例外ログに記録されていました。 `array_keys() expects parameter 1 to be array, null given`. [GitHub-30830](https://github.com/magento/magento2/issues/30830)

<!-- ENGCOM-8557 -->

* アプリケーションは、各 Cookie を個別のコンテキストとしてログに記録しなくなりました。 この `$_COOKIE` 配列も文字列に変換されています。 以前は、各 cookie が個別のコンテキストとしてログに記録されていたため、cookie の数が 50 を超えると、アプリケーションはこのメッセージをログに記録していました。 `Unable to send the cookie. Maximum number of cookies would be exceeded`. [GitHub-31334](https://github.com/magento/magento2/issues/31334)

### 請求書

<!-- ENGCOM-8472 -->

* 管理で新しい請求書を作成する場合、 **次の電子メールコピー** チェックボックスが期待どおりに動作するようになりました。 以前は、で請求書メールを送信するグローバル設定が有効になっている場合、このチェックボックスは無視されていました **販売メール**. 一貫性が保たれ、出荷ページやクレジットメモ作成ページと同じ方法で動作するようになりました。 [GitHub-28511](https://github.com/magento/magento2/issues/28511)

### メディアギャラリー

<!-- MC-41728-->

* `bin/magento media-gallery:sync` では、XMP情報を持たない PNG 画像を処理する際に、期待どおりに失敗するようになりました。

<!-- ENGCOM-8814-->

* のエントリ `catalog_product_entity_media_gallery` 関連製品が削除されると、テーブルは期待どおりに削除されます。 [GitHub-17727](https://github.com/magento/magento2/issues/17727)

<!-- ENGCOM-8945-->

* JavaScript の縮小が有効になっている場合、Media Gallery で画像の詳細を更新できるようになりました。 以前は、画像の詳細が保存されず、アプリケーションに次のエラーが表示されていました。 `TypeError: Cannot read property 'call' of undefined in jquery.validate`. [GitHub-31633](https://github.com/magento/magento2/issues/31633)

### MFTF

新機能と MFTF コアバグ修正については、を参照してください。 [機能テストフレームワークの変更ログ](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

<!-- ENGCOM-8496-->

* この `magento indexer:reindex` および `cache:flush` コマンドと `AdminReindexAndFlushCache` アクショングループは、次のモジュールの実行を改善するためにテストから削除されました。 `Bundle`, `Catalog`, `CatalogRule`, `CatalogRuleConfigurable`, `CatalogUrlRewrite`, `Downloadable`, `Indexer`, `Paypal`、および `Sales`. [GitHub-31031](https://github.com/magento/magento2/issues/31031)

<!-- ENGCOM-8562-->

* `AdminSubmitCategoriesPopupActionGroup` は、テストの失敗を防ぐためにテストに追加されました。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

<!-- ENGCOM-8562-->

* テストは、次を使用してリファクタリングされました `StorefrontCheckQuickSearchStringActionGroup` および `StorefrontAssertProductNameOnProductMainPageActionGroup` （既存のアクショングループ）。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

#### リファクタリングされたテスト

実行時間を改善するために、次のテストがリファクタリングされました。

`AddOutOfStockProductToCompareListTest`  <!-- ENGCOM-8547-->

`AdminApplyTierPriceToProductWithPercentageDiscountTest` <!-- ENGCOM-8522-->

`AdminCheckingCreditMemoTotalsTest` <!-- ENGCOM-8606-->

`AdminCheckDashboardWithChartsTest` <!-- ENGCOM-8897-->

`AdminConfigDefaultProductLayoutFromConfigurationSettingTest`  <!-- ENGCOM-8891-->

`AdminCreateInvoiceTest` <!-- ENGCOM-8581-->

`AdminCreateOrderAddProductCheckboxTest` <!-- ENGCOM-8492-->

`AdminMassOrdersCancelCompleteAndClosedTest` <!-- ENGCOM-8538-->

`AdminMassOrdersCancelProcessingAndClosedTest`  <!-- ENGCOM-8670-->

`AdminMassOrdersHoldOnCompleteTest`  <!-- ENGCOM-8897-->

`AdminMassOrdersHoldOnPendingAndProcessingTest`  （廃止予定のの置き換え `AdminMassOrdersHoldOnPendingAndProcessingTest`） <!-- ENGCOM-8669-->

`AdminMassOrdersUpdateCancelPendingOrderTest` <!-- ENGCOM-8602-->

`AdminMassProductPriceUpdateTest` <!-- ENGCOM-8587-->

`AdminMassUpdateProductAttributesMissingRequiredFieldTest` <!-- ENGCOM-8511-->

`AdminOrdersReleaseInUnholdStatusTest`  <!-- ENGCOM-8592—-->

`AdminPanelIsFrozenIfStorefrontIsOpenedViaCustomerViewTest`  <!-- ENGCOM-8601-->

`AdminSortingByWebsitesTest`  <!-- ENGCOM-8583-->

`AdminUpdateSimpleProduct` <!-- ENGCOM-8536-->

`AdminUpdateSimpleProductWithRegularPriceInStockEnabledFlatTest`  <!-- ENGCOM-8533-->

`AdminValidateShippingTrackingNumberTest`  <!-- ENGCOM-8593-->

`CancelOrdersInOrderSalesReportTest`  <!-- ENGCOM-8591-->

`ProductsQtyReturnAfterOrderCancelTest` <!-- ENGCOM-8506-->

`StorefrontConfigurableProductBasicInfoTest`  <!-- ENGCOM-8711-->

#### アクショングループ

これらのテストでは、繰り返しアクションがアクショングループに置き換えられました。

`AdminCheckConfigurableProductPriceWithDisabledChildProductTest`  <!-- ENGCOM-8574-->

`AdminConfigurableProductCreateTest` <!-- ENGCOM-9013-->

`AdminConfigurableProductRemoveAnOptionTest` <!-- ENGCOM-9038-->

`AdminCreateProductDuplicateUrlkeyTest` <!-- ENGCOM-9007-->

`AdminCreateSimpleProductNegativePriceTest` <!-- ENGCOM-900-->

`AdminCreateSimpleProductZeroPriceTest`  <!-- ENGCOM-9040-->

`AdminCreateVirtualProductFillingRequiredFieldsOnlyTest` <!-- ENGCOM-9003-->

`AdminUpdateSimpleProductWithRegularPriceInStockDisabledProductTest` <!-- ENGCOM-9002-->

`AdminUpdateSimpleProductWithRegularPriceInStockNotVisibleIndividuallyTest`  <!-- ENGCOM-9011-->

`AdminUpdateSimpleProductWithRegularPriceInStockVisibleInCatalogOnlyTest`  <!-- ENGCOM-9041-->

#### 新規アクショングループ

`AdminClearFiltersOnGridActionGroup` <!-- ENGCOM-8604-->

`AdminClickAddNewPageOnPagesGridActionGroup`  <!-- ENGCOM-8613-->

`AdminClickInsertWidgetActionGroup` <!-- ENGCOM-8614-->

`AdminClickRefundOfflineOnNewMemoPageActionGroup` <!-- ENGCOM-8580-->

`AdminFillAccountInformationOnCreateOrderPageActionGroup` <!-- ENGCOM-8495-->

`AdminGoToOrderStatusPageActionGroup`  <!-- ENGCOM-8615-->

`AdminOpenCMSPagesGridActionGroup`<!-- ENGCOM-8682-->

`AdminSelectAttributeSetOnEditProductPageActionGroup` <!-- ENGCOM-8566-->

`AssertAdminProductIsAssignedToCategoryActionGroup`  （テスト実行時間を短縮するために、SKU による製品グリッドのフィルタリングと最初の行のクリックを置き換えます） <!-- ENGCOM-8535 8534-->

`AssertLinkActionGroup` <!-- ENGCOM-8457-->

`AssertStorefrontCartDiscountActionGroup` <!-- ENGCOM-8431-->

`ClickPlaceOrderActionGroup` <!-- ENGCOM-8671-->

`SaveCmsPageActionGroup` <!-- ENGCOM-8683-->

`StorefrontAssertProductNameIsNotOnProductMainPageActionGroup` <!-- ENGCOM-8562-->

`StorefrontGuestCheckoutProceedToPaymentStepActionGroup` <!-- ENGCOM-8582-->

`StorefrontHoverProductOnCategoryPageActionGroup` <!-- ENGCOM-8575-->

`StorefrontSelectCustomizeAndAddToTheCartButtonActionGroup` <!-- ENGCOM-8573-->

#### 削除されたアクショングループ

<!-- ENGCOM-8525 8558 8608 8546 8695 8889 8681 8627 8714-->

* 削除済み  `CliIndexerReindexActionGroup` （または変更された値）をテストから削除して、 `Backend`, `Bundle`, `BundleImportExport`, `Catalog`, `CatalogRule`, `CatalogSearch`, `Checkout`, `Downloadable`,  `Elasticsearch`,  `Elasticsearch6`,  `Indexer`, `LayeredNavigation`,  `LoginAsCustomer`,  `Newsletter`, `Sales`, `SalesRule`, `Search`, `Store`,  `Swatches`, `UrlRewrite`, `Weee`、および `Wishlist`モジュール。

<!-- ENGCOM-8893 8951 8893 9001 8715 8724 8721 8843-->

* 削除済み `CliCacheFlushActionGroup` から `Catalog`, `CatalogUrlRewrite`, `Checkout`, `Config`, `ConfigurableProduct`,`Contact`, `Cookie`, `CurrencySymbol`, `Customer`, `Downloadable`, `Elasticsearch`, `Elasticsearch6`, `Fedex`, `Indexer`, `LayeredNavigation`,`LoginAsCustomer`, `Msrp`, `Multishipping`, `Sales`, `Swatches`, `Translation`, `UrlRewrite`, `Vault`, `Weee`、および `Wishlist` モジュール。

### ニュースレター

<!-- ENGCOM-8948 MC-40885-->

* ニュースレターのキューの作成から送信までの間にニュースレターの購読を解除した顧客に、アプリケーションがニュースレターメールを送信しなくなりました。 [GitHub-32116](https://github.com/magento/magento2/issues/32116)

<!-- ENGCOM-8675-->

* アプリケーションは、ニュースレターのイネーブルメント設定（**ストア**  >  **設定**  >  **設定**  >  **顧客**  >  **ニュースレター**  >  **一般オプション**）に設定します。 以前は、これらの設定は常にマルチストアデプロイメントのデフォルトスコープから取得されていました。 [GitHub-31188](https://github.com/magento/magento2/issues/31188)

<!-- ENGCOM-8551-->

* REST 呼び出しGET `/V1/customers/search` 複数のニュースレターを購読している顧客に対して正しい情報を返すようになりました。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8817-->

* 購読ステータスのキャッシュがニュースレタープラグインから削除されました。 [GitHub-19345](https://github.com/magento/magento2/issues/19345)

### 順序

<!-- MC-40963-->

* 部分的に請求された注文について、ストアクレジットを顧客アカウントに返す際に、アプリケーションで請求済み顧客残高が正しく計算されるようになりました。

<!-- ENGCOM-8710-->

* アプリケーションは、払い戻された顧客残高を保存する際に、変更された注文を期待どおりに保存するようになりました。 [GitHub-393](https://github.com/magento/partners-magento2ee/issues/393)

### 支払い方法

<!-- MC-41525-->

* アプリケーションは、次の支払ブロックをレンダリングするようになりました `frontend` メールの送信元のエリアには関係ありません。 （現在の領域は次のようにエミュレートされます `frontend` 支払いブロックがレンダリングされる前。） 以前は、支払いブロックはメールが送信されたエリアでレンダリングされていました。 結果として、販売メールが管理者からトリガーされたか REST API によってトリガーされたかに関わらず、アセットの URL は間違った領域（`webapi_rest` または `adminhtml`）に設定します。

<!-- MC-40810-->

* ダウンロード可能な製品のリンクが、チェックアウト時に指定したメールアドレスに送信されるようになりました。 以前は、ゲストの買い物客が PayPal Express Checkout を使用し、異なるメールアドレスを入力して注文を送信し、チェックアウトすると、アプリケーションはダウンロード可能な製品リンクを最初のアドレスに送信していました。

<!-- MC-38051-->

* 複数通貨をサポートするデプロイメントの支払方法ページに、使用可能なストアクレジットの正確な値が表示されるようになりました。

<!-- MC-37820-->

* お支払い方法リストは、ゲストの買い物客がチェックアウト中に注文の配送先住所を別の国に変更した場合に、期待どおりに更新されるようになりました。 以前は、請求先住所を変更しても、使用可能な支払い方法の更新はトリガーされていませんでした。

#### PayPal

<!-- MC-39895-->

* 買い物客は、特殊文字を含む配送先住所を持つ PayPal Payflow Pro 注文を正常にチェックアウトできるようになりました。 以前は、アプリケーションはこれらの注文の支払いを拒否しました。

<!-- MC-39861-->

* PayPal を使用して支払いが成功した後、買い物客は注文成功ページにリダイレクトされるようになりました。 以前は、セッションデータが失われたことが原因で、買い物客は空白のページにリダイレクトされていました。

### パフォーマンス

<!-- MC-41647-->

* 大規模なカタログでの管理者 SKU 検索のパフォーマンスが向上しました。 クエリオプティマイザーヒントで、クエリ実行中にインデックスが強制的に使用されるようになりました。

<!-- MC-41440-->

* のパフォーマンス `catalog_product_alert` `cron` 大きなテーブル（数百万行）で実行する場合のプロセスが改善されました。 以前は、 `catalog_product_alert` すべての製品アラートを読み込みました。メモリ不足の例外が発生しました。

<!-- ENGCOM-8752-->

* 管理フォームをレンダリングする編集ページが 1 つだけである必要がある場合に、アプリケーションがすべての CMS ページを読み込まなくなりました。  これらのページの読み込みが高速化されました。 [GitHub-30936](https://github.com/magento/magento2/issues/30936)

<!-- ENGCOM-8510-->

* 数値： `WHERE IN` 式は文字列ではなく数値としてキャストされるようになり、MariaDB の一部のバージョンでクエリのパフォーマンスが向上しました。 [GitHub-31135](https://github.com/magento/magento2/issues/31135)

* この `use_application_lock` モードでは、環境変数を使用するか、 `app/etc/env.php` ファイル。 このモードを有効にしてエラーが発生した後に、インデクサーを手動でリセットする必要がなくなりました。 このモードが有効になっていない場合、失敗後にインデクサーを手動でリセットする必要があります。 参照： [再インデックスプロセスに対するアプリケーションロックモードの使用](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### Pricing

<!-- MC-41767-->

* 買い物客がストアフロントの製品数量を更新する際に、アプリケーションが製品の価格をグループ化された価格で正しく更新するようになりました。 [GitHub-32669](https://github.com/magento/magento2/issues/32669)

<!-- MC-39282-->

* 製品に階層価格が割り当てられ、 `Magento\Framework\Api\ExtensibleDataObjectConverter` は、製品データの変換に使用されます。 以前は、 `Magento\Framework\Api\ExtensibleDataObjectConverter` は、製品が保存されたときに製品データを配列に変換するために使用されましたが、アプリケーションは製品を保存せず、次のエラーを表示しました： `Notice: Undefined index: price in app/code/Magento/Catalog/Model/Product/Type/Price.php on line 382.`

<!-- MC-36811-->

* スケジュールされた価格の更新が、買い物客の買い物かごに既に入っている製品に適用されるようになりました。 [GitHub-356](https://github.com/magento/partners-magento2ee/issues/356)

<!-- MC-24693-->

* 数量増分が有効で、小数点以下の在庫が 1 未満の場合、階層価格が期待どおりに製品に適用されるようになりました。 以前は、最小の階層価格数量は 1 に設定されていました。

### 製品ビデオ

<!-- MC-39755-->

* これで、を使用できます **ビデオを追加** ボタン （管理者） **カタログ** > **製品**）を選択して、複数のビデオを連続して追加します。 以前は、ビデオフィールドには以前のビデオの詳細が保持されていました。

<!-- MC-40817-->

* 製品ページで製品ビデオのフルスクリーンモードに切り替えても、モバイルデバイスで期待どおりに動作するようになりました。 以前は、フルスクリーンモードに入ると、フルスクリーンモードを終了する前にビデオが一時停止していました。

<!-- MC-39759-->

* ナビゲーション矢印ボタン（**次** および **戻る**）がストアフロントの製品ビデオで期待どおりに表示されるようになりました。

<!-- MC-40463-->

* マーチャントは、を使用して Vimeo ビデオを追加できるようになりました **ビデオを挿入** ボタンをクリックします。 以前は、アプリケーションで 404 エラーが表示されていました。 [GitHub-31753](https://github.com/magento/magento2/issues/31753)

### 見積もり

<!-- MC-39531-->

* この `/V1/guest-carts/examplecartid/items` を呼び出すと、リクエストされたストア表示が返されるようになりました。 以前は、リクエストされたストアではなく、ストア内の最初のストア表示が返されていました。

<!-- MC-33893 ENGCOM-8992-->

* 請求書の送信が設定できるようになりました。 以前は、請求書の送信は設定できず、アプリケーションは常に作成後に請求書を送信していました。 請求書と注文のメールは、両方とも 1 人の監視者の範囲で送信されました。 注文メールと請求書メールの送信を別々のオブザーバーが管理するようになりました。 [GitHub-27656](https://github.com/magento/magento2/issues/27656)

### レポート

<!-- MC-40998-->

* すべてのシステムレポートは、クラウドインフラストラクチャプロジェクトのAdobe Commerceで表示およびダウンロードできるようになりました。 以前は、ログ、データ、デザイン、ストアのシステムレポートをダウンロードすることはできませんでした。

<!-- MC-39737-->

* 管理者の最終レビュー日 **報告書** > **レビュー** > **製品別** には、正しいレビュー日が表示されるようになりました。 以前は、アプリケーションにはレビュー日ではなく製品作成日が表示されていました。

### 返品承認（RMA）

<!-- MC-41866-->

* RMA `resolution` 属性フィールドの値が必須の場合に、属性が表示されなくなりました `required` はに設定されています。 **なし**.

<!-- MC-41808-->

* 管理者からの返品用に複数の注文を選択できるようになりました。 以前は、をクリックするとアプリケーションがエラーをスローしていました **Submit** 複数の戻り値を選択し、「アクション」ドロップダウンメニューから「閉じる」を選択した後。

<!-- MC-41759-->

* REST API を使用して返品のステータスを変更した後、アプリケーションは、期待どおりにメール通知を顧客に送信するようになりました。

<!-- MC-39981  magento/partners-magento2ee#442 -->

* アプリケーションは、管理顧客の返品グリッドのフィルター値に従ってレコードをフィルタリングするようになりました。 以前は、アプリケーションから管理者の「すべての顧客」ページに移動し、 **フィルターのリセット** ボタンは、このページにもリダイレクトされました。 [GitHub-436](https://github.com/magento/partners-magento2ee/issues/436)

### レビュー

<!-- MC-40116-->

* 製品レビューの評価の星が、マイアカウント ページのレビューの詳細セクションで正しく計算されるようになりました。

<!-- MC-39763-->

* 製品レビューの詳細ページの「製品の平均評価」セクションと「製品の評価」セクションが正しくレンダリングされるようになりました。 以前は、アプリケーションがストアフロント評価を計算する際にレビュー ID が設定されておらず、製品レビューテンプレートが正しくレンダリングされていませんでした。

<!-- MC-36149-->

* この **この製品を初めて確認する** 管理者がレビューを承認した後、レビュー数の予想どおりにリンクが変更されるようになりました。

<!-- ENGCOM-8501 MC-30270-->

* 管理者は、製品の編集ページの「製品レビュー」セクションで、製品レビューを期待どおりに並べ替えることができるようになりました。 [GitHub-30270](https://github.com/magento/magento2/issues/30270)

<!-- MC-41003  magento/magento2#32259-->

* 管理者がストアとは別のドメインからレビューを承認して保存した後、レビューは正しいストア ID で保存されるようになりました。 [GitHub-17510](https://github.com/magento/magento2/issues/17510)

### 報酬

<!-- MC-41159-->

* マーチャントは、注文した顧客がシステムから削除された後、報酬ポイントを使用して、注文の全部または一部をキャンセルできるようになりました。

<!-- MC-40037-->

* マーチャントは、買い物かごの価格ルールから報酬ポイントを削除できるようになりました。 以前は、マーチャントが設定しようとしたとき **報酬ポイント** 買い物かごの価格ルールを作成する際に 0 に設定すると、報酬ポイント数量の以前の値が保持されます。

<!-- MC-39890-->

* 管理者から複数のレビューが承認された場合、製品レビューの報酬ポイントが関連する web サイトに関連付けられるようになりました **Marketing** > **保留中のレビュー** グリッド。 以前は、報酬ポイントがストアフロントに表示されず、管理者の関連 web サイトにリンクされていませんでした。

<!-- MC-39820-->

* 買い物客が複数のアドレスでチェックアウトしている場合、アプリケーションは支払い方法リストを更新し、 **ストアクレジット（報酬ポイント）** オプション。

### 売上

<!-- MC-39796-->

* 管理者ユーザーは、 **バックオーダーは許可されています** 設定は有効です（**ストア** > **設定** > **カタログ** > **在庫** > **製品ストックオプション**）に設定します。 以前は、アプリケーションがエラーをスローしました。

<!-- MC-42280-->

* 買い物客は、姓が空白で終わる場合に、「注文と返品」ページで注文を見つけられるようになりました。

<!-- MC-41438-->

* カタログ商品および割引税の対象となり、送料無料の対象となる注文に 100% の割引を割り当てる買い物かご価格ルールが適用されると、請求書は正しい総計で作成されるようになりました。 以前は、注文に正しい価格がありましたが、請求書にはありませんでした。 [GitHub-30853](https://github.com/magento/magento2/issues/30853)

<!-- MC-40384-->

* 日付で注文をフィルタリングすると、正確な結果が返されるようになりました。 以前は、注文日で注文をフィルタリングした場合に、00:00 UTC 以降に注文された注文がアプリケーションから返されませんでした。

<!-- MC-40030-->

* クレジット・メモ・グリッドは、次の場合に正しい通貨記号を表示するようになりました **Web サイト** スコープは、 **価格** マルチストアデプロイメントの属性。

<!-- MC-40013 ENGCOM-8781-->

* 管理者の新規注文を作成ページが再読み込みされた後、チェックアウトワークフローの「支払いと配送情報」セクションに、支払い方法のラジオボタンが表示されなくなりました。 [GitHub-32106](https://github.com/magento/magento2/issues/32106)

<!-- MC-39891-->

* アラビア語のテキストが請求書に正しく表示されるようになりました。

<!-- MC-39864-->

* PayPal Payment Pro を支払いゲートウェイとして導入する店舗の注文または請求書に基づくクレジット・メモについて、クレジット・メモ税金の一部の合計が正しく計算されるようになりました。 以前は、複数の請求書を含む受注の場合、クレジット・メモの部分請求書取消に対して、その受注の税金全体が適用されていました。

<!-- MC-39521 ENGCOM-8528-->

* 新しい注文メールを顧客に送信する際に、アプリケーションがランダムなデータベースのデッドロックを作成しなくなりました。 以前は、デッドロックは、アプリケーションが更新された SQL 列ではなく、オブジェクト全体とその関連オブジェクトを保存したために発生していました。 アプリケーションに次のタイプのエラーが表示されました： `SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction`. [GitHub-31090](https://github.com/magento/magento2/issues/31090)

<!-- MC-39353-->

* ストアフロントの注文詳細ページに、正しい出荷済製品数量が表示されるようになりました。 以前は、注文出荷ページのテンプレートがレンダリングされたため、製品数量が正しくありませんでした **出荷済数量** as a `int`. このはに変更されました `float`.

<!-- MC-39026-->

* 次の場合、アプリケーションは注文請求書のコピーを E メールで送信しなくなります **請求書の E メール コピー** ボタンはオフです。 以前は、アプリケーションは、にメールを送信していました **顧客** および **請求書 E メール コピーの送信先**. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

<!-- MC-38973-->

* 既存の顧客に対して管理者から新しい注文を作成する際に、顧客アカウントの重複する住所エントリがアプリケーションで作成されなくなりました。 この **アドレス帳に保存** チェックボックスの名前をに変更しました **アドレス帳に追加** およびは、デフォルトでは管理者でオフになっています。

<!-- MC-38834-->

* では、にアップロードされたロゴが使用されるようになりました **HTMLの印刷表示のロゴ** 買い物客がアカウントから注文を印刷する際の設定。 以前は、アプリケーションは、アップロードされたロゴの代わりに LUMA ロゴを表示していました。

<!-- MC-38625-->

* アイテム数が 20 を超えた場合、ストアフロントの注文項目のページャーが期待どおりに機能するようになりました。 以前は、ポケットベルは子製品を考慮に入れていましたが、合計数が正しくありませんでした。

<!-- MC-23915 ENGCOM-8713-->

* 受注ページおよびクレジット・メモ・ページのグリッドに、小計、出荷および処理値の正しい通貨記号が表示されるようになりました。 [GitHub-22662](https://github.com/magento/magento2/issues/22662)

<!-- ENGCOM-8486-->

* Safari を使用する管理者は、管理者から注文に製品を正常に追加できるようになりました。 以前は、管理者が「 **選択した製品を注文に追加** ボタンをクリックすると、アプリケーションに回転負荷アイコンが表示され、ページがハングしていました。 [GitHub-30265](https://github.com/magento/magento2/issues/30265)

### 販売ルール

<!-- MC-40671-->

* アプリケーションは、を使用して買い物かご価格ルールを適用するようになりました **最大数量割引の適用対象** または **割引数量ステップ（購入 X）** 買い物かごに複数の買い物かご価格ルールが適用される場合の条件が正しく設定されています。 以前は、買い物かごの価格ルールにが含まれる場合 **最大数量割引の適用対象** または **割引数量ステップ（購入 X）** が別の買い物かご価格ルールの後に適用され、割引合計が設定済みの値に減らされました **最大数量割引の適用対象** または **割引数量ステップ（購入 X）** 製品価格を乗算します。

<!-- MC-39827-->

* クーポンレポートに、分割データベースが実装されているデプロイメントのクーポンアクティビティが正確に反映されるようになりました。

<!-- MC-39477-->

* 条件カテゴリを含む買い物かご価格ルール **等しくない** は、カテゴリに割り当てられていないが、親製品が割り当てられている、設定可能な子/シンプル製品に、期待どおりに適用されるようになりました。

<!-- MC-39034-->

* GraphQL `cart` クエリは、クーポンが注文に適用された際に、買い物かごの請求手順に対する正しい総計を返すようになりました。

### 検索 {#search-heading}

<!-- MC-41138-->

* カテゴリページに、これらの重複したHTML要素 ID が含まれなくなりました。 `modes-label`, `mode-list`, `toolbar-amount`, `sorter`, `limiter`.

<!-- MC-40981-->

* 単語の部分検索結果に、予期しない一致や無関係な一致が含まれなくなり、検索でストアフロントと管理者の両方で一貫した結果が得られるようになりました。 部分単語検索では、ステマーを使用せずに別のアナライザーを使用するようになりました。 以前は、検索結果に検索キーワードが含まれない製品が表示されていました。 （デフォルトのアナライザーには、以前はステマーが含まれており、部分単語検索の検索時に同じアナライザーが使用されたので、検索結果は予期しない一致や無関係な一致を生み出す可能性があります）。

<!-- MC-40715-->

* クイック検索では、検索クエリに複数の単語が含まれ、製品名が検索不可に設定されている場合、結果を返すようになりました。 以前は、製品名が検索不可に設定されている場合、アプリケーションは、複数の単語を含む検索クエリでクエリ例外をスローしていました。

<!-- MC-40672-->

* 検索結果には、 `weight` 検索可能として設定されている場合は、期待どおりに属性を設定します。

<!-- MC-40409-->

* Elasticsearchが有効になっている空のカテゴリページを表示しても、エラーがスローされなくなりました。 代わりに、ページを期待どおりにレンダリングし、情報メッセージを表示します。 以前は、空のフルテキストインデックスでカテゴリページの例外がトリガーされていました。

<!-- MC-40376-->

* 検索フィールドのオートコンプリート機能が、買い物客が検索を開始した後に検索フィールドの外側をクリックした場合でも、期待どおりに動作するようになりました。 買い物客が入力を再開すると、オートコンプリートの候補が再び表示されるようになりました。 以前は、アプリケーションでオートコンプリート候補が表示されず、検索ボックスをクリックしても検索候補が再び表示されませんでした（ただし、他の文字を入力すると表示されていました）。

<!-- MC-34217-->

* 詳細検索で、全体または一部の SKU に基づいて製品を検索すると、予期した製品が返されるようになりました。

<!-- MC-31395-->

* 階層化されたナビゲーションフィルターで、正確な製品数が表示されるようになりました。 以前は、Elasticsearchの製品数の値がカタログ権限でフィルタリングされていませんでした。

<!-- MC-23881 ENGCOM-8618-->

* カテゴリ URL ページパラメーターがページネーションを超えても、Elasticsearchがエラーをスローしなくなりました。 [GitHub-23843](https://github.com/magento/magento2/issues/23843)

<!-- MC-24033  magento/magento2#3274-->

* にカスタムElasticsearchフィールドマッパーを追加できるようになりました `Magento\Elasticsearch\Model\Adapter\FieldMapper\Product\FieldProvider\FieldName\Resolver\CompositeResolver`. [GitHub-24350](https://github.com/magento/magento2/issues/24350)

<!-- ENGCOM-9029 MC-24026-->

* 開発者は、Elasticsearchマッピングを変更できるようになりました。 以前は、デフォルトのマッピングでElasticsearchサーバーに送信される動的テンプレートがハードコードされていたため、開発者は、カスタムモジュールに関連付けられた追加のデータをElasticsearchしてインデックスを作成できませんでした。 [GitHub-24363](https://github.com/magento/magento2/issues/24363)

<!-- ENGCOM-8464 -->

* 検索候補が無効な場合、検索フィールド（フォームミニサーチ）が期待どおりに機能するようになりました。 [GitHub-30584](https://github.com/magento/magento2/issues/30584)

### 送料

<!-- MC-41464-->

* 複数のアドレスを使用したチェックアウト中に商品を削除した後、買い物客が買い物かごページに戻ると、アプリケーションは配送価格を期待どおりに更新するようになりました。

<!-- MC-41343-->

* カート内の一部の商品が送料無料の対象となる場合、アプリケーションに正しい調整済みの送料が表示されるようになりました。 以前は、カート内の商品のサブセットが送料無料の対象として認定された場合、アプリケーションは送料を調整せず、買い物客に全額送料を表示していました。

<!-- MC-41186-->

* 特定の web サイトに制限されている管理者が、同じ web サイトで注文の出荷を作成できるようになりました。 以前は、デフォルトのストア表示に対する権限を持たない管理者が、管理者がアクセス権を持つストア表示に配置された注文を出荷しようとした場合に、アプリケーションがこの例外をスローしていました。 `Notice: Undefined offset: 1 in /app/code/Magento/Catalog/Model/Product/Attribute/Backend/GroupPrice/AbstractGroupPrice.php on line 293`.

<!-- MC-41069-->

* 注文が DHL 無料配送の条件を満たしているかどうかを判断する際に、関連する買い物かご価格ルールの割引が考慮されるようになりました。

<!-- MC-40702 ENGCOM-8728-->

* 非基本通貨で注文を行う場合、複数通貨をサポートしているストアでは、配送ラベルが注文通貨ではなく基本通貨を想定どおりに使用するようになりました。 [GitHub-31891](https://github.com/magento/magento2/issues/31891)

<!-- MC-40678 magento/magento2#31925-->

* 複数出荷ページから移動した後、買い物客がチェックアウト中に買い物かごページに戻ると、アプリケーションに正しい注文の小計が表示されるようになりました。 [GitHub-31889](https://github.com/magento/magento2/issues/31889)

<!-- MC-40541 magento/magento2#31841 -->

* 管理者による注文作成時に請求情報を編集しても、デフォルトの配送先住所と請求先住所が異なる顧客の配送先情報は変更されなくなりました。 [GitHub-31786](https://github.com/magento/magento2/issues/31786)

<!-- MC-37385 ENGCOM-8578-->

* アプリケーションは、 **コメントを追加** 買い物客がクリックしたときのチェックボックス **配送方法と料金を取得する** 管理者から注文を作成するときに発送方法を選択します。 [GitHub-30256](https://github.com/magento/magento2/issues/30256)

<!-- MC-36425-->

* 買い物客は、「戻る」ブラウザーボタンを使用して、複数の住所を持つ注文をチェックアウトするときに、「発送方法を選択」ページに戻ることができるようになりました。 以前は、アプリケーションに破損した「出荷方法の選択」ページが表示されていました。 [GitHub-30268](https://github.com/magento/magento2/issues/30268)

<!-- MC-40021 ENGCOM-8983-->

* 買い物客が複数の住所に出荷ページで数量を変更し、ブラウザーの「戻る」ボタンをクリックした後も、製品数が期待どおりに変更されないようになりました。 [GitHub-31956](https://github.com/magento/magento2/issues/31956)

<!-- ENGCOM-9096-->

* チェックアウト時に買い物かごの価格ルールが適用された場合に、定額配送方法の料金がゼロにならなくなりました。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- ENGCOM-8537-->

* マーチャントが DHL を使用して注文を発送しようとすると、アプリケーションがエラーをスローしなくなりました **配送ラベルを作成** チェックボックスが有効で、製品名に unicode 文字が含まれています。 以前は、ラベルの作成をリクエストする際に、アプリケーションで次のエラーが表示されていました。 `The response is in wrong format`. [GitHub-31032](https://github.com/magento/magento2/issues/31032)

<!-- ENGCOM-8952 -->

* 以下のマルチサイトデプロイメントで、管理者から正常に注文できます `United States` は 1 つの web サイトで有効になっており、`Disable all countries` は、他の web サイトのデフォルトの範囲として有効になっています。 以前は、アプリケーションは注文を行わず、次のエラーが表示されていました。 `Please check the shipping address information. "regionId" is required. Enter and try again`. [GitHub-30577](https://github.com/magento/magento2/issues/30577)

### ステージング

<!-- MC-39807-->

* Fastly を実装するデプロイメントで、スケジュール機能が期待どおりに動作するようになりました。 以前は、Fastly キャッシュタグが無効化されず、Fastly が古いコンテンツを引き続き提供するので、アプリケーションはブロックコンテンツを更新しませんでした。

<!-- MC-41142-->

* 複数の web サイトストア表示に割り当てられると、買い物かご価格ルールのステージングプレビューが適切な web サイトに読み込まれるようになりました。 以前は、割り当てられた web サイトに関係なく、デフォルトのストア表示に買い物かご価格ルールのステージングプレビューが読み込まれていました。

<!-- MC-40916-->

* デフォルト以外のストア表示の製品の特別価格は、予定されている更新が終了した後、期待どおりにデフォルト値に設定されるようになりました。

<!-- MC-40850  magento/partners-magento2ee#489-->

* マーチャントは、終了日を指定して将来のステージングアップデートを作成した後、ダウンロード可能な製品ページから、リンクされたサンプルを含むダウンロード可能な製品を正常に保存できるようになりました。 以前は、アプリケーションは製品を保存せず、次のメッセージが表示されていました。 `The downloadable sample isn't related to the product. Verify the link and try again`. [GitHub-488](https://github.com/magento/partners-magento2ee/issues/488)

<!-- MC-40734-->

* カテゴリのスケジュール更新のプレビュー時に、すべての製品 ID を含む大きなデータベースクエリがアプリケーションで実行されなくなりました。 代わりに、カテゴリフィルターが製品コレクションに適用されて、カテゴリのステージングプレビュー用の一時テーブルが作成されます。 以前は、アプリケーションによってすべての製品がステージングプレビュー用の一時テーブルに挿入されたため、パフォーマンスが低下していました。

<!-- MC-40714-->

* この `Magento_SalesRuleStaging` モジュールは、2.3.x からのアップグレード中にエラーをトリガーしなくなりました。

<!-- MC-40697-->

* スケジュールの更新を表示すると、カタログ・ルール条件が正しいデータで表示されるようになりました。 以前は、条件を使用して作成されたスケジュールの更新を表示した場合、条件が表示されなかったか、条件に誤ったデータが表示されていました。

<!-- MC-40604-->

* この **デフォルト値を使用** スケジュールされた更新を更新する前にオフにした後も、製品のチェックボックスはオンのままになります。

<!-- MC-40588 magento/partners-magento2ee#463-->

* 属性値が定義されていない製品に、カタログ価格ルールが期待どおりに適用されるようになりました。 以前は、カタログ価格ルールを通じて作成された割引が、未定義の属性を持つ製品に適用されていませんでした。 [GitHub-461](https://github.com/magento/partners-magento2ee/issues/461)

<!-- MC-40283-->

* 異なるタイムゾーンのストアを使用した複数の web サイトのデプロイメントで、カタログルールが期待どおりに機能するようになりました。 以前は、アプリケーションは、すべての web サイトでカタログルールを一度に適用または非アクティブ化していました。

<!-- MC-40054-->

* 特定の web サイトに対してスケジュールの更新を作成した場合に、階層の価格が削除されなくなりました。

<!-- MC-39784 magento/partners-magento2ee#475-->

* 終了日を指定して今後のステージング更新を作成した後、ダウンロード可能な製品ページから製品を保存できるようになりました。 以前は、アプリケーションは製品を保存せず、次のメッセージが表示されていました。 `The downloadable link isn't related to the product. Verify the link and try again`. [GitHub-474](https://github.com/magento/partners-magento2ee/issues/474)

### ストア

<!-- MC-40538-->

* アプリケーションでは、の文字列を処理しなくなりました `0` ストアのホームページを表示する際に空の値として使用します。 以前は、リクエストパスの開始時にアプリケーションがストア ID として整数値を扱っていたので、SEO に意図しない影響がありました。

<!-- MC-40313  magento/magento2#31970-->

* のプラグイン `\Magento\Framework\App\ActionInterface` 未満 `lib/internal/Magento/Framework/App/Action/Plugin` は、プラグインを使用して 1 つのモジュールの動作を別のモジュールからカスタマイズする必要があるというガイドラインに従うために削除されました。 [GitHub-28050](https://github.com/magento/magento2/issues/28050)

<!-- MC-24772-->

* 選択しようとすると、アプリケーションにこのメッセージが表示されるようになりました。 `Website` 次の場合のデフォルトとして `Store View` は web サイトの作成中に無効になります。 `Please enable your Store View before using this Web Site as Default`. 以前は、web サイトがクラッシュし、アプリケーションにアラートが表示されていませんでした。

### 税

<!-- MC-39571-->

* アプリケーションでは、最小注文金額の検証中に非表示の税金を考慮するようになりました。

<!-- MC-38025 ENGCOM-8612-->

* 買い物客が買い物かごに戻り、バンドル製品を買い物かごに追加した後にチェックアウトに進む際に、アプリケーションに固定製品税（FPT）が期待どおりに表示されるようになりました。 [GitHub-30250](https://github.com/magento/magento2/issues/30250)

<!-- MC-37657 magento/magento2#31850-->

* アプリケーションは、を事前入力するようになりました **VAT 番号** 管理者が既存の顧客の注文を作成する際に、保存された VAT 番号が付いた管理の新しい注文ページの住所情報セクションの請求先住所と出荷先住所の両方の入力フィールド。 [GitHub-31846](https://github.com/magento/magento2/issues/31846)

<!-- ENGCOM-8617 magento-engcom/magento2ee#558-->

* アプリケーションに「」と表示されるようになりました。 **VAT 番号** 顧客登録ページのフィールド（ `customer/create_account/vat_frontend_visibility` が有効になっています。 [GitHub-31326](https://github.com/magento/magento2/issues/31326)

### テスト

<!-- MC-41393-->

* テスト環境は Redis 6.0.12 にアップグレードされました。

<!-- ENGCOM-8529-->

* 削除済み `CacheCleaner::cleanAll();` 統合テストから。 [GitHub-31074](https://github.com/magento/magento2/issues/31074)

<!-- ENGCOM-8898-->

* このシナリオのテストを追加しました。管理者ユーザーは、顧客がキューに入れられたニュースレターを購読している際に、顧客アカウントを編集できます。 [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8484-->

* がを削除しました `cache:flush` の実行時間を短縮するためのテストからのコマンド `Catalog`, `CatalogUrlRewrite`、および `LoginAsCustomer` モジュール。 [GitHub-31056](https://github.com/magento/magento2/issues/31056)

<!-- ENGCOM-8499-->

* 冗長なパラメーターが削除され、必要に応じてPOSTがGETに変更されました。 `\Magento\Logging\Model\ProcessorTest::testLoggingProcessorLogsActionShipping`.

### テーマ

<!-- MC-41474-->

* 次の場合に、カスタマーログインページにこのメッセージが表示されなくなります **JS コードをページの下部に移動します** 設定（**ストア** > **設定** > **進む** > **開発者** > **JavaScript 設定**）と Cookie の両方が有効になっています。 `The store will not work correctly in the case when cookies are disabled`.

<!-- MC-40982-->

* ヘッダー内のアカウントリンクが WCAG 標準に従うようになりました。 以前は、ヘッダー内のアカウントリンクに重複した ID が含まれていたため、WCAG 検証が失敗していました。

<!-- MC-40278-->

* アプリケーションは、レイアウト設定よりもストアロゴ画像のストア設定を優先するようになりました。 以前は、ロゴ画像のサイズは固定されており、店舗によって異なっていませんでした。

<!-- MC-35227-->

* 標準のAdobe Commerce テーマを使用するストアフロントページで、ページ要素が一貫して表示されるようになりました。 以前は、すべてのスタイルが空白のテーマで適用されるわけではないので、このテーマを使用するページには、すべてのページ要素が表示されるわけではありません。 （例えば、「自分の注文」ページの検索フィールドに拡大鏡アイコンが表示されていませんでした）。

### 翻訳とロケール

<!-- MC-23553 ENGCOM-8839-->

* インライン翻訳が設定されている場合、文字列に追加される角括弧がエスケープされなくなりました。 以前は、 `escapeHtmlAttr` メソッドは、ブラケットをHTML図形コードに変換しました。 [GitHub-32000](https://github.com/magento/magento2/issues/32000)

<!-- ENGCOM-8694-->

* 管理者の翻訳不可能なフレーズが翻訳可能になりました。 （このプルリクエストは、すべての管理文字列をローカライズできるようにする継続的な取り組みに貢献します）。 [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8584-->

* 保存された支払い方法を管理するために使用されるテンプレート内のテキスト文字列（**マイアカウント**  >  **保存されている支払方法** ）が翻訳可能になりました。 [GitHub-31211](https://github.com/magento/magento2/issues/31211)

<!-- MC-30798 ENGCOM-8717-->

* 管理者から送信されるメールを注文する際に、管理者のアカウントに関連付けられているロケールではなく、ストアのロケールを使用するようになりました。 [GitHub-26521](https://github.com/magento/magento2/issues/26521)

### UI

<!-- MC-41784-->

* 管理者のフッターに、正しい製品バージョンが表示されるようになりました。

<!-- MC-41067-->

* ソースのページネーションが、管理者の出荷の作成時に期待どおりに表示されるようになりました。

<!-- MC-40240-->

* カスタムの日付属性を使用して製品をフィルタリングし、管理者ユーザーのロケールがの場合、製品グリッドフィルターが正しく機能するようになりました `en_GB`.

<!-- MC-39279-->

* iOS デバイスの製品ページの画像ギャラリーの拡大鏡で、ピンチトゥズームジェスチャーが期待どおりに機能するようになりました。

<!-- MC-38787-->

* 管理者の製品グリッド検索結果のページネーションが、期待どおりに各検索の 1 ページ目から開始するようになりました。

<!-- MC-38423-->

* ズーム時に買い物かごに表示される異常が解決されました。 以前は、このページがズームされたときに要素が重なって表示されていました。

<!-- MC-38235 magento/partners-magento2ee#492 -->

* 管理者招待ページ（管理者）のタブの関連付けの問題 **Marketing** > **民間販売** > **招待状**）が解決されました。 以前は、顧客が受け入れた招待のタブ表示の位置がずれていました。 [GitHub-333](https://github.com/magento/partners-magento2ee/issues/333)

<!-- MC-38226 magento/magento2#32008-->

* PayPal Express チェックアウトでのチェックアウト中に表示される注文レビューページが正常に読み込まれるようになりました。 以前は、テンプレートには未使用のが含まれていました **配信方法を更新** ボタン。ページのレンダリング中にスクリプトによって部分的にのみ非表示にされました。 [GitHub-32006](https://github.com/magento/magento2/issues/32006)

<!-- MC-37941 magento/magento2#31892-->

* 長い評価名が存在する場合、製品ページの「カスタマーレビュー」セクションの評価の星とレビューのテキストが適切なスペースに配置されるようになりました。 [GitHub-31890](https://github.com/magento/magento2/issues/31890)

<!-- MC-37688-->

* 「請求書のアーカイブ」、「出荷」および「クレジット・メモ」ページの「処理」ドロップダウン・リストに、オプションが期待どおりに表示されるようになりました。

<!-- MC-23729  magento/magento2#31549-->

* 次の場合、アプリケーションに正しい時間値が表示されるようになりました `datetime` component `timeOnly` オプションの設定 **はい**. [GitHub-23157](https://github.com/magento/magento2/issues/23157)

<!-- ENGCOM-8514 -->

* 管理者で新しいウィジェットを作成した後、レイアウトの更新を削除できるようになりました **コンテンツ** > **ウィジェット**.  [GitHub-29936](https://github.com/magento/magento2/issues/29936)

<!-- ENGCOM-8502 MC-35716-->

* この **レイアウトの更新を削除** 管理者から追加した任意のレイアウトで、ボタンが期待どおりに動作するようになりました **コンテンツ** > **ウィジェット**. 以前は、このボタンは、複数のレイアウトを追加する際に最初に選択した以外のレイアウトでは機能しませんでした。 [GitHub-30286](https://github.com/magento/magento2/issues/30286)

<!-- ENGCOM-8524 -->

* レイアウトファイルで設定されたページタイトルが、顧客アカウント編集ファイルのブラウザーページタイトルとして使用されるようになりました。 以前は、 `Magento\Customer\Controller\Account\Edit` コントローラーアクションによってページタイトルの値が強制されました： `Account Information`. [GitHub-30724](https://github.com/magento/magento2/issues/30724)

<!-- ENGCOM-8896 8826-->

* マーチャントがパスワードの表示と非表示を切り替えることができるチェックボックスが次のページに追加されました。
   * カスタマーログイン
   * 顧客登録
   * 顧客の編集（[ パスワードの変更 ] セクション）
   * 顧客が新しいパスワードを設定 [GitHub-31557](https://github.com/magento/magento2/issues/31557)

<!-- ENGCOM-8545 -->

* 属性セットを変更した後、管理者がグループ化された製品セットに製品を追加すると表示されるグリッドセルの冗長なヘッダーを削除しました。 [GitHub-30911](https://github.com/magento/magento2/issues/30911)

<!-- ENGCOM-8895 -->

* アプリケーションに「」と表示されるようになりました。 `DateRange` の「ログイン」エリアでフィルターする **顧客**  >  **ログイン** ページ。 以前は、アプリケーションによって次が表示されていました `Text` フィルター。 [GitHub-30328](https://github.com/magento/magento2/issues/30328)

<!-- ENGCOM-9009 -->

* JavaScript は、管理ページでのレンダリングの問題を減らすために、テンプレートファイルから削除され、別のファイルに移動されました。 以前は、HTMLの縮小が有効になっているデプロイメントでは、管理ページが正しくレンダリングされませんでした。 アプリケーションに次のエラーが表示されました： `An error has happened during application run. See exception log for details`. [GitHub-32454](https://github.com/magento/magento2/issues/32454)

<!-- ENGCOM-9044 -->

* この `dropdownDialog` ウィジェットは、ドラッグ可能およびサイズ変更可能なのみを読み込むようになりました。 `jquery-ui` 必要なチャンク。 以前は、不要なコードを大量に読み込んでおり、読み込み時間が長くなり、パフォーマンスが低下していました。 [GitHub-32810](https://github.com/magento/magento2/issues/32810)

### URL の書き換え

<!-- MC-41550-->

* マルチサイトデプロイメントにおける特定の web サイトの製品 URL の書き換えが、一括更新によって製品を web サイトに割り当てた後に、期待どおりに生成されるようになりました。

<!-- MC-40780 magento/magento2#32598-->

* アプリケーションは、次の場合に、子カテゴリの URL パスを正しく生成するようになりました **デフォルト値を使用** 親カテゴリに対して、URL キーのチェックボックスが有効になっています。 以前は、階層内でカテゴリを移動すると、誤った結果が返されていました `url_path` マルチストアビューのデプロイメントで異なる URL キーを使用する場合の値。 [GitHub-16202](https://github.com/magento/magento2/issues/16202)

<!-- MC-40371-->

* アプリケーションは、 `url_path` カテゴリ階層内でカテゴリを移動したときに、すべてのストア スコープに割り当てられるカテゴリ。 以前は、階層内でカテゴリを移動すると、誤った結果が返されていました `url_path`.

<!-- MC-39463-->

* カスタム URL を使用して管理者から作成された URL リダイレクトが正常に機能するようになりました。 以前は、GraphQLはGraphQLからの応答をキャッシュしていました `urlResolver` url 書き換え更新後に、をクエリして古い値を返しました。

<!-- MC-38931  magento/magento2#31106-->

* 製品が web サイトから削除される際に、製品 URL の書き換えが期待どおりに削除されるようになりました。 [GitHub-24184](https://github.com/magento/magento2/issues/24184)

<!-- ENGCOM-8719 -->

* がを追加しました `main_table` への参照 `store_id` が含まれる `addStoreFilter` の関数 `app/code/Magento/UrlRewrite/Model/ResourceModel/UrlRewriteCollection.php` コレクション。 以前は、常に問題が発生していました `join` が含まれているテーブルのコレクションに追加されます `store_id` 列。 [GitHub-31853](https://github.com/magento/magento2/issues/31853)

<!-- ENGCOM-8894 -->

* この `PUT /V1/products/:sku` REST エンドポイントで、製品 URL の書き換えが期待どおりに再生成されるようになりました。 以前は、エンドポイントは製品を再生成しました `url_key` 値を指定できますが、URL の書き換えは指定できません。 [GitHub-30316](https://github.com/magento/magento2/issues/30316)

### ユーザー

<!-- MC-40777  magento/magento2#31998-->

* 有効な新しいユーザーの役割を保存できるようになりました（管理者 **システム** > **権限** > **ユーザーの役割**）に設定し、 `Catalog` ツリー選択済み（を除外） `Edit Product Design` （ **カタログ** > **在庫** > **製品** > **製品デザインを編集**）に設定します。 以前は、この役割のユーザーが行った製品の変更がアプリケーションに保存されず、次のエラーが表示されていました： `Not allowed to edit the product's design attributes`. [GitHub-31973](https://github.com/magento/magento2/issues/31973)

<!-- MC-38442-->

* 新しい管理者向けのメールを生成する際に、アプリケーションで正しいカスタムメールテンプレートが使用されるようになりました。 以前は、アプリケーションは古いデフォルトのテンプレートを使用していましたが、管理者の姓と名は省略されていました。

<!-- MC-38122-->

* 新しいユーザーにメールを送信する際に、アプリケーションで正しいメールテンプレートが使用されるようになりました。 以前は、カスタムテンプレートが選択されている場合でも、アプリケーションはデフォルトのテンプレートを使用していました。

### VersionCMS

<!-- MC-39953-->

* これで、レイアウトを変更した後、アプリケーションは CMS ページに正しいテーマを適用するようになりました。 以前は、ページに割り当てられたテーマに関係なく、レイアウトの変更を保存した後に、割り当てられたテーマがアプリケーションによって Luma に変更されていました。

<!-- MC-40431-->

* 役割が制限された管理者は、階層ノードに割り当てられた、自身がアクセス権を持つページを正常に追加、更新、複製できるようになりました。 以前は、アプリケーションはこれらの条件下で致命的なエラーをスローしました。

### ビデオ

<!-- MC-42059 ENGCOM-9039-->

* 高度な JavaScript バンドルが有効で使用されている場合に、製品ギャラリーでビデオを期待どおりに使用できるようになりました。 [GitHub-32501](https://github.com/magento/magento2/issues/32501)

<!-- ENGCOM-8532-->

* 設定可能な商品に属するシンプルな商品のYouTube ビデオが、正常に機能するようになりました。 以前は、画像は位置ではなく ID で並べられていました。 その結果、一部のビデオは画像のように扱われました。 [GitHub-29690](https://github.com/magento/magento2/issues/29690)

### ビジュアルマーチャンダイザー

<!-- MC-40797-->

* ビジュアルマーチャンダイザーでの管理者カテゴリページの読み込みパフォーマンスが向上しました。 管理者カテゴリページを読み込む際に、大きなデータベースクエリが生成されなくなりました。

### Web API フレームワーク

<!-- MC-41758-->

* Catalog API は、新しい値を追加したり、古い値を削除したりすることで、製品のカスタムオプションの値を正しく更新するようになりました。 以前は、API は古い値を削除しませんでした。

<!-- MC-34431-->

* POST `/V1/guest-carts/:cartId/billing-address` アドレス ID を文字列ではなく整数で返すようになりました。

### Web サイトの制限

<!-- MC-38516-->

* 買い物客は、ログインを求める前にアクセスしようとしていたページにリダイレクトされるようになりました。 以前は、web サイト制限が有効で、制限モードがに設定されていたデプロイメントで **Private Sales：ログインのみ**、買い物客はストアのホームページにリダイレクトされました。

### ウィジェット

<!-- MC-39128-->

* 管理者は、ウィジェットのレイアウトの更新をすべて削除できるようになりました。 以前は、ウィジェットで複数のレイアウト更新が行われた場合、管理者は最初のレイアウト更新のみを削除できました。

<!-- MC-39107-->

* 「」をクリック **カートに追加** 製品ウィジェットのボタンをクリックしても、ページがリロードされなくなりました。 以前は、 **カートに追加** 製品ウィジェットのボタンが原因で、製品が買い物かごに追加される前に現在のページがリロードされました。

<!-- MC-23590-->

* TinyMCE の CMS 階層ノードリンクウィジェットは、 **カスタムテキストのアンカー** フィールドが空です。

### ウィッシュリスト

<!-- MC-40651 ENGCOM-8769-->

* をクリックしても、設定可能な製品の設定はリセットされません **項目を編集** ウィッシュリストからの商品のボタン。 [GitHub-32119](https://github.com/magento/magento2/issues/32119)

<!-- MC-40417-->

* ウィッシュリスト内のカスタマイズ可能なファイルオプションで製品を更新すると、アプリケーションに正しい製品価格が表示されるようになりました。 以前は、アプリケーションに間違った製品価格が表示され、アップロードされたファイルへのリンクが表示されていませんでした。

<!-- MC-39060-->

* 複数のウィッシュリストを持つ顧客のウィッシュリストの合計製品数が、ウィッシュリストの項目数と一致するようになりました。 以前は、在庫切れの製品が合計製品数に含まれていました。

<!-- MC-36779 magento/magento2#31110-->

* 注文に追加した商品を、ウィッシュリストから削除するようになりました。 [GitHub-30260](https://github.com/magento/magento2/issues/30260)

<!-- MC-34456 ENGCOM-8816-->

* 買い物客は、ウィッシュリストから買い物かごに関連商品を追加できるようになりました。 以前は、買い物客が「」をクリックしても、アプリケーションは設定可能な製品のみを追加し、設定可能な製品とその関連製品は追加されませんでした **すべて選択** 関連製品セクションのリンク。 [GitHub-32274](https://github.com/magento/magento2/issues/32274)

## 既知の問題

**問題**: _reCAPTCHA が無効な場合の JavaScript エラー_. reCAPTCHA がチェックアウトで無効になっている場合、チェックアウトは続行されますが、アプリケーションは `Uncaught TypeError` コンソールログにエラーがあります。  この問題は、後のリリースで修正される予定です。 <!-- MC-42589 42649-->

**問題**: _コンテンツセキュリティポリシーエラー_. ストアフロントのコンソールログには、次のエラーが表示されます。 `The Content-Security-Policy directive frame-ancestors does not support the source expression unsafe-inline`. ストアフロントのパフォーマンスは影響を受けません。 <!-- MC-42613-->

**問題**: _PayPal クレジットでのギフトカード金額の異常値の表示_. PayPal クレジットが有効で、複数のギフトカード金額が設定されている場合、買い物客がギフトカードの値の金額を変更しても、ストアフロントでは分割払いの金額を更新しません。 この問題の修正は、Adobe Commerce 2.4.4 およびMagento Open Source 2.4.4 に含まれます。<!-- MC-42499 AC-344-->

**問題**:  _この&#x200B;**注文に追加**ボタンが、SKU によって買い物かごに追加された製品で機能しない_.  をクリックすると、このエラーメッセージが表示されます。 **注文に追加** 注文に商品を SKU 別で追加した後のボタン： `An error has happened during application run`. 製品は買い物かごに追加されません。 **回避策**：製品の追加機能を使用します。 <!-- AC-345-->

**問題**:GraphQL `category` および `categoryList` クエリは、共有カタログ内のカテゴリを非表示にするか公開するかを決定するカテゴリ権限を無視します。 現在、ストアフロントには、共有カタログに割り当てられたか割り当て解除されたすべてのカテゴリが表示されます。 これは、B2B shared catalog が有効になっているPWAストアフロントを実装するAdobe Commerce 2.4.3 デプロイメントに影響します。 <!-- MC-42528-->

## コミュニティの投稿

より広いMagento Open Sourceコミュニティに感謝し、今回のリリースへの貢献を認めたいと思います。

コミュニティ エンジニアリング チーム [Magento投稿者](https://magento.biterg.io/app/kibana) は、貢献した上位の個人とパートナーのリストを月別、四半期別、年別に保持します。 その投稿者ページから、GitHub の結合された PR へのリンクをフォローできます。

### パートナーの投稿

次の表に、パートナー様のコントリビューションを示します。 この表は、プルリクエストを行ったパートナー、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）の一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-3-partner.md}}

### 個々のコントリビューターの投稿

次の表に、コミュニティメンバーからの投稿を示します。 この表は、外部プルリクエスト、それに関連付けられた GitHub 問題番号（利用可能な場合）、プルリクエストを行ったコミュニティメンバーの一覧です。

{{$include /help/_includes/release-notes/engcomm-2-4-3-issues.md}}

### 必要システム構成

当社の技術スタックは、PHP と MySQL をベースに構築されています。 詳しくは、を参照してください [必要システム構成](../../../installation/system-requirements.md).

### インストールとアップグレードの手順

Adobe Commerce 2.4.3 は、 [コンポーザー](../../../installation/composer.md).

## 移行ツールキット

データ移行ツールは、既存のMagento 1.x ストアデータをMagento 2.x に転送するのに役立ちます。このコマンドラインインターフェイスには、検証、進行状況のトラッキング、ログ記録、テストなどの機能が含まれています。 インストール手順については、を参照してください [データ移行ツールのインストール](../../../tools/data-migration-tool/install.md). を探索するか、に貢献することを検討します [データ移行リポジトリ](https://github.com/magento/data-migration-tool).

この [コード移行ツールキット](https://github.com/magento-commerce/code-migration) は、既存のMagento 1.x ストアの拡張機能とカスタマイズのMagento 2.x への転送に役立ちます。コマンドラインインターフェイスには、Magento 1.x のモジュールとレイアウトを変換するためのスクリプトが含まれています。
