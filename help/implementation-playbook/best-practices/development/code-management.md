---
title: コード管理のベストプラクティス
description: Adobe Commerce プロジェクトの開発段階における、コード管理のベストプラクティスについて説明します。
feature: Best Practices
role: Developer
exl-id: 0bff4c7a-1082-4b3e-b19c-bc8ad529b131
source-git-commit: 823498f041a6d12cfdedd6757499d62ac2aced3d
workflow-type: tm+mt
source-wordcount: '670'
ht-degree: 0%

---

# Adobe Commerceのコード管理のベストプラクティス

このトピックは、リリース管理、コードの複雑さ、依存関係の管理を考慮に入れながら、カスタムコードを配布する際に Git を使用するか Composer を使用するかを決定するのに役立つように設計されています。

>[!NOTE]
>
>これらのベストプラクティスは、移行および実装に最も適しています。単一モジュール開発ではそれほど適していません。

## 影響を受ける製品とバージョン

[サポートされているすべてのバージョン](../../../release/versions.md) （件中）:

- クラウドインフラストラクチャー上のAdobe Commerce
- Adobe Commerce オンプレミス

次の両方について説明します [グローバルリファレンスアーキテクチャ（GRA）](../../architecture/global-reference/overview.md) およびシングルインスタンスのインストール。

## 定義

{{$include /help/_includes/gra-definitions.md}}

## Git または Composer を使用するタイミング

<table>
<thead>
  <tr>
    <th></th>
    <th>主に Git を通じて管理されるコード</th>
    <th>主に Composer で管理されるコード</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>単一インスタンス設定にを使用する場合</td>
    <td>
      <ul>
        <li><strong>単一インスタンス設定のコードを管理するための標準的なアプローチ</strong></li>
        <li>コードベースが今後マルチブランド GRA に含まれない場合</li>
        <li>すべてのブランドが web サイトとして 1 つのインスタンスで実行される場合</li>
      </ul>
    </td>
    <td>
      <ul>
        <li>コードベースが今後マルチインスタンスセットアップに含まれる可能性がある場合、または含まれる予定の場合</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td>マルチインスタンス設定に使用する場合</td>
    <td>
      <ul>
        <li>ほぼすべてのモジュールが相互リンクされている場合（推奨しません）</li>
        <li>Composer に慣れていないチームがコードを管理している場合</li>
      </ul>
    </td>
    <td>
      <ul>
        <li><strong>マルチインスタンス設定用のコードを管理するための標準的なアプローチ</strong></li>
        <li>Adobeがコードベースをメンテナンスするとき、またはメンテナンスチームが Composer に精通しているとき</li>
      </ul>
    </td>
  </tr>
</tbody>
</table>

## 機能マトリックス

| 機能 | Git | コンポーザー |
|------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| メインコードリポジトリー | すべてのコードは、1 つまたは複数の Git リポジトリに格納されます | すべてのコードは、Composer リポジトリのパッケージに格納されます<br>各 Composer パッケージは、Git リポジトリで表されます |
| コードロケーション | 開発は次の場所で行われます `app/` directory | 開発は次の場所で行われます `vendor/` directory |
| コアアップグレード管理 | Adobe Commerce Core は、Composer を使用してインストールおよびアップグレードされ、結果は Git でコミットされます | Adobe Commerce コアは、Composer を使用してインストールおよびアップグレードされます。結果は Git にコミットされます |
| サードパーティモジュールの管理 | サードパーティ製モジュールのインストール先： `vendor/` marketplace またはpackagist.orgを通じてインストールされる場合。 それ以外の場合は、にインストールされます `app/` | すべてのサードパーティ製モジュールは、 `vendor/` directory |
| リリース | 放出は以下を特徴とする： `git merge` および `git pull` または `git checkout` コマンド | 放出は以下を特徴とする： `composer update` および `git pull` または `git checkout` コマンド |
| Git リポジトリの数 | 少ない | 多数 |
| 開発の複雑さ | シンプル | 複合 |
| プル要求の複雑さ | シンプル | 複合 |
| コードレビューの複雑さ | シンプル | シンプル |
| 開発/QA/UAT 環境の更新の複雑さ | シンプル | 複合 |
| GRA サポート | ![「はい」アイコン](../../../assets/yes.svg) | ![「はい」アイコン](../../../assets/yes.svg) |
| モジュールは外部ライブラリを自動的にインストール可能 | ![アイコンなし](../../../assets/no.svg) | ![「はい」アイコン](../../../assets/yes.svg) |
| GRA 構成の柔軟性 | ![アイコンなし](../../../assets/no.svg) | ![「はい」アイコン](../../../assets/yes.svg) |
| モジュール依存関係管理 | ![「はい」アイコン](../../../assets/yes.svg) 経由のみ `module.xml`、限られた機能 | ![「はい」アイコン](../../../assets/yes.svg) による完全な依存関係管理 `composer.json` |
| モジュールのバージョン管理 | ![「はい」アイコン](../../../assets/yes.svg) バージョンを定義できますが、特定のバージョンをインストールすることはできません | ![「はい」アイコン](../../../assets/yes.svg) フルバージョンのサポート |
| 必要な有料サービス | Git リポジトリ | Git リポジトリー、プライベートパッケージスト（年間 600 ユーロを±回） |
| Jira と Bitbucket の統合が可能 | ![「はい」アイコン](../../../assets/yes.svg) | ![「はい」アイコン](../../../assets/yes.svg) |
| コードに対する変更をインストールですぐに利用できる | ![「はい」アイコン](../../../assets/yes.svg) | ![「はい」アイコン](../../../assets/yes.svg) |

## 回避するソリューション

1. **Composer と `app/code` モジュールの場合**

   その結果、両方のコード管理スタイルの欠点をすべて組み合わせてプロジェクトを作成することになります。 これにより、不必要な複雑さ、不安定さ、柔軟性の欠如が生じます。

   例：
   - Git ワークフローと Composer ワークフローの両方（片方だけでなく）を開発チームに説明します。
   - 互換性のないモジュールのインストール `app/code` 起こるのを止める場所が何もないので。
   - からのモジュールの移動 `app/code` composer の場合（またはその逆の場合）は、特に開発中は面倒です。

1. **パッケージマネージャーを保存**

   Private Packagist は年間±600 ユーロです。 このコストは、ブランドごとではなく、GRA 全体を組み合わせたものです。 無料のソリューション Satis を使用して、これらのコストを回避しようとしないでください。 コミットを Git にプッシュするたびに、Satis がパッケージを自動的に更新することはありません。 また、Satis には組み込みの認証がありません。 Satis を実行するには、Web サーバーを管理する必要があります。 あなたは Satis を維持するプライベートパッケージストのサブスクリプション料金の多くを費やすことになります。

1. **Git から開始し、Composer に移動する**

   プロジェクトの開始時に、コード管理アプローチを選択します。 Git から Composer への切り替え、またはその逆の切り替えでは、開発が進行中の場合、コードが失われたり、リビジョン履歴が失われたりする可能性があります。
