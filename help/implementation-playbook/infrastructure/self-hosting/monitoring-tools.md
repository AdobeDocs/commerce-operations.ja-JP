---
title: 自己ホスト型のAdobe Commerce監視ツール
description: 自己ホスト型の監視ツールのアイデアと概念、および考慮すべきベストプラクティスについて説明します。
landing-page-description: Adobe Commerceを独自にホストする際に考慮すべき監視ツールの概念と事項について説明します。
short-description: Adobe Commerceを自分でホストするための戦略と監視ツールの概念について説明します。
kt: 11420
doc-type: tutorial
audience: all
last-substantial-update: 2023-04-13T00:00:00Z
exl-id: 728e9439-63d0-4481-b014-7ba2ce97b9d0
feature: Install, Logs, Observability
source-git-commit: 94d7a57dcd006251e8eefbdb4ec3a5e140bf43f9
workflow-type: tm+mt
source-wordcount: '1716'
ht-degree: 0%

---

# 自己ホスト型のAdobe Commerce Monitoring テレメトリとツール

監視ツールを使用すると、誰かに何もかものを見てもらう必要なく、変更を検出する機会が得られます。 ほとんどのツールでは、ハードドライブの容量不足など、しきい値を満たした場合にアラートや通知を追加できます。 一部のツールでは、負荷テストの結果など、追跡および計算する必要がある出力が提供されます。 ツールに関係なく、すべてのツールには目的があり、一貫して使用すると、アプリケーションの管理に役立ちます。 すべてのツールに無料のオプションがありますが、多くの場合、サービスに対する支払いを覚えておくと、より迅速に信頼性の高いサポートを保証し、投資の価値がある可能性があります。 New Relicは、より多くの電力と機能を解放する無料利用枠と有料版を提供するツールの例です。 DataDog や Dynatrace など、他にも存在します。 適切なオプションを見つけ、一貫して使用してください。

## インフラストラクチャの監視

この文脈では、インフラストラクチャという用語は大まかに使用されています。 このトピックでは、サイトを動作させるために使用される任意のサーバー、プロセス、またはデバイスを意味します。 例：

* ハードドライブ
* CPU 使用率
* RAM 使用量
* レディス
* サーバーあたりの平均負荷
* ネットワークトラフィック

効果的なアラートを構築するためのしきい値を調べます。 ハードドライブの容量など、重要な項目に割り当てないでください。 状況が悪くなると、異なるグループに通知するをいくつか設定します。 例えば、次に示すルールは、ハードドライブが満杯になったときに使用されます。

* 70%のSlack通知を DevOps チャネルに送信
* 80% DevOps チャネルと DevOps チームメイトのメール配布リストをSlackルームに通知
* 90%SlackDevOps チャネルと本番サポートSlackチャネル、DevOps 配布グループ、エンジニアリングマネージャーにメールを送信
* 95 %SlackDevOps と本番サポートSlackチャネル、エンジニア全員のメール配信リスト、エンジニアリング担当のDirectorに通知
* 98 % P1Slack・チャネル、DevOps および本番サポートSlack・チャネル、エンジニアおよびDirectorのエンジニアおよび技術担当の VP に通知

チームに通知する方法は多数あるので、信頼でき、多くのアラートが殺到しないものを選択するようにしてください。 アラートが重要な場合は、アラートを予約することが重要です。そうしないと、アラートが圧倒されて無視され始めるリスクが発生します。

New Relic、DataDog、Dynatrace など、ほとんどのツールで従うべき適切なテンプレートが存在することがよくあります。 アプリケーションに最適な良いアイデアを見つけるのに時間をかけます。 クラウドインフラストラクチャ上のAdobe Commerceでは、プロジェクトがプロビジョニングされる際にアラートとトリガーが設定されます。 これにより、Adobeの本番サポートチームは、アップタイムと高可用性監視のためのツールを適用できます。

ダッシュボードを使用すると、サイトの頻繁な要素や重要な要素にすばやくアクセスできます。 ダッシュボードの項目は、過去数日間のページビュー数、ホストごとの CPU 使用率、すべてのサーバーのリスト、ページ読み込み時間、トランザクション期間、合成的な監視テストの結果で構成することもできます。 これらのダッシュボードは、何か問題が発生した場合や、異なるユーザーエクスペリエンス用に設定された異なるダッシュボードを迅速にトリアージできるように作成する必要があります。 いくつかのダッシュボードを設計し、リアルタイムでのアプリケーション監視を楽しむことができれば幸いです。 特に、プロジェクトの所有者や管理者からサイトの運営状況を尋ねられた場合、非常に満足しており、時間ではなく、秒数で答えを見つけることができます。

## ログの集計とローテーション

ログファイルは、要求または MySQL ログを処理するアプリケーションサーバー上で、実行に時間がかかりすぎる場合に検出されます。 ログの難しい点は、ログが互いに分離されていて、それらをすべて見つけ出し、各ログの情報を解析するのが面倒な場合がある点です。 この問題は、何年も前に、 _ログの集計_. これにより、すべてのログの場所からログファイルが一元的な場所にプッシュされます。 移動後、ソフトウェアの一部がそれらを読み取り、情報の検索、フィルタリング、レビューを行う方法を提供できます。 これは正しく行うのに難しいプロセスです。 多くのオプションがありますが、運の良い場合は、監視ツールでログファイルを読み取り、集計できます (New Relicなど )。 良いツールを見つけることで、将来の計り知れない時間を節約できます。 サイトを実行および動作させるためのすべての処理を行う 1 台のサーバーを持たない限り、ログ集計が不可欠です。 これは、DDoS 攻撃下にあるか、正当なトラフィックスパイクが発生しているかを調べる場合や、特定のリクエストが失敗する理由を調べる場合に特に役立ちます。

ログのもう 1 つの重要な要素は、ローテーションが確実におこなわれるようにすることです。 これは、従来、 `run-away logs` 誤って HDD がいっぱいになってサイトがダウンする可能性があります。 ログのローテーションは、1 GB などの特定のサイズにログファイルが達した場合に発生する可能性があります。 次のようなサーバーレベルのツールがあります。 `logrotate` を使用すると、自動的に削除できます。 例えば、1GB を超えた大きすぎるログファイルを削除したり、90 日を超えたログファイルを削除したりできます。 ログポリシーを定義するので、リソースの制限を理解することが重要です。

## マルウェアスキャン

Adobe Commerce専用の Web サイトホスティング会社の多くは、既知の弱点やマルウェアのライブラリを持っています。 スキャンは、自動または要求に応じて提供する必要があります。 これらが有効な場合、それらは反動的であり、新しいマルウェアが検出された場合にのみ機能します。 コードとデータベースを調べて既知のマルウェアを探すことができる事前のツールを用意しておくとよいでしょう。 次のようないくつかのオプションを使用できます。 [MageReport](https://www.magereport.com){target="_blank"}, [Sansec](https://sansec.io){target="_blank"}, or [Magento Malware Scanner](https://github.com/gwillem/magento-malware-scanner){target="_blank"}. 外部からリモートスキャンを行うか、サーバーに設定した後にプロアクティブに更新/スキャン/モニタを行うことができます。 これらは、Sansec などの提供されたソリューションを選択した場合に、数千のサイトがインストールされ、監視されるので、常に更新されているため、優れたオプションになります。 新しいマルウェアが検出されると、その情報からのメリットを監視するすべてのプロジェクトが検出された場合に警告が表示されるようになります。

いくつかの無料バージョンを考慮する必要がありますが、マルウェアの場合は、実際に有料ソリューションを検討する必要があります。 これは、数分間感染したサイトと数ヶ月間のサイトの違いの可能性があります。 サイトでの悪用が大きな頭痛の原因となるので、サービス料の支払いを検討する必要がある領域の 1 つです。

## Adobeサイト全体分析ツール

サイト全体分析ツールは、Adobe Commerceインストールのセキュリティと操作性を確保するための詳細なシステムインサイトと推奨事項を含む、プロアクティブなセルフサービスツールおよび中央リポジトリです。 リアルタイムで24/7るパフォーマンスの監視、レポート、アドバイスを提供し、潜在的な問題を特定し、サイトの正常性、安全性、およびアプリケーション設定をより適切に表示できるようにします。 解決時間を短縮し、サイトの安定性とパフォーマンスを向上させます。

サイト全体分析ツールのRecommendationsページには、サイトで検出された問題に対処するためのベストプラクティスに基づくレコメンデーションが一覧表示されます。 レコメンデーションは、優先順位 PO から P4 の順に並べ替えられます。ここで、PO は重要で、P4 は低いです。 結果には、説明、推奨事項、サイトへの影響、根本原因、シナリオ/前提条件、期待される結果、使用するツールが含まれます。

サイトのパフォーマンスを向上させるためのベストプラクティスについて説明します。 優先度に従ってリストされたレコメンデーションを追跡し、実装します。

プロジェクトにこれをインストールする方法の詳細については、 [サイト全体分析ツールインストールガイド](https://experienceleague.adobe.com/docs/commerce-operations/tools/site-wide-analysis-tool/installation.html){target="_blank"}.

## SSL 監視

プロジェクトで忘れられた項目の 1 つに、SSL 証明書があります。 1 年に 1 回しか注意が必要ないので、忘れるのはとても簡単です。 セキュリティ証明書が期限切れになると、最新のブラウザーでは、サイトにページを表示することを警告または拒否する可能性があります。 お客様は、このような問題が発生した場合に、メールの送信を開始したり、サポートに電話をかけたりする可能性があります。問題が解決するまで、操作できない場合があります。 毎分カウントされるので、有効期限が事前に認識され、サイトの稼働を維持するためには、更新が最も重要なことを確認する必要があります。 SSL 監視を実行するには、様々な方法があります。 Pingdom、Keychest、Sucuri などの無料または低コストのツールを使用し、SSL 証明書の有効期限に関するアラートを提供するサービスを購読する場合も、サイトに合成監視ツールを使用することを検討します。 これらのシンプルなツールを使用すると、サイト証明書が確実に有効になり、顧客のダウンタイムのリスクを軽減できます。

## 自動テスト

機能テストや単体テストなどの自動テストを実行すると、新しく導入されたコードから問題を検出するのに役立ちます。 Adobe Commerceと単体テストは通常 50%未満の範囲なので、これらのテストでは、すべてを取り込むことはできません。 書き込みやテストを避ける必要があるわけではありません。 これらのツールは、コミットされるすべてが標準搭載のテストや開発チームが作成するカスタムテストに悪影響を与えない、安全とセキュリティの別の層を追加するためのものです。 各デプロイメントでこれらのテストを実行すると、主な問題が早期に発生し、実稼動環境に移行できなくなります。

負荷テストを適切に実行するには困難な場合があります。 複雑さの多くは、フロントエンドの使用と実装の方法に起因します。 サイトにヘッドレスフロントエンドがある場合は、GraphQL API と REST API を読み込むことができます。 ロードテストの結果は、お客様と DevOps チームに委ねられます。 各読み込みテストが可能な限り早く実行され、プロジェクトのステータスに関するインサイトが得られることを確認します。 また、将来のテストで、負荷テストの結果に大幅な変更があるかどうかを確認するためのベンチマークも提供されます。 その場合は、最新のコード変更を確認し、パフォーマンスに影響を与えるセクションを探して改善することをお勧めします。

Adobe Commerceは、単体テストの実行方法を理解するのに役立つ優れたガイダンスを持っています。詳しくは、 [PHP の単体テスト](https://developer.adobe.com/commerce/testing/guide/unit/){target="_blank"} 内 _アプリケーションテストガイド_ ( Adobe Developerドキュメントサイト )

機能テストの詳細については、 [機能テストフレームワークの概要](https://developer.adobe.com/commerce/testing/functional-testing-framework/){target="_blank"}.


{{$include /help/_includes/hosting-related-links.md}}
