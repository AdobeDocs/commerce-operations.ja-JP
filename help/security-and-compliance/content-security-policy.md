---
title: コンテンツセキュリティポリシーの概要
description: コンテンツセキュリティポリシーを使用して、Adobe CommerceまたはMagento Open Sourceストアのセキュリティ姿勢を改善する方法を説明します。
source-git-commit: 1a608e8a5986026d5a187dc8cbd358fed2db5d9e
workflow-type: tm+mt
source-wordcount: '429'
ht-degree: 0%

---


# コンテンツセキュリティポリシーの概要

コンテンツセキュリティポリシー (CSP) は、クロスサイトスクリプティング (XSS) および関連するデータインジェクション攻撃の検出と軽減を支援し、Adobe CommerceおよびMagento Open Sourceでのインストールに対する防御の層をさらに提供できます。 この一般的な攻撃ベクトルは、誤って Web サイトから派生したと主張する悪意のあるコンテンツをインジェクトすることで機能します。 悪意のあるコンテンツが読み込まれて実行されると、データの不正な転送を開始する可能性があります。

CSP は、信頼できるコンテンツリソースとブロックするコンテンツリソースをブラウザーに伝える、標準化されたディレクティブのセットを提供します。 慎重に定義されたポリシーを使用すると、CSP はブラウザーコンテンツを制限して、ホワイトリストに登録されたリソースのみを表示できるようにします。

## 設定

サイト操作の妨げを避けるために、CSP は段階的に実装できます。 CSP には次の 2 つの基本的な操作モードがあります。 `report-only mode` および `restrict mode`. Adobe Commerce 2.3.5 のリリースは、実装の第 1 段階に当たり、で CSP を利用できるようにします。 `report-only mode` デフォルトでは。 今後のリリースでは、 `restrict mode` は、デフォルトで追加の標準保護に対して有効になっています。

**レポートのみのモード**:ブラウザは、ポリシー違反を報告するが、強制的に報告しないように指示されます。 リクエストされたリソースが CSP に違反するたびに、ブラウザーは結果のエラーをコンソールに記録します。 次に、コンソールログを使用して、各違反の原因を調査できます。

発生したすべての CSP エラーを確認し、必要なリソースがすべてホワイトリストに登録されるまでポリシーを調整することが重要です。 ～に切り替えても安全です。 `restrict mode` これ以上エラーが発生しない場合は、 そうしないと、CSP の設定が不適切であると、ブラウザーに空白のページが表示され、多数のコンソールエラーが発生する可能性があります。 適切に設定された CSP を使用すると、パフォーマンスに影響を与えることなく、ホワイトリストに登録されたコンテンツを配信できます。

**制限モード**:ブラウザーは、すべてのコンテンツポリシーを適用し、公開をホワイトリストに登録されたリソースに制限するように指示されます。 CSP は管理者ではなくサーバーから設定されるので、ほとんどのマーチャントはシステムインテグレーターや開発者の支援を得て適切に設定する必要があります。 詳しくは、 [コンテンツセキュリティポリシー](https://developer.adobe.com/commerce/php/development/security/content-security-policies/) 内 _Commerce PHP 拡張_ 開発者ガイド。

## レポート

デフォルトでは、CSP はエラーをブラウザーコンソールに送信しますが、HTTP リクエストでエラーログを収集するように設定することもできます。 さらに、CSP 違反の監視、収集、およびレポートに使用できるサードパーティのサービスがいくつかあります。

[レポート URI](https://report-uri.io/) は、CSP 違反を監視し、結果をダッシュボードに表示するサービスです。 マーチャントと開発者は両方とも、このサービスを使用して、CSP 違反が発生した場合に常にレポートを受け取ることができます。
